<!DOCTYPE html>
<html>
  <head>
<script>window.NREUM||(NREUM={});NREUM.info={"beacon":"bam-cell.nr-data.net","errorBeacon":"bam-cell.nr-data.net","licenseKey":"98ebaa2fbd","applicationID":"233526624","transactionName":"c11aERNaXltSERdDR19YUQYVGltZUwZA","queueTime":1,"applicationTime":550,"agent":""}</script>
<script>(window.NREUM||(NREUM={})).loader_config={licenseKey:"98ebaa2fbd",applicationID:"233526624"};window.NREUM||(NREUM={}),__nr_require=function(e,t,n){function r(n){if(!t[n]){var i=t[n]={exports:{}};e[n][0].call(i.exports,function(t){var i=e[n][1][t];return r(i||t)},i,i.exports)}return t[n].exports}if("function"==typeof __nr_require)return __nr_require;for(var i=0;i<n.length;i++)r(n[i]);return r}({1:[function(e,t,n){function r(){}function i(e,t,n){return function(){return o(e,[u.now()].concat(c(arguments)),t?null:this,n),t?void 0:this}}var o=e("handle"),a=e(6),c=e(7),f=e("ee").get("tracer"),u=e("loader"),s=NREUM;"undefined"==typeof window.newrelic&&(newrelic=s);var d=["setPageViewName","setCustomAttribute","setErrorHandler","finished","addToTrace","inlineHit","addRelease"],p="api-",l=p+"ixn-";a(d,function(e,t){s[t]=i(p+t,!0,"api")}),s.addPageAction=i(p+"addPageAction",!0),s.setCurrentRouteName=i(p+"routeName",!0),t.exports=newrelic,s.interaction=function(){return(new r).get()};var m=r.prototype={createTracer:function(e,t){var n={},r=this,i="function"==typeof t;return o(l+"tracer",[u.now(),e,n],r),function(){if(f.emit((i?"":"no-")+"fn-start",[u.now(),r,i],n),i)try{return t.apply(this,arguments)}catch(e){throw f.emit("fn-err",[arguments,this,e],n),e}finally{f.emit("fn-end",[u.now()],n)}}}};a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","),function(e,t){m[t]=i(l+t)}),newrelic.noticeError=function(e,t){"string"==typeof e&&(e=new Error(e)),o("err",[e,u.now(),!1,t])}},{}],2:[function(e,t,n){function r(){return c.exists&&performance.now?Math.round(performance.now()):(o=Math.max((new Date).getTime(),o))-a}function i(){return o}var o=(new Date).getTime(),a=o,c=e(8);t.exports=r,t.exports.offset=a,t.exports.getLastTimestamp=i},{}],3:[function(e,t,n){function r(e,t){var n=e.getEntries();n.forEach(function(e){"first-paint"===e.name?d("timing",["fp",Math.floor(e.startTime)]):"first-contentful-paint"===e.name&&d("timing",["fcp",Math.floor(e.startTime)])})}function i(e,t){var n=e.getEntries();n.length>0&&d("lcp",[n[n.length-1]])}function o(e){e.getEntries().forEach(function(e){e.hadRecentInput||d("cls",[e])})}function a(e){if(e instanceof m&&!g){var t=Math.round(e.timeStamp),n={type:e.type};t<=p.now()?n.fid=p.now()-t:t>p.offset&&t<=Date.now()?(t-=p.offset,n.fid=p.now()-t):t=p.now(),g=!0,d("timing",["fi",t,n])}}function c(e){d("pageHide",[p.now(),e])}if(!("init"in NREUM&&"page_view_timing"in NREUM.init&&"enabled"in NREUM.init.page_view_timing&&NREUM.init.page_view_timing.enabled===!1)){var f,u,s,d=e("handle"),p=e("loader"),l=e(5),m=NREUM.o.EV;if("PerformanceObserver"in window&&"function"==typeof window.PerformanceObserver){f=new PerformanceObserver(r);try{f.observe({entryTypes:["paint"]})}catch(v){}u=new PerformanceObserver(i);try{u.observe({entryTypes:["largest-contentful-paint"]})}catch(v){}s=new PerformanceObserver(o);try{s.observe({type:"layout-shift",buffered:!0})}catch(v){}}if("addEventListener"in document){var g=!1,w=["click","keydown","mousedown","pointerdown","touchstart"];w.forEach(function(e){document.addEventListener(e,a,!1)})}l(c)}},{}],4:[function(e,t,n){function r(e,t){if(!i)return!1;if(e!==i)return!1;if(!t)return!0;if(!o)return!1;for(var n=o.split("."),r=t.split("."),a=0;a<r.length;a++)if(r[a]!==n[a])return!1;return!0}var i=null,o=null,a=/Version\/(\S+)\s+Safari/;if(navigator.userAgent){var c=navigator.userAgent,f=c.match(a);f&&c.indexOf("Chrome")===-1&&c.indexOf("Chromium")===-1&&(i="Safari",o=f[1])}t.exports={agent:i,version:o,match:r}},{}],5:[function(e,t,n){function r(e){function t(){e(a&&document[a]?document[a]:document[i]?"hidden":"visible")}"addEventListener"in document&&o&&document.addEventListener(o,t,!1)}t.exports=r;var i,o,a;"undefined"!=typeof document.hidden?(i="hidden",o="visibilitychange",a="visibilityState"):"undefined"!=typeof document.msHidden?(i="msHidden",o="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(i="webkitHidden",o="webkitvisibilitychange",a="webkitVisibilityState")},{}],6:[function(e,t,n){function r(e,t){var n=[],r="",o=0;for(r in e)i.call(e,r)&&(n[o]=t(r,e[r]),o+=1);return n}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],7:[function(e,t,n){function r(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(i<0?0:i);++r<i;)o[r]=e[t+r];return o}t.exports=r},{}],8:[function(e,t,n){t.exports={exists:"undefined"!=typeof window.performance&&window.performance.timing&&"undefined"!=typeof window.performance.timing.navigationStart}},{}],ee:[function(e,t,n){function r(){}function i(e){function t(e){return e&&e instanceof r?e:e?u(e,f,a):a()}function n(n,r,i,o,a){if(a!==!1&&(a=!0),!l.aborted||o){e&&a&&e(n,r,i);for(var c=t(i),f=v(n),u=f.length,s=0;s<u;s++)f[s].apply(c,r);var p=d[h[n]];return p&&p.push([b,n,r,c]),c}}function o(e,t){y[e]=v(e).concat(t)}function m(e,t){var n=y[e];if(n)for(var r=0;r<n.length;r++)n[r]===t&&n.splice(r,1)}function v(e){return y[e]||[]}function g(e){return p[e]=p[e]||i(n)}function w(e,t){s(e,function(e,n){t=t||"feature",h[n]=t,t in d||(d[t]=[])})}var y={},h={},b={on:o,addEventListener:o,removeEventListener:m,emit:n,get:g,listeners:v,context:t,buffer:w,abort:c,aborted:!1};return b}function o(e){return u(e,f,a)}function a(){return new r}function c(){(d.api||d.feature)&&(l.aborted=!0,d=l.backlog={})}var f="nr@context",u=e("gos"),s=e(6),d={},p={},l=t.exports=i();t.exports.getOrSetContext=o,l.backlog=d},{}],gos:[function(e,t,n){function r(e,t,n){if(i.call(e,t))return e[t];var r=n();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!1}),r}catch(o){}return e[t]=r,r}var i=Object.prototype.hasOwnProperty;t.exports=r},{}],handle:[function(e,t,n){function r(e,t,n,r){i.buffer([e],r),i.emit(e,t,n)}var i=e("ee").get("handle");t.exports=r,r.ee=i},{}],id:[function(e,t,n){function r(e){var t=typeof e;return!e||"object"!==t&&"function"!==t?-1:e===window?0:a(e,o,function(){return i++})}var i=1,o="nr@id",a=e("gos");t.exports=r},{}],loader:[function(e,t,n){function r(){if(!x++){var e=b.info=NREUM.info,t=p.getElementsByTagName("script")[0];if(setTimeout(u.abort,3e4),!(e&&e.licenseKey&&e.applicationID&&t))return u.abort();f(y,function(t,n){e[t]||(e[t]=n)});var n=a();c("mark",["onload",n+b.offset],null,"api"),c("timing",["load",n]);var r=p.createElement("script");r.src="https://"+e.agent,t.parentNode.insertBefore(r,t)}}function i(){"complete"===p.readyState&&o()}function o(){c("mark",["domContent",a()+b.offset],null,"api")}var a=e(2),c=e("handle"),f=e(6),u=e("ee"),s=e(4),d=window,p=d.document,l="addEventListener",m="attachEvent",v=d.XMLHttpRequest,g=v&&v.prototype;NREUM.o={ST:setTimeout,SI:d.setImmediate,CT:clearTimeout,XHR:v,REQ:d.Request,EV:d.Event,PR:d.Promise,MO:d.MutationObserver};var w=""+location,y={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-1194.min.js"},h=v&&g&&g[l]&&!/CriOS/.test(navigator.userAgent),b=t.exports={offset:a.getLastTimestamp(),now:a,origin:w,features:{},xhrWrappable:h,userAgent:s};e(1),e(3),p[l]?(p[l]("DOMContentLoaded",o,!1),d[l]("load",r,!1)):(p[m]("onreadystatechange",i),d[m]("onload",r)),c("mark",["firstbyte",a.getLastTimestamp()],null,"api");var x=0},{}],"wrap-function":[function(e,t,n){function r(e,t){function n(t,n,r,f,u){function nrWrapper(){var o,a,s,p;try{a=this,o=d(arguments),s="function"==typeof r?r(o,a):r||{}}catch(l){i([l,"",[o,a,f],s],e)}c(n+"start",[o,a,f],s,u);try{return p=t.apply(a,o)}catch(m){throw c(n+"err",[o,a,m],s,u),m}finally{c(n+"end",[o,a,p],s,u)}}return a(t)?t:(n||(n=""),nrWrapper[p]=t,o(t,nrWrapper,e),nrWrapper)}function r(e,t,r,i,o){r||(r="");var c,f,u,s="-"===r.charAt(0);for(u=0;u<t.length;u++)f=t[u],c=e[f],a(c)||(e[f]=n(c,s?f+r:r,i,f,o))}function c(n,r,o,a){if(!m||t){var c=m;m=!0;try{e.emit(n,r,o,t,a)}catch(f){i([f,n,r,o],e)}m=c}}return e||(e=s),n.inPlace=r,n.flag=p,n}function i(e,t){t||(t=s);try{t.emit("internal-error",e)}catch(n){}}function o(e,t,n){if(Object.defineProperty&&Object.keys)try{var r=Object.keys(e);return r.forEach(function(n){Object.defineProperty(t,n,{get:function(){return e[n]},set:function(t){return e[n]=t,t}})}),t}catch(o){i([o],n)}for(var a in e)l.call(e,a)&&(t[a]=e[a]);return t}function a(e){return!(e&&e instanceof Function&&e.apply&&!e[p])}function c(e,t){var n=t(e);return n[p]=e,o(e,n,s),n}function f(e,t,n){var r=e[t];e[t]=c(r,n)}function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;++n)t[n]=arguments[n];return t}var s=e("ee"),d=e(7),p="nr@original",l=Object.prototype.hasOwnProperty,m=!1;t.exports=r,t.exports.wrapFunction=c,t.exports.wrapInPlace=f,t.exports.argsToArray=u},{}]},{},["loader"]);</script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-6242674-23"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-6242674-23', { 'optimize_id': 'GTM-T48MRN9'});
    </script>

    <title>Language Ext</title>
<meta name="description" content="C# functional language extensions - a base class library for functional programming">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://awesomeopensource.com/project/louthy/language-ext">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>

      /* copy template below */
      /* ------------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */


      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {

      }

      /* end template copy */
      /* ----------------- */
      /* ----------------- */
      /* ----------------- */

      /*ipad and below */
      .show_on_phones {
        display: block;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .show_on_phones {
          display: none;
        }
      }

      .twenty_px_padding_top {
        padding-top: 20px;
      }

      /*ipad and below */
      .projects_category_explorer_left_column {
        max-width: 0;
        margin-right: 0;
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_category_explorer_left_column {
          min-width: 20%;
          margin-right: 5%;
          display: block;
        }
      }

      /*ipad and below */
      .projects_list_right_column {
        min-width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_right_column {
          min-width: 75%;
        }
      }

      .display_flex {
        display: flex;
      }

      .margin_bottom_15 {
        margin-bottom: 15px;
      }

      /*ipad and below */
      .image-gallery-image {
        width: 100% !important;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .image-gallery-image {
          width: 1280px !important;
        }
      }

      /*ipad and below */
      .aos_sponsorship_link {
        font-size: 14px;
        font-weight: bold;
        color: blue;
        text-decoration: underline;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_sponsorship_link {
          font-size: 18px;
          font-weight: bold;
          color: blue;
          text-decoration: underline;
        }
      }

      /*ipad and below */
      .aos_desktop_right_ads_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_desktop_right_ads_container {
          display: block;
        }
      }

      /*ipad and below */
      .aos_project_screen_container {
        margin-left: 5%;
        margin-right: 5%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_screen_container {
          margin-left: 5%;
          margin-right: 0;
          display: flex;
        }
      }

      /*ipad and below */
      .aos_project_inner_screen_container {
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_inner_screen_container {
          width: 95%;
        }
      }

      /*ipad and below
      .aos_license_text_metadata {
        margin-top: 0 !important;
      }

      everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_license_text_metadata {
          margin-top: 0 !important;
        }
      }*/

      /*ipad and below */
      .projects_list_ad_slot_1 {
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_1 {
          height: fit-content;
        }
      }

      /*ipad and below */
      .projects_list_ad_slot_2 {
        height: fit-content;
        margin-top: -34px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .projects_list_ad_slot_2 {
          height: fit-content;
          margin-top: 0;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_1 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_1 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .project_page_ad_slot_2 {
        display: block;
        height: fit-content;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .project_page_ad_slot_2 {
          display: block;
          height: fit-content;
        }
      }

      /*ipad and below */
      .aos_category_explorer_category_container {
        background-color: white;
        padding: 10px;
        margin-bottom: 0px;
        border-bottom: 1px solid lightgray;
        border-left: 1px solid lightgray;
        border-right: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_category_explorer_category_container {
          background-color: white;
          padding: 10px;
          margin-bottom: 0px;
          border-bottom: 1px solid lightgray;
          border-left: 1px solid lightgray;
          border-right: 1px solid lightgray;
        }
      }

      .aos_category_explorer_category_container:first-child {
        border-top: 1px solid lightgray;
      }

      /*ipad and below */
      .aos_topic_count {
        font-size: 10px;
        color: #4f4f4f;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_count {
          font-size: 16px;
          color: #4f4f4f;
        }
      }

      /*ipad and below */
      .aos_topic_icon {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topic_icon {
          font-size: 14px;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_project_count {
        color: #4f4f4f;
        font-size: 14px;
        font-weight: bold;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_count {
          font-size: 14px;
          font-weight: bold;
        }
      }

      /*ipad and below */
      .aos_project_star {
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_star {
          font-size: 14px;
          /*margin-right: 7px;*/
        }
      }

      /*ipad and below */
      .aos_project_metadata_trademark_notice {
        font-size: 8px;
        color: gray;
        margin-top: 10px;
        border-bottom: 1px solid lightgray;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_trademark_notice {
          font-size: 12px;
          color: gray;
          margin-top: 20px;
          border-bottom: 1px solid lightgray;
        }
      }

      /*ipad and below */
      .aos_project_metadata_description {
        margin-bottom: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_description {
          margin-bottom: 5px;
        }
      }

      .aos_project_metadata {
        display: inline-block;
        margin-bottom: 10px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata {
          display: inline-block;
          margin-bottom: 10px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_metadata_content {
        /*border-bottom: 1px solid lightgray;*/
        font-size: 16px;
        color: #000000;
        font-weight: 300;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_content {
          /*border-bottom: 1px solid lightgray;*/
          font-size: 16px;
          color: #000000;
          font-weight: 300;
        }
      }

      /*ipad and below */
      .aos_project_metadata_header {
        color: #808080;
        margin-bottom: 10px;
        margin-top: 10px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_header {
          color: #808080;
          margin-bottom: 10px;
          margin-top: 10px;
          font-size: 16px;
        }
      }

      aos_project_metadata_header:hover {
        color: #808080;
      }

      /*ipad and below */
      .aos_project_metadata_title {
        font-size: 20px;
        margin-bottom: 5px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_metadata_title {
          font-size: 30px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_app_container {
        display: flex;
        flex-direction: row;
        width: 100%;
        margin-bottom: 2px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_app_container {
          display: flex;
          flex-direction: row;
          width: 100%;
          margin-bottom: 0;
        }
      }

      @media screen and (min-width: 1025px) {
        .aos_desktop_ad_spacer {
          margin-top: 5px;
          margin-bottom: 5px;
        }
      }

      /*ipad and below */
      .aos_show_ad_on_mobile {
        display: none;
      }

      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_mobile {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1025px) {
        .aos_show_ad_on_desktop {
          /*display: inline-block;*/
          display: block; /*adsense recommended*/
        }
      }

      /*ipad and below */
      @media screen and (max-width: 1024px) {
        .aos_show_ad_on_desktop {
          display: none;
        }
      }

      /*ipad and below */
      .aos_filter_topics_input {
        font-size: 16px;
        padding: 10px;
        border: 1px solid lightgray;
        background-color: white;
        border-radius: 10px;
        box-shadow: 1px 1px 5px lightgrey;
        margin-bottom: 20px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_filter_topics_input {
          font-size: 20px;
          padding: 10px;
          border: 1px solid lightgray;
          background-color: white;
          border-radius: 10px;
          box-shadow: 1px 1px 5px lightgrey;
          margin-bottom: 20px;
        }
      }

      /* ipad and below */
      .aos_topics_project {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        padding: 0;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_project {
          font-family: helvetica, arial, sans-serif;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          width: 100%;
        }
      }

      /* ipad and below
      .aos_topics_sidebar {
        font-family: helvetica, arial, sans-serif;
        font-size: 12px;
        margin-left: 2%;
        margin-right: 2%;
        width: 94%;
        padding: 0;
        display: flex;
        flex-direction: column;
      }

       everything larger than ipad
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar {
          font-family: helvetica, arial, sans-serif;
          margin-left: 5%;
          margin-right: 2%;
          width: 30%;
          margin-bottom: 0;
          font-size: 20px;
          border-radius: 10px;
          padding: 0;
          display: flex;
          flex-direction: column;
        }
      }*/

      /*ipad and below */
      .aos_pill_box {
        display: flex;
        color: black;
        border-radius: 5px;
        padding: 2px;
        margin: 2px;
        align-items: center;
        border-color: black;
        background-color: white;
        font-size: 12px;
        border: 1px solid black;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pill_box {
          display: flex;
          color: black;
          border-radius: 5px;
          padding: 5px;
          margin: 10px;
          align-items: center;
          border: 0;
          background-color: white;
          box-shadow: 1px 1px 10px 1px rgba(0,0,0,0.25);
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_selected_topics_text_container {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_selected_topics_text_container {
          margin-left: 25px;
          margin-right: 10px;
          margin-bottom: 10px;
          margin-top: 10px;
          padding: 5px;
          font-weight: bold;
          font-size: 20px;
          white-space: nowrap;
          display: inline-block;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_links_container {
        display: flex;
        justify-content: space-around;
        font-size: 12px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_links_container {
          display: flex;
          justify-content: space-around;
          font-size: 16px;
        }
      }

      /*ipad and below */
      .aos_project_container {
        padding-bottom: 20px;
        padding-left: 0;
        padding-right: 0;
        padding-top: 5px;
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_container {
          /*border-radius: 10px;*/
          padding-bottom: 20px;
          padding-left: 0;
          padding-right: 0;
          padding-top: 5px;
          width: 100%;
        }
      }

      /*ipad and below */
      .aos_project_description {
        font-size: 16px;
        width: 100%;
        font-weight: 300; /* match adsense */
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_description {
          font-size: 16px;
          font-weight: 300; /* match adsense */
        }
      }

      /*ipad and below */
      .aos_project_title {
        font-size: 20px;
        margin-bottom: 2px;
        font-weight: 400; /* match adsense */
        width: 100%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_project_title {
          font-size: 20px;
          margin-bottom: 2px;
          font-weight: 400; /* match adsense */
        }
      }

      .aos_project_title a :hover {
        text-decoration: none !important;
      }

      .aos_no_underline:hover {
        text-decoration: none !important;
      }

      .aos_grey_link:hover {
        color: #808080 !important;
      }

      .aos_grey_link {
        color: #808080 !important;
      }

      /*ipad and below */
      .category_topic_filter_container {
        width: 94%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .category_topic_filter_container {
          width: 94%;
        }
      }

      /*ipad and below */
      .aos_projects_container {
        font-family: helvetica, arial, sans-serif;
        margin-right: 2%;
        width: 96%; /* won't insert an ad this small (68%), but bigger and it overflows to the right with some topics that are long */
        font-size: 14px;
        margin-bottom: 5px;
        margin-left: 2%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_projects_container {
          font-family: helvetica, arial, sans-serif;
          margin-right: 0;
          width: 90%; /* was 53 before removing right margin spacer / ad container */
          font-size: 18px;
          margin-bottom: 5px;
          min-width: 800px;
          margin-left: 5%;
        }
      }

      /*ipad and below */
      .aos_pagenavigator_container {
        display: flex;
        justify-content: center;
        font-size: 9px;
        margin-bottom: 0;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_pagenavigator_container {
          display: flex;
          justify-content: center;
          font-size: 16px;
          margin-bottom: 10px;
        }
      }

      /*ipad and below */
      .aos_header_title_container_ipad_and_smaller {
        font-size: 12px;
        font-weight: bold;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 134px;
        white-space: nowrap;
        flex-direction: column;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_ipad_and_smaller {
          display: none;
        }
      }


      /*ipad and below */
      .aos_header_title_container_larger_than_ipad {
        display: none;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_header_title_container_larger_than_ipad {
          display: block;
        }
      }

      /*ipad and below */
      .aos_logo_image {
        height: 25px;
        width: 25px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_logo_image {
          height: 50px;
          width: 50px;
        }
      }

      /*ipad and below */
      .aos_fixed_footer_container {
        display: flex;
        margin-left: 0;
        margin-right: 0;
        margin-top: 2px;
        width: 100%;
        justify-content: center;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_footer_container {
          display: flex;
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
          justify-content: center;
        }
      }

      /*ipad and below */
      .aos_fixed_header_container {
        margin-left: 2%;
        margin-right: 2%;
        margin-top: 4px;
        margin-bottom: 2px;
        width: 96%;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_fixed_header_container {
          margin-left: 5%;
          margin-right: 20%;
          margin-top: 5px;
          margin-bottom: 5px;
          width: 75%;
        }
      }

      /*ipad and below */
      body {
        margin-top: 0;
        margin-right: 0;
        margin-bottom: 0;
        margin-left: 0;
        padding: 0
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        body {
          margin-top: 0;
          margin-right: 0;
          margin-bottom: 0;
          margin-left: 0;
          padding: 0
        }
      }

      /* ipad and below */
      .aos_topics_sidebar_link {
        width: 100%;
        margin-bottom: 10px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        font-size: 14px;
      }

      /* everything larger than ipad */
      @media screen and (min-width: 1024px) {
        .aos_topics_sidebar_link {
          width: 100%;
          margin-bottom: 10px;
          font-size: 18px;
        }
      }

      html {
        margin: 0;
        padding: 0
      }

      a {
        color: #000000;
        text-decoration: none;
      }

      a:visited {
        text-decoration: none;
      }

      a:hover {
        /*color: #0366d6;*/
        color: #000000; /* match adsense */
        text-decoration: underline;
      }

      .AOS_Pill:hover {
        text-decoration: none;
      }

      /* MIT licensed github-markdown.css */
      /* https://github.com/sindresorhus/github-markdown-css */
      @font-face {
        font-family: octicons-link;
        src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
      }
      .markdown-body {
        -ms-text-size-adjust: 100%;
        -webkit-text-size-adjust: 100%;
        line-height: 1.5;
        color: #24292e;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
        font-size: 16px;
        line-height: 1.5;
        word-wrap: break-word;
      }
      .markdown-body .pl-c {
        color: #6a737d;
      }
      .markdown-body .pl-c1,
      .markdown-body .pl-s .pl-v {
        color: #005cc5;
      }
      .markdown-body .pl-e,
      .markdown-body .pl-en {
        color: #6f42c1;
      }
      .markdown-body .pl-smi,
      .markdown-body .pl-s .pl-s1 {
        color: #24292e;
      }
      .markdown-body .pl-ent {
        color: #22863a;
      }
      .markdown-body .pl-k {
        color: #d73a49;
      }
      .markdown-body .pl-s,
      .markdown-body .pl-pds,
      .markdown-body .pl-s .pl-pse .pl-s1,
      .markdown-body .pl-sr,
      .markdown-body .pl-sr .pl-cce,
      .markdown-body .pl-sr .pl-sre,
      .markdown-body .pl-sr .pl-sra {
        color: #032f62;
      }
      .markdown-body .pl-v,
      .markdown-body .pl-smw {
        color: #e36209;
      }
      .markdown-body .pl-bu {
        color: #b31d28;
      }
      .markdown-body .pl-ii {
        color: #fafbfc;
        background-color: #b31d28;
      }
      .markdown-body .pl-c2 {
        color: #fafbfc;
        background-color: #d73a49;
      }
      .markdown-body .pl-c2::before {
        content: "^M";
      }
      .markdown-body .pl-sr .pl-cce {
        font-weight: bold;
        color: #22863a;
      }
      .markdown-body .pl-ml {
        color: #735c0f;
      }
      .markdown-body .pl-mh,
      .markdown-body .pl-mh .pl-en,
      .markdown-body .pl-ms {
        font-weight: bold;
        color: #005cc5;
      }
      .markdown-body .pl-mi {
        font-style: italic;
        color: #24292e;
      }
      .markdown-body .pl-mb {
        font-weight: bold;
        color: #24292e;
      }
      .markdown-body .pl-md {
        color: #b31d28;
        background-color: #ffeef0;
      }
      .markdown-body .pl-mi1 {
        color: #22863a;
        background-color: #f0fff4;
      }
      .markdown-body .pl-mc {
        color: #e36209;
        background-color: #ffebda;
      }
      .markdown-body .pl-mi2 {
        color: #f6f8fa;
        background-color: #005cc5;
      }
      .markdown-body .pl-mdr {
        font-weight: bold;
        color: #6f42c1;
      }
      .markdown-body .pl-ba {
        color: #586069;
      }
      .markdown-body .pl-sg {
        color: #959da5;
      }
      .markdown-body .pl-corl {
        text-decoration: underline;
        color: #032f62;
      }
      .markdown-body .octicon {
        display: inline-block;
        vertical-align: text-top;
        fill: currentColor;
      }
      .markdown-body a {
        background-color: transparent;
      }
      .markdown-body a:active,
      .markdown-body a:hover {
        outline-width: 0;
      }
      .markdown-body strong {
        font-weight: inherit;
      }
      .markdown-body strong {
        font-weight: bolder;
      }
      .markdown-body h1 {
        font-size: 2em;
        margin: 0.67em 0;
      }
      .markdown-body img {
        border-style: none;
      }
      .markdown-body code,
      .markdown-body kbd,
      .markdown-body pre {
        font-family: monospace, monospace;
        font-size: 1em;
      }
      .markdown-body hr {
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }
      .markdown-body input {
        font: inherit;
        margin: 0;
      }
      .markdown-body input {
        overflow: visible;
      }
      .markdown-body [type="checkbox"] {
        box-sizing: border-box;
        padding: 0;
      }
      .markdown-body * {
        box-sizing: border-box;
      }
      .markdown-body input {
        font-family: inherit;
        font-size: inherit;
        line-height: inherit;
      }
      .markdown-body a {
        color: #0366d6;
        text-decoration: none;
      }
      .markdown-body a:hover {
        text-decoration: underline;
      }
      .markdown-body strong {
        font-weight: 600;
      }
      .markdown-body hr {
        height: 0;
        margin: 15px 0;
        overflow: hidden;
        background: transparent;
        border: 0;
        border-bottom: 1px solid #dfe2e5;
      }
      .markdown-body hr::before {
        display: table;
        content: "";
      }
      .markdown-body hr::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body table {
        border-spacing: 0;
        border-collapse: collapse;
      }
      .markdown-body td,
      .markdown-body th {
        padding: 0;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body h1 {
        font-size: 32px;
        font-weight: 600;
      }
      .markdown-body h2 {
        font-size: 24px;
        font-weight: 600;
      }
      .markdown-body h3 {
        font-size: 20px;
        font-weight: 600;
      }
      .markdown-body h4 {
        font-size: 16px;
        font-weight: 600;
      }
      .markdown-body h5 {
        font-size: 14px;
        font-weight: 600;
      }
      .markdown-body h6 {
        font-size: 12px;
        font-weight: 600;
      }
      .markdown-body p {
        margin-top: 0;
        margin-bottom: 10px;
      }
      .markdown-body blockquote {
        margin: 0;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 0;
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body ol ol,
      .markdown-body ul ol {
        list-style-type: lower-roman;
      }
      .markdown-body ul ul ol,
      .markdown-body ul ol ol,
      .markdown-body ol ul ol,
      .markdown-body ol ol ol {
        list-style-type: lower-alpha;
      }
      .markdown-body dd {
        margin-left: 0;
      }
      .markdown-body code {
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 0;
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        font-size: 12px;
      }
      .markdown-body .octicon {
        vertical-align: text-bottom;
      }
      .markdown-body .pl-0 {
        padding-left: 0 !important;
      }
      .markdown-body .pl-1 {
        padding-left: 4px !important;
      }
      .markdown-body .pl-2 {
        padding-left: 8px !important;
      }
      .markdown-body .pl-3 {
        padding-left: 16px !important;
      }
      .markdown-body .pl-4 {
        padding-left: 24px !important;
      }
      .markdown-body .pl-5 {
        padding-left: 32px !important;
      }
      .markdown-body .pl-6 {
        padding-left: 40px !important;
      }
      .markdown-body::before {
        display: table;
        content: "";
      }
      .markdown-body::after {
        display: table;
        clear: both;
        content: "";
      }
      .markdown-body>*:first-child {
        margin-top: 0 !important;
      }
      .markdown-body>*:last-child {
        margin-bottom: 0 !important;
      }
      .markdown-body a:not([href]) {
        color: inherit;
        text-decoration: none;
      }
      .markdown-body .anchor {
        float: left;
        padding-right: 4px;
        margin-left: -20px;
        line-height: 1;
      }
      .markdown-body .anchor:focus {
        outline: none;
      }
      .markdown-body p,
      .markdown-body blockquote,
      .markdown-body ul,
      .markdown-body ol,
      .markdown-body dl,
      .markdown-body table,
      .markdown-body pre {
        margin-top: 0;
        margin-bottom: 16px;
      }
      .markdown-body hr {
        height: 0.25em;
        padding: 0;
        margin: 24px 0;
        background-color: #e1e4e8;
        border: 0;
      }
      .markdown-body blockquote {
        padding: 0 1em;
        color: #6a737d;
        border-left: 0.25em solid #dfe2e5;
      }
      .markdown-body blockquote>:first-child {
        margin-top: 0;
      }
      .markdown-body blockquote>:last-child {
        margin-bottom: 0;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font-size: 11px;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #c6cbd1;
        border-bottom-color: #959da5;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #959da5;
      }
      .markdown-body h1,
      .markdown-body h2,
      .markdown-body h3,
      .markdown-body h4,
      .markdown-body h5,
      .markdown-body h6 {
        margin-top: 24px;
        margin-bottom: 16px;
        font-weight: 600;
        line-height: 1.25;
      }
      .markdown-body h1 .octicon-link,
      .markdown-body h2 .octicon-link,
      .markdown-body h3 .octicon-link,
      .markdown-body h4 .octicon-link,
      .markdown-body h5 .octicon-link,
      .markdown-body h6 .octicon-link {
        color: #1b1f23;
        vertical-align: middle;
        visibility: hidden;
      }
      .markdown-body h1:hover .anchor,
      .markdown-body h2:hover .anchor,
      .markdown-body h3:hover .anchor,
      .markdown-body h4:hover .anchor,
      .markdown-body h5:hover .anchor,
      .markdown-body h6:hover .anchor {
        text-decoration: none;
      }
      .markdown-body h1:hover .anchor .octicon-link,
      .markdown-body h2:hover .anchor .octicon-link,
      .markdown-body h3:hover .anchor .octicon-link,
      .markdown-body h4:hover .anchor .octicon-link,
      .markdown-body h5:hover .anchor .octicon-link,
      .markdown-body h6:hover .anchor .octicon-link {
        visibility: visible;
      }
      .markdown-body h1 {
        padding-bottom: 0.3em;
        font-size: 2em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h2 {
        padding-bottom: 0.3em;
        font-size: 1.5em;
        border-bottom: 1px solid #eaecef;
      }
      .markdown-body h3 {
        font-size: 1.25em;
      }
      .markdown-body h4 {
        font-size: 1em;
      }
      .markdown-body h5 {
        font-size: 0.875em;
      }
      .markdown-body h6 {
        font-size: 0.85em;
        color: #6a737d;
      }
      .markdown-body ul,
      .markdown-body ol {
        padding-left: 2em;
      }
      .markdown-body ul ul,
      .markdown-body ul ol,
      .markdown-body ol ol,
      .markdown-body ol ul {
        margin-top: 0;
        margin-bottom: 0;
      }
      .markdown-body li {
        word-wrap: break-all;
      }
      .markdown-body li>p {
        margin-top: 16px;
      }
      .markdown-body li+li {
        margin-top: 0.25em;
      }
      .markdown-body dl {
        padding: 0;
      }
      .markdown-body dl dt {
        padding: 0;
        margin-top: 16px;
        font-size: 1em;
        font-style: italic;
        font-weight: 600;
      }
      .markdown-body dl dd {
        padding: 0 16px;
        margin-bottom: 16px;
      }
      .markdown-body table {
        display: block;
        width: 100%;
        overflow: auto;
      }
      .markdown-body table th {
        font-weight: 600;
      }
      .markdown-body table th,
      .markdown-body table td {
        padding: 6px 13px;
        border: 1px solid #dfe2e5;
      }
      .markdown-body table tr {
        background-color: #fff;
        border-top: 1px solid #c6cbd1;
      }
      .markdown-body table tr:nth-child(2n) {
        background-color: #f6f8fa;
      }
      .markdown-body img {
        max-width: 100%;
        box-sizing: content-box;
        background-color: #fff;
      }
      .markdown-body img[align=right] {
        padding-left: 20px;
      }
      .markdown-body img[align=left] {
        padding-right: 20px;
      }
      .markdown-body code {
        padding: 0.2em 0.4em;
        margin: 0;
        font-size: 85%;
        background-color: rgba(27,31,35,0.05);
        border-radius: 3px;
      }
      .markdown-body pre {
        word-wrap: normal;
      }
      .markdown-body pre>code {
        padding: 0;
        margin: 0;
        font-size: 100%;
        word-break: normal;
        white-space: pre;
        background: transparent;
        border: 0;
      }
      .markdown-body .highlight {
        margin-bottom: 16px;
      }
      .markdown-body .highlight pre {
        margin-bottom: 0;
        word-break: normal;
      }
      .markdown-body .highlight pre,
      .markdown-body pre {
        padding: 16px;
        overflow: auto;
        font-size: 85%;
        line-height: 1.45;
        background-color: #f6f8fa;
        border-radius: 3px;
      }
      .markdown-body pre code {
        display: inline;
        max-width: auto;
        padding: 0;
        margin: 0;
        overflow: visible;
        line-height: inherit;
        word-wrap: normal;
        background-color: transparent;
        border: 0;
      }
      .markdown-body .full-commit .btn-outline:not(:disabled):hover {
        color: #005cc5;
        border-color: #005cc5;
      }
      .markdown-body kbd {
        display: inline-block;
        padding: 3px 5px;
        font: 11px "SFMono-Regular", Consolas, "Liberation Mono", Menlo, Courier, monospace;
        line-height: 10px;
        color: #444d56;
        vertical-align: middle;
        background-color: #fafbfc;
        border: solid 1px #d1d5da;
        border-bottom-color: #c6cbd1;
        border-radius: 3px;
        box-shadow: inset 0 -1px 0 #c6cbd1;
      }
      .markdown-body :checked+.radio-label {
        position: relative;
        z-index: 1;
        border-color: #0366d6;
      }
      .markdown-body .task-list-item {
        list-style-type: none;
      }
      .markdown-body .task-list-item+.task-list-item {
        margin-top: 3px;
      }
      .markdown-body .task-list-item input {
        margin: 0 0.2em 0.25em -1.6em;
        vertical-align: middle;
      }
      .markdown-body hr {
        border-bottom-color: #eee;
      }
      /* github-markdown.css overrides */
      .markdown-body h2 {
        margin-bottom: 0;
        margin-top: 0;
      }

      .hll { background-color: #ffffcc }
      .c { color: #008000 } /* Comment */
      .err { border: 1px solid #FF0000 } /* Error */
      .k { color: #0000ff } /* Keyword */
      .cm { color: #008000 } /* Comment.Multiline */
      .cp { color: #0000ff } /* Comment.Preproc */
      .c1 { color: #008000 } /* Comment.Single */
      .cs { color: #008000 } /* Comment.Special */
      .ge { font-style: italic } /* Generic.Emph */
      .gh { font-weight: bold } /* Generic.Heading */
      .gp { font-weight: bold } /* Generic.Prompt */
      .gs { font-weight: bold } /* Generic.Strong */
      .gu { font-weight: bold } /* Generic.Subheading */
      .kc { color: #0000ff } /* Keyword.Constant */
      .kd { color: #0000ff } /* Keyword.Declaration */
      .kn { color: #0000ff } /* Keyword.Namespace */
      .kp { color: #0000ff } /* Keyword.Pseudo */
      .kr { color: #0000ff } /* Keyword.Reserved */
      .kt { color: #2b91af } /* Keyword.Type */
      .s { color: #a31515 } /* Literal.String */
      .nc { color: #2b91af } /* Name.Class */
      .ow { color: #0000ff } /* Operator.Word */
      .sb { color: #a31515 } /* Literal.String.Backtick */
      .sc { color: #a31515 } /* Literal.String.Char */
      .sd { color: #a31515 } /* Literal.String.Doc */
      .s2 { color: #a31515 } /* Literal.String.Double */
      .se { color: #a31515 } /* Literal.String.Escape */
      .sh { color: #a31515 } /* Literal.String.Heredoc */
      .si { color: #a31515 } /* Literal.String.Interpol */
      .sx { color: #a31515 } /* Literal.String.Other */
      .sr { color: #a31515 } /* Literal.String.Regex */
      .s1 { color: #a31515 } /* Literal.String.Single */
      .ss { color: #a31515 } /* Literal.String.Symbol */

    </style>

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Product",
  "name": "louthy/language-ext",
  "description": "C# functional language extensions - a base class library for functional programming",
  "url": "https://awesomeopensource.com/project/louthy/language-ext",
  "sku": "project/louthy/language-ext",
  "mpn": "project/louthy/language-ext",
  "image": "https://github.com/louthy.png",
  "brand": {
    "@type": "Brand",
    "name": "louthy/language-ext",
    "logo": "https://github.com/louthy.png"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.94",
    "ratingCount": "3382"
  }
}
</script>


    <meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="ZoZvur42Sqch7WOabCBNWcRIQTlRTUPu/jaMkRQAV61O+4i25kzgU/3cBTDgSH6vBdVOunP4XhCikg4p5uVk2Q==" />
  <script async src='/cdn-cgi/bm/cv/669835187/api.js'></script></head>

  <body>
    <script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"en","i18nDefaultLocale":"en","rorVersion":"11.2.1","rorPro":false,"href":"http://awesomeopensource.com/project/louthy/language-ext","location":"/project/louthy/language-ext","scheme":"http","host":"awesomeopensource.com","port":null,"pathname":"/project/louthy/language-ext","search":null,"httpAcceptLanguage":null,"serverSide":false}</script>
<div id="Root-react-component-f7a6c27e-7fc7-43bb-84c1-6dbe0e456d46"><div style="font-family:helvetica, arial, sans-serif" data-reactroot=""><div class="aos_fixed_header_container"><div class="display_flex margin_bottom_15"><div style="margin-right:1%;display:flex;align-items:center"><a href="https://awesomeopensource.com" title="Awesome Open Source Home" rel="canonical"><img src="https://awesomeopensource.com/awesome.gif" class="aos_logo_image"/></a></div><div class="aos_header_title_container_larger_than_ipad"><div style="white-space:nowrap;font-size:24px;font-weight:bold;display:flex;flex-direction:row;align-items:center;height:100%"><div>Awesome Open Source</div></div></div><div class="aos_header_title_container_ipad_and_smaller"><div>Awesome Open Source</div></div><div style="display:flex;flex-wrap:wrap"></div></div><div></div></div><div class="aos_project_screen_container"><div class="aos_project_inner_screen_container"><div class="aos_project_metadata"><div class="aos_project_metadata_title">Language <!-- -->Ext</div><div class="aos_project_metadata_description">C# functional language extensions - a base class library for functional programming</div><div class="aos_project_metadata_header">Stars</div><span class="aos_project_metadata_content">3,382</span><div class="project_page_ad_slot_1"><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout-key="-gv-v+1t-u+27" data-ad-client="ca-pub-1878397330895234" data-ad-slot="5649017589"></ins></div><div class="aos_project_metadata_header aos_license_text_metadata">License</div><span class="aos_project_metadata_content">mit</span><div class="aos_project_metadata_header"><a href="https://github.com/louthy/language-ext" target="_blank" class="aos_grey_link" rel="nofollow">Repository</a></div><span class="aos_project_metadata_content"><a href="https://github.com/louthy/language-ext" target="_blank">https://github.com/louthy/language-ext</a></span><div class="aos_project_metadata_header"><a href="https://github.com/louthy/language-ext/issues" target="_blank" class="aos_grey_link" rel="nofollow">Open Issues</a></div><span class="aos_project_metadata_content"><a href="https://github.com/louthy/language-ext/issues" target="_blank">43</a></span><div class="aos_project_metadata_header">Most Recent Commit</div><span class="aos_project_metadata_content">2 days ago</span><div class="aos_project_metadata_header">Related Projects</div><span class="aos_project_metadata_content"><a href="https://awesomeopensource.com/projects/c-sharp"><div style="display:block;text-decoration:none;padding-bottom:10px">c-sharp<span> (<!-- -->11,505<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/functional-programming"><div style="display:block;text-decoration:none;padding-bottom:10px">functional-programming<span> (<!-- -->457<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/f-sharp"><div style="display:block;text-decoration:none;padding-bottom:10px">f-sharp<span> (<!-- -->307<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/monad"><div style="display:block;text-decoration:none;padding-bottom:10px">monad<span> (<!-- -->59<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/monads"><div style="display:block;text-decoration:none;padding-bottom:10px">monads<span> (<!-- -->24<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/lenses"><div style="display:block;text-decoration:none;padding-bottom:10px">lenses<span> (<!-- -->23<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/functor"><div style="display:block;text-decoration:none;padding-bottom:10px">functor<span> (<!-- -->18<!-- -->)</span></div></a><a href="https://awesomeopensource.com/projects/monad-transformers"><div style="display:block;text-decoration:none;padding-bottom:10px">monad-transformers<span> (<!-- -->14<!-- -->)</span></div></a></span></div><div class="markdown-body"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<p><a href="https://github.com/louthy/language-ext/blob/master/Images/banner.png?raw=true" target="_blank" rel="nofollow"><img src="https://github.com/louthy/language-ext/blob/master/Images/banner.png?raw=true" alt="lang-ext" style="max-width:100%;"></a></p>
<h1>
<a id="c-functional-programming-language-extensions" class="anchor" href="#c-functional-programming-language-extensions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>C# Functional Programming Language Extensions</h1>
<p><a href="https://gitter.im/louthy/language-ext?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge" rel="nofollow"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/louthy/language-ext" style="max-width:100%;"></a></p>
<p>This library uses and abuses the features of C# to provide a functional-programming 'base class library' that, if you squint, can look like
extensions to the language itself. The desire here is to make programming in C# much more reliable and to make the engineer's inertia flow
in the direction of declarative and functional code rather than imperative.</p>
<p><strong>Author on twitter:</strong>
<a href="https://twitter.com/paullouth" rel="nofollow">https://twitter.com/paullouth</a></p>
<h2>
<a id="index" class="anchor" href="#index" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Index</h2>
<ul>
<li><a href="#contributing--code-of-conduct">Contributing &amp; Code of Conduct</a></li>
<li><a href="#nu-get">Nu-get package</a></li>
<li><a href="#code-gen-setup">Code-gen setup</a></li>
<li><a href="#unity">Unity</a></li>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#features">Features</a></li>
<li><a href="https://louthy.github.io/language-ext" rel="nofollow">API Reference</a></li>
</ul>
<p>This library started out trying to deal with issues in C#, that after using Haskell and F# started to frustrate me:</p>
<ul>
<li><a href="#poor-tuple-support">Poor tuple support</a></li>
<li>
<a href="#null-reference-problem">Null reference problem</a>
<ul>
<li><a href="#option">Option</a></li>
</ul>
</li>
<li><a href="#lack-of-lambda-and-expression-inference">Lack of lambda and expression inference</a></li>
<li><a href="#void-isnt-a-real-type">Void isn't a real type</a></li>
<li>
<a href="#mutable-lists-and-dictionaries">Mutable lists and dictionaries</a>
<ul>
<li><a href="#lists">Lists</a></li>
<li><a href="#list-pattern-matching">List pattern matching</a></li>
<li><a href="#maps">Maps</a></li>
</ul>
</li>
<li>
<a href="#difficulty-in-creating-immutable-record-types">Difficulty in creating immutable record types</a>
<ul>
<li>
<a href="#transformation-of-immutable-types">Transformation of immutable types</a>
<ul>
<li><a href="#with"><code>[With]</code)</li>
</ul>
</li>
<li>
<a href="#transformation-of-nested-immutable-types-with-lenses">Transformation of nested immutable types with Lenses</a>
<ul>
<li><a href="#withlens"><code>[WithLens]</code)</li>
</ul>
</li>
</ul>
</li>
<li><a href="#the-awful-out-parameter">The awful 'out' parameter</a></li>
<li>
<a href="#ad-hoc-polymorphism">The lack of ad-hoc polymorphism</a>
<ul>
<li><a href="#num%3CA%3E"><code>Num&lt;A&gt;</code)</li>
<li><a href="#eq%3CA%3E"><code>Eq&lt;A&gt;</code)</li>
<li><a href="#ord%3CA%3E"><code>Ord&lt;A&gt;</code)</li>
<li><a href="#semigroup%3CA%3E"><code>Semigroup&lt;A&gt;</code)</li>
<li><a href="#monoid%3CA%3E"><code>Monoid&lt;A&gt;</code)</li>
<li><a href="#monad"><code>Monad</code)</li>
<li><a href="#transformer-types">Transformer types</a></li>
</ul>
</li>
</ul>
<h2>
<a id="reference" class="anchor" href="#reference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Reference</h2>
<h4>
<a id="api-reference" class="anchor" href="#api-reference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://louthy.github.io/language-ext" rel="nofollow">API Reference</a>
</h4>
<h4>
<a id="issues-that-contain-documentation-and-examples" class="anchor" href="#issues-that-contain-documentation-and-examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><a href="https://github.com/louthy/language-ext/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20label%3A%22examples%20%2F%20documentation%22%20" rel="nofollow">Issues that contain documentation and examples</a>
</h4>
<h2>
<a id="contributing--code-of-conduct" class="anchor" href="#contributing--code-of-conduct" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contributing &amp; Code of Conduct</h2>
<p>If you would like to get involved with this project, please first read the <a href="https://github.com/louthy/language-ext/blob/master/CONTRIBUTING.md" rel="nofollow">Contribution Guidelines</a> and the <a href="https://github.com/louthy/language-ext/blob/master/CODE_OF_CONDUCT.md" rel="nofollow">Code of Conduct</a>.</p>
<h2>
<a id="nu-get" class="anchor" href="#nu-get" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Nu-get</h2>
<table>
<thead>
<tr>
<th>Nu-get package</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://www.nuget.org/packages/LanguageExt.Core" rel="nofollow">LanguageExt.Core</a></td>
<td>All of the core types and functional 'prelude'. <strong>This is all that's needed to get started</strong>.</td>
</tr>
<tr>
<td><a href="https://www.nuget.org/packages/LanguageExt.FSharp" rel="nofollow">LanguageExt.FSharp</a></td>
<td>F# to C# interop library. Provides interop between the LanguageExt.Core types (like <code>Option</code>, <code>List</code> and <code>Map</code>) to the F# equivalents, as well as interop between core BCL types and F#</td>
</tr>
<tr>
<td><a href="https://www.nuget.org/packages/LanguageExt.Parsec" rel="nofollow">LanguageExt.Parsec</a></td>
<td>Port of the <a href="https://hackage.haskell.org/package/parsec" rel="nofollow">Haskell parsec library</a>
</td>
</tr>
<tr>
<td><a href="https://www.nuget.org/packages/LanguageExt.Rx" rel="nofollow">LanguageExt.Rx</a></td>
<td>Reactive Extensions support for various types within the Core</td>
</tr>
<tr>
<td><a href="https://www.nuget.org/packages/LanguageExt.CodeGen" rel="nofollow">LanguageExt.CodeGen</a></td>
<td>
<a href="https://github.com/louthy/language-ext/wiki/Code-generation" rel="nofollow">Used to generate records, unions, lenses, and <code>With</code> functions automagically</a>.</td>
</tr>
</tbody>
</table>
<h2>
<a id="code-gen-setup" class="anchor" href="#code-gen-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Code-gen setup</h2>
<p>To use the code-generation features of <code>language-ext</code> (which are totally optional by the way), then you must include the <a href="https://www.nuget.org/packages/LanguageExt.CodeGen" rel="nofollow">LanguageExt.CodeGen</a> package into your project.</p>
<p>To make the reference <strong>build and design time only</strong> (i.e. your project doesn't gain an additional dependencies because of the code-generator), open up your <code>csproj</code> and set the <code>PrivateAssets</code> attribute to <code>all</code>:</p>
<pre lang="xml" class="highlight-xml"><span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"LanguageExt.Core"</span> <span class="na">Version=</span><span class="s">"3.4.10"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"LanguageExt.CodeGen"</span> <span class="na">Version=</span><span class="s">"3.4.10"</span>
                      <span class="na">PrivateAssets=</span><span class="s">"all"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"CodeGeneration.Roslyn.BuildTime"</span>
                      <span class="na">Version=</span><span class="s">"0.6.1"</span>
                      <span class="na">PrivateAssets=</span><span class="s">"all"</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;DotNetCliToolReference</span> <span class="na">Include=</span><span class="s">"dotnet-codegen"</span> <span class="na">Version=</span><span class="s">"0.6.1"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/ItemGroup&gt;</span>
</pre>
<blockquote>
<p>Obviously, update the <code>Version</code> attributes to the appropriate values. Also note that you will probably need the latest VS2019+ for this to work. Even early versions of VS2019 seem to have problems.</p>
</blockquote>
<p>There's more information on the code-gen features on <a href="https://github.com/louthy/language-ext/wiki/Code-generation" rel="nofollow">the wiki</a></p>
<h2>
<a id="unity" class="anchor" href="#unity" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Unity</h2>
<p>This library seems compatible on the latest (at the time of writing) Unity 2018.2 with <strong>incremental compiler</strong> (which enables C# 7), so it should work well once Unity has official support for C# 7 on upcoming 2018.3.
In the meanwhile, you can install incremental compiler instead.
If you are concerned about writing functionally and the possible performance overheads then please take a look at <a href="https://github.com/louthy/language-ext/wiki/Performance" rel="nofollow">this wiki page</a>.</p>
<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Introduction</h2>
<p>One of the great features of C#6+ is that it allows us to treat static classes like namespaces. This means that we can use static
methods without qualifying them first. That instantly gives us access to single term method names that look exactly like functions
in functional languages. i.e.</p>
<pre lang="C#"><code>    using static System.Console;
    
    WriteLine("Hello, World");
</code></pre>
<p>This library tries to bring some of the functional world into C#. It won't always sit well with the seasoned C# OO programmer,
especially the choice of camelCase names for a lot of functions and the seeming 'globalness' of a lot of the library.</p>
<p>I can understand that much of this library is non-idiomatic, but when you think of the journey C# has been on, is "idiomatic"
necessarily right?  A lot of C#'s idioms are inherited from Java and C# 1.0. Since then we've had generics, closures, Func, LINQ,
async... C# as a language is becoming more and more like a  functional language on every release. In fact, the bulk of the new
features are either inspired by or directly taken from features in functional languages. So perhaps it's time to move the C#
idioms closer to the functional world's idioms?</p>
<p><strong>A note about naming</strong></p>
<p>One of the areas that's likely to get seasoned C# heads worked up is my choice of naming style. The intent is to try and make
something that <em>feels</em> like a functional language rather than following rules of naming conventions (mostly set out by
the BCL).</p>
<p>There is, however, a naming guide that will keep you in good stead while reading through this documentation:</p>
<ul>
<li>Type names are <code>PascalCase</code> in the normal way</li>
<li>The types all have constructor functions rather than public constructors that you instantiate with <code>new</code>. They will always
be <code>PascalCase</code>:</li>
</ul>
<pre lang="C#"><code>    Option&lt;int&gt; x = Some(123);
    Option&lt;int&gt; y = None;
    List&lt;int&gt; items = List(1,2,3,4,5);
    Map&lt;int, string&gt; dict = Map((1, "Hello"), (2, "World"));
</code></pre>
<ul>
<li>Any (non-type constructor) static function that can be used on its own by <code>using static LanguageExt.Prelude</code> are <code>camelCase</code>.</li>
</ul>
<pre lang="C#"><code>    var x = map(opt, v =&gt; v * 2);
</code></pre>
<ul>
<li>Any extension methods, or anything "fluent" are <code>PascalCase</code> in the normal way</li>
</ul>
<pre lang="C#"><code>    var x = opt.Map(v =&gt; v * 2);
</code></pre>
<p>Even if you disagree with this non-idiomatic approach, all of the <code>camelCase</code> static functions have fluent variants, so you never actually have to see the non-standard stuff.</p>
<p><em>If you're not using C# 6 yet, then you can still use this library. Anywhere in the docs below where you see a camelCase function
it can be accessed by prefixing with <code>Prelude.</code></em></p>
<h3>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting started</h3>
<p>To use this library, simply include <code>LanguageExt.Core.dll</code> in your project or grab it from NuGet, and add this to the top of each <code>.cs</code> file that needs it:</p>
<pre lang="C#"><code>using LanguageExt;
using static LanguageExt.Prelude;
</code></pre>
<p>The namespace <code>LanguageExt</code> contains the core types, and <code>LanguageExt.Prelude</code> contains the functions that you bring into scope <code>using static LanguageExt.Prelude</code>.</p>
<h3>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h3>
<table>
<thead>
<tr>
<th>Location</th>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Core</code></td>
<td><code>Arr&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Arr_A.htm" rel="nofollow">Immutable array</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Lst&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Lst_A.htm" rel="nofollow">Immutable list</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Map&lt;K, V&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_K_V.htm" rel="nofollow">Immutable map</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Map&lt;OrdK, K, V&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_OrdK_K_V.htm" rel="nofollow">Immutable map with Ord constraint on <code>K</code></a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>HashMap&lt;K, V&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashMap_K_V.htm" rel="nofollow">Immutable hash-map</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>HashMap&lt;EqK, K, V&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashMap_EqK_K_V.htm" rel="nofollow">Immutable hash-map with Eq constraint on <code>K</code></a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Set&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Set_A.htm" rel="nofollow">Immutable set</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Set&lt;OrdA, A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Set_OrdA_A.htm" rel="nofollow">Immutable set with Ord constraint on <code>A</code></a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>HashSet&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashSet_A.htm" rel="nofollow">Immutable hash-set</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>HashSet&lt;EqA, A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashSet_EqA_A.htm" rel="nofollow">Immutable hash-set with Eq constraint on <code>A</code></a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Que&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Que_T.htm" rel="nofollow">Immutable queue</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Stck&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Stck_T.htm" rel="nofollow">Immutable stack</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Option&lt;A&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Option_A.htm" rel="nofollow">Option monad</a> that can't be used with <code>null</code> values</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>OptionAsync&lt;A&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/OptionAsync_A.htm" rel="nofollow">OptionAsync monad</a> that can't be used with <code>null</code> values with all value realisation does asynchronously</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>OptionUnsafe&lt;T&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/OptionUnsafe_A.htm" rel="nofollow">Option monad</a> that can be used with <code>null</code> values</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Either&lt;L,R&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Either_L_R.htm" rel="nofollow">Right/Left choice monad</a> that won't accept <code>null</code> values</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>EitherUnsafe&lt;L, R&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/EitherUnsafe_L_R.htm" rel="nofollow">Right/Left choice monad</a> that can be used with <code>null</code> values</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>EitherAsync&lt;L, R&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/EitherAsync_L_R.htm" rel="nofollow">EitherAsync monad</a> that can't be used with <code>null</code> values with all value realisation done asynchronously</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Try&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Try_A.htm" rel="nofollow">Exception handling lazy monad</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>TryAsync&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryAsync_A.htm" rel="nofollow">Asynchronous exception handling lazy monad</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>TryOption&lt;A&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryOption_A.htm" rel="nofollow">Option monad with third state</a> 'Fail' that catches exceptions</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>TryOptionAsync&lt;A&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryOptionAsync_A.htm" rel="nofollow">Asynchronous Option monad with third state</a> 'Fail' that catches exceptions</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Record&lt;A&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Record_RECORDTYPE.htm" rel="nofollow">Base type for creating record types</a>  with automatic structural equality, ordering, and hash code calculation.</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Lens&lt;A, B&gt;</code></td>
<td>
<a href="#transformation-of-nested-immutable-types-with-lenses">Well behaved bidirectional transformations</a> - i.e. the ability to easily generate new immutable values from existing ones, even when heavily nested.</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Reader&lt;E, A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Reader_Env_A.htm" rel="nofollow">Reader monad</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Writer&lt;MonoidW, W, T&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Writer_MonoidW_W_A.htm" rel="nofollow">Writer monad that logs to a <code>W</code> constrained to be a Monoid</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>State&lt;S, A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/State_S_A.htm" rel="nofollow">State monad</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Patch&lt;EqA, A&gt;</code></td>
<td>Uses patch-theory to efficiently calculate the difference (<code>Patch.diff(list1, list2)</code>) between two collections of <code>A</code> and build a patch which can be applied (<code>Patch.apply(patch, list)</code>) to one to make the other (think git diff).</td>
</tr>
<tr>
<td><code>Parsec</code></td>
<td><code>Parser&lt;A&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Parsec/LanguageExt.Parsec/index.htm#Parser_T" rel="nofollow">String parser monad and full parser combinators library</a></td>
</tr>
<tr>
<td><code>Parsec</code></td>
<td><code>Parser&lt;I, O&gt;</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Parsec/LanguageExt.Parsec/index.htm#Parser_I_O" rel="nofollow">Parser monad that can work with any input stream type</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>NewType&lt;SELF, A, PRED&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NewType_NEWTYPE_A_PRED.htm" rel="nofollow">Haskell <code>newtype</code> equivalent</a> i.e: <code>class Hours : NewType&lt;Hours, double&gt; { public Hours(double value) : base(value) { } }</code>. The resulting type is: equatable, comparable, foldable, a functor, monadic, and iterable</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>NumType&lt;SELF, NUM, A, PRED&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NumType_NUMTYPE_NUM_A_PRED.htm" rel="nofollow">Haskell <code>newtype</code> equivalent but for numeric types</a> i.e: <code>class Hours : NumType&lt;Hours, TDouble, double&gt; { public Hours(double value) : base(value) { } }</code>. The resulting type is: equatable, comparable, foldable, a functor, a monoid, a semigroup, monadic, iterable, and can have basic artithmetic operations performed upon it.</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>FloatType&lt;SELF, FLOATING, A, PRED&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/FloatType_SELF_FLOATING_A_PRED.htm" rel="nofollow">Haskell <code>newtype</code> equivalent but for real numeric types</a> i.e: <code>class Hours : FloatType&lt;Hours, TDouble, double&gt; { public Hours(double value) : base(value) { } }</code>. The resulting type is: equatable, comparable, foldable, a functor, a monoid, a semigroup, monadic, iterable, and can have complex artithmetic operations performed upon it.</td>
</tr>
<tr>
<td><code>Core</code></td>
<td>
<code>Nullable&lt;T&gt;</code> extensions</td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NullableExtensions_.htm" rel="nofollow">Extension methods for <code>Nullable&lt;T&gt;</code></a> that make it into a functor, applicative, foldable, iterable and a monad</td>
</tr>
<tr>
<td><code>Core</code></td>
<td>
<code>Task&lt;T&gt;</code> extensions</td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/TaskExtensions_.htm" rel="nofollow">Extension methods for <code>Task&lt;T&gt;</code></a> that make it into a functor, applicative, foldable, iterable and a monad</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Validation&lt;FAIL,SUCCESS&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Validation_FAIL_SUCCESS.htm" rel="nofollow">Validation applicative and monad</a> for collecting multiple errors before aborting an operation</td>
</tr>
<tr>
<td><code>Core</code></td>
<td><code>Validation&lt;MonoidFail, FAIL, SUCCESS&gt;</code></td>
<td>
<a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Validation_FAIL_SUCCESS.htm" rel="nofollow">Validation applicative and monad</a> for collecting multiple errors before aborting an operation, uses the supplied monoid in the first generic argument to collect the failure values.</td>
</tr>
<tr>
<td><code>Core</code></td>
<td>Monad transformers</td>
<td>A higher kinded type (ish)</td>
</tr>
<tr>
<td><code>Core</code></td>
<td>Currying</td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#curry%3CT1,%20T2,%20R%3E" rel="nofollow">Translate the evaluation of a function that takes multiple arguments into a sequence of functions, each with a single argument</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td>Partial application</td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#par%3CT1,%20T2,%20R%3E" rel="nofollow">the process of fixing a number of arguments to a function, producing another function of smaller arity</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td>Memoization</td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#memo%3CT,%20R%3E" rel="nofollow">An optimization technique used primarily to speed up programs by storing the results of expensive function calls and returning the cached result when the same inputs occur again</a></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#fun%3CR%3E" rel="nofollow">Improved lambda type inference</a></td>
<td><code>var add = fun( (int x, int y) =&gt; x + y)</code></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/QueryExtensions_.htm" rel="nofollow"><code>IQueryable&lt;T&gt;</code> extensions</a></td>
<td></td>
</tr>
<tr>
<td><code>Core</code></td>
<td><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/ObservableExt_.htm" rel="nofollow"><code>IObservable&lt;T&gt;</code> extensions</a></td>
<td></td>
</tr>
</tbody>
</table>
<h2>
<a id="poor-tuple-support" class="anchor" href="#poor-tuple-support" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Poor tuple support</h2>
<p>I've been crying out for proper tuple support for ages. When this library was created we were no closer (C# 6).
The standard way of creating them is ugly <code>Tuple.Create(foo,bar)</code> compared to functional languages where the syntax is often
<code>(foo,bar)</code> and to consume them you must work with the standard properties of <code>Item1</code>...<code>ItemN</code>. Luckily now in C# 7
we can use: <code>(foo,bar)</code>. But for those that can't:</p>
<pre lang="C#"><code>    var ab = Tuple("a","b");
</code></pre>
<p>Now isn't that nice?</p>
<p>Consuming the tuple is now handled using <code>Map</code>, which projects the <code>Item1</code>...<code>ItemN</code> onto a lambda function (or action):</p>
<pre lang="C#"><code>    var name = Tuple("Paul","Louth");
    var res = name.Map( (first, last) =&gt; $"{first} {last}");
</code></pre>
<p>Or, you can use a more functional approach:</p>
<pre lang="C#"><code>    var name = Tuple("Paul","Louth");
    var res = map( name, (first, last) =&gt; $"{first} {last}");
</code></pre>
<p>This allows the tuple properties to have names, and it also allows for fluent handling of functions that return tuples.</p>
<p>If you are using C#7 then you'll know that the new <code>Tuple</code> type is <code>ValueTuple</code>. Just like with <code>Tuple</code>, language-ext
adds many extensions to the standard BCL <code>ValueTuple</code>.</p>
<p>For example:</p>
<pre lang="C#"><code>    var abc = ('a', 'b').Add('c');                                           // ('a', 'b', 'c')
    var abcd = ('a', 'b').Add('c').Add('d');                                 // ('a', 'b', 'c', 'd')
    var abcd5 = ('a', 'b').Add('c').Add('d').Add(5);                         // ('a', 'b', 'c', 'd', 5)

    var sum = (1, 2, 3).Sum&lt;TInt, int&gt;();                                    // 6
    var product = (2, 4, 8).Product&lt;TInt, int&gt;();                            // 64
    var flag = ("one", "two", "three").Contains&lt;TString, string&gt;("one");     // true
    var str = ("Hello", " ", "World").Concat&lt;TString, string&gt;();             // "Hello World"
    var list = (List(1, 2, 3), List(4, 5, 6)).Concat&lt;TLst&lt;int&gt;, Lst&lt;int&gt;&gt;(); // [1,2,3,4,5,6]
</code></pre>
<h2>
<a id="null-reference-problem" class="anchor" href="#null-reference-problem" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Null reference problem</h2>
<p><code>null</code> must be <a href="https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/" rel="nofollow">the biggest mistake</a> in the whole of computer language history. I realise the original designers
of C# had to make pragmatic decisions, it's a shame this one slipped through though. So, what to do about the
"null problem"?</p>
<p><code>null</code> is often used to indicate <em>no value</em>; the method called can't produce a value of the type it said
it was going to produce, and therefore it gives you "nothing". The thing is that when <em>no value</em> is passed to
the consuming code, it gets assigned to a variable of type T, the same type that the function said it was going
to return, except this variable now has a timebomb in it. You must continually check if the value is <code>null</code>, if
it's passed around it must be checked too.</p>
<p>As we all know it's only a matter of time before a null reference bug crops up because the variable wasn't
checked. It puts C# in the realm of the dynamic languages, where you can't trust the value you're being given.</p>
<p>Functional languages use what's known as an <em>option type</em>. In F# it's called <code>Option</code>, in Haskell it's called
<code>Maybe</code>. In the next section we'll see how it's used.</p>
<h2>
<a id="option" class="anchor" href="#option" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Option</h2>
<p><code>Option&lt;T&gt;</code> works in a very similar way to <code>Nullable&lt;T&gt;</code>, except it works with all types rather than just value
types. It's a <code>struct</code> and therefore can't be <code>null</code>. An instance can be created by either calling <code>Some(value)</code>,
which represents a positive "I have a value" response, or <code>None</code>, which is the equivalent of returning <code>null</code>.</p>
<p>So why is it any better than returning <code>T</code> and using <code>null</code>? It seems we can have a non-value response again
right? Yes, that's true, however you're forced to acknowledge that fact and to write code to handle both possible
outcomes because you can't get to the underlying value without acknowledging the possibility of the two states
that the value could be in. This bulletproofs your code. You're also explicitly telling any other programmers that "this method might not return a value, so make sure you deal with that". This explicit declaration is very
powerful.</p>
<p>This is how you create an <code>Option&lt;int&gt;</code>:</p>
<pre lang="C#"><code>    var optional = Some(123);
</code></pre>
<p>To access the value you must check that it's valid first:</p>
<pre lang="C#"><code>    int x = optional.Match( 
                Some: v  =&gt; v * 2,
                None: () =&gt; 0 
                );
</code></pre>
<p>An alternative (functional) way of matching is this:</p>
<pre lang="C#"><code>    int x = match( optional, 
                   Some: v  =&gt; v * 2,
                   None: () =&gt; 0 );
</code></pre>
<p>Yet another alternative ("fluent") matching method is this:</p>
<pre lang="C#"><code>    int x = optional
               .Some( v  =&gt; v * 2 )
               .None( () =&gt; 0 );
</code></pre>
<p>So choose your preferred method and stick with it. It's probably best not to mix styles.</p>
<p>There are also some helper functions to work with default <code>None</code> values; you won't see a <code>.Value</code> or a
<code>GetValueOrDefault()</code> anywhere in this library. This is because <code>.Value</code> puts us right back to where we started, and
you may as well not use <code>Option&lt;T&gt;</code> in that case. <code>GetValueOrDefault()</code> is also just as bad because it can return <code>null</code>
for reference types, and depends on how well defined the <code>struct</code> type is you're working with.</p>
<p>However, clearly there will be times when you don't need to do anything with the <code>Some</code> case. Also, sometimes you just want some code to execute in the <code>Some</code> case and not the
<code>None</code> case:</p>
<pre lang="C#"><code>    // Returns the Some case 'as is' and 10 in the None case
    int x = optional.IfNone(10);        

    // As above, but invokes a Func&lt;T&gt; to return a valid value for x
    int x = optional.IfNone(() =&gt; GetAlternative());        
    
    // Invokes an Action&lt;T&gt; if in the Some state.
    optional.IfSome(x =&gt; Console.WriteLine(x));
</code></pre>
<p>Of course there are functional versions of the fluent version above:</p>
<pre lang="C#"><code>    int x = ifNone(optional, 10);
    int x = ifNone(optional, () =&gt; GetAlternative());
    ifSome(optional, x =&gt; Console.WriteLine(x));
</code></pre>
<p>To smooth out the process of returning <code>Option&lt;T&gt;</code> types from methods there are some implicit conversion
operators and constructors:</p>
<pre lang="C#"><code>    // Implicitly converts the integer to a Some of int
    Option&lt;int&gt; GetValue()
    {
        return 1000;
    }

    // Implicitly converts to a None of int
    Option&lt;int&gt; GetValue()
    {
        return None;
    }
    
    // Will handle either a None or a Some returned
    Option&lt;int&gt; GetValue(bool select) =&gt;
        select
            ? Some(1000)
            : None;
            
    // Explicitly converts a null value to None and a non-null value to Some(value)
    Option&lt;string&gt; GetValue()
    {
        string value = GetValueFromNonTrustedApi();
        return Optional(value);
    }
            
    // Implicitly converts a null value to None and a non-null value to Some(value)
    Option&lt;string&gt; GetValue()
    {
        string value = GetValueFromNonTrustedApi();
        return value;
    }
</code></pre>
<p>It's actually nearly impossible to get a <code>null</code> out of a function, even if the <code>T</code> in <code>Option&lt;T&gt;</code> is a
reference type and you write <code>Some(null)</code>. Firstly, it won't compile, but you might think you can do this:</p>
<pre lang="C#"><code>    private Option&lt;string&gt; GetStringNone()
    {
        string nullStr = null;
        return Some(nullStr);
    }
</code></pre>
<p>That will compile, but at runtime will throw a <code>ValueIsNullException</code>. If you do either of these (below)
you'll get a <code>None</code>.</p>
<pre lang="C#"><code>    private Option&lt;string&gt; GetStringNone()
    {
        string nullStr = null;
        return nullStr;
    }

    private Option&lt;string&gt; GetStringNone()
    {
        string nullStr = null;
        return Optional(nullStr);
    }

</code></pre>
<p>These are the coercion rules:</p>
<table>
<thead>
<tr>
<th>Converts from</th>
<th>Converts to</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>x</code></td>
<td><code>Some(x)</code></td>
</tr>
<tr>
<td><code>null</code></td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>None</code></td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>Some(x)</code></td>
<td><code>Some(x)</code></td>
</tr>
<tr>
<td><code>Some(null)</code></td>
<td><code>ValueIsNullException</code></td>
</tr>
<tr>
<td><code>Some(None)</code></td>
<td><code>Some(None)</code></td>
</tr>
<tr>
<td><code>Some(Some(x))</code></td>
<td><code>Some(Some(x))</code></td>
</tr>
<tr>
<td><code>Some(Nullable null)</code></td>
<td><code>ValueIsNullException</code></td>
</tr>
<tr>
<td><code>Some(Nullable x)</code></td>
<td><code>Some(x)</code></td>
</tr>
<tr>
<td><code>Optional(x)</code></td>
<td><code>Some(x)</code></td>
</tr>
<tr>
<td><code>Optional(null)</code></td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>Optional(Nullable null)</code></td>
<td><code>None</code></td>
</tr>
<tr>
<td><code>Optional(Nullable x)</code></td>
<td><code>Some(x)</code></td>
</tr>
</tbody>
</table>
<p>As well as the protection of the internal value of <code>Option&lt;T&gt;</code>, there's protection for the return value
of the <code>Some</code> and <code>None</code> handler functions. You can't return <code>null</code> from those either; an exception will
be thrown.</p>
<pre lang="C#"><code>    // This will throw a ResultIsNullException exception
    string res = GetValue(true)
                     .Some(x =&gt; (string)null)
                     .None((string)null);
</code></pre>
<p><code>null</code> goes away if you use <code>Option&lt;T&gt;</code>.</p>
<p>However, there are times when you may want your <code>Some</code> and <code>None</code> handlers to return <code>null</code>. This is mostly
when you need to use something in the BCL or from a third-party library, so momentarily you need to step
out of your warm and cosy protected optional bubble, but you've got an <code>Option&lt;T&gt;</code> that will throw an
exception if you try.</p>
<p>So you can use <code>matchUnsafe</code> and <code>ifNoneUnsafe</code>:</p>
<pre lang="C#"><code>    string x = matchUnsafe( optional,
                            Some: v =&gt; v,
                            None: () =&gt; null );

    string x = ifNoneUnsafe( optional, (string)null );
    string x = ifNoneUnsafe( optional, () =&gt; GetNull() );
</code></pre>
<p>And fluent versions:</p>
<pre lang="C#"><code>    string x = optional.MatchUnsafe(
                   Some: v =&gt; v,
                   None: () =&gt; null 
                   );
    string x = optional.IfNoneUnsafe((string)null);
    string x = optional.IfNoneUnsafe(() =&gt; GetNull());
</code></pre>
<p>That is consistent throughout the library. Anything that could return <code>null</code> has the <code>Unsafe</code> suffix. That
means that in those unavoidable circumstances where you need a <code>null</code>, it gives you and any other programmers
working with your code the clearest possible sign that they should treat the result with care.</p>
<h3>
<a id="option-monad---gasp--not-the-m-word" class="anchor" href="#option-monad---gasp--not-the-m-word" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Option monad - gasp!  Not the M word!</h3>
<p>I know, it's that damn monad word again. They're actually not scary at all, and damn useful. But if you
couldn't care less (or <em>could</em> care less, for my American friends), it won't stop you taking advantage of the
<code>Option&lt;T&gt;</code> type. However, <code>Option&lt;T&gt;</code> type also implements <code>Select</code> and <code>SelectMany</code> and is therefore monadic, which also means it can be used in LINQ expressions and much more!</p>
<pre lang="C#"><code>    Option&lt;int&gt; two = Some(2);
    Option&lt;int&gt; four = Some(4);
    Option&lt;int&gt; six = Some(6);
    Option&lt;int&gt; none = None;

    // This expression succeeds because all items to the right of 'in' are Some of int
    // and therefore it lands in the Some lambda.
    int r = match( from x in two
                   from y in four
                   from z in six
                   select x + y + z,
                   Some: v =&gt; v * 2,
                   None: () =&gt; 0 );     // r == 24

    // This expression bails out once it gets to the None, and therefore doesn't calculate x+y+z
    // and lands in the None lambda
    int r = match( from x in two
                   from y in four
                   from _ in none
                   from z in six
                   select x + y + z,
                   Some: v =&gt; v * 2,
                   None: () =&gt; 0 );     // r == 0
</code></pre>
<p>This can be great for avoiding the use of <code>if then else</code>, because the computation continues as long as the
result is <code>Some</code> and bails otherwise. It is also great for building blocks of computation that you can compose
and reuse. Yes, actually compose and reuse, not like OOP where the promise of composability and modularity are
essentially lies.</p>
<p>To take this much further, all of the monads in this library implement a standard "functional set" of functions:</p>
<pre lang="C#"><code>    Sum                 // For Option&lt;int&gt; it's the wrapped value.
    Count               // For Option&lt;T&gt; is always 1 for Some and 0 for None. 
    Bind                // Part of the definition of anything monadic - SelectMany in LINQ
    Exists              // Any in LINQ - true if any element fits a predicate
    Filter              // Where in LINQ
    Fold                // Aggregate in LINQ
    ForAll              // All in LINQ - true if all element(s) fits a predicate
    Iter                // Passes the wrapped value(s) to an Action delegate
    Map                 // Part of the definition of any 'functor'. Select in LINQ
    Lift / LiftUnsafe   // Different meaning to Haskell, this returns the wrapped value. Dangerous, should be used sparingly.
    Select
    SelectMany
    Where
</code></pre>
<p>This makes them into what would be known in Haskell as a Type Class (although more of a catch-all type-class than a set of well-defined type-classes).</p>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Option_A.htm" rel="nofollow">Option reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/OptionExtensions_.htm" rel="nofollow">Option extensions reference</a></li>
</ul>
<p><strong>Monad transformers</strong></p>
<p>Monad transformers allow for nested monadic types. Imagine functionality for working with <code>Seq&lt;Option&lt;A&gt;&gt;</code> or a <code>Option&lt;Task&lt;A&gt;&gt;</code>, etc.</p>
<p>One problem with C# is it can't do higher order polymorphism (imagine saying <code>Monad&lt;M&lt;T&gt;&gt;</code> where the <code>M</code> is polymorphic like the <code>T</code>). There is a kind of cheat way to do it in C# through extension methods, but it still doesn't get you a single type called <code>Monad&lt;M&lt;T&gt;&gt;</code>
(which is discussed later in the section on Ad-hoc Polymorphism), so it has limitations in that you can't write generic functions over higher-kinds. However it makes some of the problems of dealing with nested monadic types easier.</p>
<p>For example, below is a list of optional integers: <code>Lst&lt;Option&lt;int&gt;&gt;</code> (see lists later). We want to double all of the <code>Some</code> values, leave the
<code>None</code> alone and keep everything in the list:</p>
<pre lang="C#"><code>    using LanguageExt;
    using static LanguageExt.Prelude;
    using LanguageExt.ClassInstances;    // Required for TInt on Sum (see ad-hoc polymorphism later)

    var list = List(Some(1), None, Some(2), None, Some(3));

    var presum = list.SumT&lt;TInt, int&gt;();                                // 6

    list = list.MapT(x =&gt; x * 2);

    var postsum = list.SumT&lt;TInt, int&gt;();
</code></pre>
<p>Notice the use of <code>MapT</code> instead of <code>Map</code> (and <code>SumT</code> instead of <code>Sum</code>). If we used <code>Map</code> (equivalent to <code>Select</code> in <code>LINQ</code>), it would look like this:</p>
<pre lang="C#"><code>    var list  = List(Some(1), None, Some(2), None, Some(3));
    
    var presum = list.Map(x =&gt; x.Sum()).Sum();
    
    list = list.Map( x =&gt; x.Map( v =&gt; v * 2 ) );
    
    var postsum = list.Map(x =&gt; x.Sum()).Sum();
</code></pre>
<p>As you can see, the intention is much clearer in the first example, which is the point of functional programming most of the time. It's about declaring intent rather than the mechanics of delivery.</p>
<p>To make this work we need extension methods for <code>List&lt;Option&lt;T&gt;&gt;</code> that define <code>MapT</code> and <code>SumT</code> [for the one  example above]. We also need one for
every pair of monads in this library (for one level of nesting <code>A&lt;B&lt;T&gt;&gt;</code>), and for every function from the "standard functional set" listed above. That's 13 monads * 13 monads * 14 functions. That's a lot of extension methods. Because of this, there's T4 template that generates 'monad transformers' that allows for nested monads.</p>
<p>This is super powerful, and means that most of the time you can leave your <code>Option&lt;T&gt;</code> or any of the monads in this library wrapped and rarely need to extract the value. You usually only need to extract the value to pass to the BCL or third-party libraries. Even then you could keep them wrapped and use <code>Iter</code> or <code>IterT</code>.</p>
<h2>
<a id="if-arg--null--throw-new-argumentnullexceptionarg" class="anchor" href="#if-arg--null--throw-new-argumentnullexceptionarg" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>if( arg == null ) throw new ArgumentNullException("arg")</h2>
<p>Another horrible side-effect of <code>null</code> is having to bullet-proof every function that takes reference arguments. This is truly tedious. Instead use this:</p>
<pre lang="C#"><code>    public void Foo( Some&lt;string&gt; arg )
    {
        string value = arg;
        ...
    }
</code></pre>
<p>By wrapping <code>string</code> as <code>Some&lt;string&gt;</code> we get free runtime <code>null</code> checking. Essentially it's impossible (well, almost) for <code>null</code> to propagate through. As you can see above, the <code>arg</code> variable casts automatically to <code>string value</code>. It's also possible to get at the inner-value like so:</p>
<pre lang="C#"><code>    public void Foo( Some&lt;string&gt; arg )
    {
        string value = arg.Value;
        ...
    }
</code></pre>
<p><code>Some&lt;T&gt;</code> is a <code>struct</code> and has implicit conversion operators that convert a type of <code>T</code> to a type of <code>Some&lt;T&gt;</code>. The constructor of <code>Some&lt;T&gt;</code> ensures that the value of <code>T</code> has a non-null value.</p>
<p>There is also an implicit cast operator from <code>Some&lt;T&gt;</code> to <code>Option&lt;T&gt;</code>. The <code>Some&lt;T&gt;</code> will automatically put the <code>Option&lt;T&gt;</code> into a <code>Some</code> state. It's not possible to go the other way and cast from <code>Option&lt;T&gt;</code> to <code>Some&lt;T&gt;</code>, because the <code>Option&lt;T&gt;</code> could be in a <code>None</code> state which would cause the <code>Some&lt;T&gt;</code> to throw <code>ValueIsNullException</code>. We want to avoid exceptions being thrown, so you must explicitly <code>match</code> to extract the <code>Some</code> value.</p>
<p>There is one weakness to this approach: if you add a member property or field to a class which is a <code>struct</code>, and if you don't initialise it, then C# is happy to go along with that. This is the reason why you shouldn't normally include reference members inside structs (or if you do, have a strategy for dealing with it).</p>
<p><code>Some&lt;T&gt;</code> unfortunately falls victim to this; it wraps a reference of type T. Therefore it can't realistically create a useful default. C# also doesn't call the default constructor for a <code>struct</code> in these circumstances, so there's no way to catch the problem early. For example:</p>
<pre lang="C#"><code>    class SomeClass
    {
        public Some&lt;string&gt; SomeValue = "Hello";
        public Some&lt;string&gt; SomeOtherValue;
    }
    
    ...
    
    public void Greet(Some&lt;string&gt; arg)
    {
        Console.WriteLine(arg);
    }
    
    ...
    
    public void App()
    {
        var obj = new SomeClass();
        Greet(obj.SomeValue);
        Greet(obj.SomeOtherValue);
    }
</code></pre>
<p>In the example above, <code>Greet(obj.SomeOtherValue);</code> will work until <code>arg</code> is used inside of the <code>Greet</code> function, which puts us back into the <code>null</code> realm. There's nothing (that I'm aware of) that can be done about this. <code>Some&lt;T&gt;</code> will throw a useful <code>SomeNotInitialisedException</code>, which should make life a little easier.</p>
<pre><code>    "Unitialised Some&lt;...&gt;"
</code></pre>
<p>So what's the best plan of attack to mitigate this?</p>
<ul>
<li>Don't use <code>Some&lt;T&gt;</code> for class members. That means the class logic might have to deal with <code>null</code> however.</li>
<li>Or, always initialise <code>Some&lt;T&gt;</code> class members. Mistakes do happen though.</li>
</ul>
<p>There's no silver bullet here unfortunately.</p>
<p><em>NOTE: Since writing this library I have come to the opinion that <code>Some&lt;T&gt;</code> isn't that useful. It's much better to protect everything else using <code>Option&lt;T&gt;</code> and immutable data structures. It doesn't fix the argument null checks unfortunately. Perhaps using a contracts library would be better.</em></p>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Some_A.htm" rel="nofollow">Some reference</a></li>
</ul>
<h2>
<a id="lack-of-lambda-and-expression-inference" class="anchor" href="#lack-of-lambda-and-expression-inference" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lack of lambda and expression inference</h2>
<p>One really annoying thing about the <code>var</code> type inference in C# is that it can't handle inline lambdas. For example this won't compile, even though it's obvious it's a <code>Func&lt;int,int,int&gt;</code>.</p>
<pre lang="C#"><code>    var add = (int x, int y) =&gt; x + y;
</code></pre>
<p>There are some good reasons for this, so best not to bitch too much. Instead use the <code>fun</code> function from this library:</p>
<pre lang="C#"><code>    var add = fun( (int x, int y) =&gt; x + y );
</code></pre>
<p>This will work for <code>Func&lt;..&gt;</code> and <code>Action&lt;..&gt;</code> types of up to seven generic arguments. <code>Action&lt;..&gt;</code> will be converted to <code>Func&lt;..,Unit&gt;</code>. To maintain an <code>Action</code> use the <code>act</code> function instead:</p>
<pre lang="C#"><code>    var log = act( (int x) =&gt; Console.WriteLine(x) );
</code></pre>
<p>If you pass a <code>Func&lt;..&gt;</code> to <code>act</code> then its return value will be dropped, so <code>Func&lt;R&gt;</code> becomes <code>Action</code>, and <code>Func&lt;T,R&gt;</code> will become <code>Action&lt;T&gt;</code>.</p>
<p>To do the same for <code>Expression&lt;..&gt;</code>, use the <code>expr</code> function:</p>
<pre lang="C#"><code>    var add = expr( (int x, int y) =&gt; x + y );
</code></pre>
<p>Note, if you're creating a <code>Func</code> or <code>Action</code> that take parameters, you must provide the type:</p>
<pre lang="C#"><code>    // Won't compile
    var add = fun( (x, y) =&gt; x + y );

    // Will compile
    var add = fun( (int x, int y) =&gt; x + y );
</code></pre>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#fun" rel="nofollow"><code>fun</code> reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#act" rel="nofollow"><code>act</code> reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#expr" rel="nofollow"><code>expr</code> reference</a></li>
</ul>
<h2>
<a id="void-isnt-a-real-type" class="anchor" href="#void-isnt-a-real-type" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Void isn't a real type</h2>
<p>Functional languages have a concept of a type that has one possible value (itself) called <code>Unit</code>. As an example, <code>bool</code> has two possible values: <code>true</code> and <code>false</code>. <code>Unit</code> has one possible value, usually represented in functional languages as <code>()</code>. You can imagine that methods that take no arguments do in fact take one argument of <code>()</code>. Anyway, we can't use the <code>()</code> representation in C#, so <code>LanguageExt</code> now provides <code>unit</code>.</p>
<pre lang="C#"><code>    public Unit Empty()
    {
        return unit;
    }
</code></pre>
<p><code>Unit</code> is the type and <code>unit</code> is the value. It is used throughout the <code>LanguageExt</code> library instead of <code>void</code>. The primary reason is that if you want to program functionally then all functions should return a value and <code>void</code> is a type with zero possible values - and that's the type-theory reason why <code>void</code> is a pain in the arse in C#. This can help a lot with LINQ expressions.</p>
<p>Any <code>void</code> function or its asynchronous equivalent <code>Task</code> can be converted using <code>fun</code> and <code>ToUnit</code> as follows:</p>
<pre lang="C#"><code>    public static Func&lt;string, Unit&gt; GetConsoleWrite() =&gt; fun&lt;string&gt;(Console.Write);
    public static Func&lt;string, Task&lt;Unit&gt;&gt; GetConsoleWriteAsync() =&gt; (string v) =&gt; Console.Out.WriteAsync(v).ToUnit();

    public static Unit WriteToConsole(string v) =&gt; fun(() =&gt; Console.Write(v))();
    public static Task&lt;Unit&gt; WriteToConsoleAsync(string v) =&gt; Console.Out.WriteAsync(v).ToUnit(); 
</code></pre>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Unit_.htm" rel="nofollow">Unit reference</a></li>
</ul>
<h2>
<a id="mutable-lists-and-dictionaries" class="anchor" href="#mutable-lists-and-dictionaries" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mutable lists and dictionaries</h2>
<p>With the new "get only" property syntax with C# 6 it's now much easier to create immutable types (which everyone should do). However, there's still going to be a bias towards mutable collections. There's a great library on NuGet called "Immutable Collections" which sits in the <code>System.Collections.Immutable</code> namespace. It brings performant immutable lists, dictionaries, etc. to C#. However, this:</p>
<pre lang="C#"><code>    var list = ImmutableList.Create&lt;string&gt;();
</code></pre>
<p>compared to this:</p>
<pre lang="C#"><code>    var list = new List&lt;string&gt;();
</code></pre>
<p>is annoying. There's clearly going to be a bias toward the shorter, easier to type, better known method of creating lists. In functional languages collections are often baked in (because they're so fundamental), with lightweight and simple syntax for generating and modifying them. So let's have some of that...</p>
<h3>
<a id="lists" class="anchor" href="#lists" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Lists</h3>
<p>There's support for <code>Cons</code>, which is the functional way of constructing lists:</p>
<pre lang="C#"><code>    var test = Cons(1, Cons(2, Cons(3, Cons(4, Cons(5, empty&lt;int&gt;())))));

    var array = test.ToArray();

    Assert.IsTrue(array[0] == 1);
    Assert.IsTrue(array[1] == 2);
    Assert.IsTrue(array[2] == 3);
    Assert.IsTrue(array[3] == 4);
    Assert.IsTrue(array[4] == 5);
</code></pre>
<p><em>Note, this isn't the strict definition of <code>Cons</code>, but it's a pragmatic implementation that returns an <code>IEnumerable&lt;T&gt;</code>, is lazy, and behaves the same. Functional purists, please don't get too worked up! I have yet to think of a way of implementing a proper type-safe <code>cons</code> (that can also represent trees, etc.) in C#.</em></p>
<p>Functional languages usually have a shortcut list constructor syntax that makes the <code>Cons</code> approach easier. It usually looks something like this:</p>
<pre lang="F#"><code>    let list = [1;2;3;4;5]
</code></pre>
<p>In C# it looks like this:</p>
<pre lang="C#"><code>    var array = new int[] { 1, 2, 3, 4, 5 };
    var list = new List&lt;int&gt; { 1, 2, 3, 4, 5 };
</code></pre>
<p>Or worse:</p>
<pre lang="C#"><code>    var list = new List&lt;int&gt;();
    list.Add(1);
    list.Add(2);
    list.Add(3);
    list.Add(4);
    list.Add(5);
</code></pre>
<p>So we provide the <code>List</code> function that takes any number of parameters and turns them into a list:</p>
<pre lang="C#"><code>    // Creates a list of five items
     var test = List(1, 2, 3, 4, 5);
</code></pre>
<p>This is much closer to the "functional way". It also returns a <code>Lst&lt;T&gt;</code> which is an immutable list implementation, making it easier to use immutable-lists than mutable ones, and requires significantly less typing.</p>
<p>Also <code>Range</code>:</p>
<pre lang="C#"><code>    // Creates a sequence of 1000 integers lazily (starting at 500).
    var list = Range(500,1000);
    
    // Produces: [0, 10, 20, 30, 40]
    var list = Range(0,50,10);
    
    // Produces: ['a,'b','c','d','e']
    var chars = Range('a','e');
</code></pre>
<p>Some of the standard set of list functions are available (in <code>LanguageExt.List</code>):</p>
<pre lang="C#"><code>    using static LanguageExt.List;
    ...

    // Generates 10,20,30,40,50
    var input = List(1, 2, 3, 4, 5);
    var output1 = map(input, x =&gt; x * 10);

    // Generates 30,40,50
    var output2 = filter(output1, x =&gt; x &gt; 20);

    // Generates 120
    var output3 = fold(output2, 0, (x, s) =&gt; s + x);

    Assert.IsTrue(output3 == 120);
</code></pre>
<p>The above can be written in a "fluent" style as well:</p>
<pre lang="C#"><code>    var res = List(1, 2, 3, 4, 5)
                .Map(x =&gt; x * 10)
                .Filter(x =&gt; x &gt; 20)
                .Fold(0, (x, s) =&gt; s + x);

    Assert.IsTrue(res == 120);
</code></pre>
<h3>
<a id="list-pattern-matching" class="anchor" href="#list-pattern-matching" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>List pattern matching</h3>
<p>Here we implement the standard functional pattern for matching on list elements. In our version you must provide at least 2 handlers:</p>
<ul>
<li>One for an empty list</li>
<li>One for a non-empty list</li>
</ul>
<p>However, you can provide up to seven handlers, one for an empty list and six for deconstructing the first six items at the head of the list.</p>
<pre lang="C#"><code>    public int Sum(IEnumerable&lt;int&gt; list) =&gt;
        match( list,
               ()      =&gt; 0,
               (x, xs) =&gt; x + Sum(xs) );

    public int Product(IEnumerable&lt;int&gt; list) =&gt;
        match( list,
               ()      =&gt; 0,
               x       =&gt; x,
               (x, xs) =&gt; x * Product(xs) );

    public void RecursiveMatchSumTest()
    {
        var list0 = List&lt;int&gt;();
        var list1 = List(10);
        var list5 = List(10,20,30,40,50);
        
        Assert.IsTrue(Sum(list0) == 0);
        Assert.IsTrue(Sum(list1) == 10);
        Assert.IsTrue(Sum(list5) == 150);
    }

    public void RecursiveMatchProductTest()
    {
        var list0 = List&lt;int&gt;();
        var list1 = List(10);
        var list5 = List(10, 20, 30, 40, 50);

        Assert.IsTrue(Product(list0) == 0);
        Assert.IsTrue(Product(list1) == 10);
        Assert.IsTrue(Product(list5) == 12000000);
    }
</code></pre>
<p>Those patterns should be very familiar to anyone who's ventured into the functional world. For those that haven't, the <code>(x,xs)</code> convention might seem odd. <code>x</code> is the item at the head of the list - <code>list.First()</code> in LINQ world. <code>xs</code> (many X-es) is the tail of the list - <code>list.Skip(1)</code> in LINQ. This recursive pattern of working on the head of the list until the list runs out is pretty much how loops are done in the functional world.</p>
<p>Be wary of recursive processing; C# will happily blow up the stack after a few thousand iterations.</p>
<p>Functional programming doesn't really <em>do</em> design patterns, but if anything is a design pattern it's the use of <code>fold</code>. If you put a bit of thought into it, you will realise that recursive processes all tend to follow a very similar pattern.</p>
<p>The two recursive examples above for calculating the sum and product of a sequence of numbers can be written as:</p>
<pre lang="C#"><code>    // Sum
    var total = fold(list, 0, (s,x) =&gt; s + x);
    
    // Product
    var total = reduce(list, (s,x) =&gt; s * x);
</code></pre>
<p><code>reduce</code> is <code>fold</code> but instead of providing an initial state value, it uses the first item in the sequence. Therefore you don't get an initial multiply by zero (unless the first item is zero!). Internally <code>fold</code>, <code>foldBack</code>, and <code>reduce</code> use an iterative loop rather than a recursive one, so no stack blowing problems!</p>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/List_.htm" rel="nofollow">List module reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Lst_A.htm" rel="nofollow"><code>Lst&lt;T&gt;</code> immutable list type reference</a></li>
</ul>
<h3>
<a id="maps" class="anchor" href="#maps" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Maps</h3>
<p>We also support dictionaries. Again the word <code>Dictionary</code> is such a pain to type, especially when there's a perfectly valid alternative used in the functional world: <code>map</code>.</p>
<p>To create an immutable map, you no longer have to type:</p>
<pre lang="C#"><code>    var dict = ImmutableDictionary.Create&lt;string,int&gt;();
</code></pre>
<p>Instead you can use:</p>
<pre lang="C#"><code>    var dict = Map&lt;string,int&gt;();
</code></pre>
<p><em><code>Map&lt;K,V&gt;</code> is an implementation of an AVL Tree (self balancing binary tree). This allows us to extend the standard <code>IDictionary</code> set of functions to include things like <code>findRange</code>.</em></p>
<p>Also you can pass in a list of tuples or key-value pairs:</p>
<pre lang="C#"><code>    var people = Map((1, "Rod"),
                     (2, "Jane"),
                     (3, "Freddy"));
</code></pre>
<p>To read an item call:</p>
<pre lang="C#"><code>    Option&lt;string&gt; result = find(people, 1);
</code></pre>
<p>This allows for branching based on whether the item is in the map or not:</p>
<pre lang="C#"><code>    // Find the item, do some processing on it and return.
    var res = match( find(people, 100),
                     Some: v  =&gt; "Hello " + v,
                     None: () =&gt; "failed" );
                   
    // Find the item and return it. If it's not there, return "failed"
    var res = find(people, 100).IfNone("failed");                   
    
    // Find the item and return it. If it's not there, return "failed"
    var res = ifNone( find(people, 100), "failed" );
</code></pre>
<p>Because checking for the existence of something in a dictionary (<code>find</code>), and then matching on its result is very common, there is a more convenient <code>match</code> override:</p>
<pre lang="C#"><code>    // Find the item, do some processing on it and return.
    var res = match( people, 1,
                     Some: v  =&gt; "Hello " + v,
                     None: () =&gt; "failed" );
</code></pre>
<p>To set an item call:</p>
<pre lang="C#"><code>    var newThings = setItem(people, 1, "Zippy");
</code></pre>
<p>Obviously because it's an immutable structure, calling <code>add</code>, <code>tryAdd</code>, <code>addOrUpdate</code>, <code>addRange</code>, <code>tryAddRange</code>, <code>addOrUpdateRange</code>, <code>remove</code>, <code>setItem</code>, <code>trySetItem</code>, <code>setItems</code> or <code>trySetItems</code>... will generate a new <code>Map&lt;K,V&gt;</code>. It's quite cunning though, and it only replaces the items that need to be replaced and returns a new map with the new items and shared old items. This massively reduces the memory allocation burden</p>
<p>By holding onto a reference to the <code>Map</code> before and after calling <code>add</code> you essentially have a perfect timeline history of the changes. Be wary that if what you're holding in the <code>Map</code> is <em>mutable</em> and you change your mutable items, then the old <code>Map</code> and the new <code>Map</code> will change, so only store immutable items in a <code>Map</code> or leave them alone if they're mutable.</p>
<ul>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_.htm" rel="nofollow">Map module reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/MapExtensions_.htm" rel="nofollow">Map extensions reference</a></li>
<li><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_K_V.htm" rel="nofollow"><code>Map&lt;K, V&gt;</code> immutable type reference</a></li>
</ul>
<h3>
<a id="map-transformers" class="anchor" href="#map-transformers" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Map transformers</h3>
<p>There are additional transformer functions for dealing with "wrapped" maps (i.e. <code>Map&lt;int, Map&lt;int, string&gt;&gt;</code>). We only cover a limited set of the full set of <code>Map</code> functions at the moment. You can wrap <code>Map</code> up to 4 levels deep and still call things like <code>Fold</code> and <code>Filter</code>. There's  interesting variants of <code>Filter</code> and <code>Map</code> called <code>FilterRemoveT</code> and <code>MapRemoveT</code>, where if a filter or map operation leaves any keys at any level with an empty <code>Map</code> then it will auto-remove them.</p>
<pre lang="C#"><code>    Map&lt;int,Map&lt;int,Map&lt;int, Map&lt;int, string&gt;&gt;&gt;&gt; wrapped = Map.create&lt;int,Map&lt;int,Map&lt;int,Map&lt;int,string&gt;&gt;();
    
    wrapped = wrapped.AddOrUpdate(1,2,3,4,"Paul");
    wrapped = wrapped.SetItemT(1,2,3,4,"Louth");
    var name = wrapped.Find(1,2,3,4);               // "Louth"
</code></pre>
<p>The <code>Map</code> transformer functions:</p>
<p><em>Note, there are only fluent versions of the transformer functions.</em></p>
<ul>
<li><code>Find</code></li>
<li><code>AddOrUpdate</code></li>
<li><code>Remove</code></li>
<li>
<code>MapRemoveT</code> - maps each level,  checks if the map is empty, in which case it removes it</li>
<li><code>MapT</code></li>
<li><code>FilterT</code></li>
<li>`FilterRemoveT`` - filters each level, checks if the map is empty, in which case it removes it</li>
<li><code>Exists</code></li>
<li><code>ForAll</code></li>
<li><code>SetItemT</code></li>
<li><code>TrySetItemT</code></li>
<li><code>FoldT</code></li>
<li>more coming...</li>
</ul>
<h2>
<a id="difficulty-in-creating-immutable-record-types" class="anchor" href="#difficulty-in-creating-immutable-record-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Difficulty in creating immutable record types</h2>
<p>It's no secret that implementing immutable record types with structural equality, structural ordering, and efficient hashing solutions is a real manual head-ache of implementing <code>Equals</code>, <code>GetHashCode</code>, deriving from <code>IEquatable&lt;A&gt;</code>, <code>IComparer&lt;A&gt;</code>, and implementing the operators: <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>. It is a constant maintenance headache of making sure they're kept up to date when new fields are added to the type, with no compilation errors if you forget to do it.</p>
<h2>
<a id="recorda" class="anchor" href="#recorda" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Record&lt;A&gt;</code>
</h2>
<p>This can now be achieved simply by deriving your type from <code>Record&lt;A&gt;</code> where <code>A</code> is the type you want to have structural equality and ordering:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestClass</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">TestClass</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">X</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Y</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="n">Guid</span> <span class="n">Z</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">TestClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">string</span> <span class="n">y</span><span class="p">,</span> <span class="n">Guid</span> <span class="n">z</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
            <span class="n">Z</span> <span class="p">=</span> <span class="n">z</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre>
<p>This gives you <code>Equals</code>, <code>IEquatable.Equals</code>, <code>IComparer.CompareTo</code>, <code>GetHashCode</code>, <code>operator==</code>, <code>operator!=</code>, <code>operator &gt;</code>, <code>operator &gt;=</code>, <code>operator &lt;</code>, and <code>operator &lt;=</code> implemented by default. It also gives you a default <code>ToString()</code> implementation and <code>ISerializable.GetObjectData()</code> with a deserialisation constructor.</p>
<p>Note that only <em>fields</em> or <em>field backed properties</em> are used in the structural comparisons and hash-code building. There are also <code>Attribute</code>s for opting fields out of the equality testing, ordering comparisons, hash-code generation, stringification (<code>ToString</code>), and serialisation:</p>
<ul>
<li>
<code>Equals()</code> - <code>NonEq</code>
</li>
<li>
<code>CompareTo()</code> - <code>NonOrd</code>
</li>
<li>
<code>GetHashCode()</code> - <code>NonHash</code>
</li>
<li>
<code>ToString()</code> - <code>NonShow</code>
</li>
<li>Serialization - <code>NonSerializable</code>
</li>
</ul>
<p>For example, here's a record type that opts out of various default behaviours:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestClass2</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">TestClass2</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="p">[</span><span class="n">NonEq</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">X</span><span class="p">;</span>

        <span class="p">[</span><span class="n">NonHash</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Y</span><span class="p">;</span>

        <span class="p">[</span><span class="n">NonShow</span><span class="p">]</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="n">Guid</span> <span class="n">Z</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">TestClass2</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">string</span> <span class="n">y</span><span class="p">,</span> <span class="n">Guid</span> <span class="n">z</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
            <span class="n">Z</span> <span class="p">=</span> <span class="n">z</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre>
<p>If you want your type to serialise with Json.NET or other serialisers, then you will need to add an extra serialisation constructor that calls the default base implementation:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestClass</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">TestClass</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">X</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Y</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="n">Guid</span> <span class="n">Z</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">TestClass</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">string</span> <span class="n">y</span><span class="p">,</span> <span class="n">Guid</span> <span class="n">z</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
            <span class="n">Z</span> <span class="p">=</span> <span class="n">z</span><span class="p">;</span>
        <span class="p">}</span>
        
        <span class="nf">TestClass</span><span class="p">(</span><span class="n">SerializationInfo</span> <span class="n">info</span><span class="p">,</span> <span class="n">StreamingContext</span> <span class="n">context</span><span class="p">)</span> 
            <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">info</span><span class="p">,</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
    <span class="p">}</span>
</pre>
<p>This will do full structural equality as the following examples demonstrate:</p>
<pre lang="c#" class="highlight-c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">Cons</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">Cons</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">A</span> <span class="n">Head</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">Tail</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Cons</span><span class="p">(</span><span class="n">A</span> <span class="n">head</span><span class="p">,</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">tail</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Head</span> <span class="p">=</span> <span class="n">head</span><span class="p">;</span>
        <span class="n">Tail</span> <span class="p">=</span> <span class="n">tail</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">ConsTests</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">listA</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">4</span><span class="p">,</span> <span class="k">null</span><span class="p">))));</span>
    <span class="kt">var</span> <span class="n">listB</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">4</span><span class="p">,</span> <span class="k">null</span><span class="p">))));</span>
    <span class="kt">var</span> <span class="n">listC</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="n">Cons</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">null</span><span class="p">)));</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">listA</span> <span class="p">==</span> <span class="n">listB</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">listB</span> <span class="p">!=</span> <span class="n">listC</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">listA</span> <span class="p">!=</span> <span class="n">listC</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">A</span> <span class="n">Value</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">Left</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">Right</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Tree</span><span class="p">(</span><span class="n">A</span> <span class="k">value</span><span class="p">,</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">left</span><span class="p">,</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">right</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Value</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="n">Left</span> <span class="p">=</span> <span class="n">left</span><span class="p">;</span>
        <span class="n">Right</span> <span class="p">=</span> <span class="n">right</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">void</span> <span class="nf">TreeTests</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">treeA</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">5</span><span class="p">,</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">),</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">7</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">9</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">)));</span>
    <span class="kt">var</span> <span class="n">treeB</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">5</span><span class="p">,</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">),</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">7</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">9</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">)));</span>
    <span class="kt">var</span> <span class="n">treeC</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">5</span><span class="p">,</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">3</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">),</span> <span class="k">new</span> <span class="n">Tree</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;(</span><span class="m">7</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="k">null</span><span class="p">));</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">treeA</span> <span class="p">==</span> <span class="n">treeB</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">treeB</span> <span class="p">!=</span> <span class="n">treeC</span><span class="p">);</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">treeA</span> <span class="p">!=</span> <span class="n">treeC</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>There are some <a href="https://github.com/louthy/language-ext/blob/master/LanguageExt.Tests/RecordTypesTest.cs" rel="nofollow">unit tests</a> to see this in action.</p>
<blockquote>
<p>Inheritance is not supported in <code>Record</code> derived types, so if you derive a type from a type that derives from <code>Record</code> then you won't magically inherit any equality, ordering, hash-code, etc. behaviours. This feature is explicitly here to implement record-like functionality, which do not support inheritance in other functional languages. Equality of origin is explicitly checked for.</p>
</blockquote>
<h2>
<a id="recordtypea" class="anchor" href="#recordtypea" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>RecordType&lt;A&gt;</code>
</h2>
<p>You can also use the "toolkit" that <code>Record&lt;A&gt;</code> uses to build this functionality in your own bespoke types (perhaps if you want to use this for <code>struct</code> comparisons or if you can't derive directly from <code>Record&lt;A&gt;</code>, or maybe you just want some of the functionality for ad-hoc behaviour):</p>
<p>The toolkit is composed of four functions:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;.</span><span class="nf">Hash</span><span class="p">(</span><span class="n">record</span><span class="p">);</span>
</pre>
<p>This will provide the hash-code for the record of type <code>A</code> provided. It can be used for your default <code>GetHashCode()</code> implementation.</p>
<pre lang="c#" class="highlight-c#">    <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;.</span><span class="nf">Equality</span><span class="p">(</span><span class="n">record</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>
</pre>
<p>This provides structural equality with the record of type <code>A</code> and the record of type <code>object</code>. The types must match for the equality to pass. It can be used for your default <code>Equals(object)</code> implementation.</p>
<pre lang="c#" class="highlight-c#">    <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;.</span><span class="nf">EqualityTyped</span><span class="p">(</span><span class="n">record1</span><span class="p">,</span> <span class="n">record2</span><span class="p">);</span>
</pre>
<p>This provides structural equality with the record of type <code>A</code> and another record of type <code>A</code>. It can be used for your default <code>Equals(a, b)</code> method for the <code>IEquatable&lt;A&gt;</code> implementation.</p>
<pre lang="c#" class="highlight-c#">    <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;.</span><span class="nf">Compare</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">other</span><span class="p">);</span>
</pre>
<p>This provides a structural ordering comparison with the record of type <code>A</code> and another record the record of type <code>A</code>. It can be used for your default <code>CompareTo(a, b)</code> method for the <code>IComparable&lt;A&gt;</code> implementation.</p>
<p>Below is the toolkit in use,  it's used to build a <code>struct</code> type that has structural equality, ordering, and hash-code implementation.</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">TestStruct</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;,</span> <span class="n">IComparable</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">X</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Y</span><span class="p">;</span>
        <span class="k">public</span> <span class="k">readonly</span> <span class="n">Guid</span> <span class="n">Z</span><span class="p">;</span>

        <span class="k">public</span> <span class="nf">TestStruct</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">string</span> <span class="n">y</span><span class="p">,</span> <span class="n">Guid</span> <span class="n">z</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
            <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
            <span class="n">Z</span> <span class="p">=</span> <span class="n">z</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">()</span> <span class="p">=&gt;</span>
            <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;.</span><span class="nf">Hash</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="k">public</span> <span class="k">override</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="kt">object</span> <span class="n">obj</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;.</span><span class="nf">Equality</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">obj</span><span class="p">);</span>

        <span class="k">public</span> <span class="kt">int</span> <span class="nf">CompareTo</span><span class="p">(</span><span class="n">TestStruct</span> <span class="n">other</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;.</span><span class="nf">Compare</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">other</span><span class="p">);</span>

        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="n">TestStruct</span> <span class="n">other</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="n">RecordType</span><span class="p">&lt;</span><span class="n">TestStruct</span><span class="p">&gt;.</span><span class="nf">EqualityTyped</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">other</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<h2>
<a id="transformation-of-immutable-types" class="anchor" href="#transformation-of-immutable-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Transformation of immutable types</h2>
<p>If you're writing functional code you should treat your types as values. Which means they should be immutable. One common way to do this is to use <code>readonly</code> fields and provide a <code>With</code> function for mutation. i.e.</p>
<pre lang="c#" class="highlight-c#"><span class="k">public</span> <span class="k">class</span> <span class="nc">A</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">X</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Y</span> <span class="n">Y</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">A</span><span class="p">(</span><span class="n">X</span> <span class="n">x</span><span class="p">,</span> <span class="n">Y</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">A</span> <span class="nf">With</span><span class="p">(</span><span class="n">X</span> <span class="n">X</span> <span class="p">=</span> <span class="k">null</span><span class="p">,</span> <span class="n">Y</span> <span class="n">Y</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="k">new</span> <span class="nf">A</span><span class="p">(</span>
            <span class="n">X</span> <span class="p">??</span> <span class="k">this</span><span class="p">.</span><span class="n">X</span><span class="p">,</span>
            <span class="n">Y</span> <span class="p">??</span> <span class="k">this</span><span class="p">.</span><span class="n">Y</span>
        <span class="p">);</span>
<span class="p">}</span>
</pre>
<p>Then transformation can be achieved by using the named arguments feature of C# thus:</p>
<pre lang="c#" class="highlight-c#"><span class="n">val</span> <span class="p">=</span> <span class="n">val</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">X</span><span class="p">:</span> <span class="n">x</span><span class="p">);</span>

<span class="n">val</span> <span class="p">=</span> <span class="n">val</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Y</span><span class="p">:</span> <span class="n">y</span><span class="p">);</span>

<span class="n">val</span> <span class="p">=</span> <span class="n">val</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">X</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">Y</span><span class="p">:</span> <span class="n">y</span><span class="p">);</span>
</pre>
<h3>
<a id="with" class="anchor" href="#with" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>[With]</code>
</h3>
<p>It can be quite tedious to write the <code>With</code> function however. And so, if you include the <code>LanguageExt.CodeGen</code> nu-get package in your solution you gain the ability to use the <code>[With]</code> attribtue on a type. This will build the <code>With</code> method for you.</p>
<blockquote>
<p>NOTE: The <code>LanguageExt.CodeGen</code> package and its dependencies will not be included in your final build - it is purely there to generate the code.</p>
</blockquote>
<p>You must however:</p>
<ul>
<li>Make the <code>class</code> <code>partial</code>
</li>
<li>Have a constructor that takes the fields in the order they are in the type</li>
<li>The names of the arguments should be the same as the field, but with the first character lower-case</li>
</ul>
<p>i.e.</p>
<pre lang="c#" class="highlight-c#"><span class="na">[With]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">A</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">X</span> <span class="n">X</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Y</span> <span class="n">Y</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">A</span><span class="p">(</span><span class="n">X</span> <span class="n">x</span><span class="p">,</span> <span class="n">Y</span> <span class="n">y</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">;</span>
        <span class="n">Y</span> <span class="p">=</span> <span class="n">y</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<h2>
<a id="transformation-of-nested-immutable-types-with-lenses" class="anchor" href="#transformation-of-nested-immutable-types-with-lenses" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Transformation of nested immutable types with Lenses</h2>
<p>One of the problems with immutable types is trying to transform something nested deep in several data structures. This often requires a lot of nested <code>With</code> methods, which are not very pretty or easy to use.</p>
<p>Enter the <code>Lens&lt;A, B&gt;</code> type.</p>
<p>Lenses encapsulate the getter and setter of a field in an immutable data structure and are composable:</p>
<pre lang="c#" class="highlight-c#"><span class="na">[With]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Name</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Surname</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Person</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">string</span> <span class="n">surname</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">Surname</span> <span class="p">=</span> <span class="n">surname</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">name</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Name</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">surname</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Surname</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Surname</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>
<span class="p">}</span>
</pre>
<p>This allows direct transformation of the value:</p>
<pre lang="c#" class="highlight-c#"><span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="p">(</span><span class="s">"Joe"</span><span class="p">,</span> <span class="s">"Bloggs"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">name</span> <span class="p">=</span> <span class="n">Person</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="nf">Get</span><span class="p">(</span><span class="n">person</span><span class="p">);</span>
<span class="kt">var</span> <span class="n">person2</span> <span class="p">=</span> <span class="n">Person</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="n">name</span> <span class="p">+</span> <span class="s">"l"</span><span class="p">,</span> <span class="n">person</span><span class="p">);</span>  <span class="c1">// Joel Bloggs</span>
</pre>
<p>This can also be achieved using the <code>Update</code> function:</p>
<pre lang="c#" class="highlight-c#"><span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="p">(</span><span class="s">"Joe"</span><span class="p">,</span> <span class="s">"Bloggs"</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">person2</span> <span class="p">=</span> <span class="n">Person</span><span class="p">.</span><span class="n">name</span><span class="p">.</span><span class="nf">Update</span><span class="p">(</span><span class="n">name</span> <span class="p">=&gt;</span> <span class="n">name</span> <span class="p">+</span> <span class="s">"l"</span><span class="p">,</span> <span class="n">person</span><span class="p">);</span>  <span class="c1">// Joel Bloggs</span>
</pre>
<p>The power of lenses really becomes apparent when using nested immutable types, because lenses can be composed. So, let's first create a <code>Role</code> type which will be used with the <code>Person</code> type to represent an employee's job title and salary:</p>
<pre lang="c#" class="highlight-c#"><span class="na">[With]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">Role</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Title</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">Salary</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Role</span><span class="p">(</span><span class="kt">string</span> <span class="n">title</span><span class="p">,</span> <span class="kt">int</span> <span class="n">salary</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Title</span> <span class="p">=</span> <span class="n">title</span><span class="p">;</span>
        <span class="n">Salary</span> <span class="p">=</span> <span class="n">salary</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Role</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">title</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Role</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Title</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Title</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Role</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="n">salary</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Role</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Salary</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Salary</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>
<span class="p">}</span>

<span class="na">[With]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Name</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Surname</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Role</span> <span class="n">Role</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Person</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">string</span> <span class="n">surname</span><span class="p">,</span> <span class="n">Role</span> <span class="n">role</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">Surname</span> <span class="p">=</span> <span class="n">surname</span><span class="p">;</span>
        <span class="n">Role</span> <span class="p">=</span> <span class="n">role</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">name</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Name</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> <span class="n">surname</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Surname</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Surname</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>

    <span class="k">public</span> <span class="k">static</span> <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="n">Role</span><span class="p">&gt;</span> <span class="n">role</span> <span class="p">=&gt;</span>
        <span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="n">Role</span><span class="p">&gt;.</span><span class="nf">New</span><span class="p">(</span>
            <span class="n">Get</span><span class="p">:</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="n">Role</span><span class="p">,</span>
            <span class="n">Set</span><span class="p">:</span> <span class="n">x</span> <span class="p">=&gt;</span> <span class="n">p</span> <span class="p">=&gt;</span> <span class="n">p</span><span class="p">.</span><span class="nf">With</span><span class="p">(</span><span class="n">Role</span><span class="p">:</span> <span class="n">x</span><span class="p">));</span>
<span class="p">}</span>

</pre>
<p>We can now compose the lenses within the types to access the nested fields:</p>
<pre lang="c#" class="highlight-c#"><span class="kt">var</span> <span class="n">cto</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="p">(</span><span class="s">"Joe"</span><span class="p">,</span> <span class="s">"Bloggs"</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Role</span><span class="p">(</span><span class="s">"CTO"</span><span class="p">,</span> <span class="m">150000</span><span class="p">));</span>

<span class="kt">var</span> <span class="n">personSalary</span> <span class="p">=</span> <span class="nf">lens</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="n">role</span><span class="p">,</span> <span class="n">Role</span><span class="p">.</span><span class="n">salary</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">cto2</span> <span class="p">=</span> <span class="n">personSalary</span><span class="p">.</span><span class="nf">Set</span><span class="p">(</span><span class="m">170000</span><span class="p">,</span> <span class="n">cto</span><span class="p">);</span>
</pre>
<h3>
<a id="withlens" class="anchor" href="#withlens" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>[WithLens]</code>
</h3>
<p>Typing the lens fields out every time is even more tedious than writing the <code>With</code> function, and so there is code generation for that too: using the <code>[WithLens]</code> attribute. Next, we'll use some of the built-in lenses in the <code>Map</code> type to access and mutate a <code>Appt</code> type within a map:</p>
<pre lang="c#" class="highlight-c#"><span class="na">[WithLens]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">Person</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Name</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">string</span> <span class="n">Surname</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">Map</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Appt</span><span class="p">&gt;</span> <span class="n">Appts</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Person</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">string</span> <span class="n">surname</span><span class="p">,</span> <span class="n">Map</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Appt</span><span class="p">&gt;</span> <span class="n">appts</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">Surname</span> <span class="p">=</span> <span class="n">surname</span><span class="p">;</span>
        <span class="n">Appts</span> <span class="p">=</span> <span class="n">appts</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="na">[WithLens]</span>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">Appt</span> <span class="p">:</span> <span class="n">Record</span><span class="p">&lt;</span><span class="n">Appt</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">Id</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">DateTime</span> <span class="n">StartDate</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">readonly</span> <span class="n">ApptState</span> <span class="n">State</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Appt</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="n">DateTime</span> <span class="n">startDate</span><span class="p">,</span> <span class="n">ApptState</span> <span class="n">state</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Id</span> <span class="p">=</span> <span class="n">id</span><span class="p">;</span>
        <span class="n">StartDate</span> <span class="p">=</span> <span class="n">startDate</span><span class="p">;</span>
        <span class="n">State</span> <span class="p">=</span> <span class="n">state</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">enum</span> <span class="n">ApptState</span>
<span class="p">{</span>
    <span class="n">NotArrived</span><span class="p">,</span>
    <span class="n">Arrived</span><span class="p">,</span>
    <span class="n">DNA</span><span class="p">,</span>
    <span class="n">Cancelled</span>
<span class="p">}</span>
</pre>
<p>So, here we have a <code>Person</code> with a map of <code>Appt</code> types. And we want to update an appointment state to be <code>Arrived</code>:</p>
<pre lang="c#" class="highlight-c#"><span class="c1">// Generate a Person with three Appts in a Map</span>
<span class="kt">var</span> <span class="n">person</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Person</span><span class="p">(</span><span class="s">"Paul"</span><span class="p">,</span> <span class="s">"Louth"</span><span class="p">,</span> <span class="nf">Map</span><span class="p">(</span>
    <span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Appt</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"1/1/2010"</span><span class="p">),</span> <span class="n">ApptState</span><span class="p">.</span><span class="n">NotArrived</span><span class="p">)),</span>
    <span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Appt</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"2/1/2010"</span><span class="p">),</span> <span class="n">ApptState</span><span class="p">.</span><span class="n">NotArrived</span><span class="p">)),</span>
    <span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="k">new</span> <span class="nf">Appt</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"3/1/2010"</span><span class="p">),</span> <span class="n">ApptState</span><span class="p">.</span><span class="n">NotArrived</span><span class="p">))));</span>

<span class="c1">// Local function for composing a new lens from 3 other lenses</span>
<span class="n">Lens</span><span class="p">&lt;</span><span class="n">Person</span><span class="p">,</span> <span class="n">ApptState</span><span class="p">&gt;</span> <span class="nf">setState</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">)</span> <span class="p">=&gt;</span> 
    <span class="nf">lens</span><span class="p">(</span><span class="n">Person</span><span class="p">.</span><span class="n">appts</span><span class="p">,</span> <span class="n">Map</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">Appt</span><span class="p">&gt;.</span><span class="nf">item</span><span class="p">(</span><span class="n">id</span><span class="p">),</span> <span class="n">Appt</span><span class="p">.</span><span class="n">state</span><span class="p">);</span>

<span class="c1">// Transform</span>
<span class="kt">var</span> <span class="n">person2</span> <span class="p">=</span> <span class="nf">setState</span><span class="p">(</span><span class="m">2</span><span class="p">).</span><span class="nf">Set</span><span class="p">(</span><span class="n">ApptState</span><span class="p">.</span><span class="n">Arrived</span><span class="p">,</span> <span class="n">person</span><span class="p">);</span>
</pre>
<p>Notice the local-function which takes an ID and uses that with the <code>item</code> lens in the <code>Map</code> type to mutate an <code>Appt</code>. Very powerful stuff.</p>
<p>There are a number of useful lenses in the collection types that can do common things like mutate by index, head, tail, last, etc.</p>
<h2>
<a id="the-awful-out-parameter" class="anchor" href="#the-awful-out-parameter" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The awful <code>out</code> parameter</h2>
<p>This has to be one of the most awful patterns in C#:</p>
<pre lang="C#"><code>    int result;
    if( Int32.TryParse(value, out result) )
    {
        ...
    }
    else
    {
        ...
    }
</code></pre>
<p>There's all kinds of wrong there. Essentially the function needs to return two pieces of information:</p>
<ul>
<li>Whether the parse was a success or not</li>
<li>The successfully parsed value</li>
</ul>
<p>This is a common theme throughout the .NET framework. For example on <code>IDictionary.TryGetValue</code></p>
<pre lang="C#"><code>    int value;
    if( dict.TryGetValue("thing", out value) )
    {
       ...
    }
    else
    {
       ...
    }
</code></pre>
<p>So to solve it we now have methods that instead of returning <code>bool</code>, return <code>Option&lt;T&gt;</code>. If the operation fails it returns <code>None</code>. If it succeeds it returns <code>Some(the value)</code> which can then be matched. Here's some usage examples:</p>
<pre lang="C#"><code>    
    // Attempts to parse the value, uses 0 if it can't
    int res = parseInt("123").IfNone(0);

    // Attempts to parse the value, uses 0 if it can't
    int res = ifNone(parseInt("123"), 0);

    // Attempts to parse the value, doubles it if can, returns 0 otherwise
    int res = parseInt("123").Match(
                  Some: x =&gt; x * 2,
                 None: () =&gt; 0
              );

    // Attempts to parse the value, doubles it if can, returns 0 otherwise
    int res = match( parseInt("123"),
                     Some: x =&gt; x * 2,
                     None: () =&gt; 0 );
</code></pre>
<p><code>out</code> method variants</p>
<ul>
<li><code>IDictionary&lt;K, V&gt;.TryGetValue</code></li>
<li><code>IReadOnlyDictionary&lt;K, V&gt;.TryGetValue</code></li>
<li>
<code>int.TryParse</code> becomes <code>parseInt</code>
</li>
<li>
<code>long.TryParse</code> becomes <code>parseLong</code>
</li>
<li>
<code>short.TryParse</code> becomes <code>parseShort</code>
</li>
<li>
<code>char.TryParse</code> becomes <code>parseChar</code>
</li>
<li>
<code>sbyte.TryParse</code> becomes <code>parseSByte</code>
</li>
<li>
<code>byte.TryParse</code> becomes <code>parseByte</code>
</li>
<li>
<code>ulong.TryParse</code> becomes <code>parseULong</code>
</li>
<li>
<code>uint.TryParse</code> becomes <code>parseUInt</code>
</li>
<li>
<code>ushort.TryParse</code> becomes <code>parseUShort</code>
</li>
<li>
<code>float.TryParse</code> becomes <code>parseFloat</code>
</li>
<li>
<code>double.TryParse</code> becomes <code>parseDouble</code>
</li>
<li>
<code>decimal.TryParse</code> becomes <code>parseDecimal</code>
</li>
<li>
<code>bool.TryParse</code> becomes <code>parseBool</code>
</li>
<li>
<code>Guid.TryParse</code> becomes <code>parseGuid</code>
</li>
<li>
<code>DateTime.TryParse</code> becomes <code>parseDateTime</code>
</li>
<li>
<code>DateTimeOffset.TryParse</code> becomes <code>parseDateTimeOffset</code>
</li>
<li>
<code>TimeSpan.TryParse</code> becomes <code>parseTimeSpan</code>
</li>
<li>
<code>Enum.TryParse</code> becomes <code>parseEnum</code>
</li>
</ul>
<p><em>any others you think should be included, please get in touch</em></p>
<h2>
<a id="ad-hoc-polymorphism" class="anchor" href="#ad-hoc-polymorphism" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Ad-hoc polymorphism</h2>
<blockquote>
<p><em>This is where things get a little crazy!  This section is taking what's possible with C# to its limits. None of what follows is essential for 99% of the use cases for this library. However, the seasoned C# programmer will recognise some of the issues raised (like no common numeric base-type); and experienced functional programmers will recognise the category theory creeping in... Just remember, this is all optional, but also pretty powerful if you want to go for it</em>.</p>
</blockquote>
<p>Ad-hoc polymorphism has long been believed to not be possible in C#. However with some cunning it is. Ad-hoc polymorphism allows programmers to add traits to a type later. For example in C# it would be amazing if we had an interface called <code>INumeric</code> for numeric types like <code>int</code>, <code>long</code>, <code>double</code>, etc. The reason this doesn't exist is if you write a function like:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">INumeric</span> <span class="nf">Add</span><span class="p">(</span><span class="n">INumeric</span> <span class="n">x</span><span class="p">,</span> <span class="n">INumeric</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span><span class="p">;</span>
</pre>
<p>Then it would cause boxing. Which is slow (well, slower). I can only assume that's why it wasn't added by the BCL team. Anyway, it's possible to create a numeric type, very much like a type-class in Haskell, and ad-hoc <em>instances</em> of the numeric <em>type-class</em> that allow for generic numeric operations without boxing.</p>
<blockquote>
<p>From now on I will call them type-classes and class-instances, or just instances. This is not exactly the same as Haskell's type-classes. If anything it's closer to Scala's implicits. However to make it easier to discuss them I will steal from Haskell's lexicon.</p>
</blockquote>
<h4>
<a id="numa" class="anchor" href="#numa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Num&lt;A&gt;</code>
</h4>
<p>So for example, this is how to create a number type-class:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">A</span> <span class="nf">Add</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span> <span class="n">y</span><span class="p">);</span>
        <span class="n">A</span> <span class="nf">Subtract</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span> <span class="n">y</span><span class="p">);</span>
        <span class="p">...</span>
    <span class="p">}</span>
</pre>
<p>Notice how there are two arguments to <code>Add</code> and <code>Subtract</code>. Normally if I was going to implement this <code>interface</code> the left-hand-side of the <code>Add</code> and <code>Subtract</code> would be <code>this</code>. I will implement the <em>ad-hoc</em> class-instance to demonstrate why that is:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">struct</span> <span class="nc">TInt</span> <span class="p">:</span> <span class="n">Num</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="nf">Subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">-</span> <span class="n">y</span><span class="p">;</span>
        <span class="p">...</span>
    <span class="p">}</span>
</pre>
<p>See how <code>TInt</code> is a <code>struct</code>?  Structs have a useful property in C# in that they can't be <code>null</code>. So we can invoke the operations like so:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">int</span> <span class="n">r</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">TInt</span><span class="p">).</span><span class="nf">Add</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">20</span><span class="p">);</span>
</pre>
<p>The important thing to note is that <code>default(TInt)</code> gets optimisied out in a release build, so there's no cost to the invocation of <code>Add</code>. The <code>Add</code> and <code>Subtract</code> methods both take <code>int</code> and return <code>int</code>. So therefore there's no boxing at all.</p>
<p>If we now implement <code>TFloat</code>:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">struct</span> <span class="nc">TFloat</span> <span class="p">:</span> <span class="n">Num</span><span class="p">&lt;</span><span class="kt">float</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="nf">Add</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">+</span> <span class="n">y</span><span class="p">;</span>
        <span class="k">public</span> <span class="kt">float</span> <span class="nf">Subtract</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">-</span> <span class="n">y</span><span class="p">;</span>
        <span class="p">...</span>
    <span class="p">}</span>
</pre>
<p>Then we can see how a general function could be written to take any numeric type:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">A</span> <span class="n">DoubleIt</span><span class="p">&lt;</span><span class="n">NumA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">A</span> <span class="n">x</span><span class="p">)</span> <span class="k">where</span> <span class="n">NumA</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
        <span class="k">default</span><span class="p">(</span><span class="n">NumA</span><span class="p">).</span><span class="nf">Add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">x</span><span class="p">);</span>
</pre>
<p>The important bit is the <code>NumA</code> generic argument, and the constraint of <code>struct, Num&lt;A&gt;</code>. That allows us to call <code>default(NumA)</code> to get the type-class instance and invoke <code>Add</code>.</p>
<p>And so this can now be called by:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">int</span> <span class="n">a</span>   <span class="p">=</span> <span class="n">DoubleIt</span><span class="p">&lt;</span><span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="m">5</span><span class="p">);</span>        <span class="c1">// 10</span>
    <span class="kt">float</span> <span class="n">b</span> <span class="p">=</span> <span class="n">DoubleIt</span><span class="p">&lt;</span><span class="n">TFloat</span><span class="p">,</span> <span class="kt">float</span><span class="p">&gt;(</span><span class="m">5.25</span><span class="p">);</span> <span class="c1">// 10.5</span>
</pre>
<p>By expanding the amount of operations that the <code>Num&lt;A&gt;</code> type-class can do, you can perform any numeric operation you like. If you like you can add new numeric types (say for complex numbers, or whatever), where the rules of the type are kept in the <em>ad-hoc</em> instance.</p>
<p>Luckily you don't need to do that, because I have created the <code>Num&lt;A&gt;</code> type (in the <code>LanguageExt.TypeClasses</code> namespace), as well as <code>Floating&lt;A&gt;</code> (with all of the operations from <code>Math</code>; like <code>Sin</code>, <code>Cos</code>, <code>Exp</code>, etc.). <code>Num&lt;A&gt;</code> also has a base-type of <code>Arithmetic&lt;A&gt;</code> which supports <code>Plus</code>, <code>Subtract</code>, <code>Product</code>, <code>Negate</code>. This is for types which don't need the full spec of the <code>Num&lt;A&gt;</code> type. I have also mapped all of the core numeric types to instances: <code>TInt</code>, <code>TShort</code>, <code>TLong</code>, <code>TFloat</code>, <code>TDouble</code>, <code>TDecimal</code>, <code>TBigInt</code>, etc. So it's possible to write truly generic numeric code once.</p>
<blockquote>
<p>There's no getting around the fact that providing the class-instance in the generic arguments list is annoying (and later you'll see how annoying). The Roslyn team are looking into a type-classes like feature for a future version of C# (variously named: 'Concepts' or 'Shapes'). So this will I'm sure be rectified, and when it is, it will be implemented exactly as I am using them here.</p>
<p>Until then the pain of providing the generic arguments must continue. You do however get a <em>super-powered C#</em> in the mean-time.</p>
<p>The need to write this kind of super-generic code is rare; but when you need it, <em>you need it</em> - and right now this is simply the most powerful way.</p>
</blockquote>
<h4>
<a id="eqa" class="anchor" href="#eqa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Eq&lt;A&gt;</code>
</h4>
<p>Next up is <code>Eq&lt;A&gt;</code>. Equality testing in C# is an absolute nightmare. From the different semantics of <code>Equals</code> and <code>==</code>, to <code>IEqualityComparer</code>, and the enormous hack which is <code>EqualityComparer.Default</code> (which doesn't blow up at compile-time if your code is wrong).</p>
<p>The <code>Eq&lt;A&gt;</code> type-class looks like this:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Eq</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span> <span class="n">y</span><span class="p">);</span>
        <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>There are <code>Eq</code> prefixed instances for all common types (<code>EqInt</code>, <code>EqString</code>, <code>EqGuid</code> etc.), as well as for all of the types in this library (<code>EqLst</code>, <code>EqSet</code>, <code>EqTry</code>, etc). All of the numeric types (<code>TInt</code>, <code>TDouble</code>, etc.) also implement <code>Eq&lt;A&gt;</code>.</p>
<p>To make it slightly prettier to use in code, you can use the <code>Prelude</code> <code>equals</code> function:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">bool</span> <span class="n">x</span> <span class="p">=</span> <span class="k">equals</span><span class="p">&lt;</span><span class="n">EqInt</span><span class="p">&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// True</span>
</pre>
<p>Or use <code>default</code> as shown before:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">bool</span> <span class="n">x</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">EqInt</span><span class="p">).</span><span class="nf">Equals</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span> <span class="c1">// True</span>
</pre>
<p>One final way is:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">bool</span> <span class="n">x</span> <span class="p">=</span> <span class="n">EqInt</span><span class="p">.</span><span class="n">Inst</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
</pre>
<p><code>Inst</code> is defined on all of the instances in lang-ext, but it's not an 'official feature'. Anybody could implement an ad-hoc implementation of <code>Eq&lt;A&gt;</code> and not provide an <code>Inst</code>.</p>
<p>For example you may call this directly:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">bool</span> <span class="n">x</span> <span class="p">=</span> <span class="n">EqLst</span><span class="p">.</span><span class="n">Inst</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">),</span> <span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">));</span> <span class="c1">// true</span>
</pre>
<p>Because you may be concerned about calling:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">bool</span> <span class="n">x</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">)</span> <span class="p">==</span> <span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">);</span> <span class="c1">// ?</span>
</pre>
<p>... as all C# programmers are at some point, because we have no idea most of the time whether <code>==</code> does what we think it should.</p>
<blockquote>
<p>Just FYI <code>List(1,2,3) == List(1,2,3)</code> does work properly!  As do all types in language-ext.</p>
</blockquote>
<p>There are two variants of the immutable <code>HashSet</code> in language-ext:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">EqA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">EqA</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Eq</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
</pre>
<p>What's interesting about the second one is that the equality <em>definition</em> is baked into the type. So this:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">EqString</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> 
</pre>
<p>Is not compatible with:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">HashSet</span><span class="p">&lt;</span><span class="n">EqStringOrdinalIgnoreCase</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;</span> 
</pre>
<p>And if you think about that, it's right. The strings that are used as keys in the <code>HashSet&lt;EqString, string&gt;</code> do not have the same properties as the strings in <code>HashSet&lt;EqStringOrdinalIgnoreCase, string&gt;</code>. So even though they're both strings, they have different semantics (which cause wildly different behaviour for things like set intersection, unions, etc.)</p>
<p>Now compare that to <code>HashSet&lt;T&gt;</code> in the BCL, or <code>ImmutableHashSet&lt;T&gt;</code> in <code>System.Collections.Immutable</code>, where two different sets with different <code>IEqualityComparer</code> types injected will cause undefined results when used together.</p>
<blockquote>
<p>That's hopefully a small glimpse into the potential for improving type-safeness in C#.</p>
</blockquote>
<h4>
<a id="orda" class="anchor" href="#orda" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Ord&lt;A&gt;</code>
</h4>
<p><code>Ord</code> is for ordering. i.e. a <code>IComparable</code> replacement. By the way, these names <code>Eq</code>, <code>Ord</code>, <code>Num</code>, are all lifted from Haskell. I much prefer the short concise names that still convey meaning than the bulky and often clumsy names of the BCL.</p>
<p>This is <code>Ord&lt;A&gt;</code>, it derives from <code>Eq&lt;A&gt;</code></p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Ord</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Eq</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="kt">int</span> <span class="nf">Compare</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>Usage should be self-explanatory now, but the important thing to note here is that because 'type classes' are just interfaces, they can also have an inheritance hierarchy.</p>
<p>This is a slightly more complex example:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">struct</span> <span class="nc">OrdArray</span><span class="p">&lt;</span><span class="n">ORD</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Ord</span><span class="p">&lt;</span><span class="n">A</span><span class="p">[</span><span class="k">]&gt;</span>
        <span class="k">where</span> <span class="n">ORD</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Ord</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="nf">Compare</span><span class="p">(</span><span class="n">A</span><span class="p">[]</span> <span class="n">mx</span><span class="p">,</span> <span class="n">A</span><span class="p">[]</span> <span class="n">my</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nf">ReferenceEquals</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="n">my</span><span class="p">))</span> <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nf">ReferenceEquals</span><span class="p">(</span><span class="n">mx</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span> <span class="k">return</span> <span class="p">-</span><span class="m">1</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nf">ReferenceEquals</span><span class="p">(</span><span class="n">my</span><span class="p">,</span> <span class="k">null</span><span class="p">))</span> <span class="k">return</span> <span class="m">1</span><span class="p">;</span>

            <span class="kt">var</span> <span class="n">cmp</span> <span class="p">=</span> <span class="n">mx</span><span class="p">.</span><span class="n">Length</span><span class="p">.</span><span class="nf">CompareTo</span><span class="p">(</span><span class="n">my</span><span class="p">.</span><span class="n">Length</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">cmp</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">for</span><span class="p">(</span><span class="kt">var</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">mx</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
                <span class="p">{</span>
                    <span class="n">cmp</span> <span class="p">=</span> <span class="k">default</span><span class="p">(</span><span class="n">ORD</span><span class="p">).</span><span class="nf">Compare</span><span class="p">(</span><span class="n">mx</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">my</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">cmp</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span> <span class="k">return</span> <span class="n">cmp</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="k">return</span> <span class="m">0</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="n">cmp</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="kt">bool</span> <span class="nf">Equals</span><span class="p">(</span><span class="n">A</span><span class="p">[]</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span><span class="p">[]</span> <span class="n">y</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">EqArray</span><span class="p">&lt;</span><span class="n">ORD</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;).</span><span class="nf">Equals</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>

        <span class="k">public</span> <span class="kt">int</span> <span class="nf">GetHashCode</span><span class="p">(</span><span class="n">A</span><span class="p">[]</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="nf">hash</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>The <code>OrdArray</code> which is an <code>Ord&lt;A[]&gt;</code>, does itself also take an <code>ORD</code> generic argument, which allows the contents of the array to be compared:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">int</span> <span class="n">x</span> <span class="p">=</span> <span class="n">OrdArray</span><span class="p">&lt;</span><span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;.</span><span class="n">Inst</span><span class="p">.</span><span class="nf">Compare</span><span class="p">(</span><span class="k">new</span> <span class="p">[]</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">},</span> <span class="k">new</span> <span class="p">[]</span> <span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">});</span> <span class="c1">// 0</span>
</pre>
<h4>
<a id="semigroupa" class="anchor" href="#semigroupa" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Semigroup&lt;A&gt;</code>
</h4>
<p>This is where we start going a little more abstract. Semigroups are a feature of category theory, which is soooo not important for this discussion. They represent an associative binary operation, which can be invoked by calling <code>Append</code>.</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Semigroup</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">A</span> <span class="nf">Append</span><span class="p">(</span><span class="n">A</span> <span class="n">x</span><span class="p">,</span> <span class="n">A</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>Positive numbers (for example) form a semigroup. I won't dwell on it too long, because although the <code>Append</code> function is super-useful, nearly everything that falls into the <code>Semigroup</code> category is also a <code>Monoid</code>...</p>
<h4>
<a id="monoida" class="anchor" href="#monoida" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Monoid&lt;A&gt;</code>
</h4>
<p>A monoid has something that a semigroup doesn't, and that's the concept of identity (often meaning 'empty' or 'zero'). It looks like this:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Monoid</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Semigroup</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">A</span> <span class="nf">Empty</span><span class="p">();</span>
    <span class="p">}</span>
</pre>
<p>This comes with some helper functions in <code>LanguageExt.TypeClass</code>:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">static</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">TypeClass</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="k">static</span> <span class="n">A</span> <span class="n">mempty</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;()</span> <span class="k">where</span> <span class="n">MONOID</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monoid</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">MONOID</span><span class="p">).</span><span class="nf">Empty</span><span class="p">();</span>

        <span class="k">public</span> <span class="k">static</span> <span class="n">A</span> <span class="n">mconcat</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">IEnumerable</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">xs</span><span class="p">)</span> <span class="k">where</span> <span class="n">MONOID</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monoid</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="n">xs</span><span class="p">.</span><span class="nf">Fold</span><span class="p">(</span><span class="n">mempty</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(),</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">append</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">));</span>

        <span class="k">public</span> <span class="k">static</span> <span class="n">A</span> <span class="n">mconcat</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">params</span> <span class="n">A</span><span class="p">[]</span> <span class="n">xs</span><span class="p">)</span> <span class="k">where</span> <span class="n">MONOID</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monoid</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="n">xs</span><span class="p">.</span><span class="nf">Fold</span><span class="p">(</span><span class="n">mempty</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(),</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">append</span><span class="p">&lt;</span><span class="n">MONOID</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">));</span>
    <span class="p">}</span>
</pre>
<p>Now the semigroup <code>Append</code> comes to life. Examples of monoids are: <code>TInt</code>, <code>MLst</code>, <code>TString</code>, etc. i.e.</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="n">mconcat</span><span class="p">&lt;</span><span class="n">TString</span><span class="p">,</span> <span class="kt">string</span><span class="p">&gt;(</span><span class="s">"Hello"</span><span class="p">,</span> <span class="s">" "</span><span class="p">,</span> <span class="s">"World"</span><span class="p">);</span>   <span class="c1">// "Hello World"</span>
    <span class="kt">var</span> <span class="n">y</span> <span class="p">=</span> <span class="n">mconcat</span><span class="p">&lt;</span><span class="n">TLst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">Lst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="nf">List</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">));</span> <span class="c1">// [1,2,3]</span>
    <span class="kt">var</span> <span class="n">z</span> <span class="p">=</span> <span class="n">mconcat</span><span class="p">&lt;</span><span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">);</span>                 <span class="c1">// 15</span>
</pre>
<p>The <code>Empty()</code> function is what provides the <em>identity value</em> for the concat operations. So for <code>string</code> it's <code>""</code>, for <code>Lst&lt;T&gt;</code> it's <code>[]</code> and for <code>int</code> it's <code>0</code>. So a monoid is a semigroup with a <em>zero</em>.</p>
<p>It's surprising how much <em>stuff</em> just starts working when you know your type is a monoid. For example in language-ext version 1 there is a monadic type called <code>Writer&lt;W, T&gt;</code>. The writer monad collects a <em>log</em> as well as returning the bound value. In version 1 the log had to be an <code>IEnumerable&lt;W&gt;</code>, which isn't super flexible. In language-ext version 2 the type looks like this:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">Writer</span><span class="p">&lt;</span><span class="n">MonoidW</span><span class="p">,</span> <span class="n">W</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">MonoidW</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monoid</span><span class="p">&lt;</span><span class="n">W</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="p">...</span>
    <span class="p">}</span>
</pre>
<p>So now it can be a running numeric total, or a <code>Lst&lt;W&gt;</code>, or a <code>Set&lt;W&gt;</code>, or whatever monoid <em>you</em> dream up.</p>
<h3>
<a id="higher-kinds" class="anchor" href="#higher-kinds" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Higher-kinds</h3>
<p>Higher-order polymorphism would allow us to define a type like so:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">MyType</span><span class="p">&lt;</span><span class="n">M</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span>
    <span class="p">{</span>
        <span class="n">M</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;</span> <span class="n">Foo</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;(</span><span class="n">M</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>Where not only is the <code>A</code> parametric, but so it <code>M</code>. So for example if I wanted to implement <code>MyType</code> for <code>Option&lt;A&gt;</code> I could do:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyOptionType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">MyType</span><span class="p">&lt;</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Option</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;</span> <span class="n">Foo</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;(</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">...;</span>
    <span class="p">}</span>
</pre>
<p>It would be soooo nice if C# (well, the <em>immutable</em> CLR) would support this. But it doesn't. So we need to find ways around it. The way I am using for language-ext is:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">MyType</span><span class="p">&lt;</span><span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">MB</span> <span class="n">Foo</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">MA</span> <span class="n">ma</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyOptionType</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">MyType</span><span class="p">&lt;</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;,</span> <span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">MB</span> <span class="n">Foo</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">...;</span>
    <span class="p">}</span>
</pre>
<h4>
<a id="monad" class="anchor" href="#monad" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>Monad</code>
</h4>
<p>This is where some of the difficulties come in. How do we return an <code>MB</code> if we don't know what it is?  This is a problem for the <code>Monad</code> type. This is a simplified version:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">MB</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">MA</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">MB</span><span class="p">&gt;</span> <span class="n">bind</span><span class="p">);</span>
        <span class="n">MA</span> <span class="nf">Return</span><span class="p">(</span><span class="n">A</span> <span class="n">a</span><span class="p">);</span>
        <span class="n">MA</span> <span class="nf">Fail</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>Looking at the prototype for <code>Bind</code> it seems at first glance that the <code>bind</code> argument will give us the <code>MB</code> value we want. But an <code>Option</code> might be in a <code>None</code> state, in which case it shouldn't run <code>bind</code>.</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">MB</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">MB</span><span class="p">&gt;</span> <span class="n">bind</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="n">ma</span><span class="p">.</span><span class="n">IsSome</span>
            <span class="p">?</span> <span class="nf">bind</span><span class="p">(</span><span class="n">ma</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span>
            <span class="p">:</span> <span class="p">???</span> <span class="p">;</span> <span class="c1">// What do we return here?</span>
</pre>
<p>The key is to use constraints. But it also requires an extra generic parameter for <code>Bind</code>:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">MB</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">MonadB</span><span class="p">,</span> <span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">MA</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">MB</span><span class="p">&gt;</span> <span class="n">bind</span><span class="p">)</span> 
            <span class="k">where</span> <span class="n">MonadB</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;;</span>

        <span class="n">MA</span> <span class="nf">Return</span><span class="p">(</span><span class="n">A</span> <span class="n">a</span><span class="p">);</span>
        <span class="n">MA</span> <span class="nf">Fail</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span> <span class="p">=</span> <span class="k">null</span><span class="p">);</span>
    <span class="p">}</span>
</pre>
<p>So we now know that <code>MonadB</code> is a class-instance of the <code>Monad&lt;MB, B&gt;</code> type-class. So we can now do this:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">MB</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">MonadB</span><span class="p">,</span> <span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">MB</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">)</span> 
        <span class="k">where</span> <span class="n">MonadB</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">MB</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="n">ma</span><span class="p">.</span><span class="n">IsSome</span>
                <span class="p">?</span> <span class="nf">f</span><span class="p">(</span><span class="n">ma</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span>
                <span class="p">:</span> <span class="k">default</span><span class="p">(</span><span class="n">MonadB</span><span class="p">).</span><span class="nf">Fail</span><span class="p">();</span>
</pre>
<p>The eagle eyed reader will notice that this actually allows binding to any resulting monad (not just <code>Option&lt;B&gt;</code>). I'm sure some may consider labelling this a monad as incorrect, but it works, it's type-safe, it's efficient, and performs the exact same function and so I am happy to use the term.</p>
<p><a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt.TypeClasses/Monad_Env_Out_MA_A.htm" rel="nofollow">The actual definition of <code>Monad</code></a> is more complex than this, in order to unify monadic types that take arguments (<code>Reader</code> and <code>State</code>) and monads that carry internal state (<code>Writer</code> and <code>State</code>), as well as to support asynchronous monads (<code>TryAsync</code> and <code>TryOption</code>). I won't muddy the waters too much right now, but unified and type-safe they are. There are no hacks.</p>
<p>You should see that the <code>Return</code> and <code>Fail</code> functions are trivial to implement:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="nf">Return</span><span class="p">(</span><span class="n">A</span> <span class="n">a</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="nf">Optional</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>

    <span class="k">public</span> <span class="n">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="nf">Fail</span><span class="p">(</span><span class="n">Exception</span> <span class="n">e</span> <span class="p">=</span> <span class="k">null</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="n">None</span><span class="p">;</span>
</pre>
<p>What that means is that any function that has been constrained by a monad instance can create new instances of them:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">M</span> <span class="n">CreateNewIntegerMonad</span><span class="p">&lt;</span><span class="n">MonadInt</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> 
        <span class="k">where</span> <span class="n">MonadInt</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">M</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">MonadInt</span><span class="p">).</span><span class="nf">Return</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
</pre>
<p>This is one of the key breakthroughs. Imagine trying to create a <code>Monad</code> type the <em>old way</em>:</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">interface</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="n">Monad</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;(</span><span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">bind</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">class</span> <span class="nc">Option</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">:</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;</span> <span class="n">Bind</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;(</span><span class="n">Monad</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">bind</span><span class="p">)</span> <span class="p">=&gt;</span>
            <span class="n">IsSome</span>
                <span class="p">?</span> <span class="nf">bind</span><span class="p">(</span><span class="n">Value</span><span class="p">)</span>
                <span class="p">:</span> <span class="n">None</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="nf">CreateNewIntegerMonad</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span>
        <span class="p">????;</span> <span class="c1">// How?</span>
</pre>
<p>Maybe we could parameterise it?</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="n">CreateNewIntegerMonad</span><span class="p">&lt;</span><span class="n">M</span><span class="p">&gt;(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="k">where</span> <span class="n">M</span> <span class="p">:</span> <span class="n">Monad</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
        <span class="p">????;</span> <span class="c1">// We still can't call new M(x)</span>
</pre>
<p>But that doesn't work either because we still can't call <code>new M(x)</code>. Being able to paramterise generic functions at the point where you know the concrete types (and therefore know the concrete class-instance) means that the generic functions can invoke the instance functions to create the concrete types.</p>
<p>Here's a super generic example of a function that takes two monad arguments, they're both of the same type, and their bound values are <code>Num&lt;A&gt;</code>.</p>
<pre lang="c#" class="highlight-c#">    <span class="k">public</span> <span class="k">static</span> <span class="n">MA</span> <span class="n">Add</span><span class="p">&lt;</span><span class="n">MonadA</span><span class="p">,</span> <span class="n">MA</span><span class="p">,</span> <span class="n">NumA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">MA</span> <span class="n">ma</span><span class="p">,</span> <span class="n">MA</span> <span class="n">mb</span><span class="p">)</span>
        <span class="k">where</span> <span class="n">MonadA</span>  <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Monad</span><span class="p">&lt;</span><span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;</span>
        <span class="k">where</span> <span class="n">NumA</span>    <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">MonadA</span><span class="p">).</span><span class="n">Bind</span><span class="p">&lt;</span><span class="n">MonadA</span><span class="p">,</span> <span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">ma</span><span class="p">,</span> <span class="n">a</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">MonadA</span><span class="p">).</span><span class="n">Bind</span><span class="p">&lt;</span><span class="n">MonadA</span><span class="p">,</span> <span class="n">MA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="n">mb</span><span class="p">,</span> <span class="n">b</span> <span class="p">=&gt;</span>
            <span class="k">default</span><span class="p">(</span><span class="n">MonadA</span><span class="p">).</span><span class="nf">Return</span><span class="p">(</span><span class="k">default</span><span class="p">(</span><span class="n">NumA</span><span class="p">).</span><span class="nf">Plus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))));</span>
</pre>
<p>You may notice that the two <code>Bind</code> calls followed by the <code>Return</code> are basically a much less attractive version of this:</p>
<pre lang="c#" class="highlight-c#">        <span class="k">from</span> <span class="n">a</span> <span class="k">in</span> <span class="n">ma</span>
        <span class="k">from</span> <span class="n">b</span> <span class="k">in</span> <span class="n">mb</span>
        <span class="k">select</span> <span class="k">default</span><span class="p">(</span><span class="n">NumA</span><span class="p">).</span><span class="nf">Plus</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">);</span>
</pre>
<p>And so I can now add two options:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="nf">Some</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">y</span> <span class="p">=</span> <span class="nf">Some</span><span class="p">(</span><span class="m">20</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">z</span> <span class="p">=</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;.</span><span class="n">None</span><span class="p">;</span>

    <span class="kt">var</span> <span class="n">r1</span> <span class="p">=</span> <span class="n">Add</span><span class="p">&lt;</span><span class="n">MOption</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> <span class="c1">// Some(30)</span>
    <span class="kt">var</span> <span class="n">r2</span> <span class="p">=</span> <span class="n">Add</span><span class="p">&lt;</span><span class="n">MOption</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span> <span class="c1">// None</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">r1</span> <span class="p">==</span> <span class="nf">Some</span><span class="p">(</span><span class="m">30</span><span class="p">));</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">r2</span> <span class="p">==</span> <span class="n">None</span><span class="p">);</span>
</pre>
<p>Or two lists:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">y</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">z</span> <span class="p">=</span> <span class="n">List</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;();</span>

    <span class="kt">var</span> <span class="n">r1</span> <span class="p">=</span> <span class="n">Add</span><span class="p">&lt;</span><span class="n">MLst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">Lst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="kt">var</span> <span class="n">r2</span> <span class="p">=</span> <span class="n">Add</span><span class="p">&lt;</span><span class="n">MLst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">Lst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;,</span> <span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">x</span><span class="p">,</span> <span class="n">z</span><span class="p">);</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">r1</span> <span class="p">==</span> <span class="nf">List</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span>  <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span>  <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">9</span><span class="p">));</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">r2</span> <span class="p">==</span> <span class="n">z</span><span class="p">);</span>
</pre>
<p>Or any two monads. They will follow the built in rules for the type, and produce concrete values efficiently and without any boxing or dynamic casting.</p>
<h3>
<a id="transformer-types" class="anchor" href="#transformer-types" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Transformer types</h3>
<p>Often you'll find yourself with nested monadic types <code>Option&lt;Lst&lt;A&gt;&gt;</code>, <code>Seq&lt;Either&lt;L, R&gt;&gt;</code>, <code>Try&lt;Validation&lt;Fail, Success&gt;&gt;</code>, ..., and you want to work with the bound value(s) of <code>A</code> without having to unwrap/match the values away. And so there are around 100,000 lines of generated code for working with 'transformer types'.</p>
<p>There is a new <a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt.TypeClasses/MonadTrans_OuterMonad_OuterType_InnerMonad_InnerType_A.htm" rel="nofollow"><code>MonadTrans</code></a> type-class and a default instance called <a href="https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Trans_OuterMonad_OuterType_InnerMonad_InnerType_A.htm" rel="nofollow"><code>Trans</code></a>. It does all the heavy lifting, and it is what the generated code uses (it's also what you'd need to use if you create your own monadic types and you want to build transformers for the various pairs of monadic types).</p>
<p>For every pair of nested monads: <code>Lst&lt;Option&lt;A&gt;&gt;</code>, <code>Try&lt;Either&lt;L, A&gt;&gt;</code>, etc. there are the following extension methods (this is for <code>Arr&lt;Lst&lt;A&gt;&gt;</code>):</p>
<pre lang="c#" class="highlight-c#"><span class="c1">// Sums all the bound value(s)</span>
<span class="n">A</span> <span class="n">SumT</span><span class="p">&lt;</span><span class="n">NumA</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">);</span>

<span class="c1">// Counts all the bound value(s)</span>
<span class="kt">int</span> <span class="n">CountT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">);</span>

<span class="c1">// Monadic bind on the inner monad</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">BindT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">Lst</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Flips the inner and outer monads (using the rules of the inner and outer </span>
<span class="c1">// monads to compose the result) and performs a map operation on the bound values</span>
<span class="n">Lst</span><span class="p">&lt;</span><span class="n">Arr</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">Traverse</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Flips the inner and outer monads (using the rules of the inner and outer </span>
<span class="c1">// monads to compose the result) </span>
<span class="n">Lst</span><span class="p">&lt;</span><span class="n">Arr</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">Sequence</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">);</span>

<span class="c1">// Maps the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">MapT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Folds the bound value(s)</span>
<span class="n">S</span> <span class="n">FoldT</span><span class="p">&lt;</span><span class="n">S</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">S</span> <span class="n">state</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">S</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">S</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Reverse folds the bound value(s)</span>
<span class="n">S</span> <span class="n">FoldBackT</span><span class="p">&lt;</span><span class="n">S</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">S</span> <span class="n">state</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">S</span><span class="p">,</span> <span class="n">A</span><span class="p">,</span> <span class="n">S</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Returns true if f(x) returns true for any of the bound value(s)</span>
<span class="kt">bool</span> <span class="n">ExistsT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Returns true if f(x) returns true for all of the bound value(s)</span>
<span class="kt">bool</span> <span class="n">ForAllT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Iterates all of the bound values</span>
<span class="n">Unit</span> <span class="n">IterT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Action</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// Filters the bound value(s) with the predicate</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">FilterT</span><span class="p">&lt;</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;</span> <span class="n">pred</span><span class="p">);</span>

<span class="c1">// Filters the bound value(s) with the predicate</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">Where</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="kt">bool</span><span class="p">&gt;</span> <span class="n">pred</span><span class="p">);</span>

<span class="c1">// Maps the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">Select</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;</span> <span class="n">f</span><span class="p">);</span>

<span class="c1">// LINQ monadic bind and project on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">C</span><span class="p">&gt;&gt;</span> <span class="n">SelectMany</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">&gt;(</span>
        <span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ma</span><span class="p">,</span>
        <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">Lst</span><span class="p">&lt;</span><span class="n">B</span><span class="p">&gt;&gt;</span> <span class="n">bind</span><span class="p">,</span>
        <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">&gt;</span> <span class="n">project</span><span class="p">);</span>

<span class="c1">// Plus operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">PlusT</span><span class="p">&lt;</span><span class="n">NUM</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">NUM</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Subtraction operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">SubtractT</span><span class="p">&lt;</span><span class="n">NUM</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">NUM</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Product operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ProductT</span><span class="p">&lt;</span><span class="n">NUM</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">NUM</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;</span> <span class="p">=&gt;</span>
        <span class="nf">ApplyT</span><span class="p">(</span><span class="k">default</span><span class="p">(</span><span class="n">NUM</span><span class="p">).</span><span class="n">Product</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>

<span class="c1">// Divide operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">DivideT</span><span class="p">&lt;</span><span class="n">NUM</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">NUM</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Num</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Semigroup append operation on the bound value(s)</span>
<span class="n">AppendT</span><span class="p">&lt;</span><span class="n">SEMI</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">SEMI</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Semigroup</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Comparison operation on the bound value(s)</span>
<span class="kt">int</span> <span class="n">CompareT</span><span class="p">&lt;</span><span class="n">ORD</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">ORD</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Ord</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Equality operation on the bound value(s)</span>
<span class="kt">bool</span> <span class="n">EqualsT</span><span class="p">&lt;</span><span class="n">EQ</span><span class="p">,</span> <span class="n">A</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">x</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="k">where</span> <span class="n">EQ</span> <span class="p">:</span> <span class="k">struct</span><span class="err">,</span> <span class="nc">Eq</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;;</span>

<span class="c1">// Applicative apply operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">ApplyT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">&gt;</span> <span class="n">fab</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">fa</span><span class="p">);</span>

<span class="c1">// Application apply operation on the bound value(s)</span>
<span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">C</span><span class="p">&gt;&gt;</span> <span class="n">ApplyT</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">&gt;(</span><span class="k">this</span> <span class="n">Func</span><span class="p">&lt;</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">&gt;</span> <span class="n">fabc</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">fa</span><span class="p">,</span> <span class="n">Arr</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="n">A</span><span class="p">&gt;&gt;</span> <span class="n">fb</span><span class="p">);</span>
</pre>
<p>The number of functions has increased dramatically. Some of the special ones are <code>Traverse</code> and <code>Sequence</code> which flips the inner and outer types. So for example:</p>
<pre lang="c#" class="highlight-c#">    <span class="n">Lst</span><span class="p">&lt;</span><span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;</span> <span class="n">x</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="nf">Some</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">3</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">4</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>
    <span class="n">Option</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;</span> <span class="n">y</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">Sequence</span><span class="p">();</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">y</span> <span class="p">==</span> <span class="nf">Some</span><span class="p">(</span><span class="nf">List</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">)));</span>
</pre>
<p>As you can see, the list is now inside the option.</p>
<pre lang="c#" class="highlight-c#">    <span class="n">Lst</span><span class="p">&lt;</span><span class="n">Option</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;</span> <span class="n">x</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="nf">Some</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="nf">Some</span><span class="p">(</span><span class="m">3</span><span class="p">),</span> <span class="n">None</span><span class="p">,</span> <span class="nf">Some</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>
    <span class="n">Option</span><span class="p">&lt;</span><span class="n">Lst</span><span class="p">&lt;</span><span class="kt">int</span><span class="p">&gt;&gt;</span> <span class="n">y</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">Sequence</span><span class="p">();</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">y</span> <span class="p">==</span> <span class="n">None</span><span class="p">);</span>
</pre>
<p>In this case there is a <code>None</code> in the <code>Lst</code> so when the <code>Lst&lt;Option&lt;&gt;&gt;</code> becomes a <code>Option&lt;Lst&lt;&gt;&gt;</code> the rules of the <code>Option</code> take over, and one <code>None</code> means all <code>None</code>.</p>
<p>This can be quite useful for <code>Either</code>:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">x</span> <span class="p">=</span> <span class="n">List</span><span class="p">&lt;</span><span class="n">Either</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;&gt;(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="s">"error"</span><span class="p">);</span>

    <span class="kt">var</span> <span class="n">y</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">Sequence</span><span class="p">();</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="n">IsLeft</span> <span class="p">&amp;&amp;</span> <span class="n">y</span> <span class="p">==</span> <span class="s">"error"</span><span class="p">);</span>
</pre>
<p>This collects the first error it finds, or returns <code>Right</code> if there is no error.</p>
<p><code>Traverse</code> is the same as <code>Sequence</code> except it applies a mapping function to each bound value as it's transforming the types. Here's an example that runs 6 tasks in parallel, and collects their results:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">start</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">;</span>

    <span class="kt">var</span> <span class="n">f1</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">1</span><span class="p">;</span> <span class="p">});</span>
    <span class="kt">var</span> <span class="n">f2</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">2</span><span class="p">;</span> <span class="p">});</span>
    <span class="kt">var</span> <span class="n">f3</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">3</span><span class="p">;</span> <span class="p">});</span>
    <span class="kt">var</span> <span class="n">f4</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">4</span><span class="p">;</span> <span class="p">});</span>
    <span class="kt">var</span> <span class="n">f5</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">5</span><span class="p">;</span> <span class="p">});</span>
    <span class="kt">var</span> <span class="n">f6</span> <span class="p">=</span> <span class="n">Task</span><span class="p">.</span><span class="nf">Run</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="n">Thread</span><span class="p">.</span><span class="nf">Sleep</span><span class="p">(</span><span class="m">3000</span><span class="p">);</span> <span class="k">return</span> <span class="m">6</span><span class="p">;</span> <span class="p">});</span>

    <span class="kt">var</span> <span class="n">res</span> <span class="p">=</span> <span class="k">await</span> <span class="nf">List</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">,</span> <span class="n">f3</span><span class="p">,</span> <span class="n">f4</span><span class="p">,</span> <span class="n">f5</span><span class="p">,</span> <span class="n">f6</span><span class="p">).</span><span class="nf">Traverse</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span> <span class="p">*</span> <span class="m">2</span><span class="p">);</span>

    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="nf">toSet</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="p">==</span> <span class="nf">Set</span><span class="p">(</span><span class="m">2</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">8</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="m">12</span><span class="p">));</span>

    <span class="kt">var</span> <span class="n">ms</span> <span class="p">=</span> <span class="p">(</span><span class="kt">int</span><span class="p">)(</span><span class="n">DateTime</span><span class="p">.</span><span class="n">UtcNow</span> <span class="p">-</span> <span class="n">start</span><span class="p">).</span><span class="n">TotalMilliseconds</span><span class="p">;</span>
    <span class="n">Assert</span><span class="p">.</span><span class="nf">True</span><span class="p">(</span><span class="n">ms</span> <span class="p">&lt;</span> <span class="m">3500</span><span class="p">,</span> <span class="s">$"Took </span><span class="p">{</span><span class="n">ms</span><span class="p">}</span><span class="s"> ticks"</span><span class="p">);</span>
</pre>
<p>So there is a List of Tasks that becomes a single awaitable Task of List.</p>
<p>As well as the extensions, there are also static classes for the transformer types. There is one for each type of monad. So for example, <code>Option</code> has a <code>LanguageExt.OptionT</code> type. Whenever you have a pair of nested monads, and <code>Option</code> is the inner monad, then you would use <code>OptionT</code>:</p>
<pre lang="c#" class="highlight-c#">    <span class="kt">var</span> <span class="n">ma</span> <span class="p">=</span> <span class="nf">List</span><span class="p">(</span><span class="nf">Some</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="nf">Some</span><span class="p">(</span><span class="m">2</span><span class="p">),</span><span class="nf">Some</span><span class="p">(</span><span class="m">3</span><span class="p">),</span><span class="nf">Some</span><span class="p">(</span><span class="m">4</span><span class="p">),</span><span class="nf">Some</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>

    <span class="kt">var</span> <span class="n">total</span> <span class="p">=</span> <span class="n">OptionT</span><span class="p">.</span><span class="nf">foldT</span><span class="p">(</span><span class="n">ma</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="n">s</span> <span class="p">+</span> <span class="n">x</span><span class="p">);</span> <span class="c1">// 15</span>
    <span class="kt">var</span> <span class="n">total</span> <span class="p">=</span> <span class="n">OptionT</span><span class="p">.</span><span class="n">sumT</span><span class="p">&lt;</span><span class="n">TInt</span><span class="p">,</span> <span class="kt">int</span><span class="p">&gt;(</span><span class="n">ma</span><span class="p">);</span> <span class="c1">// 15</span>
    <span class="kt">var</span> <span class="n">mb</span>    <span class="p">=</span> <span class="n">OptionT</span><span class="p">.</span><span class="nf">filterT</span><span class="p">(</span><span class="n">ma</span><span class="p">,</span> <span class="n">x</span> <span class="p">&gt;</span> <span class="m">3</span><span class="p">);</span> <span class="c1">// List(Some(3), Some(4))</span>
</pre>
<h3>
<a id="the-rest" class="anchor" href="#the-rest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The rest</h3>
<p>This README.md is a basic introduction to the library. It is however full of many, many useful types, so do check the <a href="https://louthy.github.io/language-ext/index.htm" rel="nofollow">API Reference</a> for more info.</p>
<script type="text/javascript">(function(){window['__CF$cv$params']={r:'6120b8401ddbe738',m:'92c576a57a93f3d61344eec1ba3fec7a5cf4b326-1610725484-1800-ASrol8QmOhgsqjEuPC3WaQsA+QG1zPPtil+ETnZb4bvf/AZFtJkfGe46luisdfUqPT3JjK/Wpmiz4l0hQiAxdwAgKEsnlm0GzHtjmHLpHKP1dZyuLajsM1CB2FLCVTx5+SHfdwnjsVZbn/fmU3KHykw=',s:[0x4e5f63afff,0x41462af523],}})();</script></body></html>
</div><div><br/><div style="border:1px solid gray;border-radius:5px;background-color:lightgray;padding:2%"><div style="font-size:24px;font-weight:bold;margin-bottom:10px">Get A Weekly Email With Trending Projects For These Topics</div><div style="margin-bottom:10px">No Spam.  Unsubscribe easily at any time.</div><div><div><input type="checkbox" name="topics" value="c-sharp"/> <!-- -->c-sharp<!-- --> (<!-- -->11,505<!-- -->)</div><div><input type="checkbox" name="topics" value="functional-programming"/> <!-- -->functional-programming<!-- --> (<!-- -->457<!-- -->)</div><div><input type="checkbox" name="topics" value="f-sharp"/> <!-- -->f-sharp<!-- --> (<!-- -->307<!-- -->)</div><div><input type="checkbox" name="topics" value="monad"/> <!-- -->monad<!-- --> (<!-- -->59<!-- -->)</div><div><input type="checkbox" name="topics" value="monads"/> <!-- -->monads<!-- --> (<!-- -->24<!-- -->)</div><div><input type="checkbox" name="topics" value="lenses"/> <!-- -->lenses<!-- --> (<!-- -->23<!-- -->)</div><div><input type="checkbox" name="topics" value="functor"/> <!-- -->functor<!-- --> (<!-- -->18<!-- -->)</div><div><input type="checkbox" name="topics" value="monad-transformers"/> <!-- -->monad-transformers<!-- --> (<!-- -->14<!-- -->)</div></div><div><input type="email" style="width:95%;margin-top:10px;margin-bottom:10px;padding:5px;font-size:20px;border-radius:5px" name="email" placeholder="Your email address"/></div><div><input type="submit" style="color:white;background-color:#0366d6;font-size:20px;border:1px solid black;border-radius:5px;padding:5px;cursor:pointer" value="Subscribe"/></div></div></div><h2>Find Open Source By Browsing 7,000 Topics Across 59 Categories</h2><div class="aos_topics_sidebar" style="margin:0;width:100%"><div class="category_topic_filter_container"><input style="width:100%" placeholder="Search, browse and combine topics" value="" class="aos_filter_topics_input"/></div><div style="display:block;box-shadow:1px 1px 5px lightgray"><a data-category-name="Advertising" href="https://awesomeopensource.com/categories/advertising"><div class="aos_category_explorer_category_container" data-category-name="Advertising"><span data-category-name="Advertising">Advertising<span data-category-name="Advertising" class="aos_project_count"> <!-- -->10</span></span></div></a><a data-category-name="All Projects" href="https://awesomeopensource.com/projects"><div class="aos_category_explorer_category_container" data-category-name="All Projects"><span data-category-name="All Projects">All Projects</span></div></a><a data-category-name="Application Programming Interfaces" href="https://awesomeopensource.com/categories/application-programming-interfaces"><div class="aos_category_explorer_category_container" data-category-name="Application Programming Interfaces"><span data-category-name="Application Programming Interfaces">Application Programming Interfaces<span data-category-name="Application Programming Interfaces" class="aos_project_count"> <!-- -->124</span></span></div></a><a data-category-name="Applications" href="https://awesomeopensource.com/categories/applications"><div class="aos_category_explorer_category_container" data-category-name="Applications"><span data-category-name="Applications">Applications<span data-category-name="Applications" class="aos_project_count"> <!-- -->192</span></span></div></a><a data-category-name="Artificial Intelligence" href="https://awesomeopensource.com/categories/artificial-intelligence"><div class="aos_category_explorer_category_container" data-category-name="Artificial Intelligence"><span data-category-name="Artificial Intelligence">Artificial Intelligence<span data-category-name="Artificial Intelligence" class="aos_project_count"> <!-- -->78</span></span></div></a><a data-category-name="Blockchain" href="https://awesomeopensource.com/categories/blockchain"><div class="aos_category_explorer_category_container" data-category-name="Blockchain"><span data-category-name="Blockchain">Blockchain<span data-category-name="Blockchain" class="aos_project_count"> <!-- -->73</span></span></div></a><a data-category-name="Build Tools" href="https://awesomeopensource.com/categories/build-tools"><div class="aos_category_explorer_category_container" data-category-name="Build Tools"><span data-category-name="Build Tools">Build Tools<span data-category-name="Build Tools" class="aos_project_count"> <!-- -->113</span></span></div></a><a data-category-name="Cloud Computing" href="https://awesomeopensource.com/categories/cloud-computing"><div class="aos_category_explorer_category_container" data-category-name="Cloud Computing"><span data-category-name="Cloud Computing">Cloud Computing<span data-category-name="Cloud Computing" class="aos_project_count"> <!-- -->80</span></span></div></a><a data-category-name="Code Quality" href="https://awesomeopensource.com/categories/code-quality"><div class="aos_category_explorer_category_container" data-category-name="Code Quality"><span data-category-name="Code Quality">Code Quality<span data-category-name="Code Quality" class="aos_project_count"> <!-- -->28</span></span></div></a><a data-category-name="Collaboration" href="https://awesomeopensource.com/categories/collaboration"><div class="aos_category_explorer_category_container" data-category-name="Collaboration"><span data-category-name="Collaboration">Collaboration<span data-category-name="Collaboration" class="aos_project_count"> <!-- -->32</span></span></div></a><a data-category-name="Command Line Interface" href="https://awesomeopensource.com/categories/command-line-interface"><div class="aos_category_explorer_category_container" data-category-name="Command Line Interface"><span data-category-name="Command Line Interface">Command Line Interface<span data-category-name="Command Line Interface" class="aos_project_count"> <!-- -->49</span></span></div></a><a data-category-name="Community" href="https://awesomeopensource.com/categories/community"><div class="aos_category_explorer_category_container" data-category-name="Community"><span data-category-name="Community">Community<span data-category-name="Community" class="aos_project_count"> <!-- -->83</span></span></div></a><a data-category-name="Companies" href="https://awesomeopensource.com/categories/companies"><div class="aos_category_explorer_category_container" data-category-name="Companies"><span data-category-name="Companies">Companies<span data-category-name="Companies" class="aos_project_count"> <!-- -->60</span></span></div></a><a data-category-name="Compilers" href="https://awesomeopensource.com/categories/compilers"><div class="aos_category_explorer_category_container" data-category-name="Compilers"><span data-category-name="Compilers">Compilers<span data-category-name="Compilers" class="aos_project_count"> <!-- -->63</span></span></div></a><a data-category-name="Computer Science" href="https://awesomeopensource.com/categories/computer-science"><div class="aos_category_explorer_category_container" data-category-name="Computer Science"><span data-category-name="Computer Science">Computer Science<span data-category-name="Computer Science" class="aos_project_count"> <!-- -->80</span></span></div></a><a data-category-name="Configuration Management" href="https://awesomeopensource.com/categories/configuration-management"><div class="aos_category_explorer_category_container" data-category-name="Configuration Management"><span data-category-name="Configuration Management">Configuration Management<span data-category-name="Configuration Management" class="aos_project_count"> <!-- -->42</span></span></div></a><a data-category-name="Content Management" href="https://awesomeopensource.com/categories/content-management"><div class="aos_category_explorer_category_container" data-category-name="Content Management"><span data-category-name="Content Management">Content Management<span data-category-name="Content Management" class="aos_project_count"> <!-- -->175</span></span></div></a><a data-category-name="Control Flow" href="https://awesomeopensource.com/categories/control-flow"><div class="aos_category_explorer_category_container" data-category-name="Control Flow"><span data-category-name="Control Flow">Control Flow<span data-category-name="Control Flow" class="aos_project_count"> <!-- -->213</span></span></div></a><a data-category-name="Data Formats" href="https://awesomeopensource.com/categories/data-formats"><div class="aos_category_explorer_category_container" data-category-name="Data Formats"><span data-category-name="Data Formats">Data Formats<span data-category-name="Data Formats" class="aos_project_count"> <!-- -->78</span></span></div></a><a data-category-name="Data Processing" href="https://awesomeopensource.com/categories/data-processing"><div class="aos_category_explorer_category_container" data-category-name="Data Processing"><span data-category-name="Data Processing">Data Processing<span data-category-name="Data Processing" class="aos_project_count"> <!-- -->276</span></span></div></a><a data-category-name="Data Storage" href="https://awesomeopensource.com/categories/data-storage"><div class="aos_category_explorer_category_container" data-category-name="Data Storage"><span data-category-name="Data Storage">Data Storage<span data-category-name="Data Storage" class="aos_project_count"> <!-- -->135</span></span></div></a><a data-category-name="Economics" href="https://awesomeopensource.com/categories/economics"><div class="aos_category_explorer_category_container" data-category-name="Economics"><span data-category-name="Economics">Economics<span data-category-name="Economics" class="aos_project_count"> <!-- -->64</span></span></div></a><a data-category-name="Frameworks" href="https://awesomeopensource.com/categories/frameworks"><div class="aos_category_explorer_category_container" data-category-name="Frameworks"><span data-category-name="Frameworks">Frameworks<span data-category-name="Frameworks" class="aos_project_count"> <!-- -->215</span></span></div></a><a data-category-name="Games" href="https://awesomeopensource.com/categories/games"><div class="aos_category_explorer_category_container" data-category-name="Games"><span data-category-name="Games">Games<span data-category-name="Games" class="aos_project_count"> <!-- -->129</span></span></div></a><a data-category-name="Graphics" href="https://awesomeopensource.com/categories/graphics"><div class="aos_category_explorer_category_container" data-category-name="Graphics"><span data-category-name="Graphics">Graphics<span data-category-name="Graphics" class="aos_project_count"> <!-- -->110</span></span></div></a><a data-category-name="Hardware" href="https://awesomeopensource.com/categories/hardware"><div class="aos_category_explorer_category_container" data-category-name="Hardware"><span data-category-name="Hardware">Hardware<span data-category-name="Hardware" class="aos_project_count"> <!-- -->152</span></span></div></a><a data-category-name="Integrated Development Environments" href="https://awesomeopensource.com/categories/integrated-development-environments"><div class="aos_category_explorer_category_container" data-category-name="Integrated Development Environments"><span data-category-name="Integrated Development Environments">Integrated Development Environments<span data-category-name="Integrated Development Environments" class="aos_project_count"> <!-- -->49</span></span></div></a><a data-category-name="Learning Resources" href="https://awesomeopensource.com/categories/learning-resources"><div class="aos_category_explorer_category_container" data-category-name="Learning Resources"><span data-category-name="Learning Resources">Learning Resources<span data-category-name="Learning Resources" class="aos_project_count"> <!-- -->166</span></span></div></a><a data-category-name="Legal" href="https://awesomeopensource.com/categories/legal"><div class="aos_category_explorer_category_container" data-category-name="Legal"><span data-category-name="Legal">Legal<span data-category-name="Legal" class="aos_project_count"> <!-- -->29</span></span></div></a><a data-category-name="Libraries" href="https://awesomeopensource.com/categories/libraries"><div class="aos_category_explorer_category_container" data-category-name="Libraries"><span data-category-name="Libraries">Libraries<span data-category-name="Libraries" class="aos_project_count"> <!-- -->129</span></span></div></a><a data-category-name="Lists Of Projects" href="https://awesomeopensource.com/categories/lists-of-projects"><div class="aos_category_explorer_category_container" data-category-name="Lists Of Projects"><span data-category-name="Lists Of Projects">Lists Of Projects<span data-category-name="Lists Of Projects" class="aos_project_count"> <!-- -->22</span></span></div></a><a data-category-name="Machine Learning" href="https://awesomeopensource.com/categories/machine-learning"><div class="aos_category_explorer_category_container" data-category-name="Machine Learning"><span data-category-name="Machine Learning">Machine Learning<span data-category-name="Machine Learning" class="aos_project_count"> <!-- -->347</span></span></div></a><a data-category-name="Mapping" href="https://awesomeopensource.com/categories/mapping"><div class="aos_category_explorer_category_container" data-category-name="Mapping"><span data-category-name="Mapping">Mapping<span data-category-name="Mapping" class="aos_project_count"> <!-- -->64</span></span></div></a><a data-category-name="Marketing" href="https://awesomeopensource.com/categories/marketing"><div class="aos_category_explorer_category_container" data-category-name="Marketing"><span data-category-name="Marketing">Marketing<span data-category-name="Marketing" class="aos_project_count"> <!-- -->15</span></span></div></a><a data-category-name="Mathematics" href="https://awesomeopensource.com/categories/mathematics"><div class="aos_category_explorer_category_container" data-category-name="Mathematics"><span data-category-name="Mathematics">Mathematics<span data-category-name="Mathematics" class="aos_project_count"> <!-- -->55</span></span></div></a><a data-category-name="Media" href="https://awesomeopensource.com/categories/media"><div class="aos_category_explorer_category_container" data-category-name="Media"><span data-category-name="Media">Media<span data-category-name="Media" class="aos_project_count"> <!-- -->239</span></span></div></a><a data-category-name="Messaging" href="https://awesomeopensource.com/categories/messaging"><div class="aos_category_explorer_category_container" data-category-name="Messaging"><span data-category-name="Messaging">Messaging<span data-category-name="Messaging" class="aos_project_count"> <!-- -->98</span></span></div></a><a data-category-name="Networking" href="https://awesomeopensource.com/categories/networking"><div class="aos_category_explorer_category_container" data-category-name="Networking"><span data-category-name="Networking">Networking<span data-category-name="Networking" class="aos_project_count"> <!-- -->315</span></span></div></a><a data-category-name="Operating Systems" href="https://awesomeopensource.com/categories/operating-systems"><div class="aos_category_explorer_category_container" data-category-name="Operating Systems"><span data-category-name="Operating Systems">Operating Systems<span data-category-name="Operating Systems" class="aos_project_count"> <!-- -->89</span></span></div></a><a data-category-name="Operations" href="https://awesomeopensource.com/categories/operations"><div class="aos_category_explorer_category_container" data-category-name="Operations"><span data-category-name="Operations">Operations<span data-category-name="Operations" class="aos_project_count"> <!-- -->121</span></span></div></a><a data-category-name="Package Managers" href="https://awesomeopensource.com/categories/package-managers"><div class="aos_category_explorer_category_container" data-category-name="Package Managers"><span data-category-name="Package Managers">Package Managers<span data-category-name="Package Managers" class="aos_project_count"> <!-- -->55</span></span></div></a><a data-category-name="Programming Languages" href="https://awesomeopensource.com/categories/programming-languages"><div class="aos_category_explorer_category_container" data-category-name="Programming Languages"><span data-category-name="Programming Languages">Programming Languages<span data-category-name="Programming Languages" class="aos_project_count"> <!-- -->245</span></span></div></a><a data-category-name="Runtime Environments" href="https://awesomeopensource.com/categories/runtime-environments"><div class="aos_category_explorer_category_container" data-category-name="Runtime Environments"><span data-category-name="Runtime Environments">Runtime Environments<span data-category-name="Runtime Environments" class="aos_project_count"> <!-- -->100</span></span></div></a><a data-category-name="Science" href="https://awesomeopensource.com/categories/science"><div class="aos_category_explorer_category_container" data-category-name="Science"><span data-category-name="Science">Science<span data-category-name="Science" class="aos_project_count"> <!-- -->42</span></span></div></a><a data-category-name="Security" href="https://awesomeopensource.com/categories/security"><div class="aos_category_explorer_category_container" data-category-name="Security"><span data-category-name="Security">Security<span data-category-name="Security" class="aos_project_count"> <!-- -->396</span></span></div></a><a data-category-name="Social Media" href="https://awesomeopensource.com/categories/social-media"><div class="aos_category_explorer_category_container" data-category-name="Social Media"><span data-category-name="Social Media">Social Media<span data-category-name="Social Media" class="aos_project_count"> <!-- -->27</span></span></div></a><a data-category-name="Software Architecture" href="https://awesomeopensource.com/categories/software-architecture"><div class="aos_category_explorer_category_container" data-category-name="Software Architecture"><span data-category-name="Software Architecture">Software Architecture<span data-category-name="Software Architecture" class="aos_project_count"> <!-- -->72</span></span></div></a><a data-category-name="Software Development" href="https://awesomeopensource.com/categories/software-development"><div class="aos_category_explorer_category_container" data-category-name="Software Development"><span data-category-name="Software Development">Software Development<span data-category-name="Software Development" class="aos_project_count"> <!-- -->72</span></span></div></a><a data-category-name="Software Performance" href="https://awesomeopensource.com/categories/software-performance"><div class="aos_category_explorer_category_container" data-category-name="Software Performance"><span data-category-name="Software Performance">Software Performance<span data-category-name="Software Performance" class="aos_project_count"> <!-- -->58</span></span></div></a><a data-category-name="Software Quality" href="https://awesomeopensource.com/categories/software-quality"><div class="aos_category_explorer_category_container" data-category-name="Software Quality"><span data-category-name="Software Quality">Software Quality<span data-category-name="Software Quality" class="aos_project_count"> <!-- -->133</span></span></div></a><a data-category-name="Text Editors" href="https://awesomeopensource.com/categories/text-editors"><div class="aos_category_explorer_category_container" data-category-name="Text Editors"><span data-category-name="Text Editors">Text Editors<span data-category-name="Text Editors" class="aos_project_count"> <!-- -->49</span></span></div></a><a data-category-name="Text Processing" href="https://awesomeopensource.com/categories/text-processing"><div class="aos_category_explorer_category_container" data-category-name="Text Processing"><span data-category-name="Text Processing">Text Processing<span data-category-name="Text Processing" class="aos_project_count"> <!-- -->136</span></span></div></a><a data-category-name="User Interface" href="https://awesomeopensource.com/categories/user-interface"><div class="aos_category_explorer_category_container" data-category-name="User Interface"><span data-category-name="User Interface">User Interface<span data-category-name="User Interface" class="aos_project_count"> <!-- -->330</span></span></div></a><a data-category-name="User Interface Components" href="https://awesomeopensource.com/categories/user-interface-components"><div class="aos_category_explorer_category_container" data-category-name="User Interface Components"><span data-category-name="User Interface Components">User Interface Components<span data-category-name="User Interface Components" class="aos_project_count"> <!-- -->514</span></span></div></a><a data-category-name="Version Control" href="https://awesomeopensource.com/categories/version-control"><div class="aos_category_explorer_category_container" data-category-name="Version Control"><span data-category-name="Version Control">Version Control<span data-category-name="Version Control" class="aos_project_count"> <!-- -->30</span></span></div></a><a data-category-name="Virtualization" href="https://awesomeopensource.com/categories/virtualization"><div class="aos_category_explorer_category_container" data-category-name="Virtualization"><span data-category-name="Virtualization">Virtualization<span data-category-name="Virtualization" class="aos_project_count"> <!-- -->71</span></span></div></a><a data-category-name="Web Browsers" href="https://awesomeopensource.com/categories/web-browsers"><div class="aos_category_explorer_category_container" data-category-name="Web Browsers"><span data-category-name="Web Browsers">Web Browsers<span data-category-name="Web Browsers" class="aos_project_count"> <!-- -->42</span></span></div></a><a data-category-name="Web Servers" href="https://awesomeopensource.com/categories/web-servers"><div class="aos_category_explorer_category_container" data-category-name="Web Servers"><span data-category-name="Web Servers">Web Servers<span data-category-name="Web Servers" class="aos_project_count"> <!-- -->26</span></span></div></a><a data-category-name="Web User Interface" href="https://awesomeopensource.com/categories/web-user-interface"><div class="aos_category_explorer_category_container" data-category-name="Web User Interface"><span data-category-name="Web User Interface">Web User Interface<span data-category-name="Web User Interface" class="aos_project_count"> <!-- -->210</span></span></div></a></div></div><div class="aos_project_metadata_trademark_notice">&quot;<!-- -->Language <!-- -->Ext<!-- -->&quot; and other potentially trademarked words, copyrighted images and copyrighted readme contents likely belong to the legal entity who owns the &quot;<a href="https://github.com/louthy" target="_blank">Louthy</a>&quot; organization.  Awesome Open Source is not affiliated with the legal entity who owns the &quot;<a href="https://github.com/louthy" target="_blank">Louthy</a>&quot; organization.</div></div></div><div class="aos_fixed_footer_container"><br/></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Root" data-dom-id="Root-react-component-f7a6c27e-7fc7-43bb-84c1-6dbe0e456d46">{"topics":[{"id":null,"name":"javascript","count":67310},{"id":null,"name":"python","count":49729},{"id":null,"name":"java","count":30048},{"id":null,"name":"c-plus-plus","count":17339},{"id":null,"name":"php","count":15812},{"id":null,"name":"c","count":14340},{"id":null,"name":"go","count":14132},{"id":null,"name":"ruby","count":12268},{"id":null,"name":"c-sharp","count":11505},{"id":null,"name":"objective-c","count":10769}],"projectTopics":[{"id":null,"name":"c-sharp","count":11505},{"id":null,"name":"f-sharp","count":307},{"id":null,"name":"functional-programming","count":457},{"id":null,"name":"functor","count":18},{"id":null,"name":"lenses","count":23},{"id":null,"name":"monad","count":59},{"id":null,"name":"monads","count":24},{"id":null,"name":"monad-transformers","count":14}],"selectedTopics":[],"currentUrl":"https://awesomeopensource.com/project/louthy/language-ext","projects":[],"project":{"id":114722,"created_at":"2018-08-21T02:12:29.992Z","updated_at":"2021-01-14T06:23:20.215Z","markdown_readme":"\u003c!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"\u003e\n\u003chtml\u003e\u003cbody\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/louthy/language-ext/blob/master/Images/banner.png?raw=true\" target=\"_blank\" rel=\"nofollow\"\u003e\u003cimg src=\"https://github.com/louthy/language-ext/blob/master/Images/banner.png?raw=true\" alt=\"lang-ext\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003ch1\u003e\n\u003ca id=\"c-functional-programming-language-extensions\" class=\"anchor\" href=\"#c-functional-programming-language-extensions\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eC# Functional Programming Language Extensions\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://gitter.im/louthy/language-ext?utm_source=badge\u0026amp;utm_medium=badge\u0026amp;utm_campaign=pr-badge\u0026amp;utm_content=badge\" rel=\"nofollow\"\u003e\u003cimg src=\"https://badges.gitter.im/Join%20Chat.svg\" alt=\"Join the chat at https://gitter.im/louthy/language-ext\" style=\"max-width:100%;\"\u003e\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eThis library uses and abuses the features of C# to provide a functional-programming 'base class library' that, if you squint, can look like\nextensions to the language itself. The desire here is to make programming in C# much more reliable and to make the engineer's inertia flow\nin the direction of declarative and functional code rather than imperative.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eAuthor on twitter:\u003c/strong\u003e\n\u003ca href=\"https://twitter.com/paullouth\" rel=\"nofollow\"\u003ehttps://twitter.com/paullouth\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"index\" class=\"anchor\" href=\"#index\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIndex\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#contributing--code-of-conduct\"\u003eContributing \u0026amp; Code of Conduct\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#nu-get\"\u003eNu-get package\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#code-gen-setup\"\u003eCode-gen setup\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#unity\"\u003eUnity\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#introduction\"\u003eIntroduction\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#getting-started\"\u003eGetting started\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#features\"\u003eFeatures\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext\" rel=\"nofollow\"\u003eAPI Reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis library started out trying to deal with issues in C#, that after using Haskell and F# started to frustrate me:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#poor-tuple-support\"\u003ePoor tuple support\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#null-reference-problem\"\u003eNull reference problem\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#option\"\u003eOption\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#lack-of-lambda-and-expression-inference\"\u003eLack of lambda and expression inference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#void-isnt-a-real-type\"\u003eVoid isn't a real type\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#mutable-lists-and-dictionaries\"\u003eMutable lists and dictionaries\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#lists\"\u003eLists\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#list-pattern-matching\"\u003eList pattern matching\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#maps\"\u003eMaps\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#difficulty-in-creating-immutable-record-types\"\u003eDifficulty in creating immutable record types\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#transformation-of-immutable-types\"\u003eTransformation of immutable types\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#with\"\u003e\u003ccode\u003e[With]\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#transformation-of-nested-immutable-types-with-lenses\"\u003eTransformation of nested immutable types with Lenses\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#withlens\"\u003e\u003ccode\u003e[WithLens]\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#the-awful-out-parameter\"\u003eThe awful 'out' parameter\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#ad-hoc-polymorphism\"\u003eThe lack of ad-hoc polymorphism\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#num%3CA%3E\"\u003e\u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#eq%3CA%3E\"\u003e\u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#ord%3CA%3E\"\u003e\u003ccode\u003eOrd\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#semigroup%3CA%3E\"\u003e\u003ccode\u003eSemigroup\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#monoid%3CA%3E\"\u003e\u003ccode\u003eMonoid\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#monad\"\u003e\u003ccode\u003eMonad\u003c/code\u003e\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#transformer-types\"\u003eTransformer types\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"reference\" class=\"anchor\" href=\"#reference\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReference\u003c/h2\u003e\n\u003ch4\u003e\n\u003ca id=\"api-reference\" class=\"anchor\" href=\"#api-reference\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://louthy.github.io/language-ext\" rel=\"nofollow\"\u003eAPI Reference\u003c/a\u003e\n\u003c/h4\u003e\n\u003ch4\u003e\n\u003ca id=\"issues-that-contain-documentation-and-examples\" class=\"anchor\" href=\"#issues-that-contain-documentation-and-examples\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ca href=\"https://github.com/louthy/language-ext/issues?utf8=%E2%9C%93\u0026amp;q=is%3Aissue%20label%3A%22examples%20%2F%20documentation%22%20\" rel=\"nofollow\"\u003eIssues that contain documentation and examples\u003c/a\u003e\n\u003c/h4\u003e\n\u003ch2\u003e\n\u003ca id=\"contributing--code-of-conduct\" class=\"anchor\" href=\"#contributing--code-of-conduct\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eContributing \u0026amp; Code of Conduct\u003c/h2\u003e\n\u003cp\u003eIf you would like to get involved with this project, please first read the \u003ca href=\"https://github.com/louthy/language-ext/blob/master/CONTRIBUTING.md\" rel=\"nofollow\"\u003eContribution Guidelines\u003c/a\u003e and the \u003ca href=\"https://github.com/louthy/language-ext/blob/master/CODE_OF_CONDUCT.md\" rel=\"nofollow\"\u003eCode of Conduct\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"nu-get\" class=\"anchor\" href=\"#nu-get\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eNu-get\u003c/h2\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eNu-get package\u003c/th\u003e\n\u003cth\u003eDescription\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.nuget.org/packages/LanguageExt.Core\" rel=\"nofollow\"\u003eLanguageExt.Core\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003eAll of the core types and functional 'prelude'. \u003cstrong\u003eThis is all that's needed to get started\u003c/strong\u003e.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.nuget.org/packages/LanguageExt.FSharp\" rel=\"nofollow\"\u003eLanguageExt.FSharp\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003eF# to C# interop library. Provides interop between the LanguageExt.Core types (like \u003ccode\u003eOption\u003c/code\u003e, \u003ccode\u003eList\u003c/code\u003e and \u003ccode\u003eMap\u003c/code\u003e) to the F# equivalents, as well as interop between core BCL types and F#\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.nuget.org/packages/LanguageExt.Parsec\" rel=\"nofollow\"\u003eLanguageExt.Parsec\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003ePort of the \u003ca href=\"https://hackage.haskell.org/package/parsec\" rel=\"nofollow\"\u003eHaskell parsec library\u003c/a\u003e\n\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.nuget.org/packages/LanguageExt.Rx\" rel=\"nofollow\"\u003eLanguageExt.Rx\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003eReactive Extensions support for various types within the Core\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ca href=\"https://www.nuget.org/packages/LanguageExt.CodeGen\" rel=\"nofollow\"\u003eLanguageExt.CodeGen\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://github.com/louthy/language-ext/wiki/Code-generation\" rel=\"nofollow\"\u003eUsed to generate records, unions, lenses, and \u003ccode\u003eWith\u003c/code\u003e functions automagically\u003c/a\u003e.\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2\u003e\n\u003ca id=\"code-gen-setup\" class=\"anchor\" href=\"#code-gen-setup\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eCode-gen setup\u003c/h2\u003e\n\u003cp\u003eTo use the code-generation features of \u003ccode\u003elanguage-ext\u003c/code\u003e (which are totally optional by the way), then you must include the \u003ca href=\"https://www.nuget.org/packages/LanguageExt.CodeGen\" rel=\"nofollow\"\u003eLanguageExt.CodeGen\u003c/a\u003e package into your project.\u003c/p\u003e\n\u003cp\u003eTo make the reference \u003cstrong\u003ebuild and design time only\u003c/strong\u003e (i.e. your project doesn't gain an additional dependencies because of the code-generator), open up your \u003ccode\u003ecsproj\u003c/code\u003e and set the \u003ccode\u003ePrivateAssets\u003c/code\u003e attribute to \u003ccode\u003eall\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"xml\" class=\"highlight-xml\"\u003e\u003cspan class=\"nt\"\u003e\u0026lt;ItemGroup\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"LanguageExt.Core\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"3.4.10\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"LanguageExt.CodeGen\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"3.4.10\"\u003c/span\u003e\n                      \u003cspan class=\"na\"\u003ePrivateAssets=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"all\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;PackageReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CodeGeneration.Roslyn.BuildTime\"\u003c/span\u003e\n                      \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0.6.1\"\u003c/span\u003e\n                      \u003cspan class=\"na\"\u003ePrivateAssets=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"all\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\n    \u003cspan class=\"nt\"\u003e\u0026lt;DotNetCliToolReference\u003c/span\u003e \u003cspan class=\"na\"\u003eInclude=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"dotnet-codegen\"\u003c/span\u003e \u003cspan class=\"na\"\u003eVersion=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"0.6.1\"\u003c/span\u003e \u003cspan class=\"nt\"\u003e/\u0026gt;\u003c/span\u003e\n\u003cspan class=\"nt\"\u003e\u0026lt;/ItemGroup\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003eObviously, update the \u003ccode\u003eVersion\u003c/code\u003e attributes to the appropriate values. Also note that you will probably need the latest VS2019+ for this to work. Even early versions of VS2019 seem to have problems.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThere's more information on the code-gen features on \u003ca href=\"https://github.com/louthy/language-ext/wiki/Code-generation\" rel=\"nofollow\"\u003ethe wiki\u003c/a\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"unity\" class=\"anchor\" href=\"#unity\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eUnity\u003c/h2\u003e\n\u003cp\u003eThis library seems compatible on the latest (at the time of writing) Unity 2018.2 with \u003cstrong\u003eincremental compiler\u003c/strong\u003e (which enables C# 7), so it should work well once Unity has official support for C# 7 on upcoming 2018.3.\nIn the meanwhile, you can install incremental compiler instead.\nIf you are concerned about writing functionally and the possible performance overheads then please take a look at \u003ca href=\"https://github.com/louthy/language-ext/wiki/Performance\" rel=\"nofollow\"\u003ethis wiki page\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"introduction\" class=\"anchor\" href=\"#introduction\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eIntroduction\u003c/h2\u003e\n\u003cp\u003eOne of the great features of C#6+ is that it allows us to treat static classes like namespaces. This means that we can use static\nmethods without qualifying them first. That instantly gives us access to single term method names that look exactly like functions\nin functional languages. i.e.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    using static System.Console;\n    \n    WriteLine(\"Hello, World\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis library tries to bring some of the functional world into C#. It won't always sit well with the seasoned C# OO programmer,\nespecially the choice of camelCase names for a lot of functions and the seeming 'globalness' of a lot of the library.\u003c/p\u003e\n\u003cp\u003eI can understand that much of this library is non-idiomatic, but when you think of the journey C# has been on, is \"idiomatic\"\nnecessarily right?  A lot of C#'s idioms are inherited from Java and C# 1.0. Since then we've had generics, closures, Func, LINQ,\nasync... C# as a language is becoming more and more like a  functional language on every release. In fact, the bulk of the new\nfeatures are either inspired by or directly taken from features in functional languages. So perhaps it's time to move the C#\nidioms closer to the functional world's idioms?\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eA note about naming\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eOne of the areas that's likely to get seasoned C# heads worked up is my choice of naming style. The intent is to try and make\nsomething that \u003cem\u003efeels\u003c/em\u003e like a functional language rather than following rules of naming conventions (mostly set out by\nthe BCL).\u003c/p\u003e\n\u003cp\u003eThere is, however, a naming guide that will keep you in good stead while reading through this documentation:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eType names are \u003ccode\u003ePascalCase\u003c/code\u003e in the normal way\u003c/li\u003e\n\u003cli\u003eThe types all have constructor functions rather than public constructors that you instantiate with \u003ccode\u003enew\u003c/code\u003e. They will always\nbe \u003ccode\u003ePascalCase\u003c/code\u003e:\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    Option\u0026lt;int\u0026gt; x = Some(123);\n    Option\u0026lt;int\u0026gt; y = None;\n    List\u0026lt;int\u0026gt; items = List(1,2,3,4,5);\n    Map\u0026lt;int, string\u0026gt; dict = Map((1, \"Hello\"), (2, \"World\"));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eAny (non-type constructor) static function that can be used on its own by \u003ccode\u003eusing static LanguageExt.Prelude\u003c/code\u003e are \u003ccode\u003ecamelCase\u003c/code\u003e.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var x = map(opt, v =\u0026gt; v * 2);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003eAny extension methods, or anything \"fluent\" are \u003ccode\u003ePascalCase\u003c/code\u003e in the normal way\u003c/li\u003e\n\u003c/ul\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var x = opt.Map(v =\u0026gt; v * 2);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eEven if you disagree with this non-idiomatic approach, all of the \u003ccode\u003ecamelCase\u003c/code\u003e static functions have fluent variants, so you never actually have to see the non-standard stuff.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eIf you're not using C# 6 yet, then you can still use this library. Anywhere in the docs below where you see a camelCase function\nit can be accessed by prefixing with \u003ccode\u003ePrelude.\u003c/code\u003e\u003c/em\u003e\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"getting-started\" class=\"anchor\" href=\"#getting-started\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eGetting started\u003c/h3\u003e\n\u003cp\u003eTo use this library, simply include \u003ccode\u003eLanguageExt.Core.dll\u003c/code\u003e in your project or grab it from NuGet, and add this to the top of each \u003ccode\u003e.cs\u003c/code\u003e file that needs it:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003eusing LanguageExt;\nusing static LanguageExt.Prelude;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe namespace \u003ccode\u003eLanguageExt\u003c/code\u003e contains the core types, and \u003ccode\u003eLanguageExt.Prelude\u003c/code\u003e contains the functions that you bring into scope \u003ccode\u003eusing static LanguageExt.Prelude\u003c/code\u003e.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"features\" class=\"anchor\" href=\"#features\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFeatures\u003c/h3\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eLocation\u003c/th\u003e\n\u003cth\u003eFeature\u003c/th\u003e\n\u003cth\u003eDescription\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eArr\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Arr_A.htm\" rel=\"nofollow\"\u003eImmutable array\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eLst\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Lst_A.htm\" rel=\"nofollow\"\u003eImmutable list\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eMap\u0026lt;K, V\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_K_V.htm\" rel=\"nofollow\"\u003eImmutable map\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eMap\u0026lt;OrdK, K, V\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_OrdK_K_V.htm\" rel=\"nofollow\"\u003eImmutable map with Ord constraint on \u003ccode\u003eK\u003c/code\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eHashMap\u0026lt;K, V\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashMap_K_V.htm\" rel=\"nofollow\"\u003eImmutable hash-map\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eHashMap\u0026lt;EqK, K, V\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashMap_EqK_K_V.htm\" rel=\"nofollow\"\u003eImmutable hash-map with Eq constraint on \u003ccode\u003eK\u003c/code\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSet\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Set_A.htm\" rel=\"nofollow\"\u003eImmutable set\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSet\u0026lt;OrdA, A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Set_OrdA_A.htm\" rel=\"nofollow\"\u003eImmutable set with Ord constraint on \u003ccode\u003eA\u003c/code\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eHashSet\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashSet_A.htm\" rel=\"nofollow\"\u003eImmutable hash-set\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eHashSet\u0026lt;EqA, A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/HashSet_EqA_A.htm\" rel=\"nofollow\"\u003eImmutable hash-set with Eq constraint on \u003ccode\u003eA\u003c/code\u003e\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eQue\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Que_T.htm\" rel=\"nofollow\"\u003eImmutable queue\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eStck\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Stck_T.htm\" rel=\"nofollow\"\u003eImmutable stack\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eOption\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Option_A.htm\" rel=\"nofollow\"\u003eOption monad\u003c/a\u003e that can't be used with \u003ccode\u003enull\u003c/code\u003e values\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eOptionAsync\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/OptionAsync_A.htm\" rel=\"nofollow\"\u003eOptionAsync monad\u003c/a\u003e that can't be used with \u003ccode\u003enull\u003c/code\u003e values with all value realisation does asynchronously\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eOptionUnsafe\u0026lt;T\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/OptionUnsafe_A.htm\" rel=\"nofollow\"\u003eOption monad\u003c/a\u003e that can be used with \u003ccode\u003enull\u003c/code\u003e values\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eEither\u0026lt;L,R\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Either_L_R.htm\" rel=\"nofollow\"\u003eRight/Left choice monad\u003c/a\u003e that won't accept \u003ccode\u003enull\u003c/code\u003e values\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eEitherUnsafe\u0026lt;L, R\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/EitherUnsafe_L_R.htm\" rel=\"nofollow\"\u003eRight/Left choice monad\u003c/a\u003e that can be used with \u003ccode\u003enull\u003c/code\u003e values\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eEitherAsync\u0026lt;L, R\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/EitherAsync_L_R.htm\" rel=\"nofollow\"\u003eEitherAsync monad\u003c/a\u003e that can't be used with \u003ccode\u003enull\u003c/code\u003e values with all value realisation done asynchronously\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eTry\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Try_A.htm\" rel=\"nofollow\"\u003eException handling lazy monad\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eTryAsync\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryAsync_A.htm\" rel=\"nofollow\"\u003eAsynchronous exception handling lazy monad\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eTryOption\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryOption_A.htm\" rel=\"nofollow\"\u003eOption monad with third state\u003c/a\u003e 'Fail' that catches exceptions\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eTryOptionAsync\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/TryOptionAsync_A.htm\" rel=\"nofollow\"\u003eAsynchronous Option monad with third state\u003c/a\u003e 'Fail' that catches exceptions\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eRecord\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Record_RECORDTYPE.htm\" rel=\"nofollow\"\u003eBase type for creating record types\u003c/a\u003e  with automatic structural equality, ordering, and hash code calculation.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eLens\u0026lt;A, B\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"#transformation-of-nested-immutable-types-with-lenses\"\u003eWell behaved bidirectional transformations\u003c/a\u003e - i.e. the ability to easily generate new immutable values from existing ones, even when heavily nested.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eReader\u0026lt;E, A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Reader_Env_A.htm\" rel=\"nofollow\"\u003eReader monad\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eWriter\u0026lt;MonoidW, W, T\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Writer_MonoidW_W_A.htm\" rel=\"nofollow\"\u003eWriter monad that logs to a \u003ccode\u003eW\u003c/code\u003e constrained to be a Monoid\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eState\u0026lt;S, A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/State_S_A.htm\" rel=\"nofollow\"\u003eState monad\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003ePatch\u0026lt;EqA, A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eUses patch-theory to efficiently calculate the difference (\u003ccode\u003ePatch.diff(list1, list2)\u003c/code\u003e) between two collections of \u003ccode\u003eA\u003c/code\u003e and build a patch which can be applied (\u003ccode\u003ePatch.apply(patch, list)\u003c/code\u003e) to one to make the other (think git diff).\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eParsec\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eParser\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Parsec/LanguageExt.Parsec/index.htm#Parser_T\" rel=\"nofollow\"\u003eString parser monad and full parser combinators library\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eParsec\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eParser\u0026lt;I, O\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Parsec/LanguageExt.Parsec/index.htm#Parser_I_O\" rel=\"nofollow\"\u003eParser monad that can work with any input stream type\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNewType\u0026lt;SELF, A, PRED\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NewType_NEWTYPE_A_PRED.htm\" rel=\"nofollow\"\u003eHaskell \u003ccode\u003enewtype\u003c/code\u003e equivalent\u003c/a\u003e i.e: \u003ccode\u003eclass Hours : NewType\u0026lt;Hours, double\u0026gt; { public Hours(double value) : base(value) { } }\u003c/code\u003e. The resulting type is: equatable, comparable, foldable, a functor, monadic, and iterable\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNumType\u0026lt;SELF, NUM, A, PRED\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NumType_NUMTYPE_NUM_A_PRED.htm\" rel=\"nofollow\"\u003eHaskell \u003ccode\u003enewtype\u003c/code\u003e equivalent but for numeric types\u003c/a\u003e i.e: \u003ccode\u003eclass Hours : NumType\u0026lt;Hours, TDouble, double\u0026gt; { public Hours(double value) : base(value) { } }\u003c/code\u003e. The resulting type is: equatable, comparable, foldable, a functor, a monoid, a semigroup, monadic, iterable, and can have basic artithmetic operations performed upon it.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eFloatType\u0026lt;SELF, FLOATING, A, PRED\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/FloatType_SELF_FLOATING_A_PRED.htm\" rel=\"nofollow\"\u003eHaskell \u003ccode\u003enewtype\u003c/code\u003e equivalent but for real numeric types\u003c/a\u003e i.e: \u003ccode\u003eclass Hours : FloatType\u0026lt;Hours, TDouble, double\u0026gt; { public Hours(double value) : base(value) { } }\u003c/code\u003e. The resulting type is: equatable, comparable, foldable, a functor, a monoid, a semigroup, monadic, iterable, and can have complex artithmetic operations performed upon it.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ccode\u003eNullable\u0026lt;T\u0026gt;\u003c/code\u003e extensions\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/NullableExtensions_.htm\" rel=\"nofollow\"\u003eExtension methods for \u003ccode\u003eNullable\u0026lt;T\u0026gt;\u003c/code\u003e\u003c/a\u003e that make it into a functor, applicative, foldable, iterable and a monad\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ccode\u003eTask\u0026lt;T\u0026gt;\u003c/code\u003e extensions\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/TaskExtensions_.htm\" rel=\"nofollow\"\u003eExtension methods for \u003ccode\u003eTask\u0026lt;T\u0026gt;\u003c/code\u003e\u003c/a\u003e that make it into a functor, applicative, foldable, iterable and a monad\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eValidation\u0026lt;FAIL,SUCCESS\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Validation_FAIL_SUCCESS.htm\" rel=\"nofollow\"\u003eValidation applicative and monad\u003c/a\u003e for collecting multiple errors before aborting an operation\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eValidation\u0026lt;MonoidFail, FAIL, SUCCESS\u0026gt;\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\n\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Validation_FAIL_SUCCESS.htm\" rel=\"nofollow\"\u003eValidation applicative and monad\u003c/a\u003e for collecting multiple errors before aborting an operation, uses the supplied monoid in the first generic argument to collect the failure values.\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eMonad transformers\u003c/td\u003e\n\u003ctd\u003eA higher kinded type (ish)\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eCurrying\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#curry%3CT1,%20T2,%20R%3E\" rel=\"nofollow\"\u003eTranslate the evaluation of a function that takes multiple arguments into a sequence of functions, each with a single argument\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003ePartial application\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#par%3CT1,%20T2,%20R%3E\" rel=\"nofollow\"\u003ethe process of fixing a number of arguments to a function, producing another function of smaller arity\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003eMemoization\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#memo%3CT,%20R%3E\" rel=\"nofollow\"\u003eAn optimization technique used primarily to speed up programs by storing the results of expensive function calls and returning the cached result when the same inputs occur again\u003c/a\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#fun%3CR%3E\" rel=\"nofollow\"\u003eImproved lambda type inference\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003evar add = fun( (int x, int y) =\u0026gt; x + y)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/QueryExtensions_.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eIQueryable\u0026lt;T\u0026gt;\u003c/code\u003e extensions\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eCore\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/ObservableExt_.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eIObservable\u0026lt;T\u0026gt;\u003c/code\u003e extensions\u003c/a\u003e\u003c/td\u003e\n\u003ctd\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003ch2\u003e\n\u003ca id=\"poor-tuple-support\" class=\"anchor\" href=\"#poor-tuple-support\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePoor tuple support\u003c/h2\u003e\n\u003cp\u003eI've been crying out for proper tuple support for ages. When this library was created we were no closer (C# 6).\nThe standard way of creating them is ugly \u003ccode\u003eTuple.Create(foo,bar)\u003c/code\u003e compared to functional languages where the syntax is often\n\u003ccode\u003e(foo,bar)\u003c/code\u003e and to consume them you must work with the standard properties of \u003ccode\u003eItem1\u003c/code\u003e...\u003ccode\u003eItemN\u003c/code\u003e. Luckily now in C# 7\nwe can use: \u003ccode\u003e(foo,bar)\u003c/code\u003e. But for those that can't:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var ab = Tuple(\"a\",\"b\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow isn't that nice?\u003c/p\u003e\n\u003cp\u003eConsuming the tuple is now handled using \u003ccode\u003eMap\u003c/code\u003e, which projects the \u003ccode\u003eItem1\u003c/code\u003e...\u003ccode\u003eItemN\u003c/code\u003e onto a lambda function (or action):\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var name = Tuple(\"Paul\",\"Louth\");\n    var res = name.Map( (first, last) =\u0026gt; $\"{first} {last}\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr, you can use a more functional approach:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var name = Tuple(\"Paul\",\"Louth\");\n    var res = map( name, (first, last) =\u0026gt; $\"{first} {last}\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis allows the tuple properties to have names, and it also allows for fluent handling of functions that return tuples.\u003c/p\u003e\n\u003cp\u003eIf you are using C#7 then you'll know that the new \u003ccode\u003eTuple\u003c/code\u003e type is \u003ccode\u003eValueTuple\u003c/code\u003e. Just like with \u003ccode\u003eTuple\u003c/code\u003e, language-ext\nadds many extensions to the standard BCL \u003ccode\u003eValueTuple\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eFor example:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var abc = ('a', 'b').Add('c');                                           // ('a', 'b', 'c')\n    var abcd = ('a', 'b').Add('c').Add('d');                                 // ('a', 'b', 'c', 'd')\n    var abcd5 = ('a', 'b').Add('c').Add('d').Add(5);                         // ('a', 'b', 'c', 'd', 5)\n\n    var sum = (1, 2, 3).Sum\u0026lt;TInt, int\u0026gt;();                                    // 6\n    var product = (2, 4, 8).Product\u0026lt;TInt, int\u0026gt;();                            // 64\n    var flag = (\"one\", \"two\", \"three\").Contains\u0026lt;TString, string\u0026gt;(\"one\");     // true\n    var str = (\"Hello\", \" \", \"World\").Concat\u0026lt;TString, string\u0026gt;();             // \"Hello World\"\n    var list = (List(1, 2, 3), List(4, 5, 6)).Concat\u0026lt;TLst\u0026lt;int\u0026gt;, Lst\u0026lt;int\u0026gt;\u0026gt;(); // [1,2,3,4,5,6]\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e\n\u003ca id=\"null-reference-problem\" class=\"anchor\" href=\"#null-reference-problem\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eNull reference problem\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003enull\u003c/code\u003e must be \u003ca href=\"https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare/\" rel=\"nofollow\"\u003ethe biggest mistake\u003c/a\u003e in the whole of computer language history. I realise the original designers\nof C# had to make pragmatic decisions, it's a shame this one slipped through though. So, what to do about the\n\"null problem\"?\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003enull\u003c/code\u003e is often used to indicate \u003cem\u003eno value\u003c/em\u003e; the method called can't produce a value of the type it said\nit was going to produce, and therefore it gives you \"nothing\". The thing is that when \u003cem\u003eno value\u003c/em\u003e is passed to\nthe consuming code, it gets assigned to a variable of type T, the same type that the function said it was going\nto return, except this variable now has a timebomb in it. You must continually check if the value is \u003ccode\u003enull\u003c/code\u003e, if\nit's passed around it must be checked too.\u003c/p\u003e\n\u003cp\u003eAs we all know it's only a matter of time before a null reference bug crops up because the variable wasn't\nchecked. It puts C# in the realm of the dynamic languages, where you can't trust the value you're being given.\u003c/p\u003e\n\u003cp\u003eFunctional languages use what's known as an \u003cem\u003eoption type\u003c/em\u003e. In F# it's called \u003ccode\u003eOption\u003c/code\u003e, in Haskell it's called\n\u003ccode\u003eMaybe\u003c/code\u003e. In the next section we'll see how it's used.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"option\" class=\"anchor\" href=\"#option\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eOption\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e works in a very similar way to \u003ccode\u003eNullable\u0026lt;T\u0026gt;\u003c/code\u003e, except it works with all types rather than just value\ntypes. It's a \u003ccode\u003estruct\u003c/code\u003e and therefore can't be \u003ccode\u003enull\u003c/code\u003e. An instance can be created by either calling \u003ccode\u003eSome(value)\u003c/code\u003e,\nwhich represents a positive \"I have a value\" response, or \u003ccode\u003eNone\u003c/code\u003e, which is the equivalent of returning \u003ccode\u003enull\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eSo why is it any better than returning \u003ccode\u003eT\u003c/code\u003e and using \u003ccode\u003enull\u003c/code\u003e? It seems we can have a non-value response again\nright? Yes, that's true, however you're forced to acknowledge that fact and to write code to handle both possible\noutcomes because you can't get to the underlying value without acknowledging the possibility of the two states\nthat the value could be in. This bulletproofs your code. You're also explicitly telling any other programmers that \"this method might not return a value, so make sure you deal with that\". This explicit declaration is very\npowerful.\u003c/p\u003e\n\u003cp\u003eThis is how you create an \u003ccode\u003eOption\u0026lt;int\u0026gt;\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var optional = Some(123);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo access the value you must check that it's valid first:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int x = optional.Match( \n                Some: v  =\u0026gt; v * 2,\n                None: () =\u0026gt; 0 \n                );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAn alternative (functional) way of matching is this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int x = match( optional, \n                   Some: v  =\u0026gt; v * 2,\n                   None: () =\u0026gt; 0 );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eYet another alternative (\"fluent\") matching method is this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int x = optional\n               .Some( v  =\u0026gt; v * 2 )\n               .None( () =\u0026gt; 0 );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo choose your preferred method and stick with it. It's probably best not to mix styles.\u003c/p\u003e\n\u003cp\u003eThere are also some helper functions to work with default \u003ccode\u003eNone\u003c/code\u003e values; you won't see a \u003ccode\u003e.Value\u003c/code\u003e or a\n\u003ccode\u003eGetValueOrDefault()\u003c/code\u003e anywhere in this library. This is because \u003ccode\u003e.Value\u003c/code\u003e puts us right back to where we started, and\nyou may as well not use \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e in that case. \u003ccode\u003eGetValueOrDefault()\u003c/code\u003e is also just as bad because it can return \u003ccode\u003enull\u003c/code\u003e\nfor reference types, and depends on how well defined the \u003ccode\u003estruct\u003c/code\u003e type is you're working with.\u003c/p\u003e\n\u003cp\u003eHowever, clearly there will be times when you don't need to do anything with the \u003ccode\u003eSome\u003c/code\u003e case. Also, sometimes you just want some code to execute in the \u003ccode\u003eSome\u003c/code\u003e case and not the\n\u003ccode\u003eNone\u003c/code\u003e case:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Returns the Some case 'as is' and 10 in the None case\n    int x = optional.IfNone(10);        \n\n    // As above, but invokes a Func\u0026lt;T\u0026gt; to return a valid value for x\n    int x = optional.IfNone(() =\u0026gt; GetAlternative());        \n    \n    // Invokes an Action\u0026lt;T\u0026gt; if in the Some state.\n    optional.IfSome(x =\u0026gt; Console.WriteLine(x));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOf course there are functional versions of the fluent version above:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int x = ifNone(optional, 10);\n    int x = ifNone(optional, () =\u0026gt; GetAlternative());\n    ifSome(optional, x =\u0026gt; Console.WriteLine(x));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo smooth out the process of returning \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e types from methods there are some implicit conversion\noperators and constructors:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Implicitly converts the integer to a Some of int\n    Option\u0026lt;int\u0026gt; GetValue()\n    {\n        return 1000;\n    }\n\n    // Implicitly converts to a None of int\n    Option\u0026lt;int\u0026gt; GetValue()\n    {\n        return None;\n    }\n    \n    // Will handle either a None or a Some returned\n    Option\u0026lt;int\u0026gt; GetValue(bool select) =\u0026gt;\n        select\n            ? Some(1000)\n            : None;\n            \n    // Explicitly converts a null value to None and a non-null value to Some(value)\n    Option\u0026lt;string\u0026gt; GetValue()\n    {\n        string value = GetValueFromNonTrustedApi();\n        return Optional(value);\n    }\n            \n    // Implicitly converts a null value to None and a non-null value to Some(value)\n    Option\u0026lt;string\u0026gt; GetValue()\n    {\n        string value = GetValueFromNonTrustedApi();\n        return value;\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIt's actually nearly impossible to get a \u003ccode\u003enull\u003c/code\u003e out of a function, even if the \u003ccode\u003eT\u003c/code\u003e in \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e is a\nreference type and you write \u003ccode\u003eSome(null)\u003c/code\u003e. Firstly, it won't compile, but you might think you can do this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    private Option\u0026lt;string\u0026gt; GetStringNone()\n    {\n        string nullStr = null;\n        return Some(nullStr);\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat will compile, but at runtime will throw a \u003ccode\u003eValueIsNullException\u003c/code\u003e. If you do either of these (below)\nyou'll get a \u003ccode\u003eNone\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    private Option\u0026lt;string\u0026gt; GetStringNone()\n    {\n        string nullStr = null;\n        return nullStr;\n    }\n\n    private Option\u0026lt;string\u0026gt; GetStringNone()\n    {\n        string nullStr = null;\n        return Optional(nullStr);\n    }\n\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThese are the coercion rules:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003eConverts from\u003c/th\u003e\n\u003cth\u003eConverts to\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003ex\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003enull\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNone\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eNone\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNone\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(null)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eValueIsNullException\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(None)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(None)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(Some(x))\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(Some(x))\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(Nullable null)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eValueIsNullException\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eSome(Nullable x)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eOptional(x)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eOptional(null)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNone\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eOptional(Nullable null)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eNone\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003e\u003ccode\u003eOptional(Nullable x)\u003c/code\u003e\u003c/td\u003e\n\u003ctd\u003e\u003ccode\u003eSome(x)\u003c/code\u003e\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eAs well as the protection of the internal value of \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e, there's protection for the return value\nof the \u003ccode\u003eSome\u003c/code\u003e and \u003ccode\u003eNone\u003c/code\u003e handler functions. You can't return \u003ccode\u003enull\u003c/code\u003e from those either; an exception will\nbe thrown.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // This will throw a ResultIsNullException exception\n    string res = GetValue(true)\n                     .Some(x =\u0026gt; (string)null)\n                     .None((string)null);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003enull\u003c/code\u003e goes away if you use \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eHowever, there are times when you may want your \u003ccode\u003eSome\u003c/code\u003e and \u003ccode\u003eNone\u003c/code\u003e handlers to return \u003ccode\u003enull\u003c/code\u003e. This is mostly\nwhen you need to use something in the BCL or from a third-party library, so momentarily you need to step\nout of your warm and cosy protected optional bubble, but you've got an \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e that will throw an\nexception if you try.\u003c/p\u003e\n\u003cp\u003eSo you can use \u003ccode\u003ematchUnsafe\u003c/code\u003e and \u003ccode\u003eifNoneUnsafe\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    string x = matchUnsafe( optional,\n                            Some: v =\u0026gt; v,\n                            None: () =\u0026gt; null );\n\n    string x = ifNoneUnsafe( optional, (string)null );\n    string x = ifNoneUnsafe( optional, () =\u0026gt; GetNull() );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd fluent versions:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    string x = optional.MatchUnsafe(\n                   Some: v =\u0026gt; v,\n                   None: () =\u0026gt; null \n                   );\n    string x = optional.IfNoneUnsafe((string)null);\n    string x = optional.IfNoneUnsafe(() =\u0026gt; GetNull());\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThat is consistent throughout the library. Anything that could return \u003ccode\u003enull\u003c/code\u003e has the \u003ccode\u003eUnsafe\u003c/code\u003e suffix. That\nmeans that in those unavoidable circumstances where you need a \u003ccode\u003enull\u003c/code\u003e, it gives you and any other programmers\nworking with your code the clearest possible sign that they should treat the result with care.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"option-monad---gasp--not-the-m-word\" class=\"anchor\" href=\"#option-monad---gasp--not-the-m-word\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eOption monad - gasp!  Not the M word!\u003c/h3\u003e\n\u003cp\u003eI know, it's that damn monad word again. They're actually not scary at all, and damn useful. But if you\ncouldn't care less (or \u003cem\u003ecould\u003c/em\u003e care less, for my American friends), it won't stop you taking advantage of the\n\u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e type. However, \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e type also implements \u003ccode\u003eSelect\u003c/code\u003e and \u003ccode\u003eSelectMany\u003c/code\u003e and is therefore monadic, which also means it can be used in LINQ expressions and much more!\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    Option\u0026lt;int\u0026gt; two = Some(2);\n    Option\u0026lt;int\u0026gt; four = Some(4);\n    Option\u0026lt;int\u0026gt; six = Some(6);\n    Option\u0026lt;int\u0026gt; none = None;\n\n    // This expression succeeds because all items to the right of 'in' are Some of int\n    // and therefore it lands in the Some lambda.\n    int r = match( from x in two\n                   from y in four\n                   from z in six\n                   select x + y + z,\n                   Some: v =\u0026gt; v * 2,\n                   None: () =\u0026gt; 0 );     // r == 24\n\n    // This expression bails out once it gets to the None, and therefore doesn't calculate x+y+z\n    // and lands in the None lambda\n    int r = match( from x in two\n                   from y in four\n                   from _ in none\n                   from z in six\n                   select x + y + z,\n                   Some: v =\u0026gt; v * 2,\n                   None: () =\u0026gt; 0 );     // r == 0\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis can be great for avoiding the use of \u003ccode\u003eif then else\u003c/code\u003e, because the computation continues as long as the\nresult is \u003ccode\u003eSome\u003c/code\u003e and bails otherwise. It is also great for building blocks of computation that you can compose\nand reuse. Yes, actually compose and reuse, not like OOP where the promise of composability and modularity are\nessentially lies.\u003c/p\u003e\n\u003cp\u003eTo take this much further, all of the monads in this library implement a standard \"functional set\" of functions:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    Sum                 // For Option\u0026lt;int\u0026gt; it's the wrapped value.\n    Count               // For Option\u0026lt;T\u0026gt; is always 1 for Some and 0 for None. \n    Bind                // Part of the definition of anything monadic - SelectMany in LINQ\n    Exists              // Any in LINQ - true if any element fits a predicate\n    Filter              // Where in LINQ\n    Fold                // Aggregate in LINQ\n    ForAll              // All in LINQ - true if all element(s) fits a predicate\n    Iter                // Passes the wrapped value(s) to an Action delegate\n    Map                 // Part of the definition of any 'functor'. Select in LINQ\n    Lift / LiftUnsafe   // Different meaning to Haskell, this returns the wrapped value. Dangerous, should be used sparingly.\n    Select\n    SelectMany\n    Where\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis makes them into what would be known in Haskell as a Type Class (although more of a catch-all type-class than a set of well-defined type-classes).\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Option_A.htm\" rel=\"nofollow\"\u003eOption reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/OptionExtensions_.htm\" rel=\"nofollow\"\u003eOption extensions reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cstrong\u003eMonad transformers\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eMonad transformers allow for nested monadic types. Imagine functionality for working with \u003ccode\u003eSeq\u0026lt;Option\u0026lt;A\u0026gt;\u0026gt;\u003c/code\u003e or a \u003ccode\u003eOption\u0026lt;Task\u0026lt;A\u0026gt;\u0026gt;\u003c/code\u003e, etc.\u003c/p\u003e\n\u003cp\u003eOne problem with C# is it can't do higher order polymorphism (imagine saying \u003ccode\u003eMonad\u0026lt;M\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e where the \u003ccode\u003eM\u003c/code\u003e is polymorphic like the \u003ccode\u003eT\u003c/code\u003e). There is a kind of cheat way to do it in C# through extension methods, but it still doesn't get you a single type called \u003ccode\u003eMonad\u0026lt;M\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e\n(which is discussed later in the section on Ad-hoc Polymorphism), so it has limitations in that you can't write generic functions over higher-kinds. However it makes some of the problems of dealing with nested monadic types easier.\u003c/p\u003e\n\u003cp\u003eFor example, below is a list of optional integers: \u003ccode\u003eLst\u0026lt;Option\u0026lt;int\u0026gt;\u0026gt;\u003c/code\u003e (see lists later). We want to double all of the \u003ccode\u003eSome\u003c/code\u003e values, leave the\n\u003ccode\u003eNone\u003c/code\u003e alone and keep everything in the list:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    using LanguageExt;\n    using static LanguageExt.Prelude;\n    using LanguageExt.ClassInstances;    // Required for TInt on Sum (see ad-hoc polymorphism later)\n\n    var list = List(Some(1), None, Some(2), None, Some(3));\n\n    var presum = list.SumT\u0026lt;TInt, int\u0026gt;();                                // 6\n\n    list = list.MapT(x =\u0026gt; x * 2);\n\n    var postsum = list.SumT\u0026lt;TInt, int\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNotice the use of \u003ccode\u003eMapT\u003c/code\u003e instead of \u003ccode\u003eMap\u003c/code\u003e (and \u003ccode\u003eSumT\u003c/code\u003e instead of \u003ccode\u003eSum\u003c/code\u003e). If we used \u003ccode\u003eMap\u003c/code\u003e (equivalent to \u003ccode\u003eSelect\u003c/code\u003e in \u003ccode\u003eLINQ\u003c/code\u003e), it would look like this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var list  = List(Some(1), None, Some(2), None, Some(3));\n    \n    var presum = list.Map(x =\u0026gt; x.Sum()).Sum();\n    \n    list = list.Map( x =\u0026gt; x.Map( v =\u0026gt; v * 2 ) );\n    \n    var postsum = list.Map(x =\u0026gt; x.Sum()).Sum();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAs you can see, the intention is much clearer in the first example, which is the point of functional programming most of the time. It's about declaring intent rather than the mechanics of delivery.\u003c/p\u003e\n\u003cp\u003eTo make this work we need extension methods for \u003ccode\u003eList\u0026lt;Option\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e that define \u003ccode\u003eMapT\u003c/code\u003e and \u003ccode\u003eSumT\u003c/code\u003e [for the one  example above]. We also need one for\nevery pair of monads in this library (for one level of nesting \u003ccode\u003eA\u0026lt;B\u0026lt;T\u0026gt;\u0026gt;\u003c/code\u003e), and for every function from the \"standard functional set\" listed above. That's 13 monads * 13 monads * 14 functions. That's a lot of extension methods. Because of this, there's T4 template that generates 'monad transformers' that allows for nested monads.\u003c/p\u003e\n\u003cp\u003eThis is super powerful, and means that most of the time you can leave your \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e or any of the monads in this library wrapped and rarely need to extract the value. You usually only need to extract the value to pass to the BCL or third-party libraries. Even then you could keep them wrapped and use \u003ccode\u003eIter\u003c/code\u003e or \u003ccode\u003eIterT\u003c/code\u003e.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"if-arg--null--throw-new-argumentnullexceptionarg\" class=\"anchor\" href=\"#if-arg--null--throw-new-argumentnullexceptionarg\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eif( arg == null ) throw new ArgumentNullException(\"arg\")\u003c/h2\u003e\n\u003cp\u003eAnother horrible side-effect of \u003ccode\u003enull\u003c/code\u003e is having to bullet-proof every function that takes reference arguments. This is truly tedious. Instead use this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    public void Foo( Some\u0026lt;string\u0026gt; arg )\n    {\n        string value = arg;\n        ...\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBy wrapping \u003ccode\u003estring\u003c/code\u003e as \u003ccode\u003eSome\u0026lt;string\u0026gt;\u003c/code\u003e we get free runtime \u003ccode\u003enull\u003c/code\u003e checking. Essentially it's impossible (well, almost) for \u003ccode\u003enull\u003c/code\u003e to propagate through. As you can see above, the \u003ccode\u003earg\u003c/code\u003e variable casts automatically to \u003ccode\u003estring value\u003c/code\u003e. It's also possible to get at the inner-value like so:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    public void Foo( Some\u0026lt;string\u0026gt; arg )\n    {\n        string value = arg.Value;\n        ...\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e is a \u003ccode\u003estruct\u003c/code\u003e and has implicit conversion operators that convert a type of \u003ccode\u003eT\u003c/code\u003e to a type of \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e. The constructor of \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e ensures that the value of \u003ccode\u003eT\u003c/code\u003e has a non-null value.\u003c/p\u003e\n\u003cp\u003eThere is also an implicit cast operator from \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e to \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e. The \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e will automatically put the \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e into a \u003ccode\u003eSome\u003c/code\u003e state. It's not possible to go the other way and cast from \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e to \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e, because the \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e could be in a \u003ccode\u003eNone\u003c/code\u003e state which would cause the \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e to throw \u003ccode\u003eValueIsNullException\u003c/code\u003e. We want to avoid exceptions being thrown, so you must explicitly \u003ccode\u003ematch\u003c/code\u003e to extract the \u003ccode\u003eSome\u003c/code\u003e value.\u003c/p\u003e\n\u003cp\u003eThere is one weakness to this approach: if you add a member property or field to a class which is a \u003ccode\u003estruct\u003c/code\u003e, and if you don't initialise it, then C# is happy to go along with that. This is the reason why you shouldn't normally include reference members inside structs (or if you do, have a strategy for dealing with it).\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e unfortunately falls victim to this; it wraps a reference of type T. Therefore it can't realistically create a useful default. C# also doesn't call the default constructor for a \u003ccode\u003estruct\u003c/code\u003e in these circumstances, so there's no way to catch the problem early. For example:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    class SomeClass\n    {\n        public Some\u0026lt;string\u0026gt; SomeValue = \"Hello\";\n        public Some\u0026lt;string\u0026gt; SomeOtherValue;\n    }\n    \n    ...\n    \n    public void Greet(Some\u0026lt;string\u0026gt; arg)\n    {\n        Console.WriteLine(arg);\n    }\n    \n    ...\n    \n    public void App()\n    {\n        var obj = new SomeClass();\n        Greet(obj.SomeValue);\n        Greet(obj.SomeOtherValue);\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn the example above, \u003ccode\u003eGreet(obj.SomeOtherValue);\u003c/code\u003e will work until \u003ccode\u003earg\u003c/code\u003e is used inside of the \u003ccode\u003eGreet\u003c/code\u003e function, which puts us back into the \u003ccode\u003enull\u003c/code\u003e realm. There's nothing (that I'm aware of) that can be done about this. \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e will throw a useful \u003ccode\u003eSomeNotInitialisedException\u003c/code\u003e, which should make life a little easier.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e    \"Unitialised Some\u0026lt;...\u0026gt;\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo what's the best plan of attack to mitigate this?\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eDon't use \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e for class members. That means the class logic might have to deal with \u003ccode\u003enull\u003c/code\u003e however.\u003c/li\u003e\n\u003cli\u003eOr, always initialise \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e class members. Mistakes do happen though.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThere's no silver bullet here unfortunately.\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eNOTE: Since writing this library I have come to the opinion that \u003ccode\u003eSome\u0026lt;T\u0026gt;\u003c/code\u003e isn't that useful. It's much better to protect everything else using \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e and immutable data structures. It doesn't fix the argument null checks unfortunately. Perhaps using a contracts library would be better.\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Some_A.htm\" rel=\"nofollow\"\u003eSome reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"lack-of-lambda-and-expression-inference\" class=\"anchor\" href=\"#lack-of-lambda-and-expression-inference\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eLack of lambda and expression inference\u003c/h2\u003e\n\u003cp\u003eOne really annoying thing about the \u003ccode\u003evar\u003c/code\u003e type inference in C# is that it can't handle inline lambdas. For example this won't compile, even though it's obvious it's a \u003ccode\u003eFunc\u0026lt;int,int,int\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var add = (int x, int y) =\u0026gt; x + y;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere are some good reasons for this, so best not to bitch too much. Instead use the \u003ccode\u003efun\u003c/code\u003e function from this library:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var add = fun( (int x, int y) =\u0026gt; x + y );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis will work for \u003ccode\u003eFunc\u0026lt;..\u0026gt;\u003c/code\u003e and \u003ccode\u003eAction\u0026lt;..\u0026gt;\u003c/code\u003e types of up to seven generic arguments. \u003ccode\u003eAction\u0026lt;..\u0026gt;\u003c/code\u003e will be converted to \u003ccode\u003eFunc\u0026lt;..,Unit\u0026gt;\u003c/code\u003e. To maintain an \u003ccode\u003eAction\u003c/code\u003e use the \u003ccode\u003eact\u003c/code\u003e function instead:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var log = act( (int x) =\u0026gt; Console.WriteLine(x) );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf you pass a \u003ccode\u003eFunc\u0026lt;..\u0026gt;\u003c/code\u003e to \u003ccode\u003eact\u003c/code\u003e then its return value will be dropped, so \u003ccode\u003eFunc\u0026lt;R\u0026gt;\u003c/code\u003e becomes \u003ccode\u003eAction\u003c/code\u003e, and \u003ccode\u003eFunc\u0026lt;T,R\u0026gt;\u003c/code\u003e will become \u003ccode\u003eAction\u0026lt;T\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eTo do the same for \u003ccode\u003eExpression\u0026lt;..\u0026gt;\u003c/code\u003e, use the \u003ccode\u003eexpr\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var add = expr( (int x, int y) =\u0026gt; x + y );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNote, if you're creating a \u003ccode\u003eFunc\u003c/code\u003e or \u003ccode\u003eAction\u003c/code\u003e that take parameters, you must provide the type:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Won't compile\n    var add = fun( (x, y) =\u0026gt; x + y );\n\n    // Will compile\n    var add = fun( (int x, int y) =\u0026gt; x + y );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#fun\" rel=\"nofollow\"\u003e\u003ccode\u003efun\u003c/code\u003e reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#act\" rel=\"nofollow\"\u003e\u003ccode\u003eact\u003c/code\u003e reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Prelude_.htm#expr\" rel=\"nofollow\"\u003e\u003ccode\u003eexpr\u003c/code\u003e reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"void-isnt-a-real-type\" class=\"anchor\" href=\"#void-isnt-a-real-type\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eVoid isn't a real type\u003c/h2\u003e\n\u003cp\u003eFunctional languages have a concept of a type that has one possible value (itself) called \u003ccode\u003eUnit\u003c/code\u003e. As an example, \u003ccode\u003ebool\u003c/code\u003e has two possible values: \u003ccode\u003etrue\u003c/code\u003e and \u003ccode\u003efalse\u003c/code\u003e. \u003ccode\u003eUnit\u003c/code\u003e has one possible value, usually represented in functional languages as \u003ccode\u003e()\u003c/code\u003e. You can imagine that methods that take no arguments do in fact take one argument of \u003ccode\u003e()\u003c/code\u003e. Anyway, we can't use the \u003ccode\u003e()\u003c/code\u003e representation in C#, so \u003ccode\u003eLanguageExt\u003c/code\u003e now provides \u003ccode\u003eunit\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    public Unit Empty()\n    {\n        return unit;\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eUnit\u003c/code\u003e is the type and \u003ccode\u003eunit\u003c/code\u003e is the value. It is used throughout the \u003ccode\u003eLanguageExt\u003c/code\u003e library instead of \u003ccode\u003evoid\u003c/code\u003e. The primary reason is that if you want to program functionally then all functions should return a value and \u003ccode\u003evoid\u003c/code\u003e is a type with zero possible values - and that's the type-theory reason why \u003ccode\u003evoid\u003c/code\u003e is a pain in the arse in C#. This can help a lot with LINQ expressions.\u003c/p\u003e\n\u003cp\u003eAny \u003ccode\u003evoid\u003c/code\u003e function or its asynchronous equivalent \u003ccode\u003eTask\u003c/code\u003e can be converted using \u003ccode\u003efun\u003c/code\u003e and \u003ccode\u003eToUnit\u003c/code\u003e as follows:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    public static Func\u0026lt;string, Unit\u0026gt; GetConsoleWrite() =\u0026gt; fun\u0026lt;string\u0026gt;(Console.Write);\n    public static Func\u0026lt;string, Task\u0026lt;Unit\u0026gt;\u0026gt; GetConsoleWriteAsync() =\u0026gt; (string v) =\u0026gt; Console.Out.WriteAsync(v).ToUnit();\n\n    public static Unit WriteToConsole(string v) =\u0026gt; fun(() =\u0026gt; Console.Write(v))();\n    public static Task\u0026lt;Unit\u0026gt; WriteToConsoleAsync(string v) =\u0026gt; Console.Out.WriteAsync(v).ToUnit(); \n\u003c/code\u003e\u003c/pre\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Unit_.htm\" rel=\"nofollow\"\u003eUnit reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"mutable-lists-and-dictionaries\" class=\"anchor\" href=\"#mutable-lists-and-dictionaries\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMutable lists and dictionaries\u003c/h2\u003e\n\u003cp\u003eWith the new \"get only\" property syntax with C# 6 it's now much easier to create immutable types (which everyone should do). However, there's still going to be a bias towards mutable collections. There's a great library on NuGet called \"Immutable Collections\" which sits in the \u003ccode\u003eSystem.Collections.Immutable\u003c/code\u003e namespace. It brings performant immutable lists, dictionaries, etc. to C#. However, this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var list = ImmutableList.Create\u0026lt;string\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ecompared to this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var list = new List\u0026lt;string\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eis annoying. There's clearly going to be a bias toward the shorter, easier to type, better known method of creating lists. In functional languages collections are often baked in (because they're so fundamental), with lightweight and simple syntax for generating and modifying them. So let's have some of that...\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"lists\" class=\"anchor\" href=\"#lists\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eLists\u003c/h3\u003e\n\u003cp\u003eThere's support for \u003ccode\u003eCons\u003c/code\u003e, which is the functional way of constructing lists:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var test = Cons(1, Cons(2, Cons(3, Cons(4, Cons(5, empty\u0026lt;int\u0026gt;())))));\n\n    var array = test.ToArray();\n\n    Assert.IsTrue(array[0] == 1);\n    Assert.IsTrue(array[1] == 2);\n    Assert.IsTrue(array[2] == 3);\n    Assert.IsTrue(array[3] == 4);\n    Assert.IsTrue(array[4] == 5);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003eNote, this isn't the strict definition of \u003ccode\u003eCons\u003c/code\u003e, but it's a pragmatic implementation that returns an \u003ccode\u003eIEnumerable\u0026lt;T\u0026gt;\u003c/code\u003e, is lazy, and behaves the same. Functional purists, please don't get too worked up! I have yet to think of a way of implementing a proper type-safe \u003ccode\u003econs\u003c/code\u003e (that can also represent trees, etc.) in C#.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eFunctional languages usually have a shortcut list constructor syntax that makes the \u003ccode\u003eCons\u003c/code\u003e approach easier. It usually looks something like this:\u003c/p\u003e\n\u003cpre lang=\"F#\"\u003e\u003ccode\u003e    let list = [1;2;3;4;5]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn C# it looks like this:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var array = new int[] { 1, 2, 3, 4, 5 };\n    var list = new List\u0026lt;int\u0026gt; { 1, 2, 3, 4, 5 };\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eOr worse:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var list = new List\u0026lt;int\u0026gt;();\n    list.Add(1);\n    list.Add(2);\n    list.Add(3);\n    list.Add(4);\n    list.Add(5);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo we provide the \u003ccode\u003eList\u003c/code\u003e function that takes any number of parameters and turns them into a list:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Creates a list of five items\n     var test = List(1, 2, 3, 4, 5);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis is much closer to the \"functional way\". It also returns a \u003ccode\u003eLst\u0026lt;T\u0026gt;\u003c/code\u003e which is an immutable list implementation, making it easier to use immutable-lists than mutable ones, and requires significantly less typing.\u003c/p\u003e\n\u003cp\u003eAlso \u003ccode\u003eRange\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Creates a sequence of 1000 integers lazily (starting at 500).\n    var list = Range(500,1000);\n    \n    // Produces: [0, 10, 20, 30, 40]\n    var list = Range(0,50,10);\n    \n    // Produces: ['a,'b','c','d','e']\n    var chars = Range('a','e');\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSome of the standard set of list functions are available (in \u003ccode\u003eLanguageExt.List\u003c/code\u003e):\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    using static LanguageExt.List;\n    ...\n\n    // Generates 10,20,30,40,50\n    var input = List(1, 2, 3, 4, 5);\n    var output1 = map(input, x =\u0026gt; x * 10);\n\n    // Generates 30,40,50\n    var output2 = filter(output1, x =\u0026gt; x \u0026gt; 20);\n\n    // Generates 120\n    var output3 = fold(output2, 0, (x, s) =\u0026gt; s + x);\n\n    Assert.IsTrue(output3 == 120);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe above can be written in a \"fluent\" style as well:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var res = List(1, 2, 3, 4, 5)\n                .Map(x =\u0026gt; x * 10)\n                .Filter(x =\u0026gt; x \u0026gt; 20)\n                .Fold(0, (x, s) =\u0026gt; s + x);\n\n    Assert.IsTrue(res == 120);\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"list-pattern-matching\" class=\"anchor\" href=\"#list-pattern-matching\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eList pattern matching\u003c/h3\u003e\n\u003cp\u003eHere we implement the standard functional pattern for matching on list elements. In our version you must provide at least 2 handlers:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eOne for an empty list\u003c/li\u003e\n\u003cli\u003eOne for a non-empty list\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eHowever, you can provide up to seven handlers, one for an empty list and six for deconstructing the first six items at the head of the list.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    public int Sum(IEnumerable\u0026lt;int\u0026gt; list) =\u0026gt;\n        match( list,\n               ()      =\u0026gt; 0,\n               (x, xs) =\u0026gt; x + Sum(xs) );\n\n    public int Product(IEnumerable\u0026lt;int\u0026gt; list) =\u0026gt;\n        match( list,\n               ()      =\u0026gt; 0,\n               x       =\u0026gt; x,\n               (x, xs) =\u0026gt; x * Product(xs) );\n\n    public void RecursiveMatchSumTest()\n    {\n        var list0 = List\u0026lt;int\u0026gt;();\n        var list1 = List(10);\n        var list5 = List(10,20,30,40,50);\n        \n        Assert.IsTrue(Sum(list0) == 0);\n        Assert.IsTrue(Sum(list1) == 10);\n        Assert.IsTrue(Sum(list5) == 150);\n    }\n\n    public void RecursiveMatchProductTest()\n    {\n        var list0 = List\u0026lt;int\u0026gt;();\n        var list1 = List(10);\n        var list5 = List(10, 20, 30, 40, 50);\n\n        Assert.IsTrue(Product(list0) == 0);\n        Assert.IsTrue(Product(list1) == 10);\n        Assert.IsTrue(Product(list5) == 12000000);\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThose patterns should be very familiar to anyone who's ventured into the functional world. For those that haven't, the \u003ccode\u003e(x,xs)\u003c/code\u003e convention might seem odd. \u003ccode\u003ex\u003c/code\u003e is the item at the head of the list - \u003ccode\u003elist.First()\u003c/code\u003e in LINQ world. \u003ccode\u003exs\u003c/code\u003e (many X-es) is the tail of the list - \u003ccode\u003elist.Skip(1)\u003c/code\u003e in LINQ. This recursive pattern of working on the head of the list until the list runs out is pretty much how loops are done in the functional world.\u003c/p\u003e\n\u003cp\u003eBe wary of recursive processing; C# will happily blow up the stack after a few thousand iterations.\u003c/p\u003e\n\u003cp\u003eFunctional programming doesn't really \u003cem\u003edo\u003c/em\u003e design patterns, but if anything is a design pattern it's the use of \u003ccode\u003efold\u003c/code\u003e. If you put a bit of thought into it, you will realise that recursive processes all tend to follow a very similar pattern.\u003c/p\u003e\n\u003cp\u003eThe two recursive examples above for calculating the sum and product of a sequence of numbers can be written as:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Sum\n    var total = fold(list, 0, (s,x) =\u0026gt; s + x);\n    \n    // Product\n    var total = reduce(list, (s,x) =\u0026gt; s * x);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ereduce\u003c/code\u003e is \u003ccode\u003efold\u003c/code\u003e but instead of providing an initial state value, it uses the first item in the sequence. Therefore you don't get an initial multiply by zero (unless the first item is zero!). Internally \u003ccode\u003efold\u003c/code\u003e, \u003ccode\u003efoldBack\u003c/code\u003e, and \u003ccode\u003ereduce\u003c/code\u003e use an iterative loop rather than a recursive one, so no stack blowing problems!\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/List_.htm\" rel=\"nofollow\"\u003eList module reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Lst_A.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eLst\u0026lt;T\u0026gt;\u003c/code\u003e immutable list type reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n\u003ca id=\"maps\" class=\"anchor\" href=\"#maps\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMaps\u003c/h3\u003e\n\u003cp\u003eWe also support dictionaries. Again the word \u003ccode\u003eDictionary\u003c/code\u003e is such a pain to type, especially when there's a perfectly valid alternative used in the functional world: \u003ccode\u003emap\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eTo create an immutable map, you no longer have to type:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var dict = ImmutableDictionary.Create\u0026lt;string,int\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eInstead you can use:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var dict = Map\u0026lt;string,int\u0026gt;();\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cem\u003e\u003ccode\u003eMap\u0026lt;K,V\u0026gt;\u003c/code\u003e is an implementation of an AVL Tree (self balancing binary tree). This allows us to extend the standard \u003ccode\u003eIDictionary\u003c/code\u003e set of functions to include things like \u003ccode\u003efindRange\u003c/code\u003e.\u003c/em\u003e\u003c/p\u003e\n\u003cp\u003eAlso you can pass in a list of tuples or key-value pairs:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var people = Map((1, \"Rod\"),\n                     (2, \"Jane\"),\n                     (3, \"Freddy\"));\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo read an item call:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    Option\u0026lt;string\u0026gt; result = find(people, 1);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis allows for branching based on whether the item is in the map or not:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Find the item, do some processing on it and return.\n    var res = match( find(people, 100),\n                     Some: v  =\u0026gt; \"Hello \" + v,\n                     None: () =\u0026gt; \"failed\" );\n                   \n    // Find the item and return it. If it's not there, return \"failed\"\n    var res = find(people, 100).IfNone(\"failed\");                   \n    \n    // Find the item and return it. If it's not there, return \"failed\"\n    var res = ifNone( find(people, 100), \"failed\" );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eBecause checking for the existence of something in a dictionary (\u003ccode\u003efind\u003c/code\u003e), and then matching on its result is very common, there is a more convenient \u003ccode\u003ematch\u003c/code\u003e override:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    // Find the item, do some processing on it and return.\n    var res = match( people, 1,\n                     Some: v  =\u0026gt; \"Hello \" + v,\n                     None: () =\u0026gt; \"failed\" );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo set an item call:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    var newThings = setItem(people, 1, \"Zippy\");\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eObviously because it's an immutable structure, calling \u003ccode\u003eadd\u003c/code\u003e, \u003ccode\u003etryAdd\u003c/code\u003e, \u003ccode\u003eaddOrUpdate\u003c/code\u003e, \u003ccode\u003eaddRange\u003c/code\u003e, \u003ccode\u003etryAddRange\u003c/code\u003e, \u003ccode\u003eaddOrUpdateRange\u003c/code\u003e, \u003ccode\u003eremove\u003c/code\u003e, \u003ccode\u003esetItem\u003c/code\u003e, \u003ccode\u003etrySetItem\u003c/code\u003e, \u003ccode\u003esetItems\u003c/code\u003e or \u003ccode\u003etrySetItems\u003c/code\u003e... will generate a new \u003ccode\u003eMap\u0026lt;K,V\u0026gt;\u003c/code\u003e. It's quite cunning though, and it only replaces the items that need to be replaced and returns a new map with the new items and shared old items. This massively reduces the memory allocation burden\u003c/p\u003e\n\u003cp\u003eBy holding onto a reference to the \u003ccode\u003eMap\u003c/code\u003e before and after calling \u003ccode\u003eadd\u003c/code\u003e you essentially have a perfect timeline history of the changes. Be wary that if what you're holding in the \u003ccode\u003eMap\u003c/code\u003e is \u003cem\u003emutable\u003c/em\u003e and you change your mutable items, then the old \u003ccode\u003eMap\u003c/code\u003e and the new \u003ccode\u003eMap\u003c/code\u003e will change, so only store immutable items in a \u003ccode\u003eMap\u003c/code\u003e or leave them alone if they're mutable.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_.htm\" rel=\"nofollow\"\u003eMap module reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/MapExtensions_.htm\" rel=\"nofollow\"\u003eMap extensions reference\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Map_K_V.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eMap\u0026lt;K, V\u0026gt;\u003c/code\u003e immutable type reference\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e\n\u003ca id=\"map-transformers\" class=\"anchor\" href=\"#map-transformers\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eMap transformers\u003c/h3\u003e\n\u003cp\u003eThere are additional transformer functions for dealing with \"wrapped\" maps (i.e. \u003ccode\u003eMap\u0026lt;int, Map\u0026lt;int, string\u0026gt;\u0026gt;\u003c/code\u003e). We only cover a limited set of the full set of \u003ccode\u003eMap\u003c/code\u003e functions at the moment. You can wrap \u003ccode\u003eMap\u003c/code\u003e up to 4 levels deep and still call things like \u003ccode\u003eFold\u003c/code\u003e and \u003ccode\u003eFilter\u003c/code\u003e. There's  interesting variants of \u003ccode\u003eFilter\u003c/code\u003e and \u003ccode\u003eMap\u003c/code\u003e called \u003ccode\u003eFilterRemoveT\u003c/code\u003e and \u003ccode\u003eMapRemoveT\u003c/code\u003e, where if a filter or map operation leaves any keys at any level with an empty \u003ccode\u003eMap\u003c/code\u003e then it will auto-remove them.\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    Map\u0026lt;int,Map\u0026lt;int,Map\u0026lt;int, Map\u0026lt;int, string\u0026gt;\u0026gt;\u0026gt;\u0026gt; wrapped = Map.create\u0026lt;int,Map\u0026lt;int,Map\u0026lt;int,Map\u0026lt;int,string\u0026gt;\u0026gt;();\n    \n    wrapped = wrapped.AddOrUpdate(1,2,3,4,\"Paul\");\n    wrapped = wrapped.SetItemT(1,2,3,4,\"Louth\");\n    var name = wrapped.Find(1,2,3,4);               // \"Louth\"\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003eMap\u003c/code\u003e transformer functions:\u003c/p\u003e\n\u003cp\u003e\u003cem\u003eNote, there are only fluent versions of the transformer functions.\u003c/em\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eFind\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eAddOrUpdate\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eRemove\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eMapRemoveT\u003c/code\u003e - maps each level,  checks if the map is empty, in which case it removes it\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eMapT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eFilterT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e`FilterRemoveT`` - filters each level, checks if the map is empty, in which case it removes it\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eExists\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eForAll\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eSetItemT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eTrySetItemT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eFoldT\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003emore coming...\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003e\n\u003ca id=\"difficulty-in-creating-immutable-record-types\" class=\"anchor\" href=\"#difficulty-in-creating-immutable-record-types\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eDifficulty in creating immutable record types\u003c/h2\u003e\n\u003cp\u003eIt's no secret that implementing immutable record types with structural equality, structural ordering, and efficient hashing solutions is a real manual head-ache of implementing \u003ccode\u003eEquals\u003c/code\u003e, \u003ccode\u003eGetHashCode\u003c/code\u003e, deriving from \u003ccode\u003eIEquatable\u0026lt;A\u0026gt;\u003c/code\u003e, \u003ccode\u003eIComparer\u0026lt;A\u0026gt;\u003c/code\u003e, and implementing the operators: \u003ccode\u003e==\u003c/code\u003e, \u003ccode\u003e!=\u003c/code\u003e, \u003ccode\u003e\u0026lt;\u003c/code\u003e, \u003ccode\u003e\u0026lt;=\u003c/code\u003e, \u003ccode\u003e\u0026gt;\u003c/code\u003e, \u003ccode\u003e\u0026gt;=\u003c/code\u003e. It is a constant maintenance headache of making sure they're kept up to date when new fields are added to the type, with no compilation errors if you forget to do it.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"recorda\" class=\"anchor\" href=\"#recorda\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eRecord\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h2\u003e\n\u003cp\u003eThis can now be achieved simply by deriving your type from \u003ccode\u003eRecord\u0026lt;A\u0026gt;\u003c/code\u003e where \u003ccode\u003eA\u003c/code\u003e is the type you want to have structural equality and ordering:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTestClass\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003eZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis gives you \u003ccode\u003eEquals\u003c/code\u003e, \u003ccode\u003eIEquatable.Equals\u003c/code\u003e, \u003ccode\u003eIComparer.CompareTo\u003c/code\u003e, \u003ccode\u003eGetHashCode\u003c/code\u003e, \u003ccode\u003eoperator==\u003c/code\u003e, \u003ccode\u003eoperator!=\u003c/code\u003e, \u003ccode\u003eoperator \u0026gt;\u003c/code\u003e, \u003ccode\u003eoperator \u0026gt;=\u003c/code\u003e, \u003ccode\u003eoperator \u0026lt;\u003c/code\u003e, and \u003ccode\u003eoperator \u0026lt;=\u003c/code\u003e implemented by default. It also gives you a default \u003ccode\u003eToString()\u003c/code\u003e implementation and \u003ccode\u003eISerializable.GetObjectData()\u003c/code\u003e with a deserialisation constructor.\u003c/p\u003e\n\u003cp\u003eNote that only \u003cem\u003efields\u003c/em\u003e or \u003cem\u003efield backed properties\u003c/em\u003e are used in the structural comparisons and hash-code building. There are also \u003ccode\u003eAttribute\u003c/code\u003es for opting fields out of the equality testing, ordering comparisons, hash-code generation, stringification (\u003ccode\u003eToString\u003c/code\u003e), and serialisation:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ccode\u003eEquals()\u003c/code\u003e - \u003ccode\u003eNonEq\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eCompareTo()\u003c/code\u003e - \u003ccode\u003eNonOrd\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eGetHashCode()\u003c/code\u003e - \u003ccode\u003eNonHash\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eToString()\u003c/code\u003e - \u003ccode\u003eNonShow\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003eSerialization - \u003ccode\u003eNonSerializable\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eFor example, here's a record type that opts out of various default behaviours:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTestClass2\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass2\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eNonEq\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eNonHash\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eNonShow\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003eZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTestClass2\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eIf you want your type to serialise with Json.NET or other serialisers, then you will need to add an extra serialisation constructor that calls the default base implementation:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTestClass\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003eZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \n        \u003cspan class=\"nf\"\u003eTestClass\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSerializationInfo\u003c/span\u003e \u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eStreamingContext\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n            \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003ebase\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003einfo\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003econtext\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis will do full structural equality as the following examples demonstrate:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003eHead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTail\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ehead\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003etail\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eHead\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ehead\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTail\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etail\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eConsTests\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistA\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e))));\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistB\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e))));\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003elistC\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eCons\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)));\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elistA\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003elistB\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elistB\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003elistC\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elistA\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003elistC\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eLeft\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eRight\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eValue\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003evalue\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLeft\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eRight\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eright\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003evoid\u003c/span\u003e \u003cspan class=\"nf\"\u003eTreeTests\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etreeA\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)));\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etreeB\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)));\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etreeC\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"n\"\u003eTree\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etreeA\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003etreeB\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etreeB\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003etreeC\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003etreeA\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"n\"\u003etreeC\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThere are some \u003ca href=\"https://github.com/louthy/language-ext/blob/master/LanguageExt.Tests/RecordTypesTest.cs\" rel=\"nofollow\"\u003eunit tests\u003c/a\u003e to see this in action.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eInheritance is not supported in \u003ccode\u003eRecord\u003c/code\u003e derived types, so if you derive a type from a type that derives from \u003ccode\u003eRecord\u003c/code\u003e then you won't magically inherit any equality, ordering, hash-code, etc. behaviours. This feature is explicitly here to implement record-like functionality, which do not support inheritance in other functional languages. Equality of origin is explicitly checked for.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003e\n\u003ca id=\"recordtypea\" class=\"anchor\" href=\"#recordtypea\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eRecordType\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h2\u003e\n\u003cp\u003eYou can also use the \"toolkit\" that \u003ccode\u003eRecord\u0026lt;A\u0026gt;\u003c/code\u003e uses to build this functionality in your own bespoke types (perhaps if you want to use this for \u003ccode\u003estruct\u003c/code\u003e comparisons or if you can't derive directly from \u003ccode\u003eRecord\u0026lt;A\u0026gt;\u003c/code\u003e, or maybe you just want some of the functionality for ad-hoc behaviour):\u003c/p\u003e\n\u003cp\u003eThe toolkit is composed of four functions:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eHash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecord\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis will provide the hash-code for the record of type \u003ccode\u003eA\u003c/code\u003e provided. It can be used for your default \u003ccode\u003eGetHashCode()\u003c/code\u003e implementation.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquality\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecord\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis provides structural equality with the record of type \u003ccode\u003eA\u003c/code\u003e and the record of type \u003ccode\u003eobject\u003c/code\u003e. The types must match for the equality to pass. It can be used for your default \u003ccode\u003eEquals(object)\u003c/code\u003e implementation.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEqualityTyped\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erecord1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erecord2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis provides structural equality with the record of type \u003ccode\u003eA\u003c/code\u003e and another record of type \u003ccode\u003eA\u003c/code\u003e. It can be used for your default \u003ccode\u003eEquals(a, b)\u003c/code\u003e method for the \u003ccode\u003eIEquatable\u0026lt;A\u0026gt;\u003c/code\u003e implementation.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis provides a structural ordering comparison with the record of type \u003ccode\u003eA\u003c/code\u003e and another record the record of type \u003ccode\u003eA\u003c/code\u003e. It can be used for your default \u003ccode\u003eCompareTo(a, b)\u003c/code\u003e method for the \u003ccode\u003eIComparable\u0026lt;A\u0026gt;\u003c/code\u003e implementation.\u003c/p\u003e\n\u003cp\u003eBelow is the toolkit in use,  it's used to build a \u003ccode\u003estruct\u003c/code\u003e type that has structural equality, ordering, and hash-code implementation.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTestStruct\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eIEquatable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eIComparable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003eZ\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGuid\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eZ\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCode\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eHash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eoverride\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eobject\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquality\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eobj\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eCompareTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eRecordType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTestStruct\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEqualityTyped\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eother\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch2\u003e\n\u003ca id=\"transformation-of-immutable-types\" class=\"anchor\" href=\"#transformation-of-immutable-types\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTransformation of immutable types\u003c/h2\u003e\n\u003cp\u003eIf you're writing functional code you should treat your types as values. Which means they should be immutable. One common way to do this is to use \u003ccode\u003ereadonly\u003c/code\u003e fields and provide a \u003ccode\u003eWith\u003c/code\u003e function for mutation. i.e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eA\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e??\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e??\u003c/span\u003e \u003cspan class=\"k\"\u003ethis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThen transformation can be achieved by using the named arguments feature of C# thus:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eval\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eval\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"with\" class=\"anchor\" href=\"#with\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003e[With]\u003c/code\u003e\n\u003c/h3\u003e\n\u003cp\u003eIt can be quite tedious to write the \u003ccode\u003eWith\u003c/code\u003e function however. And so, if you include the \u003ccode\u003eLanguageExt.CodeGen\u003c/code\u003e nu-get package in your solution you gain the ability to use the \u003ccode\u003e[With]\u003c/code\u003e attribtue on a type. This will build the \u003ccode\u003eWith\u003c/code\u003e method for you.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eNOTE: The \u003ccode\u003eLanguageExt.CodeGen\u003c/code\u003e package and its dependencies will not be included in your final build - it is purely there to generate the code.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eYou must however:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eMake the \u003ccode\u003eclass\u003c/code\u003e \u003ccode\u003epartial\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003eHave a constructor that takes the fields in the order they are in the type\u003c/li\u003e\n\u003cli\u003eThe names of the arguments should be the same as the field, but with the first character lower-case\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003ei.e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"na\"\u003e[With]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eA\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"n\"\u003eX\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eX\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eY\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch2\u003e\n\u003ca id=\"transformation-of-nested-immutable-types-with-lenses\" class=\"anchor\" href=\"#transformation-of-nested-immutable-types-with-lenses\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTransformation of nested immutable types with Lenses\u003c/h2\u003e\n\u003cp\u003eOne of the problems with immutable types is trying to transform something nested deep in several data structures. This often requires a lot of nested \u003ccode\u003eWith\u003c/code\u003e methods, which are not very pretty or easy to use.\u003c/p\u003e\n\u003cp\u003eEnter the \u003ccode\u003eLens\u0026lt;A, B\u0026gt;\u003c/code\u003e type.\u003c/p\u003e\n\u003cp\u003eLenses encapsulate the getter and setter of a field in an immutable data structure and are composable:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"na\"\u003e[With]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePerson\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis allows direct transformation of the value:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Joe\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Bloggs\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"l\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// Joel Bloggs\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis can also be achieved using the \u003ccode\u003eUpdate\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Joe\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Bloggs\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eUpdate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"s\"\u003e\"l\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e  \u003cspan class=\"c1\"\u003e// Joel Bloggs\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe power of lenses really becomes apparent when using nested immutable types, because lenses can be composed. So, let's first create a \u003ccode\u003eRole\u003c/code\u003e type which will be used with the \u003ccode\u003ePerson\u003c/code\u003e type to represent an employee's job title and salary:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"na\"\u003e[With]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eRole\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eSalary\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003esalary\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eTitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSalary\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esalary\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003etitle\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTitle\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esalary\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSalary\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSalary\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003e[With]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePerson\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e \u003cspan class=\"n\"\u003erole\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eRole\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003erole\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003erole\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eNew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eGet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ep\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eWith\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003c/pre\u003e\n\u003cp\u003eWe can now compose the lenses within the types to access the nested fields:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecto\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Joe\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Bloggs\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"CTO\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e150000\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003epersonSalary\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003elens\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erole\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eRole\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esalary\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecto2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epersonSalary\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e170000\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecto\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"withlens\" class=\"anchor\" href=\"#withlens\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003e[WithLens]\u003c/code\u003e\n\u003c/h3\u003e\n\u003cp\u003eTyping the lens fields out every time is even more tedious than writing the \u003ccode\u003eWith\u003c/code\u003e function, and so there is code generation for that too: using the \u003ccode\u003e[WithLens]\u003c/code\u003e attribute. Next, we'll use some of the built-in lenses in the \u003ccode\u003eMap\u003c/code\u003e type to access and mutate a \u003ccode\u003eAppt\u003c/code\u003e type within a map:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"na\"\u003e[WithLens]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003ePerson\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eName\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eMap\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eAppts\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMap\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eappts\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eName\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ename\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eSurname\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esurname\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eAppts\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eappts\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"na\"\u003e[WithLens]\u003c/span\u003e\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eAppt\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eRecord\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eId\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e \u003cspan class=\"n\"\u003eStartDate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003ereadonly\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e \u003cspan class=\"n\"\u003eState\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"nf\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e \u003cspan class=\"n\"\u003estartDate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e \u003cspan class=\"n\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eId\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eStartDate\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estartDate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eState\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eenum\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\n\u003cspan class=\"p\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eNotArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eDNA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eCancelled\u003c/span\u003e\n\u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSo, here we have a \u003ccode\u003ePerson\u003c/code\u003e with a map of \u003ccode\u003eAppt\u003c/code\u003e types. And we want to update an appointment state to be \u003ccode\u003eArrived\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\u003cspan class=\"c1\"\u003e// Generate a Person with three Appts in a Map\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Paul\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"Louth\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eMap\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"1/1/2010\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNotArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"2/1/2010\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNotArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"nf\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eParse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"3/1/2010\"\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eNotArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e))));\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Local function for composing a new lens from 3 other lenses\u003c/span\u003e\n\u003cspan class=\"n\"\u003eLens\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003esetState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \n    \u003cspan class=\"nf\"\u003elens\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePerson\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eappts\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMap\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"nf\"\u003eitem\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eid\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eAppt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Transform\u003c/span\u003e\n\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eperson2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003esetState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eApptState\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eArrived\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eperson\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNotice the local-function which takes an ID and uses that with the \u003ccode\u003eitem\u003c/code\u003e lens in the \u003ccode\u003eMap\u003c/code\u003e type to mutate an \u003ccode\u003eAppt\u003c/code\u003e. Very powerful stuff.\u003c/p\u003e\n\u003cp\u003eThere are a number of useful lenses in the collection types that can do common things like mutate by index, head, tail, last, etc.\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"the-awful-out-parameter\" class=\"anchor\" href=\"#the-awful-out-parameter\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eThe awful \u003ccode\u003eout\u003c/code\u003e parameter\u003c/h2\u003e\n\u003cp\u003eThis has to be one of the most awful patterns in C#:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int result;\n    if( Int32.TryParse(value, out result) )\n    {\n        ...\n    }\n    else\n    {\n        ...\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere's all kinds of wrong there. Essentially the function needs to return two pieces of information:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eWhether the parse was a success or not\u003c/li\u003e\n\u003cli\u003eThe successfully parsed value\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eThis is a common theme throughout the .NET framework. For example on \u003ccode\u003eIDictionary.TryGetValue\u003c/code\u003e\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    int value;\n    if( dict.TryGetValue(\"thing\", out value) )\n    {\n       ...\n    }\n    else\n    {\n       ...\n    }\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eSo to solve it we now have methods that instead of returning \u003ccode\u003ebool\u003c/code\u003e, return \u003ccode\u003eOption\u0026lt;T\u0026gt;\u003c/code\u003e. If the operation fails it returns \u003ccode\u003eNone\u003c/code\u003e. If it succeeds it returns \u003ccode\u003eSome(the value)\u003c/code\u003e which can then be matched. Here's some usage examples:\u003c/p\u003e\n\u003cpre lang=\"C#\"\u003e\u003ccode\u003e    \n    // Attempts to parse the value, uses 0 if it can't\n    int res = parseInt(\"123\").IfNone(0);\n\n    // Attempts to parse the value, uses 0 if it can't\n    int res = ifNone(parseInt(\"123\"), 0);\n\n    // Attempts to parse the value, doubles it if can, returns 0 otherwise\n    int res = parseInt(\"123\").Match(\n                  Some: x =\u0026gt; x * 2,\n                 None: () =\u0026gt; 0\n              );\n\n    // Attempts to parse the value, doubles it if can, returns 0 otherwise\n    int res = match( parseInt(\"123\"),\n                     Some: x =\u0026gt; x * 2,\n                     None: () =\u0026gt; 0 );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eout\u003c/code\u003e method variants\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003eIDictionary\u0026lt;K, V\u0026gt;.TryGetValue\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003eIReadOnlyDictionary\u0026lt;K, V\u0026gt;.TryGetValue\u003c/code\u003e\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eint.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseInt\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003elong.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseLong\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eshort.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseShort\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003echar.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseChar\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003esbyte.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseSByte\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ebyte.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseByte\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eulong.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseULong\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003euint.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseUInt\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eushort.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseUShort\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003efloat.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseFloat\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003edouble.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseDouble\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003edecimal.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseDecimal\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003ebool.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseBool\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eGuid.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseGuid\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eDateTime.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseDateTime\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eDateTimeOffset.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseDateTimeOffset\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eTimeSpan.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseTimeSpan\u003c/code\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ccode\u003eEnum.TryParse\u003c/code\u003e becomes \u003ccode\u003eparseEnum\u003c/code\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cem\u003eany others you think should be included, please get in touch\u003c/em\u003e\u003c/p\u003e\n\u003ch2\u003e\n\u003ca id=\"ad-hoc-polymorphism\" class=\"anchor\" href=\"#ad-hoc-polymorphism\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eAd-hoc polymorphism\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003cem\u003eThis is where things get a little crazy!  This section is taking what's possible with C# to its limits. None of what follows is essential for 99% of the use cases for this library. However, the seasoned C# programmer will recognise some of the issues raised (like no common numeric base-type); and experienced functional programmers will recognise the category theory creeping in... Just remember, this is all optional, but also pretty powerful if you want to go for it\u003c/em\u003e.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eAd-hoc polymorphism has long been believed to not be possible in C#. However with some cunning it is. Ad-hoc polymorphism allows programmers to add traits to a type later. For example in C# it would be amazing if we had an interface called \u003ccode\u003eINumeric\u003c/code\u003e for numeric types like \u003ccode\u003eint\u003c/code\u003e, \u003ccode\u003elong\u003c/code\u003e, \u003ccode\u003edouble\u003c/code\u003e, etc. The reason this doesn't exist is if you write a function like:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eINumeric\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eINumeric\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eINumeric\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThen it would cause boxing. Which is slow (well, slower). I can only assume that's why it wasn't added by the BCL team. Anyway, it's possible to create a numeric type, very much like a type-class in Haskell, and ad-hoc \u003cem\u003einstances\u003c/em\u003e of the numeric \u003cem\u003etype-class\u003c/em\u003e that allow for generic numeric operations without boxing.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eFrom now on I will call them type-classes and class-instances, or just instances. This is not exactly the same as Haskell's type-classes. If anything it's closer to Scala's implicits. However to make it easier to discuss them I will steal from Haskell's lexicon.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4\u003e\n\u003ca id=\"numa\" class=\"anchor\" href=\"#numa\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003eSo for example, this is how to create a number type-class:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubtract\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNotice how there are two arguments to \u003ccode\u003eAdd\u003c/code\u003e and \u003ccode\u003eSubtract\u003c/code\u003e. Normally if I was going to implement this \u003ccode\u003einterface\u003c/code\u003e the left-hand-side of the \u003ccode\u003eAdd\u003c/code\u003e and \u003ccode\u003eSubtract\u003c/code\u003e would be \u003ccode\u003ethis\u003c/code\u003e. I will implement the \u003cem\u003ead-hoc\u003c/em\u003e class-instance to demonstrate why that is:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eTInt\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubtract\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSee how \u003ccode\u003eTInt\u003c/code\u003e is a \u003ccode\u003estruct\u003c/code\u003e?  Structs have a useful property in C# in that they can't be \u003ccode\u003enull\u003c/code\u003e. So we can invoke the operations like so:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003er\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe important thing to note is that \u003ccode\u003edefault(TInt)\u003c/code\u003e gets optimisied out in a release build, so there's no cost to the invocation of \u003ccode\u003eAdd\u003c/code\u003e. The \u003ccode\u003eAdd\u003c/code\u003e and \u003ccode\u003eSubtract\u003c/code\u003e methods both take \u003ccode\u003eint\u003c/code\u003e and return \u003ccode\u003eint\u003c/code\u003e. So therefore there's no boxing at all.\u003c/p\u003e\n\u003cp\u003eIf we now implement \u003ccode\u003eTFloat\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eTFloat\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"nf\"\u003eSubtract\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThen we can see how a general function could be written to take any numeric type:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003eDoubleIt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNumA\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe important bit is the \u003ccode\u003eNumA\u003c/code\u003e generic argument, and the constraint of \u003ccode\u003estruct, Num\u0026lt;A\u0026gt;\u003c/code\u003e. That allows us to call \u003ccode\u003edefault(NumA)\u003c/code\u003e to get the type-class instance and invoke \u003ccode\u003eAdd\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eAnd so this can now be called by:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e   \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDoubleIt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e        \u003cspan class=\"c1\"\u003e// 10\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDoubleIt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTFloat\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003efloat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e5.25\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 10.5\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eBy expanding the amount of operations that the \u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e type-class can do, you can perform any numeric operation you like. If you like you can add new numeric types (say for complex numbers, or whatever), where the rules of the type are kept in the \u003cem\u003ead-hoc\u003c/em\u003e instance.\u003c/p\u003e\n\u003cp\u003eLuckily you don't need to do that, because I have created the \u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e type (in the \u003ccode\u003eLanguageExt.TypeClasses\u003c/code\u003e namespace), as well as \u003ccode\u003eFloating\u0026lt;A\u0026gt;\u003c/code\u003e (with all of the operations from \u003ccode\u003eMath\u003c/code\u003e; like \u003ccode\u003eSin\u003c/code\u003e, \u003ccode\u003eCos\u003c/code\u003e, \u003ccode\u003eExp\u003c/code\u003e, etc.). \u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e also has a base-type of \u003ccode\u003eArithmetic\u0026lt;A\u0026gt;\u003c/code\u003e which supports \u003ccode\u003ePlus\u003c/code\u003e, \u003ccode\u003eSubtract\u003c/code\u003e, \u003ccode\u003eProduct\u003c/code\u003e, \u003ccode\u003eNegate\u003c/code\u003e. This is for types which don't need the full spec of the \u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e type. I have also mapped all of the core numeric types to instances: \u003ccode\u003eTInt\u003c/code\u003e, \u003ccode\u003eTShort\u003c/code\u003e, \u003ccode\u003eTLong\u003c/code\u003e, \u003ccode\u003eTFloat\u003c/code\u003e, \u003ccode\u003eTDouble\u003c/code\u003e, \u003ccode\u003eTDecimal\u003c/code\u003e, \u003ccode\u003eTBigInt\u003c/code\u003e, etc. So it's possible to write truly generic numeric code once.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThere's no getting around the fact that providing the class-instance in the generic arguments list is annoying (and later you'll see how annoying). The Roslyn team are looking into a type-classes like feature for a future version of C# (variously named: 'Concepts' or 'Shapes'). So this will I'm sure be rectified, and when it is, it will be implemented exactly as I am using them here.\u003c/p\u003e\n\u003cp\u003eUntil then the pain of providing the generic arguments must continue. You do however get a \u003cem\u003esuper-powered C#\u003c/em\u003e in the mean-time.\u003c/p\u003e\n\u003cp\u003eThe need to write this kind of super-generic code is rare; but when you need it, \u003cem\u003eyou need it\u003c/em\u003e - and right now this is simply the most powerful way.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4\u003e\n\u003ca id=\"eqa\" class=\"anchor\" href=\"#eqa\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003eNext up is \u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e. Equality testing in C# is an absolute nightmare. From the different semantics of \u003ccode\u003eEquals\u003c/code\u003e and \u003ccode\u003e==\u003c/code\u003e, to \u003ccode\u003eIEqualityComparer\u003c/code\u003e, and the enormous hack which is \u003ccode\u003eEqualityComparer.Default\u003c/code\u003e (which doesn't blow up at compile-time if your code is wrong).\u003c/p\u003e\n\u003cp\u003eThe \u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e type-class looks like this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eEq\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThere are \u003ccode\u003eEq\u003c/code\u003e prefixed instances for all common types (\u003ccode\u003eEqInt\u003c/code\u003e, \u003ccode\u003eEqString\u003c/code\u003e, \u003ccode\u003eEqGuid\u003c/code\u003e etc.), as well as for all of the types in this library (\u003ccode\u003eEqLst\u003c/code\u003e, \u003ccode\u003eEqSet\u003c/code\u003e, \u003ccode\u003eEqTry\u003c/code\u003e, etc). All of the numeric types (\u003ccode\u003eTInt\u003c/code\u003e, \u003ccode\u003eTDouble\u003c/code\u003e, etc.) also implement \u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eTo make it slightly prettier to use in code, you can use the \u003ccode\u003ePrelude\u003c/code\u003e \u003ccode\u003eequals\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eequals\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEqInt\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// True\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOr use \u003ccode\u003edefault\u003c/code\u003e as shown before:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEqInt\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// True\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOne final way is:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eEqInt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eInst\u003c/code\u003e is defined on all of the instances in lang-ext, but it's not an 'official feature'. Anybody could implement an ad-hoc implementation of \u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e and not provide an \u003ccode\u003eInst\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eFor example you may call this directly:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eEqLst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eInst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e \u003cspan class=\"c1\"\u003e// true\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eBecause you may be concerned about calling:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// ?\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003e... as all C# programmers are at some point, because we have no idea most of the time whether \u003ccode\u003e==\u003c/code\u003e does what we think it should.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eJust FYI \u003ccode\u003eList(1,2,3) == List(1,2,3)\u003c/code\u003e does work properly!  As do all types in language-ext.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eThere are two variants of the immutable \u003ccode\u003eHashSet\u003c/code\u003e in language-ext:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEqA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eEqA\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eEq\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eWhat's interesting about the second one is that the equality \u003cem\u003edefinition\u003c/em\u003e is baked into the type. So this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEqString\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \n\u003c/pre\u003e\n\u003cp\u003eIs not compatible with:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eHashSet\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEqStringOrdinalIgnoreCase\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \n\u003c/pre\u003e\n\u003cp\u003eAnd if you think about that, it's right. The strings that are used as keys in the \u003ccode\u003eHashSet\u0026lt;EqString, string\u0026gt;\u003c/code\u003e do not have the same properties as the strings in \u003ccode\u003eHashSet\u0026lt;EqStringOrdinalIgnoreCase, string\u0026gt;\u003c/code\u003e. So even though they're both strings, they have different semantics (which cause wildly different behaviour for things like set intersection, unions, etc.)\u003c/p\u003e\n\u003cp\u003eNow compare that to \u003ccode\u003eHashSet\u0026lt;T\u0026gt;\u003c/code\u003e in the BCL, or \u003ccode\u003eImmutableHashSet\u0026lt;T\u0026gt;\u003c/code\u003e in \u003ccode\u003eSystem.Collections.Immutable\u003c/code\u003e, where two different sets with different \u003ccode\u003eIEqualityComparer\u003c/code\u003e types injected will cause undefined results when used together.\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eThat's hopefully a small glimpse into the potential for improving type-safeness in C#.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch4\u003e\n\u003ca id=\"orda\" class=\"anchor\" href=\"#orda\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eOrd\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003e\u003ccode\u003eOrd\u003c/code\u003e is for ordering. i.e. a \u003ccode\u003eIComparable\u003c/code\u003e replacement. By the way, these names \u003ccode\u003eEq\u003c/code\u003e, \u003ccode\u003eOrd\u003c/code\u003e, \u003ccode\u003eNum\u003c/code\u003e, are all lifted from Haskell. I much prefer the short concise names that still convey meaning than the bulky and often clumsy names of the BCL.\u003c/p\u003e\n\u003cp\u003eThis is \u003ccode\u003eOrd\u0026lt;A\u0026gt;\u003c/code\u003e, it derives from \u003ccode\u003eEq\u0026lt;A\u0026gt;\u003c/code\u003e\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eOrd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eEq\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eUsage should be self-explanatory now, but the important thing to note here is that because 'type classes' are just interfaces, they can also have an inheritance hierarchy.\u003c/p\u003e\n\u003cp\u003eThis is a slightly more complex example:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e \u003cspan class=\"nc\"\u003eOrdArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eORD\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eOrd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"k\"\u003e]\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eORD\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eOrd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003emy\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eReferenceEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003emy\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eReferenceEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eReferenceEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emy\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n            \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ecmp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCompareTo\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emy\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecmp\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003efor\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eLength\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e++)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                    \u003cspan class=\"n\"\u003ecmp\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eORD\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emx\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003emy\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003ei\u003c/span\u003e\u003cspan class=\"p\"\u003e]);\u003c/span\u003e\n                    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ecmp\u003c/span\u003e \u003cspan class=\"p\"\u003e!=\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecmp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n            \u003cspan class=\"k\"\u003eelse\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n                \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003ecmp\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eEqArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eORD\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;).\u003c/span\u003e\u003cspan class=\"nf\"\u003eEquals\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"nf\"\u003eGetHashCode\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"nf\"\u003ehash\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003eOrdArray\u003c/code\u003e which is an \u003ccode\u003eOrd\u0026lt;A[]\u0026gt;\u003c/code\u003e, does itself also take an \u003ccode\u003eORD\u003c/code\u003e generic argument, which allows the contents of the array to be compared:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOrdArray\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"n\"\u003eInst\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eCompare\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e},\u003c/span\u003e \u003cspan class=\"k\"\u003enew\u003c/span\u003e \u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e});\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 0\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch4\u003e\n\u003ca id=\"semigroupa\" class=\"anchor\" href=\"#semigroupa\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eSemigroup\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003eThis is where we start going a little more abstract. Semigroups are a feature of category theory, which is soooo not important for this discussion. They represent an associative binary operation, which can be invoked by calling \u003ccode\u003eAppend\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eSemigroup\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"nf\"\u003eAppend\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003ePositive numbers (for example) form a semigroup. I won't dwell on it too long, because although the \u003ccode\u003eAppend\u003c/code\u003e function is super-useful, nearly everything that falls into the \u003ccode\u003eSemigroup\u003c/code\u003e category is also a \u003ccode\u003eMonoid\u003c/code\u003e...\u003c/p\u003e\n\u003ch4\u003e\n\u003ca id=\"monoida\" class=\"anchor\" href=\"#monoida\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eMonoid\u0026lt;A\u0026gt;\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003eA monoid has something that a semigroup doesn't, and that's the concept of identity (often meaning 'empty' or 'zero'). It looks like this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonoid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eSemigroup\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"nf\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis comes with some helper functions in \u003ccode\u003eLanguageExt.TypeClass\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"k\"\u003epartial\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eTypeClass\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003emempty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;()\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonoid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eEmpty\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003emconcat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eIEnumerable\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003exs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonoid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003exs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFold\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emempty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003emconcat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003eparams\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e[]\u003c/span\u003e \u003cspan class=\"n\"\u003exs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonoid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003exs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eFold\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003emempty\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eappend\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMONOID\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eNow the semigroup \u003ccode\u003eAppend\u003c/code\u003e comes to life. Examples of monoids are: \u003ccode\u003eTInt\u003c/code\u003e, \u003ccode\u003eMLst\u003c/code\u003e, \u003ccode\u003eTString\u003c/code\u003e, etc. i.e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emconcat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTString\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"Hello\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\" \"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"World\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e   \u003cspan class=\"c1\"\u003e// \"Hello World\"\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emconcat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;(\u003c/span\u003e\u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e \u003cspan class=\"c1\"\u003e// [1,2,3]\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003emconcat\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e                 \u003cspan class=\"c1\"\u003e// 15\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003eEmpty()\u003c/code\u003e function is what provides the \u003cem\u003eidentity value\u003c/em\u003e for the concat operations. So for \u003ccode\u003estring\u003c/code\u003e it's \u003ccode\u003e\"\"\u003c/code\u003e, for \u003ccode\u003eLst\u0026lt;T\u0026gt;\u003c/code\u003e it's \u003ccode\u003e[]\u003c/code\u003e and for \u003ccode\u003eint\u003c/code\u003e it's \u003ccode\u003e0\u003c/code\u003e. So a monoid is a semigroup with a \u003cem\u003ezero\u003c/em\u003e.\u003c/p\u003e\n\u003cp\u003eIt's surprising how much \u003cem\u003estuff\u003c/em\u003e just starts working when you know your type is a monoid. For example in language-ext version 1 there is a monadic type called \u003ccode\u003eWriter\u0026lt;W, T\u0026gt;\u003c/code\u003e. The writer monad collects a \u003cem\u003elog\u003c/em\u003e as well as returning the bound value. In version 1 the log had to be an \u003ccode\u003eIEnumerable\u0026lt;W\u0026gt;\u003c/code\u003e, which isn't super flexible. In language-ext version 2 the type looks like this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eWriter\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonoidW\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eW\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMonoidW\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonoid\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eW\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e...\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSo now it can be a running numeric total, or a \u003ccode\u003eLst\u0026lt;W\u0026gt;\u003c/code\u003e, or a \u003ccode\u003eSet\u0026lt;W\u0026gt;\u003c/code\u003e, or whatever monoid \u003cem\u003eyou\u003c/em\u003e dream up.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"higher-kinds\" class=\"anchor\" href=\"#higher-kinds\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eHigher-kinds\u003c/h3\u003e\n\u003cp\u003eHigher-order polymorphism would allow us to define a type like so:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eWhere not only is the \u003ccode\u003eA\u003c/code\u003e parametric, but so it \u003ccode\u003eM\u003c/code\u003e. So for example if I wanted to implement \u003ccode\u003eMyType\u003c/code\u003e for \u003ccode\u003eOption\u0026lt;A\u0026gt;\u003c/code\u003e I could do:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyOptionType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMyType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e...;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eIt would be soooo nice if C# (well, the \u003cem\u003eimmutable\u003c/em\u003e CLR) would support this. But it doesn't. So we need to find ways around it. The way I am using for language-ext is:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eMyOptionType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMyType\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eFoo\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e...;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch4\u003e\n\u003ca id=\"monad\" class=\"anchor\" href=\"#monad\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003eMonad\u003c/code\u003e\n\u003c/h4\u003e\n\u003cp\u003eThis is where some of the difficulties come in. How do we return an \u003ccode\u003eMB\u003c/code\u003e if we don't know what it is?  This is a problem for the \u003ccode\u003eMonad\u003c/code\u003e type. This is a simplified version:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"nf\"\u003eReturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"nf\"\u003eFail\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eLooking at the prototype for \u003ccode\u003eBind\u003c/code\u003e it seems at first glance that the \u003ccode\u003ebind\u003c/code\u003e argument will give us the \u003ccode\u003eMB\u003c/code\u003e value we want. But an \u003ccode\u003eOption\u003c/code\u003e might be in a \u003ccode\u003eNone\u003c/code\u003e state, in which case it shouldn't run \u003ccode\u003ebind\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsSome\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"nf\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n            \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"p\"\u003e???\u003c/span\u003e \u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// What do we return here?\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe key is to use constraints. But it also requires an extra generic parameter for \u003ccode\u003eBind\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n            \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMonadB\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n        \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"nf\"\u003eReturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"nf\"\u003eFail\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSo we now know that \u003ccode\u003eMonadB\u003c/code\u003e is a class-instance of the \u003ccode\u003eMonad\u0026lt;MB, B\u0026gt;\u003c/code\u003e type-class. So we can now do this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n        \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMonadB\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsSome\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"nf\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadB\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eFail\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe eagle eyed reader will notice that this actually allows binding to any resulting monad (not just \u003ccode\u003eOption\u0026lt;B\u0026gt;\u003c/code\u003e). I'm sure some may consider labelling this a monad as incorrect, but it works, it's type-safe, it's efficient, and performs the exact same function and so I am happy to use the term.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt.TypeClasses/Monad_Env_Out_MA_A.htm\" rel=\"nofollow\"\u003eThe actual definition of \u003ccode\u003eMonad\u003c/code\u003e\u003c/a\u003e is more complex than this, in order to unify monadic types that take arguments (\u003ccode\u003eReader\u003c/code\u003e and \u003ccode\u003eState\u003c/code\u003e) and monads that carry internal state (\u003ccode\u003eWriter\u003c/code\u003e and \u003ccode\u003eState\u003c/code\u003e), as well as to support asynchronous monads (\u003ccode\u003eTryAsync\u003c/code\u003e and \u003ccode\u003eTryOption\u003c/code\u003e). I won't muddy the waters too much right now, but unified and type-safe they are. There are no hacks.\u003c/p\u003e\n\u003cp\u003eYou should see that the \u003ccode\u003eReturn\u003c/code\u003e and \u003ccode\u003eFail\u003c/code\u003e functions are trivial to implement:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eReturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eOptional\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eFail\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eException\u003c/span\u003e \u003cspan class=\"n\"\u003ee\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003enull\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eWhat that means is that any function that has been constrained by a monad instance can create new instances of them:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eM\u003c/span\u003e \u003cspan class=\"n\"\u003eCreateNewIntegerMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \n        \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMonadInt\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadInt\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eReturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis is one of the key breakthroughs. Imagine trying to create a \u003ccode\u003eMonad\u003c/code\u003e type the \u003cem\u003eold way\u003c/em\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003einterface\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003eclass\u003c/span\u003e \u003cspan class=\"nc\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e{\u003c/span\u003e\n        \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"n\"\u003eIsSome\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e?\u003c/span\u003e \u003cspan class=\"nf\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eValue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n                \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"p\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"nf\"\u003eCreateNewIntegerMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e????;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// How?\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eMaybe we could parameterise it?\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eCreateNewIntegerMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eM\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eM\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"n\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"p\"\u003e????;\u003c/span\u003e \u003cspan class=\"c1\"\u003e// We still can't call new M(x)\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eBut that doesn't work either because we still can't call \u003ccode\u003enew M(x)\u003c/code\u003e. Being able to paramterise generic functions at the point where you know the concrete types (and therefore know the concrete class-instance) means that the generic functions can invoke the instance functions to create the concrete types.\u003c/p\u003e\n\u003cp\u003eHere's a super generic example of a function that takes two monad arguments, they're both of the same type, and their bound values are \u003ccode\u003eNum\u0026lt;A\u0026gt;\u003c/code\u003e.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"k\"\u003epublic\u003c/span\u003e \u003cspan class=\"k\"\u003estatic\u003c/span\u003e \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMA\u003c/span\u003e \u003cspan class=\"n\"\u003emb\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e  \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eMonad\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNumA\u003c/span\u003e    \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eBind\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eMA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003emb\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n            \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eMonadA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eReturn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlus\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e))));\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eYou may notice that the two \u003ccode\u003eBind\u003c/code\u003e calls followed by the \u003ccode\u003eReturn\u003c/code\u003e are basically a much less attractive version of this:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e        \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003ea\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efrom\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e \u003cspan class=\"k\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003emb\u003c/span\u003e\n        \u003cspan class=\"k\"\u003eselect\u003c/span\u003e \u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003ePlus\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ea\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAnd so I can now add two options:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e20\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;.\u003c/span\u003e\u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003er1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// Some(30)\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003er2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// None\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er1\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e30\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er2\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOr two lists:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;();\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003er1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003er2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eAdd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eMLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;,\u003c/span\u003e \u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er1\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e  \u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e  \u003cspan class=\"m\"\u003e7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e9\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003er2\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003ez\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eOr any two monads. They will follow the built in rules for the type, and produce concrete values efficiently and without any boxing or dynamic casting.\u003c/p\u003e\n\u003ch3\u003e\n\u003ca id=\"transformer-types\" class=\"anchor\" href=\"#transformer-types\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTransformer types\u003c/h3\u003e\n\u003cp\u003eOften you'll find yourself with nested monadic types \u003ccode\u003eOption\u0026lt;Lst\u0026lt;A\u0026gt;\u0026gt;\u003c/code\u003e, \u003ccode\u003eSeq\u0026lt;Either\u0026lt;L, R\u0026gt;\u0026gt;\u003c/code\u003e, \u003ccode\u003eTry\u0026lt;Validation\u0026lt;Fail, Success\u0026gt;\u0026gt;\u003c/code\u003e, ..., and you want to work with the bound value(s) of \u003ccode\u003eA\u003c/code\u003e without having to unwrap/match the values away. And so there are around 100,000 lines of generated code for working with 'transformer types'.\u003c/p\u003e\n\u003cp\u003eThere is a new \u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt.TypeClasses/MonadTrans_OuterMonad_OuterType_InnerMonad_InnerType_A.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eMonadTrans\u003c/code\u003e\u003c/a\u003e type-class and a default instance called \u003ca href=\"https://louthy.github.io/language-ext/LanguageExt.Core/LanguageExt/Trans_OuterMonad_OuterType_InnerMonad_InnerType_A.htm\" rel=\"nofollow\"\u003e\u003ccode\u003eTrans\u003c/code\u003e\u003c/a\u003e. It does all the heavy lifting, and it is what the generated code uses (it's also what you'd need to use if you create your own monadic types and you want to build transformers for the various pairs of monadic types).\u003c/p\u003e\n\u003cp\u003eFor every pair of nested monads: \u003ccode\u003eLst\u0026lt;Option\u0026lt;A\u0026gt;\u0026gt;\u003c/code\u003e, \u003ccode\u003eTry\u0026lt;Either\u0026lt;L, A\u0026gt;\u0026gt;\u003c/code\u003e, etc. there are the following extension methods (this is for \u003ccode\u003eArr\u0026lt;Lst\u0026lt;A\u0026gt;\u0026gt;\u003c/code\u003e):\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e\n\u003cspan class=\"c1\"\u003e// Sums all the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eA\u003c/span\u003e \u003cspan class=\"n\"\u003eSumT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNumA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Counts all the bound value(s)\u003c/span\u003e\n\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eCountT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Monadic bind on the inner monad\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eBindT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Flips the inner and outer monads (using the rules of the inner and outer \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// monads to compose the result) and performs a map operation on the bound values\u003c/span\u003e\n\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eTraverse\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Flips the inner and outer monads (using the rules of the inner and outer \u003c/span\u003e\n\u003cspan class=\"c1\"\u003e// monads to compose the result) \u003c/span\u003e\n\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSequence\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Maps the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eMapT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Folds the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"n\"\u003eFoldT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"n\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Reverse folds the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"n\"\u003eFoldBackT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e \u003cspan class=\"n\"\u003estate\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eS\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Returns true if f(x) returns true for any of the bound value(s)\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eExistsT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Returns true if f(x) returns true for all of the bound value(s)\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eForAllT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Iterates all of the bound values\u003c/span\u003e\n\u003cspan class=\"n\"\u003eUnit\u003c/span\u003e \u003cspan class=\"n\"\u003eIterT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eAction\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Filters the bound value(s) with the predicate\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eFilterT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003epred\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Filters the bound value(s) with the predicate\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eWhere\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003ebool\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003epred\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Maps the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSelect\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// LINQ monadic bind and project on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSelectMany\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ebind\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\n        \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eproject\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Plus operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ePlusT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNUM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNUM\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Subtraction operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eSubtractT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNUM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNUM\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Product operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eProductT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNUM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNUM\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e\n        \u003cspan class=\"nf\"\u003eApplyT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"k\"\u003edefault\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eNUM\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eProduct\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Divide operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eDivideT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eNUM\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eNUM\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eNum\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Semigroup append operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eAppendT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eSEMI\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eSEMI\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eSemigroup\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Comparison operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"kt\"\u003eint\u003c/span\u003e \u003cspan class=\"n\"\u003eCompareT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eORD\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eORD\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eOrd\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Equality operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"kt\"\u003ebool\u003c/span\u003e \u003cspan class=\"n\"\u003eEqualsT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEQ\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003ewhere\u003c/span\u003e \u003cspan class=\"n\"\u003eEQ\u003c/span\u003e \u003cspan class=\"p\"\u003e:\u003c/span\u003e \u003cspan class=\"k\"\u003estruct\u003c/span\u003e\u003cspan class=\"err\"\u003e,\u003c/span\u003e \u003cspan class=\"nc\"\u003eEq\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;;\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Applicative apply operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eApplyT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efab\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efa\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e// Application apply operation on the bound value(s)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003eApplyT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"k\"\u003ethis\u003c/span\u003e \u003cspan class=\"n\"\u003eFunc\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eB\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eC\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efabc\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efa\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eArr\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eA\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003efb\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThe number of functions has increased dramatically. Some of the special ones are \u003ccode\u003eTraverse\u003c/code\u003e and \u003ccode\u003eSequence\u003c/code\u003e which flips the inner and outer types. So for example:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSequence\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e)));\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eAs you can see, the list is now inside the option.\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eOption\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eLst\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSequence\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"n\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eIn this case there is a \u003ccode\u003eNone\u003c/code\u003e in the \u003ccode\u003eLst\u003c/code\u003e so when the \u003ccode\u003eLst\u0026lt;Option\u0026lt;\u0026gt;\u0026gt;\u003c/code\u003e becomes a \u003ccode\u003eOption\u0026lt;Lst\u0026lt;\u0026gt;\u0026gt;\u003c/code\u003e the rules of the \u003ccode\u003eOption\u003c/code\u003e take over, and one \u003ccode\u003eNone\u003c/code\u003e means all \u003ccode\u003eNone\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis can be quite useful for \u003ccode\u003eEither\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eEither\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"kt\"\u003estring\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;\u0026gt;(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e\"error\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSequence\u003c/span\u003e\u003cspan class=\"p\"\u003e();\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ey\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eIsLeft\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan class=\"n\"\u003ey\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"s\"\u003e\"error\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eThis collects the first error it finds, or returns \u003ccode\u003eRight\u003c/code\u003e if there is no error.\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eTraverse\u003c/code\u003e is the same as \u003ccode\u003eSequence\u003c/code\u003e except it applies a mapping function to each bound value as it's transforming the types. Here's an example that runs 6 tasks in parallel, and collects their results:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtcNow\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef1\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef2\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef3\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef4\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef5\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ef6\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eTask\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eRun\u003c/span\u003e\u003cspan class=\"p\"\u003e(()\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"p\"\u003e{\u003c/span\u003e \u003cspan class=\"n\"\u003eThread\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eSleep\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3000\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e \u003cspan class=\"p\"\u003e});\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003eres\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"k\"\u003eawait\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ef1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef5\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ef6\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"nf\"\u003eTraverse\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e*\u003c/span\u003e \u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003etoSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eres\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e==\u003c/span\u003e \u003cspan class=\"nf\"\u003eSet\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e10\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e12\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ems\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e)(\u003c/span\u003e\u003cspan class=\"n\"\u003eDateTime\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eUtcNow\u003c/span\u003e \u003cspan class=\"p\"\u003e-\u003c/span\u003e \u003cspan class=\"n\"\u003estart\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003eTotalMilliseconds\u003c/span\u003e\u003cspan class=\"p\"\u003e;\u003c/span\u003e\n    \u003cspan class=\"n\"\u003eAssert\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ems\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e \u003cspan class=\"m\"\u003e3500\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e$\"Took \u003c/span\u003e\u003cspan class=\"p\"\u003e{\u003c/span\u003e\u003cspan class=\"n\"\u003ems\u003c/span\u003e\u003cspan class=\"p\"\u003e}\u003c/span\u003e\u003cspan class=\"s\"\u003e ticks\"\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e\n\u003c/pre\u003e\n\u003cp\u003eSo there is a List of Tasks that becomes a single awaitable Task of List.\u003c/p\u003e\n\u003cp\u003eAs well as the extensions, there are also static classes for the transformer types. There is one for each type of monad. So for example, \u003ccode\u003eOption\u003c/code\u003e has a \u003ccode\u003eLanguageExt.OptionT\u003c/code\u003e type. Whenever you have a pair of nested monads, and \u003ccode\u003eOption\u003c/code\u003e is the inner monad, then you would use \u003ccode\u003eOptionT\u003c/code\u003e:\u003c/p\u003e\n\u003cpre lang=\"c#\" class=\"highlight-c#\"\u003e    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003ema\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"nf\"\u003eList\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e2\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\u003cspan class=\"nf\"\u003eSome\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"m\"\u003e5\u003c/span\u003e\u003cspan class=\"p\"\u003e));\u003c/span\u003e\n\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etotal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOptionT\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efoldT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"m\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003es\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u0026gt;\u003c/span\u003e \u003cspan class=\"n\"\u003es\u003c/span\u003e \u003cspan class=\"p\"\u003e+\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 15\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003etotal\u003c/span\u003e \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOptionT\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esumT\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"n\"\u003eTInt\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"kt\"\u003eint\u003c/span\u003e\u003cspan class=\"p\"\u003e\u0026gt;(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// 15\u003c/span\u003e\n    \u003cspan class=\"kt\"\u003evar\u003c/span\u003e \u003cspan class=\"n\"\u003emb\u003c/span\u003e    \u003cspan class=\"p\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eOptionT\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nf\"\u003efilterT\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ema\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ex\u003c/span\u003e \u003cspan class=\"p\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"m\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e);\u003c/span\u003e \u003cspan class=\"c1\"\u003e// List(Some(3), Some(4))\u003c/span\u003e\n\u003c/pre\u003e\n\u003ch3\u003e\n\u003ca id=\"the-rest\" class=\"anchor\" href=\"#the-rest\" aria-hidden=\"true\"\u003e\u003cspan aria-hidden=\"true\" class=\"octicon octicon-link\"\u003e\u003c/span\u003e\u003c/a\u003eThe rest\u003c/h3\u003e\n\u003cp\u003eThis README.md is a basic introduction to the library. It is however full of many, many useful types, so do check the \u003ca href=\"https://louthy.github.io/language-ext/index.htm\" rel=\"nofollow\"\u003eAPI Reference\u003c/a\u003e for more info.\u003c/p\u003e\n\u003c/body\u003e\u003c/html\u003e\n","project_id":26732453,"name":"language-ext","owner_login":"louthy","description":"C# functional language extensions - a base class library for functional programming","pushed_at":"2021-01-14T04:01:08.000Z","stargazers_count":3382,"open_issues_count":43,"has_downloads":true,"archived":false,"license_key":"mit","homepage":"","private":false,"project_created_at":"2014-11-16T23:49:58.000Z","project_updated_at":"2021-01-13T13:44:34.000Z","language":null,"added_language_topic":false},"categories":[{"name":"Advertising","topicsCount":10},{"name":"Application Programming Interfaces","topicsCount":124},{"name":"Applications","topicsCount":192},{"name":"Artificial Intelligence","topicsCount":78},{"name":"Blockchain","topicsCount":73},{"name":"Build Tools","topicsCount":113},{"name":"Cloud Computing","topicsCount":80},{"name":"Code Quality","topicsCount":28},{"name":"Collaboration","topicsCount":32},{"name":"Command Line Interface","topicsCount":49},{"name":"Community","topicsCount":83},{"name":"Companies","topicsCount":60},{"name":"Compilers","topicsCount":63},{"name":"Computer Science","topicsCount":80},{"name":"Configuration Management","topicsCount":42},{"name":"Content Management","topicsCount":175},{"name":"Control Flow","topicsCount":213},{"name":"Data Formats","topicsCount":78},{"name":"Data Processing","topicsCount":276},{"name":"Data Storage","topicsCount":135},{"name":"Economics","topicsCount":64},{"name":"Frameworks","topicsCount":215},{"name":"Games","topicsCount":129},{"name":"Graphics","topicsCount":110},{"name":"Hardware","topicsCount":152},{"name":"Integrated Development Environments","topicsCount":49},{"name":"Learning Resources","topicsCount":166},{"name":"Legal","topicsCount":29},{"name":"Libraries","topicsCount":129},{"name":"Lists Of Projects","topicsCount":22},{"name":"Machine Learning","topicsCount":347},{"name":"Mapping","topicsCount":64},{"name":"Marketing","topicsCount":15},{"name":"Mathematics","topicsCount":55},{"name":"Media","topicsCount":239},{"name":"Messaging","topicsCount":98},{"name":"Networking","topicsCount":315},{"name":"Operating Systems","topicsCount":89},{"name":"Operations","topicsCount":121},{"name":"Package Managers","topicsCount":55},{"name":"Programming Languages","topicsCount":245},{"name":"Runtime Environments","topicsCount":100},{"name":"Science","topicsCount":42},{"name":"Security","topicsCount":396},{"name":"Social Media","topicsCount":27},{"name":"Software Architecture","topicsCount":72},{"name":"Software Development","topicsCount":72},{"name":"Software Performance","topicsCount":58},{"name":"Software Quality","topicsCount":133},{"name":"Text Editors","topicsCount":49},{"name":"Text Processing","topicsCount":136},{"name":"User Interface","topicsCount":330},{"name":"User Interface Components","topicsCount":514},{"name":"Version Control","topicsCount":30},{"name":"Virtualization","topicsCount":71},{"name":"Web Browsers","topicsCount":42},{"name":"Web Servers","topicsCount":26},{"name":"Web User Interface","topicsCount":210},{"name":"All Projects","topicsCount":0}],"advertisement":{"variation":"project","title":"Become A Software Engineer At Top Companies","description":"Identify your strengths with a free online coding quiz, and skip resume and recruiter screens at multiple companies at once.  It's free, confidential, includes a free flight and hotel, along with help to study to pass interviews and negotiate a high salary!","url":"https://triplebyte.com/a/PGNifkM/pt2"},"nonCommercial":false,"nonDerivative":false}</script>
      



    <!-- load synchronously before app bundle so adsbygoogle is always defined, google's new ad code doesn't seem to like this, at least for the initial review  -->
    <!-- try loading programatically and async with a callback to push the ads and see if it helps page load speed -->
    <!--script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script-->
    <script src="/packs/root-bundle-1f53b6db74aa6b1bef19.js"></script>
  </body>
</html>
