<h1 id="week-15-day-4-hooks" data-ignore="true">WEEK-15 DAY-4<br><em>Hooks</em></h1>
<hr />
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=2 orderedList=false} -->
<hr />
<hr />
<h1 id="hooks-objectives">Hooks Objectives</h1>
<p>Now that you’ve learned the basic objectives of using React, you should be able to gain a fundamental understanding of the React, Redux, and React-Router hooks. In your software engineering career, official documentation will be your friend! It’s important to learn how to navigate through official documentation. At the end of the readings, you should use your new fundamental understanding of hooks to go through the official React Hooks documentation. At the end of this topic’s articles and lectures you should be able to create function components that use state and other React features.</p>
<p>You should be able to use React’s:</p>
<ul>
<li><code>useState</code> hook to manage a component’s state.</li>
<li><code>useState</code> hook to set a default state, instead of setting the default state in a <code>constructor()</code> method.</li>
<li><code>useState</code> hook to update state, instead of the <code>setState()</code> method.</li>
<li><code>useEffect</code> hook to manage <em>side effect</em> operations (i.e. data fetching).</li>
<li><code>useEffect</code> hook in replacement of commonly used component lifecycle methods (<code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code>).</li>
<li><code>useEffect</code> (and the hook’s <em>dependency array</em>) to optimize an application’s performance by skipping <code>useEffect</code> calls.</li>
<li><code>useContext</code> hook to access a context object, instead of a <code>Context.Consumer</code> or the <code>static contentType</code> property.</li>
</ul>
<p>You should be able to use Redux’s:</p>
<ul>
<li><code>useSelector</code> hook to access the Redux store’s state from within a component (instead of passing a part of state as a prop with the <code>mapStateToProps</code> function).</li>
<li><code>useDispatch</code> hook to dispatch an action from within a component (instead of passing an thunk action creator function through the <code>mapDispatchToProps</code> function).</li>
</ul>
<p>You should be able to use React Router’s:</p>
<ul>
<li><code>useParams</code> hook to match parameters in the current route (instead of accessing the <code>match.params</code> prop).</li>
<li><code>useHistory</code> hook to navigation from within code (without <code>&lt;Link&gt;</code>, <code>&lt;NavLink&gt;</code>, or the <code>history</code> prop).</li>
<li><code>useLocation</code> hook to track url changes.</li>
<li><code>useRouteMatch</code> hook to check if the current url matches a path format.</li>
</ul>
<hr />
<h1 id="intro-to-react-hooks">Intro to React Hooks</h1>
<p>React Hooks are a way for function components to have the same functionality as class components that make use of component lifecycle methods. Hooks are simply functions that allow components to utilize React features without explicitly using the lifecycle methods.</p>
<p>Before React Hooks, the only way to use lifecycle methods were through class components. Hooks allow you to manage a component’s state and lifecycle within function components. They are helpful in extracting stateful logic from a component to be independently tested and reused - it’s much more complicated to test the functionality of logic in a component’s lifecycle methods. After reading this article, you will:</p>
<ul>
<li>Have a general understanding of the features of basic React hooks</li>
<li>Understand how the basic Hooks connect to features of React class components (i.e. lifecycle methods)</li>
<li>Create function components that use state and other React features</li>
<li>Use the <code>useState</code> hook to manage a component’s state</li>
<li>Use the <code>useEffect</code> hook to manage <em>side effect</em> operations (i.e. data fetching)</li>
<li>Use the <code>useContext</code> hook to access a context object</li>
</ul>
<h2 id="usestate">useState</h2>
<p>Up to this point, you have set a component’s default state within a component’s <code>constructor</code> method. The <code>useState</code> hook replaces the need to use a constructor to declare a default state with <code>this.state</code>. You can use the <code>useState</code> hook to set and name a default slice of state without a <code>constructor()</code> method. You can set a default state simply by invoking the <code>useState</code> hook. The <strong>with hooks</strong> example below sets the default <code>inputValue</code> state to be <code>'Default input value here!'</code> by invoking the <code>useState</code> hook with the string <code>'Default input value here!'</code>.</p>
<p><strong>with hooks</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">const</span> FormWithHooks <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">  <span class="kw">const</span> [inputValue<span class="op">,</span> setInputValue] <span class="op">=</span> <span class="at">useState</span>(<span class="st">&#39;Default input value here!&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="op">};</span></a></code></pre></div>
<p><strong>without hooks</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">class</span> FormWithoutHooks <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span>  </a>
<a class="sourceLine" id="cb2-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-3" title="3">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-5" title="5">      <span class="dt">inputValue</span><span class="op">:</span> <span class="st">&#39;Default input value here!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb2-6" title="6">    <span class="op">};</span></a>
<a class="sourceLine" id="cb2-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb2-8" title="8"><span class="op">}</span></a></code></pre></div>
<p>When you use the <code>useState</code> hook to set up a slice of state, you also set up a prospective function to update that slice of state. In this example, you can update a slice of state by invoking <code>setInputValue</code>, instead of invoking the <code>this.setState()</code> method.</p>
<p><strong>with hooks</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">const</span> updateInputVal <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="at">setInputValue</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span>)<span class="op">;</span></a></code></pre></div>
<p><strong>without hooks</strong></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1">updateInputVal <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">inputValue</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>In general, React Hooks help clean up your code <strong>a lot</strong>! For example, when using the <code>useState</code> hook, you can also simply reference <code>inputValue</code> throughout the component, instead of <code>this.state.inputValue</code>. Compare the difference between the code for the <code>FormWithHooks</code> and <code>FormWithoutHooks</code> components below.</p>
<p><strong>with hooks</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> FormWithHooks <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="kw">const</span> [inputValue<span class="op">,</span> setInputValue] <span class="op">=</span> <span class="at">useState</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-3" title="3">  <span class="kw">const</span> updateInputVal <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="at">setInputValue</span>(<span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb5-4" title="4"></a>
<a class="sourceLine" id="cb5-5" title="5">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb5-6" title="6">    <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-7" title="7">      <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb5-8" title="8">        type<span class="op">=</span><span class="st">&quot;text&quot;</span></a>
<a class="sourceLine" id="cb5-9" title="9">        value<span class="op">={</span>inputValue<span class="op">}</span></a>
<a class="sourceLine" id="cb5-10" title="10">        onChange<span class="op">={</span>updateInputVal<span class="op">}</span></a>
<a class="sourceLine" id="cb5-11" title="11">        placeholder<span class="op">=</span><span class="st">&quot;Type something!&quot;</span></a>
<a class="sourceLine" id="cb5-12" title="12">      /&gt;</a>
<a class="sourceLine" id="cb5-13" title="13">    &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-14" title="14">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="op">};</span></a></code></pre></div>
<p><strong>without hooks</strong></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">class</span> FormWithoutHooks <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span>  </a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-5" title="5">      <span class="dt">inputValue</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb6-6" title="6">    <span class="op">};</span></a>
<a class="sourceLine" id="cb6-7" title="7">  <span class="op">};</span></a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9">  updateInputVal <span class="op">=</span> e <span class="kw">=&gt;</span> <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span> <span class="dt">inputValue</span><span class="op">:</span> <span class="va">e</span>.<span class="va">target</span>.<span class="at">value</span> <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-10" title="10">  </a>
<a class="sourceLine" id="cb6-11" title="11">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-12" title="12">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb6-13" title="13">      <span class="op">&lt;</span>form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-14" title="14">        <span class="op">&lt;</span>input</a>
<a class="sourceLine" id="cb6-15" title="15">          type<span class="op">=</span><span class="st">&quot;text&quot;</span></a>
<a class="sourceLine" id="cb6-16" title="16">          value<span class="op">={</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">inputValue</span><span class="op">}</span></a>
<a class="sourceLine" id="cb6-17" title="17">          onChange<span class="op">={</span><span class="kw">this</span>.<span class="at">updateInputVal</span><span class="op">}</span></a>
<a class="sourceLine" id="cb6-18" title="18">          placeholder<span class="op">=</span><span class="st">&quot;Type something!&quot;</span></a>
<a class="sourceLine" id="cb6-19" title="19">        /&gt;</a>
<a class="sourceLine" id="cb6-20" title="20">      &lt;/form<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-21" title="21">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb6-22" title="22">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="op">}</span></a></code></pre></div>
<p>When refactoring your projects to implement React Hooks, you can always refactor component by component, starting out with refactoring the component’s state management.</p>
<h2 id="useeffect">useEffect</h2>
<p>The <code>useEffect</code> hook is used to manage side effect operations. An example of a side effect operation you are familiar with is data fetching. Similarly to the <code>componentDidMount</code> or <code>componentDidUpdate</code> lifecycle methods, the <code>useEffect</code> hook will automatically run.</p>
<p>Take a moment to notice how using the <code>useEffect</code> hook simply means invoking the <code>useEffect</code> function. You can invoke the function with one or two arguments, with the first argument always being a function, and then second argument being an optional <em>dependency array</em>.</p>
<p>When the <code>useEffect</code> hook is invoked <strong>without</strong> a second argument, the function will be invoked after every render:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="co">// Side effect logic invoked after every render</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>When the <code>useEffect</code> hook is invoked <strong>with an empty array</strong>, the function is only invoked once, when a component mounts (think of <code>componentDidMount</code>):</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="co">// Side effect logic invoked once, when a component mounts</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="op">},</span> [])<span class="op">;</span></a></code></pre></div>
<p>When the <code>useEffect</code> hook is invoked <strong>with an array of dependencies</strong>, the function is invoked whenever a dependency changes (think of <code>componentDidUpdate</code>):</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb9-2" title="2">  <span class="co">// Side effect logic invoked every time the `dependentVariable` changes</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="op">},</span> [dependentVariable])<span class="op">;</span></a></code></pre></div>
<h3 id="skipping-effects-with-the-dependency-array">Skipping effects with the dependency array</h3>
<p>This second argument of the <code>useEffect</code> hook is known as the <em>dependency array</em>. You can optimize the performance for your component by using the dependency array to skip effects. The dependency array is a collection of dependent variables. Similarly to how the <code>componentDidUpdate</code> lifecycle method listens for a change in the component, the <code>useEffect</code> hook listen for changes to variables in the dependency array to determine whether or not to run the <em>effect</em> again.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="co">// Side effect logic</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="op">},</span> [<span class="co">/* Dependency array */</span>])<span class="op">;</span></a></code></pre></div>
<h3 id="asynchronous-effects">Asynchronous effects</h3>
<p>You are familiar with using <code>async/await</code> to await a database fetch. If you’d like to make an asynchronous fetch within a <code>useEffect</code> hook, you would declare an asynchronous function within the hook. Then, you would invoke the asynchronous functions from within the hook.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="kw">const</span> fetchSomething <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="co">// Fetch call</span></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="op">};</span></a>
<a class="sourceLine" id="cb11-5" title="5"></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="at">fetchSomething</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="op">},</span> [<span class="co">/* Dependency array */</span>])<span class="op">;</span></a></code></pre></div>
<p>The function passed in as the <code>useEffect</code> hook’s first argument <strong>cannot</strong> be an asynchronous function - this is why you need to define and invoke the asynchronous function from within the hook’s first function argument.</p>
<p>In the example below, the <code>useEffect</code> hooks runs an asynchronous fetch of a puppy, based on a <code>puppyId</code> input. The hook’s dependency array references <code>props.match.params.puppyId</code>. Since the <code>useEffect</code> hook’s dependency array references the <code>puppyId</code> parameter, the application will only fetch whenever the <code>puppyId</code> parameter changes. This optimizes the code, because now the effect is only run upon the change of a specific variable - <code>puppyId</code>!</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">  <span class="kw">const</span> fetchPuppy <span class="op">=</span> <span class="kw">async</span> (puppyId) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="kw">const</span> puppy <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="vs">`https://api.puppies.example/</span><span class="sc">${</span>puppyId<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4">    <span class="kw">const</span> puppyJSON <span class="op">=</span> <span class="cf">await</span> <span class="va">res</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-5" title="5">    <span class="cf">return</span> puppyJSON<span class="op">;</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb12-7" title="7"></a>
<a class="sourceLine" id="cb12-8" title="8">  <span class="at">fetchData</span>(<span class="va">props</span>.<span class="va">match</span>.<span class="va">params</span>.<span class="at">puppyId</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="op">},</span> [<span class="va">props</span>.<span class="va">match</span>.<span class="va">params</span>.<span class="at">puppyId</span>])<span class="op">;</span></a></code></pre></div>
<p>Using a dependency array also prevents endless loops. Without the dependency array, a fetch call invoked within a <code>useEffect</code> hook would constantly run and your code would error out.</p>
<p>Alternatively, you can invoke the asynchronous effect with an <a href="https://en.wikipedia.org/wiki/Immediately_invoked_function_expression">IIFE</a> (immediately invoked function expression). Take the example syntax below:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  (<span class="kw">async</span> <span class="kw">function</span> <span class="at">fetchSomething</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb13-3" title="3">    <span class="co">// Fetch call</span></a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="op">}</span>)()<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="op">},</span> [<span class="co">/* Dependency array */</span>])<span class="op">;</span></a></code></pre></div>
<h3 id="effect-cleanup">Effect cleanup</h3>
<p>In a class component, you might use the <code>componentWillUnmount</code> lifecycle method to handle <em>cleanup</em>. In order to <em>cleanup</em> an effect, you would need to return a function from within the <code>useEffect</code> hook. Having the <code>useEffect</code> hook’s callback return another function results in the cleanup behavior of <code>componentWillUnmount</code>.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="cf">return</span> <span class="kw">function</span> <span class="at">cleanup</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="co">// Cleanup logic</span></a>
<a class="sourceLine" id="cb14-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="op">},</span> [<span class="co">/* Dependency array */</span>])<span class="op">;</span></a></code></pre></div>
<p>In a later lesson, you will learn about how to use WebSockets. When you use a WebSocket, you create a connection. What if you want to close that connection? Closing a connection sounds like a <em>cleanup</em> task! It is common to invoke the WebSocket’s <code>close</code> method in a <em>cleanup</em> function. The example below makes use of the <em>dependency array</em> and a <em>cleanup</em> function.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="cf">if</span> (<span class="op">!</span>username) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="cf">return</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="kw">const</span> ws <span class="op">=</span> <span class="kw">new</span> <span class="at">WebSocket</span>(<span class="st">&#39;ws://localhost:8080&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7">  <span class="va">webSocket</span>.<span class="at">current</span> <span class="op">=</span> ws<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8">  </a>
<a class="sourceLine" id="cb15-9" title="9">  <span class="cf">return</span> <span class="kw">function</span> <span class="at">cleanup</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb15-10" title="10">    <span class="cf">if</span> (<span class="va">webSocket</span>.<span class="at">current</span> <span class="op">!==</span> <span class="kw">null</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-11" title="11">      <span class="va">webSocket</span>.<span class="va">current</span>.<span class="at">close</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb15-12" title="12">    <span class="op">}</span></a>
<a class="sourceLine" id="cb15-13" title="13">  <span class="op">};</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="op">},</span> [username])<span class="op">;</span></a></code></pre></div>
<p>Similar to the behavior of <code>componentDidUpdate</code>, the effect is re-run whenever the <code>username</code> changes. The <code>useEffect</code> hook below takes care of setting up a new WebSocket connection. The hook’s <em>cleanup</em> function will be run whenever the component unmounts. Replacing the <code>componentWillUnmount</code> lifecycle method, the <em>cleanup</em> function will take care of closing the WebSocket connection when the component unmounts.</p>
<h2 id="usecontext">useContext</h2>
<p>You can use the <code>useContext</code> hook to access a context object to read and subscribe to context changes. The <code>useContext</code> hooks replaces the <code>static contextType</code> property in class components. Whenever you used the <code>static contextType</code> property in a class component, you were able to access a context object via referencing <code>this.context</code>. When you use the <code>useContext</code> hook, you can access a context object via whatever you name the context! In the example below, the <code>useContext</code> hook is invoked and its return value (the <code>MyContext</code> object) is named <code>context</code> - this means you can access the <code>MyContext</code> object anywhere within the component via referencing <code>context</code>.</p>
<p><strong>with hooks</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> context <span class="op">=</span> <span class="at">useContext</span>(MyContext)<span class="op">;</span>    <span class="co">// Makes `MyContext` available as `context`</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="kw">const</span> banana <span class="op">=</span> <span class="at">useContext</span>(BananaContext)<span class="op">;</span> <span class="co">// Makes `BananaContext` available as `banana`</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="kw">const</span> puppy <span class="op">=</span> <span class="at">useContext</span>(PuppyContext)<span class="op">;</span>   <span class="co">// Makes `PuppyContext` available as `puppy`</span></a></code></pre></div>
<p><strong>without hooks</strong></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">static</span> contextType <span class="op">=</span> MyContext<span class="op">;</span> <span class="co">// Makes `MyContext` available as `this.context`</span></a></code></pre></div>
<p>When using the <code>useContext</code> hook to access a context object, you would still use a <code>&lt;Context.Provider&gt;</code> to set the context’s <code>value</code>.</p>
<h2 id="what-you-have-learned">What you have learned</h2>
<p>In this article, you have learned about the general features of the basic React hooks (<code>useState</code>, <code>useEffect</code>, and <code>useContext</code>). You should now understand the functionality of how the basic Hooks connect to the features of React class components. You should be able to use the:</p>
<ul>
<li><code>useState</code> hook to manage a function component’s state</li>
<li><code>useEffect</code> hook to manage running, skipping, and cleaning up effects</li>
<li><code>useContext</code> hook to access a context object</li>
</ul>
<hr />
<h1 id="introduction-to-hooks-in-redux">Introduction to Hooks in Redux</h1>
<p>In previous lessons and projects, you have learned to build <strong>React</strong> components using <strong>Redux</strong>. Now it’s time to explore ways to modify your approach using hooks.</p>
<p>When you complete this lesson, you will be able to</p>
<ul>
<li>Use Redux in a function component with the <code>useSelector</code> and <code>useDispatch</code> hooks</li>
</ul>
<h2 id="using-hooks-with-redux">Using hooks with Redux</h2>
<p>In order to use hooks in Redux, your application will need to utilize the <code>react-redux</code> package. If you need a refresher on what this kind of application looks like, see the <a href="#starting-point-for-ip-address-project">Starting Point</a> section at the end of this reading or clone the <a href="https://github.com/appacademy-starters/intro-to-redux-hooks">intro-to-redux-hooks</a> repository from GitHub and look at the <strong>starter</strong> folder.</p>
<h2 id="getting-started">Getting Started</h2>
<p>Consider a simple application that displays the user’s current IP Address with a button to start the lookup. You many even include a loading message which shows while the server call is running.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="co">// ./src/App.js</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="im">import</span> React<span class="op">,</span> <span class="op">{</span> useEffect<span class="op">,</span> useState <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="kw">const</span> App <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="kw">const</span> [ip<span class="op">,</span> setIP] <span class="op">=</span> <span class="at">useState</span>(<span class="kw">null</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-7" title="7">  <span class="kw">const</span> [loading<span class="op">,</span> setLoading] <span class="op">=</span> <span class="at">useState</span>(<span class="kw">false</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9">  <span class="kw">const</span> getMyIP <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-10" title="10">    <span class="at">setIP</span>(<span class="st">&#39;(coming soon)&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-11" title="11">  <span class="op">};</span></a>
<a class="sourceLine" id="cb18-12" title="12"></a>
<a class="sourceLine" id="cb18-13" title="13">  <span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-14" title="14">    <span class="at">setLoading</span>(ip <span class="op">===</span> <span class="st">&quot;&quot;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-15" title="15">  <span class="op">},</span> [ip])<span class="op">;</span></a>
<a class="sourceLine" id="cb18-16" title="16"></a>
<a class="sourceLine" id="cb18-17" title="17">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb18-18" title="18">    <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-19" title="19">      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Get My IP&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-20" title="20"></a>
<a class="sourceLine" id="cb18-21" title="21">      <span class="op">{</span>loading</a>
<a class="sourceLine" id="cb18-22" title="22">        <span class="op">?</span> <span class="op">&lt;</span>p<span class="op">&gt;</span><span class="va">Loading</span>...&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-23" title="23">        : <span class="op">&lt;</span>p<span class="op">&gt;{</span>ip<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-24" title="24">      <span class="op">}</span></a>
<a class="sourceLine" id="cb18-25" title="25">      <span class="op">&lt;</span>button </a>
<a class="sourceLine" id="cb18-26" title="26">        onClick<span class="op">={</span>getMyIP<span class="op">}</span> </a>
<a class="sourceLine" id="cb18-27" title="27">        disabled<span class="op">={</span>loading<span class="op">}</span></a>
<a class="sourceLine" id="cb18-28" title="28">      <span class="op">&gt;{</span>ip <span class="op">?</span> <span class="st">&#39;Again&#39;</span> : <span class="st">&#39;Go&#39;</span><span class="op">}</span>&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-29" title="29">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-30" title="30">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb18-31" title="31"><span class="op">};</span></a>
<a class="sourceLine" id="cb18-32" title="32"></a>
<a class="sourceLine" id="cb18-33" title="33"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<p>Notice that this framework uses your knowledge of the <code>useState</code> hook to simulate the server call and the <code>useEffect</code> hook to cause the loading indicator to show at the appropriate times.</p>
<p>Now you can update this example to use Redux hooks to replace the fake loading of <code>ip</code>.</p>
<h2 id="useselector"><code>useSelector</code></h2>
<p>Begin by importing <code>useSelector</code> from the <em>React Redux</em> package.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="im">import</span> <span class="op">{</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Assuming you have a reducer with the property <code>ipAddress</code>, then you can use the <code>useSelector</code> hook to access the <code>ipAddress</code> from your Redux store’s state.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">const</span> ip <span class="op">=</span> <span class="at">useSelector</span>(state <span class="kw">=&gt;</span> <span class="va">state</span>.<span class="at">ipAddress</span>)<span class="op">;</span></a></code></pre></div>
<p>In the sample <em>App.js</em> above, using the <code>useSelector</code> hook would replace <code>const [ip, setIP] = useState('')</code>. Your component would receive the <code>ip</code> via your Redux store’s <code>state.ipAddress</code>, instead of the component’s <code>ip</code> state.</p>
<blockquote>
<p>As a reminder, the <code>useState</code> hook in this example is simply mimicking a fetch response. Upon clicking the button with the <code>getMyIP</code> click handler, a fetch call is mimicked with the <code>setIP('(coming soon)')</code> method. You will need to remove this line as well. Don’t worry you’ll replace it momentarily using another Redux hook.</p>
</blockquote>
<p>You can access any available property this way and even call <code>useSelector()</code> multiple times within a single function component. You can even use props or route parameters to determine what to extract from the store.</p>
<p>Here is an example using props. Assume you have a store with a <code>users</code> object in its state. Furthermore, you want to get just <code>user</code> based on the <code>id</code> provided in a prop to a function component.</p>
<p>Here is the component’s code. See if you can spot where the “magic" happens.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="im">import</span> <span class="op">{</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react-redux&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb21-3" title="3"></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="kw">const</span> UserCard <span class="op">=</span> props <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-5" title="5">  <span class="kw">const</span> user <span class="op">=</span> <span class="at">useSelector</span>(state <span class="kw">=&gt;</span> <span class="va">state</span>.<span class="at">users</span>[<span class="va">props</span>.<span class="at">id</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb21-6" title="6">  <span class="cf">return</span> <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="va">todo</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb21-8" title="8"></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="im">export</span> <span class="im">default</span> UserCard<span class="op">;</span></a></code></pre></div>
<p>If you said the magic happens in the function passed to the <code>useSelector</code> hook, then you would be correct. Specifically the square bracket notation is used to get just a part of the <code>users</code> object. Remember, you’re passing a function as the argument to <code>useSelector</code>; therefore you can use all your skills to determine the right object or value to <code>return</code>.</p>
<h2 id="usedispatch"><code>useDispatch</code></h2>
<p>In order to trigger an action in <strong>Redux</strong>, you will need to utilize a different hook; specifically, <code>useDispatch()</code>. This hook returns a function which you can call to dispatch the action.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a></code></pre></div>
<p>Exactly how you use dispatch depends on your Redux setup. There are some minor differences based on whether you decided to use <code>redux-thunk</code> in your project. The configuration of Redux is beyond the scope of this reading and is something you saw in previous activities. Two solutions are provided in the sample, so you can make the choice which works best for your project. Here’s a quick look at these two options.</p>
<h3 id="option-a-generic-redux-no-thunk">Option A: Generic Redux (no thunk)</h3>
<p>In this configuration, you will need to dispatch actions created in your Redux component (e.g. <em>src/store/ipAddress.js</em>). For example, one possible action creator function might look like <code>export const setIP = ip =&gt; ({ type: SET_IP, ip });</code>.</p>
<p>Any functions which perform loading operations will need to be asynchronous and return the value or object retrieved; perhaps in a scenario like this…</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="co">// relevant snippet from of src/store/ipAddress.js</span></a>
<a class="sourceLine" id="cb23-2" title="2"></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="im">export</span> <span class="kw">const</span> loadIP <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb23-4" title="4">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb23-5" title="5">  <span class="co">// do stuff here like a fetch with await</span></a>
<a class="sourceLine" id="cb23-6" title="6">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb23-7" title="7">  <span class="co">// return the result</span></a>
<a class="sourceLine" id="cb23-8" title="8">  <span class="cf">return</span> origin</a>
<a class="sourceLine" id="cb23-9" title="9"><span class="op">};</span></a></code></pre></div>
<p>Back in the component with the UI (e.g. <em>src/App.js</em>), you’ll need to start by importing these functions as well as adding <code>useDispatch</code> to the import for <strong>Redux</strong>.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="im">import</span> <span class="op">{</span> useDispatch<span class="op">,</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react-redux&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="im">import</span> <span class="op">{</span> loadIP<span class="op">,</span> setIP <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;./store/ipAddress&quot;</span><span class="op">;</span></a></code></pre></div>
<p>Then use these with your button click handler. Notice you dispatch is using the action to set the value of the ip variable that you just got with <code>useSelector</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="co">// relevant snippet from src/App.js</span></a>
<a class="sourceLine" id="cb25-2" title="2"></a>
<a class="sourceLine" id="cb25-3" title="3">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb25-4" title="4"></a>
<a class="sourceLine" id="cb25-5" title="5">  <span class="kw">const</span> getMyIP <span class="op">=</span> <span class="kw">async</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-6" title="6">    <span class="at">dispatch</span>(<span class="at">setIP</span>(<span class="st">&quot;&quot;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb25-7" title="7"></a>
<a class="sourceLine" id="cb25-8" title="8">    <span class="kw">const</span> origin <span class="op">=</span> <span class="cf">await</span> <span class="at">loadIP</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb25-9" title="9">    <span class="at">dispatch</span>(<span class="at">setIP</span>(origin))<span class="op">;</span></a>
<a class="sourceLine" id="cb25-10" title="10">  <span class="op">};</span></a></code></pre></div>
<p>The example dispatches two values for the IP Address. The first dispatch call sets the IP address to an empty string (so that the old value no longer shows in the UI while the newer value is loading). The second, of course, is the result of the fetch (or any other kind of service call, of course).</p>
<p>One advantage of this approach is that you will not need to install <code>redux-thunk</code> or add it to the <strong>Redux</strong> configuration. However, this comes with the trade-off that actions will be dispatched throughout the application, including in UI components.</p>
<h3 id="option-b-using-redux-thunk">Option B: Using Redux Thunk</h3>
<p>Now consider the difference using <code>redux-thunk</code>. The action function remains unchanged (<code>export const setIP = ip =&gt; ({ type: SET_IP, ip });</code>). The <code>loadIP</code> function will do its own dispatching (this means a double function in the declaration that results in the code below).</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="co">// relevant snippet from ./src/App.js</span></a>
<a class="sourceLine" id="cb26-2" title="2"></a>
<a class="sourceLine" id="cb26-3" title="3"><span class="im">export</span> <span class="kw">const</span> loadIP <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="kw">async</span> dispatch <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-4" title="4">  <span class="at">dispatch</span>(<span class="at">setIP</span>(<span class="st">&quot;&quot;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb26-5" title="5"></a>
<a class="sourceLine" id="cb26-6" title="6">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb26-7" title="7">  <span class="co">// do stuff here like a fetch with await</span></a>
<a class="sourceLine" id="cb26-8" title="8">  <span class="co">// ...</span></a>
<a class="sourceLine" id="cb26-9" title="9">  <span class="co">// dispatch the result</span></a>
<a class="sourceLine" id="cb26-10" title="10">  <span class="at">dispatch</span>(<span class="at">setIP</span>(origin))<span class="op">;</span></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>In the component (e.g. _src/App.js), you’ll need to import only the <code>loadIP()</code> function (and not the <code>setIP</code> action creator function) (while still importing <code>useDispatch</code>, of course).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb27-1" title="1"><span class="im">import</span> <span class="op">{</span> useDispatch<span class="op">,</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react-redux&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="im">import</span> <span class="op">{</span> loadIP <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;./store/ipAddress&quot;</span><span class="op">;</span></a></code></pre></div>
<p>Then the click handler for the button simplifies to</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="co">// relevant snippet from ./src/App.js</span></a>
<a class="sourceLine" id="cb28-2" title="2"></a>
<a class="sourceLine" id="cb28-3" title="3">  <span class="kw">const</span> getMyIP <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb28-4" title="4">    <span class="at">dispatch</span>(<span class="at">loadIP</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb28-5" title="5">  <span class="op">};</span></a></code></pre></div>
<p>The advantages of this approach using <strong>Redux Thunk</strong> is the separation of responsibilities where the load and action dispatches are all together resulting in simplified handling within the UI components.</p>
<p>The trade-off is double functions in your Redux (like <code>export const loadIP = () =&gt; async dispatch =&gt; {</code>) and the one-time install and setup of <code>redux-thunk</code>.</p>
<p>Ultimately the decision on the approach is made by each development team based on their personal preference.</p>
<h2 id="refactoring-an-existing-component">Refactoring an existing component</h2>
<p>In order to refactor an existing class component from the classic approach to using hooks, there are several steps that need to be taken:</p>
<ul>
<li>Change component definition from class to function
<ul>
<li>Switch state handling to the <code>useState</code> hook</li>
<li>Use the <code>useEffect</code> hook for side-effect management, instead of the <code>componentDidMount</code> and <code>componentDidUpdate</code> methods</li>
<li>Create or move event handlers to constant functions</li>
</ul></li>
<li>Use one or multiple <code>useSelector</code> hooks to replace the <code>mapStateToProps</code> function</li>
<li>Invoke the <code>useDispatch</code> hook to use <code>dispatch</code> and replace the <code>mapDispatchToProps</code> function</li>
<li>Simplify the <code>export</code> to just the component name by removing <code>connect</code></li>
<li>Delete any imports that are no longer in use</li>
</ul>
<p>The best way to understand exactly what to do is to see an example. This will be provided in an upcoming video lesson.</p>
<h2 id="what-you-have-learned-1">What you have learned</h2>
<p>The <code>react-redux</code> package comes with several hooks which can be used to replace <code>mapStateToProps</code>, <code>mapDispatchToProps</code> and <code>connect</code>. Hooks are used with function components, so remember to start with one if you intend to use hooks; otherwise you’ll need to convert your class component to a function component.</p>
<p>The <code>useSelector</code> hook give you access to any and all props that are exposed through the state in a Redux store by passing in a function to resolve the state property you want (e.g. <code>useSelector(state =&gt; state.theProp)</code>). The <code>useDispatch</code> hook allows you to trigger an action directly or by calling a function that uses <code>redux-thunk</code> to dispatch the action.</p>
<p>Using hooks with <strong>React Redux</strong> can improve the readability and maintainability of a <strong>React</strong> project.</p>
<h2 id="additional-resources">Additional resources</h2>
<p>For future reference, there are a few additional (advanced and rarely used) features in the <a href="https://react-redux.js.org/next/api/hooks">official documentation on hooks in React Redux</a>.</p>
<h2 id="starting-point-for-ip-address-project">Starting point for IP address project</h2>
<p>As promised, here is an example of setting up the framework with Redux for the “Get My IP" application discussed
    throughout this reading. This version includes <strong>Redux Thunk</strong>.</p>
<p>You may access the starter project, the solution project with Redux Thunk, and the solution project without Redux Thunk by cloning the <a href="https://github.com/appacademy-starters/intro-to-redux-hooks">intro-to-redux-hooks</a> repository.</p>
<p>Start with <code>create-react-app</code> and install <code>react-redux</code>, <code>redux-thunk</code> and their dependencies (e.g. <code>redux</code>) as you’ve done previously.</p>
<p>Wrap your application in the <strong>Redux Provider</strong> …</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb29-2" title="2"></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="im">import</span> <span class="op">{</span> Provider <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="im">import</span> App <span class="im">from</span> <span class="st">&#39;./App&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-7" title="7"><span class="im">import</span> configureStore <span class="im">from</span> <span class="st">&#39;./store/configureStore&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb29-8" title="8"></a>
<a class="sourceLine" id="cb29-9" title="9"><span class="kw">const</span> store <span class="op">=</span> <span class="at">configureStore</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb29-10" title="10"></a>
<a class="sourceLine" id="cb29-11" title="11"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb29-12" title="12">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb29-13" title="13">    <span class="op">&lt;</span>Provider store<span class="op">={</span>store<span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb29-14" title="14">      <span class="op">&lt;</span>App /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb29-15" title="15">    &lt;/Provider<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb29-16" title="16">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb29-17" title="17">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb29-18" title="18">)<span class="op">;</span></a></code></pre></div>
<p>… and configure a <strong>Redux</strong> store …</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="co">// ./src/store/configureStore.js</span></a>
<a class="sourceLine" id="cb30-2" title="2"></a>
<a class="sourceLine" id="cb30-3" title="3"><span class="im">import</span> <span class="op">{</span> createStore<span class="op">,</span> applyMiddleware<span class="op">,</span> combineReducers<span class="op">,</span> compose <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="im">import</span> thunk <span class="im">from</span> <span class="st">&#39;redux-thunk&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-5" title="5"><span class="im">import</span> ipAddress <span class="im">from</span> <span class="st">&#39;./ipAddress&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb30-6" title="6"></a>
<a class="sourceLine" id="cb30-7" title="7"><span class="kw">const</span> composeEnhancers <span class="op">=</span> <span class="va">window</span>.<span class="at">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span> <span class="op">||</span> compose<span class="op">;</span></a>
<a class="sourceLine" id="cb30-8" title="8"></a>
<a class="sourceLine" id="cb30-9" title="9"><span class="kw">const</span> reducer <span class="op">=</span> <span class="at">combineReducers</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb30-10" title="10">  ipAddress<span class="op">,</span></a>
<a class="sourceLine" id="cb30-11" title="11"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb30-12" title="12"></a>
<a class="sourceLine" id="cb30-13" title="13"><span class="kw">const</span> configureStore <span class="op">=</span> initialState <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb30-14" title="14">  <span class="cf">return</span> <span class="at">createStore</span>(</a>
<a class="sourceLine" id="cb30-15" title="15">    reducer<span class="op">,</span></a>
<a class="sourceLine" id="cb30-16" title="16">    initialState<span class="op">,</span></a>
<a class="sourceLine" id="cb30-17" title="17">    <span class="at">composeEnhancers</span>(<span class="at">applyMiddleware</span>(thunk))<span class="op">,</span></a>
<a class="sourceLine" id="cb30-18" title="18">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb30-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb30-20" title="20"></a>
<a class="sourceLine" id="cb30-21" title="21"><span class="im">export</span> <span class="im">default</span> configureStore<span class="op">;</span></a></code></pre></div>
<p>… which includes a <strong>reducer</strong>, an <strong>action creator</strong> function, and a <strong>thunk action creator</strong> function …</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="co">// ./src/store/ipAddress.js</span></a>
<a class="sourceLine" id="cb31-2" title="2"></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="im">import</span> <span class="op">{</span> ipUrl <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;../config&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb31-4" title="4"></a>
<a class="sourceLine" id="cb31-5" title="5"><span class="kw">const</span> SET_IP <span class="op">=</span> <span class="st">&#39;ipAddress/SET_IP&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb31-6" title="6"></a>
<a class="sourceLine" id="cb31-7" title="7"><span class="im">export</span> <span class="kw">const</span> setIP <span class="op">=</span> ip <span class="kw">=&gt;</span> (<span class="op">{</span> <span class="dt">type</span><span class="op">:</span> SET_IP<span class="op">,</span> ip <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-8" title="8"></a>
<a class="sourceLine" id="cb31-9" title="9"><span class="im">export</span> <span class="kw">const</span> loadIP <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="kw">async</span> dispatch <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-10" title="10">  <span class="at">dispatch</span>(<span class="at">setIP</span>(<span class="st">&quot;&quot;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb31-11" title="11"></a>
<a class="sourceLine" id="cb31-12" title="12">  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="at">fetch</span>(<span class="vs">`</span><span class="sc">${</span>ipUrl<span class="sc">}</span><span class="vs">/ip`</span><span class="op">,</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-13" title="13">    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;get&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-14" title="14">    <span class="dt">headers</span><span class="op">:</span> <span class="op">{</span> <span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span> <span class="op">},</span></a>
<a class="sourceLine" id="cb31-15" title="15">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb31-16" title="16"></a>
<a class="sourceLine" id="cb31-17" title="17">  <span class="cf">if</span> (<span class="va">response</span>.<span class="at">ok</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-18" title="18">    <span class="kw">let</span> <span class="op">{</span> origin <span class="op">}</span> <span class="op">=</span> <span class="cf">await</span> <span class="va">response</span>.<span class="at">json</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb31-19" title="19">    <span class="co">// obscure last segment for privacy purposes</span></a>
<a class="sourceLine" id="cb31-20" title="20">    origin <span class="op">=</span> <span class="va">origin</span>.<span class="at">split</span>(<span class="st">&#39;.&#39;</span><span class="op">,</span> <span class="dv">3</span>).<span class="at">join</span>(<span class="st">&#39;.&#39;</span>) <span class="op">+</span> <span class="st">&quot;.xxx&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb31-21" title="21">    <span class="co">// dispatch the result</span></a>
<a class="sourceLine" id="cb31-22" title="22">    <span class="at">dispatch</span>(<span class="at">setIP</span>(origin))<span class="op">;</span></a>
<a class="sourceLine" id="cb31-23" title="23">  <span class="op">}</span></a>
<a class="sourceLine" id="cb31-24" title="24"></a>
<a class="sourceLine" id="cb31-25" title="25"><span class="op">};</span></a>
<a class="sourceLine" id="cb31-26" title="26"></a>
<a class="sourceLine" id="cb31-27" title="27"><span class="im">export</span> <span class="im">default</span> <span class="kw">function</span> <span class="at">reducer</span>(state <span class="op">=</span> <span class="op">{},</span> action) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-28" title="28">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb31-29" title="29">    <span class="cf">case</span> <span class="dt">SET_IP</span><span class="op">:</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-30" title="30">      <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-31" title="31">        ...<span class="at">state</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-32" title="32">        <span class="dt">ip</span><span class="op">:</span> <span class="va">action</span>.<span class="at">ip</span><span class="op">,</span></a>
<a class="sourceLine" id="cb31-33" title="33">      <span class="op">};</span></a>
<a class="sourceLine" id="cb31-34" title="34">    <span class="op">}</span></a>
<a class="sourceLine" id="cb31-35" title="35"></a>
<a class="sourceLine" id="cb31-36" title="36">    <span class="cf">default</span><span class="op">:</span> <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb31-37" title="37">  <span class="op">}</span></a>
<a class="sourceLine" id="cb31-38" title="38"><span class="op">}</span></a></code></pre></div>
<p>… that relies on the application configuration …</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="co">// ./src/config.js</span></a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="im">export</span> <span class="kw">const</span> ipUrl <span class="op">=</span> <span class="va">process</span>.<span class="va">env</span>.<span class="at">REACT_APP_BASEURL</span> <span class="op">||</span> <span class="vs">`https://httpbin.org`</span><span class="op">;</span></a></code></pre></div>
<p>… to fetch the IP Address using the <a href="https://httpbin.org/ip">ip query at httpbin.org</a>.</p>
<hr />
<h1 id="react-router-hooks">React Router Hooks</h1>
<p>Now it’s time to dig into the specifics of how hooks can simplify <strong>React</strong> code when working with React Router, specifically <code>react-router-dom</code>.</p>
<p>When you complete this lesson, you should be able to use the hooks that are built into the <code>react-router-dom</code> package:</p>
<ul>
<li><code>useParams</code> for matching parameters in the current route</li>
<li><code>useHistory</code> for navigation from code (without <code>Link</code> or <code>NavLink</code>)</li>
<li><code>useLocation</code> for tracking url changes</li>
<li><code>useRouteMatch</code> for checking if the current url matches a path format</li>
</ul>
<h2 id="useparams"><code>useParams</code></h2>
<p>The most common usage of hooks with <code>react-router-dom</code> is the case where a RESTful path has one or more parameters, such as an <code>id</code>.</p>
<p>For example, the <code>id</code> in a path like <code>/user/:id</code> may be accessed as the property of an object returned by <code>useParams()</code>.</p>
<p>Option 1</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">const</span> params <span class="op">=</span> <span class="at">useParams</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;User id is&#39;</span><span class="op">,</span> <span class="va">params</span>.<span class="at">id</span>)<span class="op">;</span></a></code></pre></div>
<p>Option 2 (more common)</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">const</span> <span class="op">{</span> id <span class="op">}</span> <span class="op">=</span> <span class="at">useParams</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb34-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;User id is&#39;</span><span class="op">,</span> id)<span class="op">;</span></a></code></pre></div>
<p>Now, consider this path <code>/user/:userId/doc/:docId</code>. It has two parameters, <code>userId</code> and <code>docId</code>; therefore, they would be accessed using <code>const { userId, docId } = useParams()</code>. Notice how the variables in the path match the properties on the objects returned by <code>useParams()</code>.</p>
<p>Here’s an expanded example showing a basic function component.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" title="1"><span class="co">// ./src/components/Document.js</span></a>
<a class="sourceLine" id="cb35-2" title="2"></a>
<a class="sourceLine" id="cb35-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-4" title="4"><span class="im">import</span> <span class="op">{</span> useParams <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb35-5" title="5"></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="kw">const</span> Document <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb35-7" title="7">    <span class="kw">const</span> <span class="op">{</span> userId<span class="op">,</span> docId <span class="op">}</span> <span class="op">=</span> <span class="at">useParams</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb35-8" title="8"></a>
<a class="sourceLine" id="cb35-9" title="9">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb35-10" title="10">        <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb35-11" title="11">            <span class="op">&lt;</span>h2<span class="op">&gt;</span>Document <span class="op">{</span>docId<span class="op">}</span>&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb35-12" title="12">            <span class="op">&lt;</span>p<span class="op">&gt;</span>Created by User <span class="op">{</span>userId<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb35-13" title="13">        &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb35-14" title="14">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb35-15" title="15"><span class="op">};</span></a>
<a class="sourceLine" id="cb35-16" title="16"></a>
<a class="sourceLine" id="cb35-17" title="17"><span class="im">export</span> <span class="im">default</span> Document<span class="op">;</span></a></code></pre></div>
<p>As a reminder, you’ll need to wrap your components within a <code>&lt;Router&gt;</code> in order to use the hooks built into the <code>react-router-dom</code> package. Perhaps like this…</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb36-2" title="2"></a>
<a class="sourceLine" id="cb36-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-5" title="5"><span class="im">import</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb36-6" title="6">    BrowserRouter <span class="im">as</span> Router<span class="op">,</span></a>
<a class="sourceLine" id="cb36-7" title="7">    Switch<span class="op">,</span></a>
<a class="sourceLine" id="cb36-8" title="8">    Route<span class="op">,</span></a>
<a class="sourceLine" id="cb36-9" title="9"><span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="im">import</span> Document <span class="im">from</span> <span class="st">&#39;./components/Document&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb36-11" title="11"></a>
<a class="sourceLine" id="cb36-12" title="12"><span class="co">// For simplicity, Router and Switch are here instead of the traditional App.js</span></a>
<a class="sourceLine" id="cb36-13" title="13"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb36-14" title="14">    <span class="op">&lt;</span>Router<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb36-15" title="15">        <span class="op">&lt;</span>Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb36-16" title="16">            <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&#39;/user/:userId/doc/:docId&#39;</span> component<span class="op">={</span>Document<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb36-17" title="17">            <span class="op">{</span><span class="co">/* Other routes also */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb36-18" title="18">        &lt;/Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb36-19" title="19">    &lt;/Router<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb36-20" title="20">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb36-21" title="21">)<span class="op">;</span></a></code></pre></div>
<h2 id="usehistory"><code>useHistory</code></h2>
<p>The <code>useHistory()</code> hook gives you access to the <strong>history</strong> object, which is a record of paths visited on the current browser tab.</p>
<p>While there are a number of possibilities for what you can do with <code>history</code>, some are more useful than others. Here are the top methods and property.</p>
<ul>
<li><code>push(path, [state])</code>
<ul>
<li>Adds a new path to the history and navigates there</li>
<li><code>state</code> object is optional</li>
</ul></li>
<li><code>replace(path, [state])</code>
<ul>
<li>Removes the current path from history before adding the new path and navigating there</li>
<li><code>state</code> object is optional</li>
<li>When the user goes back from the next path, they will skip the replaced path (either with the browser’s BACK button or the <code>goBack()</code> function)</li>
</ul></li>
<li><code>goBack()</code>
<ul>
<li>Returns to the previous path in the history</li>
</ul></li>
<li><code>location</code> - the current location
<ul>
<li><code>pathname</code> - the path</li>
<li><code>search</code> - query params (following a <code>?</code> in the url), if any</li>
<li><code>hash</code> - value following a <code>#</code> in the url, if any</li>
<li><code>state</code> - object provided with <code>push()</code> or <code>replace()</code></li>
</ul></li>
</ul>
<p>The <code>state</code> object is a way for you to pass one or more data values between routes. The sender creates the object and passes it as the second argument to <code>history.push</code> or <code>history.replace</code>; the receiver accesses the object using <code>history.location.state</code>.</p>
<p>For more capabilities, you can read the <a href="https://reactrouter.com/web/api/history">documentation on History</a>, if you so desire.</p>
<p>Here’s an example of a function component using history for custom navigation.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="co">// ./src/components/ComingSoon.js</span></a>
<a class="sourceLine" id="cb37-2" title="2"></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="im">import</span> React<span class="op">,</span> <span class="op">{</span> useEffect <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span></a>
<a class="sourceLine" id="cb37-4" title="4"><span class="im">import</span> <span class="op">{</span> useHistory <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span></a>
<a class="sourceLine" id="cb37-5" title="5"></a>
<a class="sourceLine" id="cb37-6" title="6"><span class="kw">const</span> ComingSoon <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-7" title="7">    <span class="kw">const</span> history <span class="op">=</span> <span class="at">useHistory</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb37-8" title="8"></a>
<a class="sourceLine" id="cb37-9" title="9">    <span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-10" title="10">        <span class="kw">const</span> tid <span class="op">=</span> <span class="at">setTimeout</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-11" title="11">            <span class="va">history</span>.<span class="at">replace</span>(<span class="st">&#39;/&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-12" title="12">        <span class="op">},</span> <span class="dv">2000</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-13" title="13">        <span class="cf">return</span> () <span class="kw">=&gt;</span> <span class="at">clearTimeout</span>(tid)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-14" title="14">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb37-15" title="15"></a>
<a class="sourceLine" id="cb37-16" title="16">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb37-17" title="17">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Coming Soon&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb37-18" title="18">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb37-19" title="19"><span class="op">};</span></a>
<a class="sourceLine" id="cb37-20" title="20"></a>
<a class="sourceLine" id="cb37-21" title="21"><span class="im">export</span> <span class="im">default</span> ComingSoon<span class="op">;</span></a></code></pre></div>
<blockquote>
<p>ASIDE: This example also makes use of the <code>useEffect</code> hook discussed in other lessons in order to automatically redirect the user after a timeout period. In particular, notice how <code>return</code> is used to prevent warnings in React if the user chooses to leave the page before the timeout period ends.</p>
</blockquote>
<h2 id="uselocation"><code>useLocation</code></h2>
<p>The preferred approach to accessing the location from within a component is through the history object. However, there is a special case where the <code>useLocation</code> hook is useful - connecting to a service which tracks page loads.</p>
<p>One example is <strong>Google Analytics</strong>.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb38-2" title="2"></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb38-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="im">import</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb38-6" title="6">    BrowserRouter <span class="im">as</span> Router<span class="op">,</span></a>
<a class="sourceLine" id="cb38-7" title="7">    Switch<span class="op">,</span></a>
<a class="sourceLine" id="cb38-8" title="8">    useLocation</a>
<a class="sourceLine" id="cb38-9" title="9"><span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb38-10" title="10"><span class="im">import</span> ga <span class="im">from</span> <span class="st">&#39;react-ga&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb38-11" title="11"></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="kw">const</span> TrackingWrapper <span class="op">=</span> (<span class="op">{</span> children <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb38-13" title="13">    <span class="kw">const</span> location <span class="op">=</span> <span class="at">useLocation</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb38-14" title="14">    <span class="va">React</span>.<span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb38-15" title="15">        <span class="va">ga</span>.<span class="at">send</span>([<span class="st">&#39;pageview&#39;</span><span class="op">,</span> <span class="va">location</span>.<span class="at">pathname</span>])<span class="op">;</span></a>
<a class="sourceLine" id="cb38-16" title="16">    <span class="op">},</span> [location])<span class="op">;</span></a>
<a class="sourceLine" id="cb38-17" title="17">    <span class="cf">return</span> children<span class="op">;</span></a>
<a class="sourceLine" id="cb38-18" title="18"><span class="op">}</span></a>
<a class="sourceLine" id="cb38-19" title="19"></a>
<a class="sourceLine" id="cb38-20" title="20"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb38-21" title="21">    <span class="op">&lt;</span>Router<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb38-22" title="22">        <span class="op">&lt;</span>TrackingWrapper<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb38-23" title="23">            <span class="op">&lt;</span>Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb38-24" title="24">                <span class="op">{</span><span class="co">/* App and/or Routes, etc. */</span><span class="op">}</span></a>
<a class="sourceLine" id="cb38-25" title="25">            &lt;/Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb38-26" title="26">        &lt;/TrackingWrapper<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb38-27" title="27">    &lt;/Router<span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb38-28" title="28">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb38-29" title="29">)<span class="op">;</span></a></code></pre></div>
<p>The setup and usage of Google Analytics is beyond the scope of this lesson. However, if you’d like to learn more you can search online for examples, such as <a href="https://levelup.gitconnected.com/using-google-analytics-with-react-3d98d709399b">Google Analytics with React</a>. In short, the call to <code>ga.send()</code> logs whatever event you pass it into your GA account. Then you can sign in to GA to view and analyze the recorded data including days and times when users are most active, what country your visitors are coming from, and much more.</p>
<h2 id="useroutematch"><code>useRouteMatch</code></h2>
<p>If you’d like to check for a matching path before rendering a route, then turn to <code>useRouteMatch</code>. This hook accepts an argument which is compared to the current path in the same fashion as <code>Route</code> and returns a boolean (<code>true</code> or <code>false</code>).</p>
<p>For example, <code>useRouteMatch('/report/advanced')</code> could be used to show (or hide, when not matching) an advanced user interface for modifying a report on the fly.</p>
<h2 id="bring-it-together">Bring it together</h2>
<p>Here is an example of a component which lays the framework for a thorough usage of React Router hooks (except <code>location</code> which is better used elsewhere). Use your detective skills to figure out as much as you can. A thorough explanation is provided in one of the video lessons.</p>
<p>Imagine the following <code>Report</code> component is placed in a router with <code>&lt;Route path={['/report/:date', '/report']} component={Report}/&gt;</code>.</p>
<blockquote>
<p>BONUS: In case you didn’t know already, a router can use an array to specify multiple paths to match with the provided component.</p>
</blockquote>
<div class="sourceCode" id="cb39"><pre class="sourceCode javascript"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1"><span class="co">// ./src/components/Report.js</span></a>
<a class="sourceLine" id="cb39-2" title="2"></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="im">import</span> React<span class="op">,</span> <span class="op">{</span>useEffect<span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb39-4" title="4"><span class="im">import</span> <span class="op">{</span> useRouteMatch<span class="op">,</span> useHistory<span class="op">,</span> useParams <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb39-5" title="5"></a>
<a class="sourceLine" id="cb39-6" title="6"><span class="kw">const</span> Report <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb39-7" title="7">    <span class="kw">const</span> matchUC <span class="op">=</span> <span class="at">useRouteMatch</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb39-8" title="8">        <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;/REPORT*&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb39-9" title="9">        <span class="dt">strict</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></a>
<a class="sourceLine" id="cb39-10" title="10">        <span class="dt">sensitive</span><span class="op">:</span> <span class="kw">true</span></a>
<a class="sourceLine" id="cb39-11" title="11">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-12" title="12">    <span class="kw">const</span> matchAdvanced <span class="op">=</span> <span class="at">useRouteMatch</span>([</a>
<a class="sourceLine" id="cb39-13" title="13">        <span class="st">&#39;/report/advanced&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb39-14" title="14">        <span class="st">&#39;/report/*/advanced&#39;</span></a>
<a class="sourceLine" id="cb39-15" title="15">    ])<span class="op">;</span></a>
<a class="sourceLine" id="cb39-16" title="16">    <span class="kw">const</span> matchAll <span class="op">=</span> <span class="at">useRouteMatch</span>(<span class="st">&#39;/report/all&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb39-17" title="17">    <span class="kw">const</span> <span class="op">{</span> date <span class="op">}</span> <span class="op">=</span> <span class="at">useParams</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb39-18" title="18">    <span class="kw">const</span> history <span class="op">=</span> <span class="at">useHistory</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb39-19" title="19"></a>
<a class="sourceLine" id="cb39-20" title="20">    <span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb39-21" title="21">        <span class="cf">if</span> (matchUC)</a>
<a class="sourceLine" id="cb39-22" title="22">            <span class="va">history</span>.<span class="at">replace</span>(<span class="va">history</span>.<span class="va">location</span>.<span class="va">pathname</span>.<span class="at">toLowerCase</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb39-23" title="23">    <span class="op">},</span> [matchUC<span class="op">,</span> history])</a>
<a class="sourceLine" id="cb39-24" title="24"></a>
<a class="sourceLine" id="cb39-25" title="25">    <span class="cf">if</span> (matchUC)</a>
<a class="sourceLine" id="cb39-26" title="26">        <span class="cf">return</span> <span class="st">&quot;&quot;</span></a>
<a class="sourceLine" id="cb39-27" title="27"></a>
<a class="sourceLine" id="cb39-28" title="28">    <span class="cf">if</span> (<span class="op">!</span>date) <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb39-29" title="29">        <span class="op">&lt;</span>p<span class="op">&gt;</span>Select Report</a>
<a class="sourceLine" id="cb39-30" title="30">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-31" title="31">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/last-week&#39;</span>)</a>
<a class="sourceLine" id="cb39-32" title="32">            <span class="op">}&gt;</span>Last Week&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-33" title="33">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-34" title="34">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/last-month&#39;</span>)</a>
<a class="sourceLine" id="cb39-35" title="35">            <span class="op">}&gt;</span>Last Month&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-36" title="36">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-37" title="37">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/all&#39;</span>)</a>
<a class="sourceLine" id="cb39-38" title="38">            <span class="op">}&gt;</span>View All&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-39" title="39">        &lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-40" title="40">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb39-41" title="41"></a>
<a class="sourceLine" id="cb39-42" title="42">    <span class="cf">if</span> (date <span class="op">===</span> <span class="st">&#39;advanced&#39;</span>) <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb39-43" title="43">        <span class="op">&lt;</span>p<span class="op">&gt;</span>Select Report</a>
<a class="sourceLine" id="cb39-44" title="44">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-45" title="45">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/last-week/&#39;</span><span class="op">+</span>date)</a>
<a class="sourceLine" id="cb39-46" title="46">            <span class="op">}&gt;</span>Last Week&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-47" title="47">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-48" title="48">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/last-month/&#39;</span><span class="op">+</span>date)</a>
<a class="sourceLine" id="cb39-49" title="49">            <span class="op">}&gt;</span>Last Month&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-50" title="50">            <span class="op">&lt;</span>br/<span class="op">&gt;&lt;</span>button onClick<span class="op">={</span>() <span class="kw">=&gt;</span></a>
<a class="sourceLine" id="cb39-51" title="51">                <span class="va">history</span>.<span class="at">push</span>(<span class="st">&#39;/report/all/&#39;</span><span class="op">+</span>date)</a>
<a class="sourceLine" id="cb39-52" title="52">            <span class="op">}&gt;</span>View All&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-53" title="53">        &lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-54" title="54">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb39-55" title="55"></a>
<a class="sourceLine" id="cb39-56" title="56">    <span class="cf">if</span> (matchAll) <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb39-57" title="57">        <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb39-58" title="58">            <span class="op">&lt;</span>h2<span class="op">&gt;</span>Complete Report <span class="kw">of</span> Everything&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-59" title="59">            <span class="op">{</span>matchAdvanced <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>p<span class="op">&gt;</span>... <span class="at">Alternate</span> Advanced <span class="va">Controls</span> ...&lt;/p<span class="op">&gt;}</span></a>
<a class="sourceLine" id="cb39-60" title="60">        &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-61" title="61">    )</a>
<a class="sourceLine" id="cb39-62" title="62"></a>
<a class="sourceLine" id="cb39-63" title="63">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb39-64" title="64">        <span class="op">&lt;&gt;</span></a>
<a class="sourceLine" id="cb39-65" title="65">            <span class="op">&lt;</span>h2<span class="op">&gt;</span>Report For <span class="op">{</span>date<span class="op">}</span>&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-66" title="66">            <span class="op">{</span>matchAdvanced <span class="op">&amp;&amp;</span> <span class="op">&lt;</span>p<span class="op">&gt;</span>... <span class="at">Advanced</span> <span class="va">Controls</span> ...&lt;/p<span class="op">&gt;}</span></a>
<a class="sourceLine" id="cb39-67" title="67">        &lt;/<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb39-68" title="68">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb39-69" title="69"><span class="op">};</span></a>
<a class="sourceLine" id="cb39-70" title="70"></a>
<a class="sourceLine" id="cb39-71" title="71"><span class="im">export</span> <span class="im">default</span> Report<span class="op">;</span></a></code></pre></div>
<p>The various routes to explore include</p>
<ul>
<li><code>/REPORT</code> or <code>/REPORT/SOMETHING/ADVANCED</code> or any other variation starting with REPORT in all caps will redirect to the same url in lowercase</li>
<li><code>/report</code> or <code>/report/advanced</code> will show a few buttons</li>
<li><code>/report/all</code> will show a different title than <code>/report/something-else</code> (with or without the next option)</li>
<li>any url ending in <code>/advanced</code> will show “Advanced Controls"</li>
</ul>
<h2 id="what-youve-learned">What you’ve learned</h2>
<p>The <code>react-router-dom</code> package comes with hooks you can use to simplify the code in your <strong>React</strong> applications. For example, utilizing <code>const { id } = useParams()</code> within a component displayed in the path <code>/user/:id</code> give you access to the value that replaces the <code>:id</code> parameter. Navigating can be accomplished with <code>const history = useHistory()</code> followed by <code>history.push('/a/new/path')</code>, and you can even include a <code>state</code> object as a second parameter. Additionally, <code>useLocation</code> can help you connect to tracking services, and <code>useRouteMatch</code> might come in handy once in while for pattern matching on the path itself. In short, the handling of RESTful paths in React is enhanced when you embrace the hooks available in React Router.</p>
<p>For future reference, you may want to bookmark the <a href="https://reactrouter.com/web/api/Hooks">official documentation on React Router Hooks</a>.</p>
<hr />
<h1 id="react-hooks-documentation">React Hooks Documentation</h1>
<p>You now know how to manage information in a React application through <code>state</code>, <code>props</code>, <code>context</code>, and a <code>Redux</code> store. Take a moment to read through the official React Hooks documentation. Now that you’ve been working with React for almost two weeks now, you should have a base level understanding of React and the component lifecycle. Congratulations on learning such a concept heavy library!</p>
<p>As you move forward in your development careers, you’ll need to lean more on official documentation - React’s official documentation is a great place to start! Review the following articles about from the official React Hooks documentation and try to be aware of how you navigate the documentation to aid your own learning.</p>
<h2 id="why-hooks">Why hooks?</h2>
<ul>
<li><a href="https://reactjs.org/docs/hooks-intro.html#motivation">The Motivation Behind Hooks</a></li>
<li><a href="https://reactjs.org/docs/hooks-overview.html">Hooks at a Glance</a></li>
</ul>
<h2 id="hook-basics">Hook basics</h2>
<ul>
<li><a href="https://reactjs.org/docs/hooks-rules.html">Rules of Hooks</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html">Hooks API Reference</a></li>
<li><a href="https://reactjs.org/docs/hooks-state.html">useState</a></li>
<li><a href="https://reactjs.org/docs/hooks-effect.html">useEffect</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html#usecontext">useContext</a></li>
<li><a href="https://reactjs.org/docs/hooks-effect.html#tip-optimizing-performance-by-skipping-effects">Optimizing Performance by Skipping Effects</a></li>
</ul>
<h2 id="more-about-hooks">More about hooks</h2>
<ul>
<li><a href="https://reactjs.org/docs/hooks-custom.html">Custom Hooks</a></li>
<li><a href="https://reactjs.org/docs/hooks-faq.html">Hooks FAQ</a></li>
</ul>
<hr />
<h1 id="pokedex-hooks-project-phase-1">Pokedex Hooks Project: Phase 1</h1>
<p>In today’s project you will refactor class-based components that make use of lifecycle methods to function components that make use of React Hooks! At this point, you have already built an application with class components and context to manage application state. You’ve also built the same application to learn about how to use Redux instead of React Context for state-management.</p>
<p>In this project, you’ll build your application with React and Redux hooks! You will implement the:</p>
<ul>
<li><code>useState</code> hook to manage a component’s state</li>
<li><code>useEffect</code> hook to manage a component’s side effect operations</li>
<li><code>useDispatch</code> hook to dispatch actions from with a component file</li>
<li><code>useSelector</code> hook access slices of state from the Redux store</li>
<li><code>useContext</code> hook to manage your application with Context instead of Redux</li>
</ul>
<h2 id="phase-1-state-based-hooks-application">Phase 1: State-based hooks application</h2>
<p>You’ll need the backend for the Pokedex application. Take a moment to clone it from https://github.com/appacademy-starters/pokedex-backend and get it set up.</p>
<p>The API for the backend is also documented in repository’s README.</p>
<p>Once you have that up and running, you’ll begin working out of the solution for the state-based class components project. Begin by cloning the state-based application from https://github.com/appacademy-starters/react-hooks-pokedex-starter.git.</p>
<p>Throughout today, you’ll work on refactoring each class component in the application to be a function component that makes use of React Hooks!</p>
<h3 id="explore-the-reference-application">Explore the reference application</h3>
<p>As you might remember, your current application comprises of the following components:</p>
<ul>
<li><code>App</code>: Does the browser routing and top-level fetches of data to draw the data</li>
<li><code>LoginPanel</code>: Shows the login panel</li>
<li><code>PokemonBrowser</code>: The browser that draws the list on the left after logging in and has a route to the <code>PokemonDetail</code> when the route matches “/pokemon/:id"</li>
<li><code>PokemonDetail</code>: Makes a fetch to the API on mount and update to load the details of the selected Pokemon</li>
</ul>
<h3 id="refactor-components">Refactor components</h3>
<p>As you’re refactoring your application’s components, you’ll most likely hit bugs and break your application. While you’re refactoring each component, make sure to test that your refactored code is working before moving on to refactor the next component. As a general guideline, you should refactor each component from the lowest, most nested component up to the top-most parent:</p>
<ol type="1">
<li><code>PokemonDetail</code></li>
<li><code>PokemonBrowser</code></li>
<li><code>LoginPanel</code></li>
<li><code>App</code></li>
</ol>
<p>You’ll update how each component sets its default state by using the <code>useState</code> hook. You’ll also refactor the lifecycle methods of each component into side effect operations managed by the <code>useEffect</code> hook. At the end of this exercise, you should have a good understanding of how to use the basic <code>useState</code> and <code>useEffect</code> hooks to write function components with side effect operations.</p>
<p>Take this project as a way to practice learning new technologies by referencing official documentation:</p>
<ul>
<li><a href="https://reactjs.org/docs/hooks-state.html">Using the State Hook</a></li>
<li><a href="https://reactjs.org/docs/hooks-effect.html">Using the Effect Hook</a></li>
<li><a href="https://reactjs.org/docs/hooks-reference.html">Hooks API Reference</a></li>
</ul>
<p>Remember, Create React App will let your React application use environment variables that start with <code>REACT_APP_</code>. Just like with your state-based application built with class components, you can import environment variables from the <code>config.js</code> file to clean up your code for specifying the URL of the backend.</p>
<p>Once you have finished refactoring, take a moment to commit your changes to the main branch of your <code>react-hooks-pokedex-starter</code> project:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1"><span class="fu">git</span> add .</a>
<a class="sourceLine" id="cb40-2" title="2"><span class="fu">git</span> commit -m <span class="st">&quot;Refactor app to implement hooks&quot;</span></a></code></pre></div>
<p>In the next two phases, you’ll create two different projects in two different branches that use this commit as a starting point. You’ll branch off from this point to create a Redux-based project and a Context-based project (both utilizing hooks).</p>
<hr />
<h1 id="pokedex-hooks-project-phase-2">Pokedex Hooks Project: Phase 2</h1>
<p>As you might remember from the Redux-based Pokedex project, implementing Redux results in a lot of boilerplate code. Using Redux hooks can help clean up and get rid of a lot of boilerplate code. In this phase you will refactor the Redux-based project to use React hooks and implement Redux hooks!</p>
<p>Begin by creating a new branch for your Redux-based application:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="fu">git</span> checkout -b redux-hooks-app</a></code></pre></div>
<p>Take a moment to download the <a href="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-hooks/projects/pokedex-hooks/starter-redux-based-hooks.zip">Redux-based Pokedex hooks starter project</a>. Make sure you are in your new <code>redux-hooks-app</code> branch:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb42-1" title="1"><span class="fu">git</span> branch</a></code></pre></div>
<p>Delete all of your project’s current code and move the files of <code>redux-based-pokedex-solution</code> into your current directory (<code>react-hooks-pokedex-starter</code>). For example, if both project directories are within the same directory, you can use the <code>mv</code> command from the two project folders’ parent directory.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb43-1" title="1"><span class="fu">mv</span> -v redux-based-pokedex-solution/* react-hooks-pokedex-starter</a></code></pre></div>
<p>Now take a moment to commit the start of your Redux-based project:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb44-1" title="1"><span class="fu">git</span> add .</a>
<a class="sourceLine" id="cb44-2" title="2"><span class="fu">git</span> commit -m <span class="st">&quot;Initialize redux hooks starter project&quot;</span></a></code></pre></div>
<h2 id="using-redux-hooks-to-manage-application-state">Using Redux hooks to manage application state</h2>
<p>In this phase, you’ll be refactoring all your component files to use Redux hooks instead of the <code>mapStateToProps</code>, <code>mapDispatchToProps</code>, and Redux <code>connect</code> functions. Just like in phase 1, you might hit bugs and break your application while refactoring your application’s components. Make sure to test that your refactored code is working before moving on to refactor the next component. As a general overview, you’ll be refactoring the code for the following components:</p>
<ol type="1">
<li><code>LogoutButton</code></li>
<li><code>LoginPanel</code></li>
<li><code>PokemonDetail</code></li>
<li><code>PokemonForm</code></li>
<li><code>PokemonBrowser</code></li>
</ol>
<p>There are two ways you can refactor your project:</p>
<ol type="1">
<li>You can refactor your project to use the <code>useDispatch</code> and <code>useSelector</code> hooks in a <em>container</em> component.</li>
<li>You can refactor your project to use the <code>useDispatch</code> and <code>useSelector</code> hooks within the component itself.</li>
</ol>
<p>You can choose either method to refactor your project. At this point, you are a full-fledged React developer - it’s time for you to start planning your own React code! Talk things through with your partner and decide which way you would like to begin refactoring your project. Remember, as you are using this project as practice for implementing Redux hooks, you can always implement Redux hooks into a container component for one component, and then implement Redux hooks directly in another component for the next component. Just make sure to choose one method to stick with for your personal React projects!</p>
<h3 id="version-1-using-redux-hooks-in-a-container-component">Version 1: Using Redux hooks in a container component</h3>
<p>If you chose to use the <code>useDispatch</code> and <code>useSelector</code> hooks in a <em>container</em> component, this means you should use a namespace to import actions into each component file. For example, in the <code>LogoutButton.js</code> file, you currently have the following import statement that imports the <code>logout</code> action creator function:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb45-1" title="1"><span class="im">import</span> <span class="op">{</span> logout <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;../actions/authentication&#39;</span><span class="op">;</span></a></code></pre></div>
<p>In order to remove confusion about whether an invocation of <code>logout()</code> is invoking the <code>logout</code> prop or the <code>logout</code> action creator function, you can update the import statement for your logout action to use an <code>AuthAction</code> namespace:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb46-1" title="1"><span class="im">import</span> <span class="op">*</span> <span class="im">as</span> AuthAction <span class="im">from</span> <span class="st">&#39;../actions/authentication&#39;</span><span class="op">;</span></a></code></pre></div>
<p>This way, you can create a container component to replace what is happening under the hood with the <code>mapStateToProps</code>, <code>mapDispatchToProps</code>, and <code>connect</code> functions. You can reference the logout action with the <code>AuthAction</code> namepsace, like so: <code>AuthAction.logout</code>.</p>
<p>Based on the <code>mapStateToProps</code> and <code>mapDispatchToProps</code> functions in the <code>LogoutButton.js</code> file, you can tell that the component is accessing Redux by receiving <code>loggedOut</code> and <code>logout</code> props:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb47-1" title="1"><span class="kw">const</span> mapStateToProps <span class="op">=</span> state <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-3" title="3">    <span class="dt">loggedOut</span><span class="op">:</span> <span class="op">!</span><span class="va">state</span>.<span class="va">authentication</span>.<span class="at">token</span><span class="op">,</span></a>
<a class="sourceLine" id="cb47-4" title="4">  <span class="op">};</span></a>
<a class="sourceLine" id="cb47-5" title="5"><span class="op">};</span></a>
<a class="sourceLine" id="cb47-6" title="6"></a>
<a class="sourceLine" id="cb47-7" title="7"><span class="kw">const</span> mapDispatchToProps <span class="op">=</span> dispatch <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-8" title="8">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb47-9" title="9">    <span class="dt">logout</span><span class="op">:</span> () <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">logout</span>())<span class="op">,</span></a>
<a class="sourceLine" id="cb47-10" title="10">  <span class="op">};</span></a>
<a class="sourceLine" id="cb47-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb47-12" title="12"></a>
<a class="sourceLine" id="cb47-13" title="13"><span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps<span class="op">,</span> mapDispatchToProps)(LogoutButton)<span class="op">;</span></a></code></pre></div>
<p>Take a moment to import the <code>useSelector</code> and <code>useDispatch</code> from the Redux library into the file:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb48-1" title="1"><span class="im">import</span> <span class="op">{</span> useDispatch<span class="op">,</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Now you’ll write a container component that will replace the <code>mapStateToProps</code>, <code>mapDispatchToProps</code>, and <code>connect</code> functions! Start by setting up the container component that returns the <code>LogoutButton</code> component to use the <code>useDispatch</code> prop. You’ll also want to have the <code>LogoutButton.js</code> file export the <code>LogoutButtonContainer</code> component (instead of the higher-order component returned by the <code>connect</code> function):</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="kw">const</span> LogoutButtonContainer <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb49-2" title="2">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb49-3" title="3"></a>
<a class="sourceLine" id="cb49-4" title="4">  <span class="cf">return</span> <span class="op">&lt;</span>LogoutButton /<span class="op">&gt;;</span></a>
<a class="sourceLine" id="cb49-5" title="5"><span class="op">};</span></a>
<a class="sourceLine" id="cb49-6" title="6"></a>
<a class="sourceLine" id="cb49-7" title="7"><span class="im">export</span> <span class="im">default</span> LogoutButtonContainer<span class="op">;</span></a></code></pre></div>
<blockquote>
<p>Feel free to visit the Redux Hooks documentation to view <a href="https://react-redux.js.org/next/api/hooks#examples"><code>useDispatch</code> examples</a>.</p>
</blockquote>
<p>Now that you have the container component and <code>dispatch</code> set up, you can pass dispatched version of the <code>logout</code> action as a prop into the <code>LogoutButton</code> component:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb50-1" title="1"><span class="kw">const</span> LogoutButtonContainer <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb50-2" title="2">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb50-3" title="3">  <span class="kw">const</span> logout <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="va">AuthAction</span>.<span class="at">logout</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb50-4" title="4"></a>
<a class="sourceLine" id="cb50-5" title="5">  <span class="cf">return</span> <span class="op">&lt;</span>LogoutButton logout<span class="op">={</span>logout<span class="op">}</span> /&gt;<span class="op">;</span></a>
<a class="sourceLine" id="cb50-6" title="6"><span class="op">};</span></a></code></pre></div>
<p>At this point, the container component is taking care of what the <code>mapDispatchToProps</code> function took care of! Now let’s use the <code>useSelector</code> hook to take care of what the <code>mapStateToProps</code> function took care of:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb51-1" title="1"><span class="kw">const</span> LogoutButtonContainer <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb51-2" title="2">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb51-3" title="3">  <span class="kw">const</span> logout <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="va">AuthAction</span>.<span class="at">logout</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb51-4" title="4">  <span class="kw">const</span> loggedOut <span class="op">=</span> <span class="at">useSelector</span>(state <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">state</span>.<span class="va">authentication</span>.<span class="at">token</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-5" title="5"></a>
<a class="sourceLine" id="cb51-6" title="6">  <span class="cf">return</span> <span class="op">&lt;</span>LogoutButton logout<span class="op">={</span>logout<span class="op">}</span> /&gt;<span class="op">;</span></a>
<a class="sourceLine" id="cb51-7" title="7"><span class="op">};</span></a></code></pre></div>
<blockquote>
<p>Feel free to visit the Redux Hooks documentation to view <a href="https://react-redux.js.org/next/api/hooks#useselector-examples"><code>useSelector</code> examples</a>.</p>
</blockquote>
<p>Now that you’ve gone over how to create a container component that implements Redux Hooks for the <code>LogoutButton</code> component, follow the same pattern to implement Redux hooks into container components for your <code>LoginPanel</code>, <code>PokemonDetail</code>, <code>PokemonForm</code>, and <code>PokemonBrowser</code> components. Feel free to practice implementing Redux hooks directly within a component instead!</p>
<h3 id="version-2-using-redux-hooks-from-within-a-component">Version 2: Using Redux hooks from within a component</h3>
<p>If you chose to use the <code>useDispatch</code> and <code>useSelector</code> hooks within the component itself, you’ll need to do some refactoring so that your component doesn’t receive any props. Instead of receiving slices of state and dispatchable action functions as props, you will use the <code>useSelector</code> hook to access a slice a state from within the component and the <code>useDispatch</code> hook to dispatch actions from within the component.</p>
<p>Based on the <code>mapStateToProps</code> and <code>mapDispatchToProps</code> functions in the <code>LogoutButton.js</code> file, you can tell that the component is accessing Redux by receiving <code>loggedOut</code> and <code>logout</code> props.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb52-1" title="1"><span class="kw">const</span> mapStateToProps <span class="op">=</span> state <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb52-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb52-3" title="3">    <span class="dt">loggedOut</span><span class="op">:</span> <span class="op">!</span><span class="va">state</span>.<span class="va">authentication</span>.<span class="at">token</span><span class="op">,</span></a>
<a class="sourceLine" id="cb52-4" title="4">  <span class="op">};</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="op">};</span></a>
<a class="sourceLine" id="cb52-6" title="6"></a>
<a class="sourceLine" id="cb52-7" title="7"><span class="kw">const</span> mapDispatchToProps <span class="op">=</span> dispatch <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb52-8" title="8">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb52-9" title="9">    <span class="dt">logout</span><span class="op">:</span> () <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">logout</span>())<span class="op">,</span></a>
<a class="sourceLine" id="cb52-10" title="10">  <span class="op">};</span></a>
<a class="sourceLine" id="cb52-11" title="11"><span class="op">};</span></a>
<a class="sourceLine" id="cb52-12" title="12"></a>
<a class="sourceLine" id="cb52-13" title="13"><span class="im">export</span> <span class="im">default</span> <span class="at">connect</span>(mapStateToProps<span class="op">,</span> mapDispatchToProps)(LogoutButton)<span class="op">;</span></a></code></pre></div>
<p>Take a moment to import the <code>useSelector</code> and <code>useDispatch</code> from the Redux library into the file.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb53-1" title="1"><span class="im">import</span> <span class="op">{</span> useDispatch<span class="op">,</span> useSelector <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-redux&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Now you’ll want to remove all the props that the <code>LogoutButton</code> receives. Instead of receiving props to access the <code>loggedOut</code> state and dispatched <code>logout</code> function, you’ll use the <code>useSelector</code> and <code>useDispatch</code> hook you just imported into the file. At this point, your <code>LogoutButton</code> component should look something like this:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb54-1" title="1"><span class="kw">const</span> LogoutButton <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb54-2" title="2">  <span class="cf">if</span> (loggedOut) <span class="op">{</span></a>
<a class="sourceLine" id="cb54-3" title="3">    <span class="cf">return</span> <span class="op">&lt;</span>Redirect to<span class="op">=</span><span class="st">&quot;/login&quot;</span> /&gt;<span class="op">;</span></a>
<a class="sourceLine" id="cb54-4" title="4">  <span class="op">}</span></a>
<a class="sourceLine" id="cb54-5" title="5"></a>
<a class="sourceLine" id="cb54-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb54-7" title="7">    <span class="op">&lt;</span>div id<span class="op">=</span><span class="st">&quot;logout-button-holder&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-8" title="8">      <span class="op">&lt;</span>button onClick<span class="op">={</span>handleClick<span class="op">}&gt;</span>Logout&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-9" title="9">    &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb54-10" title="10">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb54-11" title="11"><span class="op">};</span></a></code></pre></div>
<p>Now you’ll use Redux hooks within the <code>LoginButton</code> component so that you can remove the <code>mapStateToProps</code>, <code>mapDispatchToProps</code>, and <code>connect</code> functions! Instead of receiving a <code>loggedOut</code> prop, you’ll use the <code>useSelector</code> hook to access the state’s <code>authentication.token</code>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb55-1" title="1"><span class="kw">const</span> LogoutButton <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb55-2" title="2">  <span class="kw">const</span> loggedOut <span class="op">=</span> <span class="at">useSelector</span>(state <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">state</span>.<span class="va">authentication</span>.<span class="at">token</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb55-3" title="3">  </a>
<a class="sourceLine" id="cb55-4" title="4">  <span class="co">// CODE SHORTENED FOR BREVITY</span></a>
<a class="sourceLine" id="cb55-5" title="5"><span class="op">};</span></a></code></pre></div>
<blockquote>
<p>Feel free to visit the Redux Hooks documentation to view <a href="https://react-redux.js.org/next/api/hooks#useselector-examples"><code>useSelector</code> examples</a>.</p>
</blockquote>
<p>Notice how the <code>logout</code> thunk action creator function has already been imported into your <code>LogoutButton.js</code> file. You’ll use <code>useDispatch</code> hook to return a reference to the <code>dispatch</code> function from the Redux store:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb56-1" title="1"><span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a></code></pre></div>
<p>Then you can use the <code>dispatch</code> function to dispatch the <code>logout</code> function:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb57-1" title="1"><span class="kw">const</span> LogoutButton <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb57-2" title="2">  <span class="kw">const</span> loggedOut <span class="op">=</span> <span class="at">useSelector</span>(state <span class="kw">=&gt;</span> <span class="op">!</span><span class="va">state</span>.<span class="va">authentication</span>.<span class="at">token</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb57-3" title="3">  <span class="kw">const</span> dispatch <span class="op">=</span> <span class="at">useDispatch</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb57-4" title="4">  <span class="kw">const</span> handleClick <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="at">dispatch</span>(<span class="at">logout</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb57-5" title="5"></a>
<a class="sourceLine" id="cb57-6" title="6">  <span class="co">// CODE SHORTENED FOR BREVITY</span></a>
<a class="sourceLine" id="cb57-7" title="7"><span class="op">};</span></a></code></pre></div>
<blockquote>
<p>Feel free to visit the Redux Hooks documentation to view <a href="https://react-redux.js.org/next/api/hooks#examples"><code>useDispatch</code> examples</a>.</p>
</blockquote>
<p>Lastly, you’ll want to remove the <code>mapStateToProps</code> and <code>mapDispatchToProps</code> functions from the file, and replace the <code>connect</code> function to an export statement that exports the <code>LoginButton</code> component by default:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb58-1" title="1"><span class="im">export</span> <span class="im">default</span> LoginButton<span class="op">;</span></a></code></pre></div>
<p>Now that you’ve gone over how to refactor your <code>LogoutButton</code> component, follow the same pattern to implement Redux hooks into your <code>LoginPanel</code>, <code>PokemonDetail</code>, <code>PokemonForm</code>, and <code>PokemonBrowser</code> components. Feel free to practice creating a container component that utilizes Redux hooks instead!</p>
<h3 id="router-hooks-useparams">Router hooks: <code>useParams</code></h3>
<p>Notice the references to the React Router <code>match</code> prop accessed in your <code>PokemonBrowser</code> and <code>PokemonDetail</code> components. Instead of having your component take in a <code>match</code> prop to access the route parameters, you’ll implement the <code>useParams</code> prop and use object destructuring to access the <code>pokemonId</code> parameter in the <code>PokemonBrowser</code> component and the <code>id</code> parameter in the <code>PokemonDetail</code> component. Feel free to visit React Router documentation to view examples of using the <a href="https://reactrouter.com/web/api/Hooks/useparams"><code>useParams</code> hook</a>.</p>
<p>Once you have finished refactoring, take a moment to commit your changes to your <code>redux-hooks-app</code> branch:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb59-1" title="1"><span class="fu">git</span> add .</a>
<a class="sourceLine" id="cb59-2" title="2"><span class="fu">git</span> commit -m <span class="st">&quot;Refactor app to implement redux hooks&quot;</span></a></code></pre></div>
<p>Now that you have practiced refactoring your application to implement Redux hooks, it’s time to work on a Context-based project utilizing React’s <code>useContext</code> hook! In the next phase, you’ll branch off from your application’s main branch to create a new <code>context-hooks-app</code> branch for the project.</p>
<hr />
<h1 id="pokedex-hooks-project-phase-3">Pokedex Hooks Project: Phase 3</h1>
<p>At this point, you’ve managed a state-based project with the <code>useState</code> and <code>useEffect</code> hooks and a Redux-based project with the <code>useSelector</code> and <code>useDispatch</code> hooks. Now you’ll work off of the state-based project you built in Phase 2 to manage your application’s state with the <code>useContext</code> hook!</p>
<p>Begin by creating a new branch for your Context-based application off of your main branch:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb60-1" title="1"><span class="fu">git</span> checkout master</a>
<a class="sourceLine" id="cb60-2" title="2"><span class="fu">git</span> checkout -b context-hooks-app</a></code></pre></div>
<h2 id="using-the-usecontext-hook-to-manage-application-state">Using the <code>useContext</code> hook to manage application state</h2>
<p>Think of how you created a Redux cycle to pass Pokedex information through your components. Now you’ll manage your application’s global information by using React Context instead! Remember that you still generate context with the <code>createContext</code> function, just as you would for class components. You also still use <code>&lt;Context.Provider&gt;</code> components to set the <code>value</code> of your context object.</p>
<p>Think of how you would make use of the <code>useContext</code> hook instead of Redux’s <code>connect()</code> function to pass slices of state as well as functions to update the global state. As you use the <code>useEffect</code> hook for side effect operations, think of conditions where you would want to prevent the effect from running. Remember to set the variables that determine these conditions in the <code>useEffect</code> hook’s dependency array.</p>
<h3 id="providing-context">Providing context</h3>
<p>Begin by creating a <code>PokemonContext</code> with the <code>createContext</code> function from React. Then you’ll need to set the context value with a <code>&lt;Context.Provider&gt;</code> component by making a wrapper Provider component for the <code>App</code> component. Create an <code>AppWithContext</code> component as the wrapper component for <code>App</code>.The wrapper component will have the following slices of state:</p>
<ul>
<li><code>pokemon</code> - defaults to an empty array.</li>
<li><code>singlePokemon</code> - defaults to <code>null</code>.</li>
<li><code>authToken</code> - defaults to the <code>state-pokedex-token</code> item stored in <code>localStorage</code>.</li>
<li><code>needLogin</code> - defaults to the <em>truthyness</em> of the <code>state-pokedex-token</code> item stored in <code>localStorage</code> (hint: you can use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_Operators#Double_NOT_!!">double not</a> <code>!!</code> notation).</li>
</ul>
<p>The wrapper component will also pass the following functions as the context <code>value</code>:</p>
<ul>
<li><code>login(token)</code> - to set the <code>state-pokedex-token</code> item in <code>localStorage</code>, update the <code>authToken</code> state, and update the <code>needLogin</code> state to <code>false</code>.</li>
<li><code>loadPokemon()</code> - to fetch all pokemon and update the <code>pokemon</code> state.</li>
<li><code>getOnePokemon(id)</code> - to fetch one pokemon and update the <code>singlePokemon</code> state.</li>
</ul>
<p>After you have set up the wrapper component, make sure to replace the <code>App</code> that is rendered in your <code>index.js</code> file with your new <code>AppWithContext</code> wrapper component. Now it’s time to change your application from being a state-based application to a context-based application.</p>
<p>Begin by removing all props that are passed between components. You’ll use the hooks and the <code>PokemonContext</code> value to manage the global state of your application instead. Make sure to even remove the <code>match</code> prop you access in the <code>PokemonDetail</code> component. You’ll use the <a href="https://reacttraining.com/blog/react-router-v5-1/#useparams">useParams</a> hook from <a href="https://reacttraining.com/blog/react-router-v5-1/">React Router v5.1</a> instead of the <code>match</code> prop.</p>
<h3 id="consuming-context-with-the-usecontext-hook">Consuming context with the useContext hook</h3>
<p>Your application’s consuming components should access the <code>PokemonContext</code> through using the <code>useContext</code> hook. Feel free to reference the <a href="https://reactjs.org/docs/hooks-reference.html">Hooks API Reference</a> to revisit the documentation on the <code>useContext</code> hook. As a reminder, the <code>useContext</code> hook replaces the <code>static contextType</code> property of class components:</p>
<h3 id="static-contexttype">static contextType</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb61-1" title="1"><span class="co">// Receive access to context in class components:</span></a>
<a class="sourceLine" id="cb61-2" title="2"><span class="kw">static</span> contextType <span class="op">=</span> PokemonContext<span class="op">;</span></a>
<a class="sourceLine" id="cb61-3" title="3"></a>
<a class="sourceLine" id="cb61-4" title="4"><span class="co">// Access context with the `contextType` property:</span></a>
<a class="sourceLine" id="cb61-5" title="5"><span class="kw">this</span>.<span class="at">context</span></a></code></pre></div>
<h3 id="usecontext-1">useContext</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb62-1" title="1"><span class="co">// Receive access to context with React Hooks in function components:</span></a>
<a class="sourceLine" id="cb62-2" title="2"><span class="kw">const</span> context <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb62-3" title="3"></a>
<a class="sourceLine" id="cb62-4" title="4"><span class="co">// Access context with the `useContext` hook:</span></a>
<a class="sourceLine" id="cb62-5" title="5">context</a></code></pre></div>
<p>Now it’s time to set up how your application components <em>consume</em> the <code>PokemonContext</code>!</p>
<p>Feel free to console log the <code>context</code> in any component you are accessing the <code>PokemonContext</code>. It could be helpful to create an application state logging system like so:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb63-1" title="1"><span class="kw">const</span> context <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb63-2" title="2"><span class="va">console</span>.<span class="at">log</span>(context)<span class="op">;</span></a></code></pre></div>
<p>This way upon the mounting of a component, you have a general sense of the <code>context</code> object the component is receiving. Since you’ll be using Hooks and Context to manage your user authentication, you may need to clear your <code>localStorage</code> items to reset your application to allow for future testing and debugging. As a reminder, you can go to the <code>Application</code> tab of your developer tools to find a <code>Storage</code> section with your <code>Local Storage</code> items. There you can right click to delete all items stored in <code>localStorage</code>.</p>
<h3 id="app">App</h3>
<p>Take a moment to compare the code that currently lives in your <code>AppWithContext</code> with the code that lives in you <code>App</code> component. Notice how there is a lot of duplicated logic. This is because you <code>App</code> was the main component managing your application’s state-based information. Now that you have moved all the logic to your <code>AppWithContext</code> component, you can refactor your <code>App</code> component to simply use the <code>useContext</code> hook to pass the <code>needLogin</code> value to the <code>&lt;PrivateRoute&gt;</code> it renders. You can also remove all other props passed through the routes. Your refactored <code>App</code> component should look something like this:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb64-1" title="1"><span class="co">// App.js</span></a>
<a class="sourceLine" id="cb64-2" title="2"><span class="im">import</span> React<span class="op">,</span> <span class="op">{</span> useContext <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-3" title="3"><span class="im">import</span> <span class="op">{</span> BrowserRouter<span class="op">,</span> Route<span class="op">,</span> Switch <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-4" title="4"></a>
<a class="sourceLine" id="cb64-5" title="5"><span class="im">import</span> <span class="op">{</span> PrivateRoute <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./routesUtil&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-6" title="6"><span class="im">import</span> LoginPanel <span class="im">from</span> <span class="st">&#39;./LoginPanel&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-7" title="7"><span class="im">import</span> PokemonBrowser <span class="im">from</span> <span class="st">&#39;./PokemonBrowser&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-8" title="8"><span class="im">import</span> <span class="op">{</span> PokemonContext <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./PokemonContext&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb64-9" title="9"></a>
<a class="sourceLine" id="cb64-10" title="10"><span class="kw">const</span> App <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb64-11" title="11">  <span class="kw">const</span> <span class="op">{</span> needLogin <span class="op">}</span> <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb64-12" title="12"></a>
<a class="sourceLine" id="cb64-13" title="13">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb64-14" title="14">    <span class="op">&lt;</span>BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb64-15" title="15">      <span class="op">&lt;</span>Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb64-16" title="16">        <span class="op">&lt;</span>Route path<span class="op">=</span><span class="st">&quot;/login&quot;</span> component<span class="op">={</span>LoginPanel<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb64-17" title="17">        <span class="op">&lt;</span>PrivateRoute</a>
<a class="sourceLine" id="cb64-18" title="18">          path<span class="op">=</span><span class="st">&quot;/&quot;</span></a>
<a class="sourceLine" id="cb64-19" title="19">          component<span class="op">={</span>PokemonBrowser<span class="op">}</span></a>
<a class="sourceLine" id="cb64-20" title="20">          needLogin<span class="op">={</span>needLogin<span class="op">}</span></a>
<a class="sourceLine" id="cb64-21" title="21">        /&gt;</a>
<a class="sourceLine" id="cb64-22" title="22">      &lt;/Switch<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb64-23" title="23">    &lt;/BrowserRouter<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb64-24" title="24">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb64-25" title="25"><span class="op">}</span></a>
<a class="sourceLine" id="cb64-26" title="26"></a>
<a class="sourceLine" id="cb64-27" title="27"><span class="im">export</span> <span class="im">default</span> App<span class="op">;</span></a></code></pre></div>
<h3 id="loginpanel">LoginPanel</h3>
<p>Let’s begin by refactoring your <code>LoginPanel</code> component! The <code>LoginPanel</code> should access the context’s <code>login</code> function. Feel free to also access the <code>authToken</code> value for testing purposes. Note that you can also destructure the context object, like so:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb65-1" title="1"><span class="kw">const</span> <span class="op">{</span> login<span class="op">,</span> authToken <span class="op">}</span> <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb65-2" title="2"><span class="va">console</span>.<span class="at">log</span>(authToken)<span class="op">;</span></a></code></pre></div>
<p>You’ll want to make sure that your <code>LoginPanel</code> has the following slices of state:</p>
<ul>
<li><code>loggedIn</code> - defaults to <code>false</code>.</li>
<li><code>email</code> - defaults to <code>'demo@example.com'</code>.</li>
<li><code>password</code> - defaults to <code>'password'</code>.</li>
</ul>
<p>Your <code>LoginPanel</code> component should also hold the following three functions:</p>
<ul>
<li><code>handleSubmit</code> - to make a fetch request to your API, update the <code>loggedIn</code> state, and invoke the context’s <code>login</code> function with the <code>token</code> from the fetch response.</li>
<li><code>updateEmail</code> - to update the <code>email</code> slice of state.</li>
<li><code>updatePassword</code> - to update the <code>password</code> slice of state.</li>
</ul>
<p>Lastly, your <code>LoginPanel</code> should redirect logged in users to the home page, based on the <code>loggedIn</code> slice of state:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb66-1" title="1"><span class="cf">if</span> (loggedIn) <span class="cf">return</span> <span class="op">&lt;</span>Redirect to<span class="op">=</span><span class="st">&quot;/&quot;</span> /&gt;<span class="op">;</span></a></code></pre></div>
<p>Now you’ll want to set up your <code>PokemonBrowser</code> component before testing the login flow and home page redirection - you’ll hit a lot of errors if you don’t refactor your <code>PokemonBrowser</code> correctly first.</p>
<h3 id="pokemonbrowser">PokemonBrowser</h3>
<p>At this point, your <code>PokemonBrowser</code> component should look something like this:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb67-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&quot;react&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb67-2" title="2"><span class="im">import</span> <span class="op">{</span> NavLink<span class="op">,</span> Route <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;react-router-dom&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb67-3" title="3"><span class="im">import</span> <span class="op">{</span> imageUrl <span class="op">}</span> <span class="im">from</span> <span class="st">&quot;./config&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb67-4" title="4"><span class="im">import</span> PokemonDetail <span class="im">from</span> <span class="st">&quot;./PokemonDetail&quot;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb67-5" title="5"></a>
<a class="sourceLine" id="cb67-6" title="6"><span class="kw">const</span> PokemonBrowser <span class="op">=</span> (<span class="op">{</span> pokemon<span class="op">,</span> token <span class="op">}</span>) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb67-7" title="7">  <span class="cf">if</span> (<span class="op">!</span>pokemon) <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></a>
<a class="sourceLine" id="cb67-8" title="8"></a>
<a class="sourceLine" id="cb67-9" title="9">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb67-10" title="10">    <span class="op">&lt;</span>main<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-11" title="11">      <span class="op">&lt;</span>nav<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-12" title="12">        <span class="op">{</span><span class="va">pokemon</span>.<span class="at">map</span>((poke) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb67-13" title="13">          <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb67-14" title="14">            <span class="op">&lt;</span>NavLink key<span class="op">={</span><span class="va">poke</span>.<span class="at">name</span><span class="op">}</span> to<span class="op">={</span><span class="vs">`/pokemon/</span><span class="sc">${</span><span class="va">poke</span>.<span class="at">id</span><span class="sc">}</span><span class="vs">`</span><span class="op">}&gt;</span></a>
<a class="sourceLine" id="cb67-15" title="15">              <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;nav-entry&quot;</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-16" title="16">                <span class="op">&lt;</span>div className<span class="op">=</span><span class="st">&quot;nav-entry-image&quot;</span></a>
<a class="sourceLine" id="cb67-17" title="17">                  style<span class="op">={{</span></a>
<a class="sourceLine" id="cb67-18" title="18">                    <span class="dt">backgroundImage</span><span class="op">:</span> <span class="vs">`url(&#39;</span><span class="sc">${</span>imageUrl<span class="sc">}${</span><span class="va">poke</span>.<span class="at">imageUrl</span><span class="sc">}</span><span class="vs">&#39;)`</span></a>
<a class="sourceLine" id="cb67-19" title="19">                  <span class="op">}}</span> /&gt;</a>
<a class="sourceLine" id="cb67-20" title="20">                <span class="op">&lt;</span>h1<span class="op">&gt;{</span><span class="va">poke</span>.<span class="at">name</span><span class="op">}</span>&lt;/h1<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-21" title="21">              &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-22" title="22">            &lt;/NavLink<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-23" title="23">          )<span class="op">;</span></a>
<a class="sourceLine" id="cb67-24" title="24">        <span class="op">}</span>)<span class="op">}</span></a>
<a class="sourceLine" id="cb67-25" title="25">      &lt;/nav<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-26" title="26">      <span class="op">&lt;</span>Route</a>
<a class="sourceLine" id="cb67-27" title="27">        path<span class="op">=</span><span class="st">&quot;/pokemon/:id&quot;</span></a>
<a class="sourceLine" id="cb67-28" title="28">        render<span class="op">={</span>(props) <span class="kw">=&gt;</span> <span class="op">&lt;</span>PokemonDetail <span class="op">{</span>...<span class="at">props</span><span class="op">}</span> token<span class="op">={</span>token<span class="op">}</span> /&gt;<span class="op">}</span></a>
<a class="sourceLine" id="cb67-29" title="29">      /&gt;</a>
<a class="sourceLine" id="cb67-30" title="30">    &lt;/main<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb67-31" title="31">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb67-32" title="32"><span class="op">};</span></a>
<a class="sourceLine" id="cb67-33" title="33"></a>
<a class="sourceLine" id="cb67-34" title="34"><span class="im">export</span> <span class="im">default</span> PokemonBrowser<span class="op">;</span></a></code></pre></div>
<p>You won’t need to refactor any existing code within component, except removing the props it receives. You’ll simply use the <code>useContext</code> hook to access the <code>PokemonContext</code> and use the <code>useEffect</code> hook to update the context’s <code>pokemon</code>.</p>
<p>Begin by having your <code>PokemonBrowser</code> component access the context’s <code>pokemon</code> and <code>loadPokemon</code> function:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb68-1" title="1"><span class="kw">const</span> <span class="op">{</span> pokemon<span class="op">,</span> loadPokemon <span class="op">}</span> <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb68-2" title="2"><span class="va">console</span>.<span class="at">log</span>(pokemon)<span class="op">;</span></a></code></pre></div>
<p>You’ll want to update the global state by invoking <code>loadPokemon</code> upon load. Since data fetch is considered a <em>side effect operation</em>, you’ll invoke the <code>loadPokemon</code> function within a <code>useEffect</code> hook:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb69-1" title="1"><span class="at">useEffect</span>(() <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb69-2" title="2">  <span class="at">loadPokemon</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb69-3" title="3"><span class="op">},</span> [])<span class="op">;</span></a></code></pre></div>
<p>Note that the hook’s <em>dependency array</em> is empty. If you start your server, you’ll notice that your application will be stuck in an infinite loop to fetch pokemon! Think of what conditions you want your <code>loadPokemon</code> function to be invoked (hint: think of how to use the length of the <code>pokemon</code> array).</p>
<p>Take a moment to test the user login flow. You want to be redirected to view the <code>PokemonBrowser</code> component. You also want to keep an eye on your backend database logs. Make sure that you are setting correct variables to optimize the fetch calls made from the <code>useEffect</code> hook from your <code>PokemonBrowser</code>!</p>
<h3 id="pokemondetail">PokemonDetail</h3>
<p>Instead of using the <code>match.params.id</code> prop, your <code>PokemonDetail</code> component will make use of the <a href="https://reacttraining.com/blog/react-router-v5-1/#useparams">useParams</a> hook from <a href="https://reacttraining.com/blog/react-router-v5-1/">React Router v5.1</a>! Begin by using the <code>useContext</code> hook to give the component access to the context’s <code>singlePokemon</code> and <code>getOnePokemon</code> function.</p>
<p>Note that you can also rename the object keys to prevent the need to refactor your rendered JSX. In the snippet below, the context’s <code>singlePokemon</code> is renamed to be <code>pokemon</code>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb70-1" title="1"><span class="kw">const</span> <span class="op">{</span> <span class="dt">singlePokemon</span><span class="op">:</span> pokemon<span class="op">,</span> getOnePokemon <span class="op">}</span> <span class="op">=</span> <span class="at">useContext</span>(PokemonContext)<span class="op">;</span></a>
<a class="sourceLine" id="cb70-2" title="2"><span class="va">console</span>.<span class="at">log</span>(pokemon)<span class="op">;</span></a></code></pre></div>
<p>This way, you won’t need to refactor any of the render code to render the <code>pokemon</code> in the <code>PokemonContext</code>!</p>
<p>Have your <code>PokemonDetail</code> component update the global state by invoking the <code>getOnePokemon</code> function with the <code>id</code> from the route parameters upon load. Import the <a href="https://reacttraining.com/blog/react-router-v5-1/#useparams">useParams</a> hook from the <code>react-router-dom</code> package:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb71-1" title="1"><span class="im">import</span> <span class="op">{</span> useParams <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;react-router-dom&#39;</span><span class="op">;</span></a></code></pre></div>
<p>Now you can simply invoke the function and destructure the <code>params</code> object it receives!</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb72-1" title="1"><span class="kw">const</span> <span class="op">{</span> id <span class="op">}</span> <span class="op">=</span> <span class="at">useParams</span>()<span class="op">;</span></a></code></pre></div>
<p>You’ll need to use a <code>useEffect</code> hook to fetch a pokemon based on the <code>id</code> from the route parameters. Just like in your <code>PokemonBrowser</code> component, you need to determine what variables to place in the dependency array so that your application is not stuck in an infinite fetch loop!</p>
<p>In your <code>useEffect</code> hook, you’ll need to check two conditions. If the single <code>pokemon</code> is <em>falsey</em>, have your component invoke the <code>getOnePokemon</code> function with the <code>id</code> parameter. If the pokemon’s ID is not equal to the route parameter <code>id</code>, also have your component invoke the <code>getOnePokemon</code> function to fetch a specific pokemon! Remember that the <code>id</code> from your route parameters is currently a string, so you’ll need to parse the <code>id</code> in order to make a valid comparison to the pokemon’s ID.</p>
<p>After you have finished refactoring your state-based React application built with class components to a context-based React application built with function components and React Hooks, compare your context-based application to the redux-based solution. Using Redux instead of Context results in a lot of boilerplate code in your application. React 16 revamped the Context API and deemed the <code>useContext</code> hook as a basic hook to improve React’s built-in state management.</p>
<p>Redux is a large library with a lot of conceptual knowledge involved. In the next project, you will dive deeper and have more practice with implementing the Redux library for state management. Although you are free to use either Context or Redux to manage the application state of your project next week, you can take today’s bonus project as a chance to dive in deeper and truly learn Redux. Understanding all the conceptual knowledge behind the library will help you architect your own React project and plan your application’s state management.</p>
