<!DOCTYPE html><html><head>

           <meta name="keywords"
        content="instanceof,  Static,  finally,  arguments,  public,  Do,  else,  Const,  Function,  class*,  return,  let*,  Catch,  Eval,  For,  if,  This,  try,  Break,  debugger,  Yield,  extends*,  enum*,  Continue,  export*,  null,  switch,  private,  New,  throw,  while,  Case,  await*,  Delete,  super*,  default,  Void,  Var,  protected,  Package,  Interface,  False,  typeof,  implements,  With,  import*,  True,  Applications, Artificial Intelligence, Based, Business Development, CASE Tools, Circuit, Client-Server, Code Development, Computer Architecture, Computer Engineering, Computer Graphics, Computer Hardware, Computer Interface, Computer Modeling, Computer Operating Systems, Computer Programming Languages, Computer Science, Computer Simulation/Modeling, Computer Software, Computer Storage & Retrieval, Computer Systems Analysis, Computer Theory, Computer Vision, Computer/Data/Network Security, Cybernetics, Data, Database, Design, Digital Computers/Computing, Discrete Mathematics, End-User, Ethics/Values in Science and, Technology, Expert Systems, Files, Functional, Global, GUI, Hardware, Information Technology (IT), Installation, Internet, Java, Local Area Network (LAN), Management Information Systems, (MIS), Microsoft Certified Systems, Engineer (MCSE), Modifications, Network, Online, Parallel Algorithms, Parallel Programming, Pattern recognition, PCs, Performance, Peripherals, Printers, Program Management, Program Verification, Project, Real Time, Relational Database, Reports, Scripts, Software, Software Engineering, SQL, Structured Design, System Design, System Performance, System Requirements, Technology, Test, Tools, Topologies, Troubleshoot, Wide Area Network (WAN), Windows, Tape Drive, Technical Specifications, Terminals, Upgrade, VSAM, Workstation, UNIX, User Manual, Analytical Thinking, Attention to Detail, Dependability, Initiative, Achievement/Effort, Adaptability/Flexibility, Independence, Integrity, Persistence, Cooperation,javascript, spidermonkey, angularjs, js node, js, underscore js, for each javascript, foreach javascript, javascript foreach, for loop javascript, javascript for loop, javascript map, javascript maps, map javascript, javascript array, installing node js, javascript substring, express js, javascript replace, functional javascript, javascript function, javascript online, extjs, download javascript, javascript download, javascript is, what is javascript, javascript reduce, javascript settimeout, settimeout javascript, javascript promise, javascript filter, javascript typeof, javascript object, javascript slice, javascript splice, splice javascript, javascript date, learn javascript, learn js, javascript snake, indexof javascript, javascript indexof, javascript split, javascript switch, split javascript, javascript regex, java vs javascript, javascript class, web develop,web project,network development,web developing,net development,site development,website development,rdf,paracelsus,jit,browse,dew,twist,attic,hit,shame,forum,site,update,farm,network,java,reactive framework,react model,react template,act model,react context,linux,binary,start,root,method,kernel,boot,startup,grok,init,bootloader,kludge,lifters,bootable,initialisation,innovation,purpose,aim,blueprint,pattern,plan,conception,project,intent,figure,intention,projecting,architectural,contrive,invention,planing,designing,aiming,patterning,excogitation,blueprinting,question,discussion,conversation,talk,conference,audience,meeting,consultation,interviewee,audition,interrogation,debrief,reporter,told,conversations,talkee,auditionee,questionee,spectrum,business,stock,range,asset,remit,array,suite,catalog,investment,pipeline,securities,fund,lineup,holdings,twitter,wordpress,blogger,code,website,open,tweet,pok,vlog,blogging,webpage,vlogger,carnet,vlogging,hiroshi,wecode,weblog,python encoder, python encoding, python encryption, python cryptography, python encode">

      <title>express</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">


  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.grid.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap-reboot.min.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/bootstrap.css.map">
  <link rel="stylesheet" href="./../../css/blog-home.css">
  <link rel="stylesheet" href="./../../vendor/bootstrap/css/prism.css">
  <script async defer src="./../../vendor/bootstrap/css/prism.js"></script>
  <script async defer src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/highlight.min.js"></script>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.4.0/build/styles/default.min.css">


  <link rel="stylesheet" href="./cheatsheets.css">







<link rel="stylesheet" href="./cheatsheets.css">
    </head>
     <body for="html-export">
<a href="https://github.com/bgoonz"  class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="z-index: 100000; fill:#194ccdaf; color:#fff; position: fixed; top: 20px; border: 0; left: 20px; transform: scale(-1.5, 1.5);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<a href="/" class="breadcrumbs__link">Home</a>
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="expressjs">Express.js</h1>

<h4 class="mume-header" id="jump-to">Jump to...</h4>

<ul>
<li><a class="btn" href="#routing">Routing</a>
<ul>
<li><a class="btn" href="#routingmethods">Methods</a></li>
<li><a class="btn" href="#paths">Paths</a></li>
<li><a class="btn" href="#parameters">Parameters</a></li>
<li><a class="btn" href="#handlers">Handlers</a></li>
</ul>
</li>
<li><a class="btn" href="#middleware">Middleware</a>
<ul>
<li><a class="btn" href="#sessions">Sessions</a></li>
</ul>
</li>
<li><a class="btn" href="#properties">Express Properties</a></li>
<li><a class="btn" href="#methods">Express Methods</a></li>
<li><a class="btn" href="#forms">Forms</a></li>
</ul>
<h4 class="mume-header" id="installing-express">Installing Express</h4>

<ul>
<li>Open terminal window in your project folder and initialize npm<br>
 <code class="language-javascript">npm init -y</code></li>
<li>This should install   <code class="language-javascript">package.json</code> and   <code class="language-javascript">package-lock.json</code> in the root of your project.</li>
<li>Install Express 4.0<br>
 <code class="language-javascript">npm install express@^4.0.0</code></li>
<li>The  <code class="language-javascript">package.json</code> file will now list Express as a dependency:</li>
</ul>
<pre data-role="codeBlock" data-info="json" class="language-json"><span class="token punctuation">{</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;my-project-folder-name&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;index.js&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;express&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^4.17.1&quot;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><h4 class="mume-header" id="creating-an-express-application">Creating an Express Application</h4>

<ul>
<li>Add a file named  <code class="language-javascript">app.js</code> and open in your code editor</li>
<li>Use the  <code class="language-javascript">require</code> directive to import the  <code class="language-javascript">express</code> model and assign it to a variable named  <code class="language-javascript">express</code>.</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>Assign the return value from the  <code class="language-javascript">express</code> function call to a variable named  <code class="language-javascript">app</code>:</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li>The  <code class="language-javascript">app</code> variable holds a reference to an Express Application ( <code class="language-javascript">app</code>) object. You&apos;ll call methods on the  <code class="language-javascript">app</code> object as you build out your web application.</li>
</ul>
<h3 class="mume-header" id="routing-a-idroutinga">Routing <a id="routing" href></a></h3>

<ul>
<li><strong>Routing</strong> refers to determining how an application should respond to a client request
<ul>
<li>Each route can have one or more handler functions, which are executed when the route is matched.</li>
</ul>
</li>
<li>Route definition takes the following structure:<br>
 <code class="language-javascript">app.METHOD(PATH, HANDLER)</code>
<ul>
<li> <code class="language-javascript">app</code> is an instance of express.</li>
<li> <code class="language-javascript">METHOD</code> is an HTTP request method, in lowercase.</li>
<li> <code class="language-javascript">PATH</code> is a path on the server.</li>
<li> <code class="language-javascript">HANDLER</code> is the function executed when the route is matched.
<ul>
<li>You can provide multiple callback functions that behave like <a class="btn" href="#middleware">middleware</a> to handle a <a class="btn" href="#methods">request</a>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="route-methods-a-idroutingmethodsa">Route Methods <a id="routingmethods" href></a></h4>

<ul>
<li>
<p>A route method is derived from one of the HTTP methods, and is attached to an instance of the express class.</p>
<ul>
<li> <code class="language-javascript">GET</code> and  <code class="language-javascript">POST</code> are two of the most commonly used HTTP methods, followed by  <code class="language-javascript">PUT</code> and  <code class="language-javascript">DELETE</code>.</li>
</ul>
</li>
<li>
<h4> <code class="language-javascript">get()</code></h4>
<ul>
<li>to handle GET requests</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Hello from Express!&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
<li>
<h4> <code class="language-javascript">post()</code></h4>
<ul>
<li>to handle POST requests</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Got a POST request&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
<li>
<h4> <code class="language-javascript">put()</code></h4>
<ul>
<li>to handle PUT requests</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&apos;/user&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Got a PUT request at /user&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
<li>
<h4> <code class="language-javascript">delete()</code></h4>
<ul>
<li>to handle DELETE requests</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">delete</span><span class="token punctuation">(</span><span class="token string">&apos;/user&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Got a DELETE request at /user&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
</ul>
<h4 class="mume-header" id="route-paths-a-idpathsa">Route Paths <a id="paths" href></a></h4>

<ul>
<li>Route paths, in combination with a request method, define the endpoints at which requests can be made.
<ul>
<li>Route paths can be strings, string patterns, or regular expressions.</li>
<li>Route paths can be based on regular expressions by surrounding search string with  <code class="language-javascript">/</code>s</li>
</ul>
</li>
</ul>
<p><a class="btn" href="https://expressjs.com/en/guide/routing.html">List of root paths</a></p>
<h4 class="mume-header" id="route-parameters-a-idparametersa">Route Parameters <a id="parameters" href></a></h4>

<ul>
<li>Route parameters are named URL segments that are used to capture the values specified at their position in the URL.
<ul>
<li>The captured values are populated in the  <code class="language-javascript">req.params</code> object, with the name of the route parameter specified in the path as their respective keys.<pre data-role="codeBlock" data-info class="language-"> <code class="language-javascript">Route path: /users/:userId/books/:bookId
Request URL: http://localhost:3000/users/34/books/8989
req.params: { &quot;userId&quot;: &quot;34&quot;, &quot;bookId&quot;: &quot;8989&quot; }
</code></pre></li>
<li>To define routes with route parameters, simply specify the route parameters in the path of the route as shown below.<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/users/:userId/books/:bookId&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>params<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="route-handlers-a-idhandlersa">Route Handlers <a id="handlers" href></a></h4>

<ul>
<li>You can provide multiple callback functions that behave like <a class="btn" href="#middleware">middleware</a> to handle a request.</li>
<li>Route handlers can be in the form of a function, an array of functions, or combinations of both.
<ul>
<li>You can create chainable route handlers for a route path by using <strong> <code class="language-javascript">app.route()</code></strong></li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">&apos;/book&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Get a random book&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Add a book&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Update the book&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre><ul>
<li>Use the  <code class="language-javascript">express.Router</code> class to create modular, mountable route handlers.
<ul>
<li>A  <code class="language-javascript">Router</code> instance is a complete middleware and routing system; for this reason, it is often referred to as a &#x201C;mini-app&#x201D;.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="middleware-a-idmiddlewarea">Middleware <a id="middleware" href></a></h3>

<ul>
<li><strong>Express is a routing and middleware web framework</strong> that has minimal functionality of its own: An Express application is essentially a series of middleware function calls.</li>
<li>Middleware functions are functions that have access to the request object ( <code class="language-javascript">req</code>), the response object ( <code class="language-javascript">res</code>), and the  <code class="language-javascript">next</code> function in the application&#x2019;s request-response cycle.
<ul>
<li>The  <code class="language-javascript">next</code> function is a function in the Express router which, when invoked, executes the middleware succeeding the current middleware.</li>
</ul>
</li>
<li>Middleware functions can perform the following tasks:
<ul>
<li>Execute any code.</li>
<li>Make changes to the request and the response objects.</li>
<li>End the request-response cycle.</li>
<li>Call the next middleware in the stack.</li>
</ul>
</li>
<li>If the current middleware function does not end the request-response cycle, it must call  <code class="language-javascript">next()</code> to pass control to the next middleware function. Otherwise, the request will be left hanging.</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/&apos;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span>
</pre><ul>
<li> <code class="language-javascript">.get()</code>: HTTP method for which the middleware function applies</li>
<li> <code class="language-javascript">&apos;/&apos;</code>: Path (route) for which the middleware function applies</li>
<li> <code class="language-javascript">function</code>: The middleware function</li>
<li> <code class="language-javascript">req</code>: HTTP request argument to the middleware function</li>
<li> <code class="language-javascript">res</code>: HTTP response argument to the middleware function</li>
<li><strong> <code class="language-javascript">next</code></strong>: Callback argument to the middleware function</li>
</ul>
<h4 class="mume-header" id="listening-for-http-connections">Listening for HTTP Connections</h4>

<ul>
<li>To start the server listening for HTTP connections from clients, call the  <code class="language-javascript">app.listen()</code> method passing:
<ul>
<li>The desired port to use</li>
<li>An <em>optional</em> callback function</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">8081</span><span class="token punctuation">;</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Listening on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
</ul>
<h4 class="mume-header" id="configurable-middleware">Configurable Middleware</h4>

<ul>
<li>If you need your middleware to be configurable, export a function which accepts an options object or other parameters, which, then returns the middleware implementation based on the input parameters.</li>
</ul>
<pre data-role="codeBlock" data-info="js" class="language-javascript">module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Implement the middleware function based on the options object</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>The middleware can now be used as shown below.</p>
<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">var</span> mw <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;./my-middleware.js&apos;</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">mw</span><span class="token punctuation">(</span><span class="token punctuation">{</span> option1<span class="token punctuation">:</span> <span class="token string">&apos;1&apos;</span><span class="token punctuation">,</span> option2<span class="token punctuation">:</span> <span class="token string">&apos;2&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre><p>An Express Application can use the following types of middleware:</p>
<ul>
<li>
<h5>Application-level middleware</h5>
<ul>
<li>Bind application-level middleware to an instance of the  <code class="language-javascript">app</code> object by using the  <code class="language-javascript">app.use()</code> and  <code class="language-javascript">app.METHOD()</code> functions, where  <code class="language-javascript">METHOD</code> is the HTTP method of the request that the middleware function handles (such as  <code class="language-javascript">GET</code>,  <code class="language-javascript">PUT</code>, or  <code class="language-javascript">POST</code>) in lowercase.</li>
</ul>
</li>
<li>
<h5>Router-level middleware</h5>
<ul>
<li>Router-level middleware works in the same way as application-level middleware, except it is bound to an instance of  <code class="language-javascript">express.Router()</code>.</li>
<li>Load router-level middleware by using the  <code class="language-javascript">router.use()</code> and  <code class="language-javascript">router.METHOD()</code> functions.</li>
</ul>
</li>
<li>
<h5>Error-handling</h5>
<ul>
<li>Define <a class="btn" href="https://expressjs.com/en/guide/error-handling.html">error-handling</a> middleware functions in the same way as other middleware functions, except with four arguments instead of three, specifically with the signature ( <code class="language-javascript">err</code>,  <code class="language-javascript">req</code>,  <code class="language-javascript">res</code>,  <code class="language-javascript">next</code>)):<pre data-role="codeBlock" data-info="js" class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack<span class="token punctuation">)</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&apos;Something broke!&apos;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</pre></li>
</ul>
</li>
<li>
<h5>Built-in middleware</h5>
</li>
</ul>
<table>
<thead>
<tr>
<th>Function</th>
<th>Action</th>
<th>Arguments</th>
</tr>
</thead>
<tbody>
<tr>
<td> <code class="language-javascript">express.static(root, [options])</code></td>
<td>serves status assets such as HTML files, images, and so on.</td>
<td> <code class="language-javascript">root</code>: specifies the root directory  <code class="language-javascript">options</code>: <a class="btn" href="https://expressjs.com/en/4x/api.html#express.static">options object</a></td>
</tr>
<tr>
<td> <code class="language-javascript">express.json([options])</code></td>
<td>parses incoming requests with JSON payloads</td>
<td> <code class="language-javascript">options</code>: <a class="btn" href="https://expressjs.com/en/4x/api.html#express.json">options object</a></td>
</tr>
<tr>
<td> <code class="language-javascript">express.urlencoded([options])</code></td>
<td>parses incoming requests with URL-encoded payloads</td>
<td> <code class="language-javascript">options</code>: <a class="btn" href="https://expressjs.com/en/4x/api.html#express.urlencoded">options object</a></td>
</tr>
</tbody>
</table>
<ul>
<li>
<h5>Third-party middleware</h5>
<ul>
<li>Use third-party middleware to add functionality to Express apps.</li>
<li>Install the Node.js module for the required functionality, then load it in your app at the application level or at the router level.<br>
 <code class="language-javascript">$ npm install cookie-parser</code></li>
<li>The following example illustrates installing and loading the cookie-parsing middleware function cookie-parser.<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express&apos;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> cookieParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;cookie-parser&apos;</span><span class="token punctuation">)</span>

<span class="token comment">// load the cookie-parsing middleware</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cookieParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</pre></li>
</ul>
</li>
</ul>
<h3 class="mume-header" id="sessions-a-idsessionsa">Sessions <a id="sessions" href></a></h3>

<ul>
<li>Sessions build upon the idea of an HTTP cookie.
<ul>
<li>Instead of storing data in the cookie itself, a unique identifier known as the <strong>session ID</strong> is stored. This session ID is linked to an object stored on the server.</li>
</ul>
</li>
<li>Sessions give you a way to identify a series of requests as being connected to the same client.
<ul>
<li>Once you know that a request is connected to a known client session, you can associate the data of that session without having to send that data to the client and rely upon them to send that data back to the server unaltered.</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="installing-express-sessions">Installing Express sessions</h4>

<pre data-role="codeBlock" data-info class="language-"> <code class="language-javascript">npm install express-session
</code></pre><h4 class="mume-header" id="adding-express-session-middleware-to-the-app-module">Adding   <code class="language-javascript">express-session</code> middleware to the  <code class="language-javascript">app</code> module.</h4>

<pre data-role="codeBlock" data-info class="language-"> <code class="language-javascript">const express = require(&apos;express&apos;);
const session = require(&apos;express-session&apos;);

const app = express();

app.set(&apos;view engine&apos;, &apos;pug&apos;);
app.use(session({
  secret: &apos;a5d63fc5-17a5-459c-b3ba-6d81792158fc&apos;,
  resave: false,
  saveUninitialized: false,
}));
</code></pre><ul>
<li>
<p><strong> <code class="language-javascript">secret</code></strong>: This is the secret used to sign the session ID cookie. The secret value above was generated using the uuid npm package.</p>
<ul>
<li>The <strong>uuid package</strong> allows you to generate universally unique identifiers (UUIDs) from random cryptographically-strong values, a timestamp, or a user-supplied string.</li>
</ul>
</li>
<li>
<p><strong> <code class="language-javascript">resave</code></strong>: This option forces the session to be saved into the session store, even if the session was never modified during the request.</p>
</li>
<li>
<p><strong> <code class="language-javascript">saveUninitialized</code></strong>: This forces an uninitialized session to be saved to the store. An uninitialized session is when a session is new but not modified.</p>
<ul>
<li>Not setting the resave and saveUninitialized options results in the following warning in the console:<pre data-role="codeBlock" data-info class="language-"> <code class="language-javascript">express-session deprecated undefined resave option; provide resave option app.js:8:9
express-session deprecated undefined saveUninitialized option; provide saveUninitialized option app.js:8:9
</code></pre></li>
</ul>
</li>
<li>
<p><strong> <code class="language-javascript">name</code></strong>:  By default, the express-session middleware uses the name  <code class="language-javascript">connect.sid</code>.</p>
<ul>
<li>it&apos;s important to set a specific name property and separate each application&apos;s session cookies from each other.</li>
</ul>
<h4>Express-session options properties</h4>
<table>
<thead>
<tr>
<th>Option</th>
<th>Action</th>
<th>Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td> <code class="language-javascript">cookie</code></td>
<td colspan="2">Settings object for the session ID cookie. The default value is  { path: &apos;/&apos;, httpOnly: true, secure: false, maxAge: null }.</td>

</tr>
<tr>
<td> <code class="language-javascript">genid</code></td>
<td colspan="2">Function to call to generate a new session ID. Provide a function that returns a string that will be used as a session ID.</td>

</tr>
<tr>
<td> <code class="language-javascript">proxy</code></td>
<td colspan="2">Trust the reverse proxy when setting secure cookies (via the &#x201C;X-Forwarded-Proto&#x201D; header).</td>

</tr>
<tr>
<td> <code class="language-javascript">rolling</code></td>
<td>Force the session identifier cookie to be set on every response. The expiration is reset to the original  <code class="language-javascript">maxAge</code>, resetting the expiration countdown</td>
<td> <code class="language-javascript">false</code></td>
</tr>
<tr>
<td> <code class="language-javascript">store</code></td>
<td colspan="2">The session store instance, defaults to a new  <code class="language-javascript">MemoryStore</code> instance</td>

</tr>
<tr>
<td> <code class="language-javascript">unset</code></td>
<td>Control the result of unsetting  <code class="language-javascript">req.session</code> (through delete, setting to null, etc.).</td>
<td> <code class="language-javascript">keep</code></td>
</tr>
</tbody>
</table>
</li>
</ul>
<h4 class="mume-header" id="session-store">Session Store</h4>

<ul>
<li>
<p>Every session store must be an EventEmitter and implement specific methods. The following methods are the list of required, recommended, and optional.</p>
<ul>
<li><strong>Required methods</strong> are ones that this module will always call on the store.</li>
<li><strong>Recommended methods</strong> are ones that this module will call on the store if available.</li>
<li><strong>Optional methods</strong> are ones this module does not call at all, but helps present uniform stores to users.</li>
</ul>
<table>
<thead>
<tr>
<th>Method</th>
<th colspan="2">Required?</th>

</tr>
</thead>
<tbody>
<tr>
<td> <code class="language-javascript">store.all(callback)</code></td>
<td>Optional</td>
<td>Gets all sessions in the store as an array. The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error, sessions)</code>.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.destroy(sid, callback)</code></td>
<td>Required</td>
<td>Destroys/deletes a session from the store given a session ID ( <code class="language-javascript">sid</code>). The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error)</code> once the session is destroyed.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.clear(callback)</code></td>
<td>Optional</td>
<td>Deletes all sessions from the store. The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error)</code> once the store is cleared.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.length(callback)</code></td>
<td>Optional</td>
<td>Gets the count of all sessions in the store. The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error, len)</code>.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.get(sid, callback)</code></td>
<td>Required</td>
<td>Gets a session from the store given a session ID ( <code class="language-javascript">sid</code>). The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error, session)</code>.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.set(sid, session, callback)</code></td>
<td>Required</td>
<td>Upserts a session into the store given a session ID ( <code class="language-javascript">sid</code>) and session ( <code class="language-javascript">session</code>) object. The callback should be called as  <code class="language-javascript">callback(error)</code> once the session has been set in the store.</td>
</tr>
<tr>
<td> <code class="language-javascript">store.touch(sid, session, callback)</code></td>
<td>Recommended</td>
<td>Used to &#x201C;touch&#x201D; a given session given a session ID ( <code class="language-javascript">sid</code>) and session ( <code class="language-javascript">session</code>) object. The  <code class="language-javascript">callback</code> should be called as  <code class="language-javascript">callback(error)</code> once the session has been touched.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>You can also configure session cookies with the following options that are not set by default:  <code class="language-javascript">domain</code></p>
</li>
</ul>
<h4 class="mume-header" id="drawbacks">Drawbacks</h4>

<ul>
<li>Using sessions increases the overhead required to serve clients.</li>
<li>Server affinity, the ability of a router to send a request to the same server over and over for a specific client, can be an issue depending on the session store that you&apos;re using.</li>
</ul>
<h3 class="mume-header" id="express-methods-a-idmethodsa">Express Methods <a id="methods" href></a></h3>

<ul>
<li>
<h4> <code class="language-javascript">express.json([options])</code></h4>
</li>
<li>This is a built-in middleware function in Express. It parses incoming requests with JSON payloads and is based on body-parser.</li>
</ul>
<table>
<thead>
<tr>
<th><a class="btn" href="https://expressjs.com/en/4x/api.html#req">Request</a></th>
<th><a class="btn" href="https://expressjs.com/en/4x/api.html#app">Application</a></th>
<th><a class="btn" href="https://expressjs.com/en/4x/api.html#res">Response</a></th>
<th><a class="btn" href="https://expressjs.com/en/4x/api.html#router">Router</a></th>
<th>Middleware</th>
</tr>
</thead>
<tbody>
<tr>
<td> <code class="language-javascript">req.accepts()</code></td>
<td> <code class="language-javascript">app.delete()</code></td>
<td> <code class="language-javascript">res.</code>append() <code class="language-javascript">()</code></td>
<td> <code class="language-javascript">router.all()</code></td>
<td> <code class="language-javascript">bodyParser()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.acceptsCharsets()</code></td>
<td> <code class="language-javascript">app.disable()</code></td>
<td> <code class="language-javascript">res.attachment()</code></td>
<td> <code class="language-javascript">router.METHOD()</code></td>
<td> <code class="language-javascript">compress()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.acceptsEncodings()</code></td>
<td> <code class="language-javascript">app.enable()</code></td>
<td> <code class="language-javascript">res.cookie()</code></td>
<td> <code class="language-javascript">router.param()</code></td>
<td> <code class="language-javascript">cookieParser()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.acceptsLanguages()</code></td>
<td> <code class="language-javascript">app.engine()</code></td>
<td> <code class="language-javascript">res.clearCookie()</code></td>
<td> <code class="language-javascript">router.route()</code></td>
<td> <code class="language-javascript">cookieSession()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.get()</code></td>
<td> <code class="language-javascript">app.get()</code></td>
<td> <code class="language-javascript">res.download()</code></td>
<td> <code class="language-javascript">router.use()</code></td>
<td> <code class="language-javascript">csrf()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.is()</code></td>
<td> <code class="language-javascript">app.listen()</code></td>
<td colspan="2"> <code class="language-javascript">res.end()</code></td>

<td> <code class="language-javascript">errorHandler()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.param()</code></td>
<td> <code class="language-javascript">app.method()</code></td>
<td colspan="2"> <code class="language-javascript">res.format()</code></td>

<td> <code class="language-javascript">methodOverride()</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.range()</code></td>
<td> <code class="language-javascript">app.param()</code></td>
<td colspan="2"> <code class="language-javascript">res.get()</code></td>

<td> <code class="language-javascript">morgan()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.path()</code></td>
<td colspan="2"> <code class="language-javascript">res.json()</code></td>

<td> <code class="language-javascript">responseTime()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.post()</code></td>
<td colspan="2"> <code class="language-javascript">res.links()</code></td>

<td> <code class="language-javascript">favicon()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.put()</code></td>
<td colspan="2"> <code class="language-javascript">res.location()</code></td>

<td> <code class="language-javascript">directory()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.render()</code></td>
<td colspan="2"> <code class="language-javascript">res.redirect()</code></td>

<td> <code class="language-javascript">serveStatic()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.route()</code></td>
<td colspan="2"> <code class="language-javascript">res.render()</code></td>

<td> <code class="language-javascript">timeout()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.set()</code></td>
<td colspan="2"> <code class="language-javascript">res.send()</code></td>

<td> <code class="language-javascript">vhost()</code></td>
</tr>
<tr>
<td></td>
<td> <code class="language-javascript">app.use()</code></td>
<td colspan="2"> <code class="language-javascript">res.sendFile()</code></td>

<td> <code class="language-javascript">session()</code></td>
</tr>
<tr>
<td colspan="2"></td>

<td colspan="3"> <code class="language-javascript">res.sendStatus()</code></td>


</tr>
<tr>
<td colspan="2"></td>

<td colspan="3"> <code class="language-javascript">res.set()</code></td>


</tr>
<tr>
<td colspan="2"></td>

<td colspan="3"> <code class="language-javascript">res.status()</code></td>


</tr>
<tr>
<td colspan="2"></td>

<td colspan="3"> <code class="language-javascript">res.type()</code></td>


</tr>
<tr>
<td colspan="2"></td>

<td colspan="3"> <code class="language-javascript">res.vary()</code></td>


</tr>
</tbody>
</table>
<h3 class="mume-header" id="express-properties-a-idpropertiesa">Express Properties <a id="properties" href></a></h3>

<table>
<thead>
<tr>
<th>Request</th>
<th>Response</th>
<th>Application</th>
</tr>
</thead>
<tbody>
<tr>
<td> <code class="language-javascript">req.app</code></td>
<td> <code class="language-javascript">res.app</code></td>
<td> <code class="language-javascript">app.locals</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.baseUrl</code></td>
<td> <code class="language-javascript">res.headersSent</code></td>
<td> <code class="language-javascript">app.mountpath</code></td>
</tr>
<tr>
<td> <code class="language-javascript">req.body</code></td>
<td colspan="2"> <code class="language-javascript">res.locals</code></td>

</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.cookies</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.fresh</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.hostname</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.ip</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.ips</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.method</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.originalUrl</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.params</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.path</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.protocol</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.query</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.route</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.secure</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.signedCookies</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.stale</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.subdomains</code></td>


</tr>
<tr>
<td colspan="3"> <code class="language-javascript">req.xhr</code></td>


</tr>
</tbody>
</table>
<h3 class="mume-header" id="forms-a-idformsa">Forms <a id="forms" href></a></h3>

<ul>
<li>The form is defined in HTML as a collection of elements inside  <code class="language-javascript">&lt;form&gt;...&lt;/form&gt;</code> tags, containing at least one  <code class="language-javascript">input</code> element of  <code class="language-javascript">type=&quot;submit&quot;</code>.</li>
</ul>
<pre data-role="codeBlock" data-info="HTML" class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/team_name_url/<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>team_name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Enter name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>team_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name_field<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Default name for team.<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>OK<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</pre><h4 class="mume-header" id="form-handling">Form Handling</h4>

<ul>
<li>The route sends our request to a controller function which performs any database actions required, including reading data from the models, then generates and returns an HTML page.
<ul>
<li>the server also needs to be able to process the data provided by the user, and redisplay the form with error information if there are any problems.</li>
</ul>
</li>
</ul>
<h5 class="mume-header" id="process-flowchart-for-processing-form-requests">Process flowchart for processing form requests</h5>

<img src="https://mdn.mozillademos.org/files/14478/Web%20server%20form%20handling.png" width="600">
<ol>
<li>Display the default form the first time it is requested by the user.</li>
</ol>
<ul>
<li>The form may contain blank fields (e.g. if you&apos;re creating a new record), or it may be pre-populated with initial values (e.g. if you are changing a record, or have useful default initial values).</li>
</ul>
<ol start="2">
<li>Receive data submitted by the user, usually in an HTTP POST request.</li>
<li>Validate and sanitize the data.</li>
<li>If any data is invalid, re-display the form&#x2014;this time with any user populated values and error messages for the problem fields.</li>
<li>If all data is valid, perform required actions (e.g. save the data in the database, send a notification email, return the result of a search, upload a file, etc.)</li>
<li>Once all actions are complete, redirect the user to another page.</li>
</ol>
<ul>
<li><strong>Express itself doesn&apos;t provide any specific support for form handling operations, but it can use middleware to process  <code class="language-javascript">POST</code> and  <code class="language-javascript">GET</code> parameters from the form, and to validate/sanitize their values.</strong></li>
</ul>
<h4 class="mume-header" id="validation-and-sanitazion">Validation and Sanitazion</h4>

<ul>
<li><strong>Validation</strong> checks that entered values are appropriate for each field (are in the right range, format, etc.) and that values have been supplied for all required fields.</li>
<li><strong>Sanitization</strong> removes/replaces characters in the data that might potentially be used to send malicious content to the server.
<ul>
<li>Installation:<br>
 <code class="language-javascript">npm install express-validator</code></li>
<li>To use the validator in our controllers we have to require the functions we want to use from the &apos;express-validator/check&apos; and &apos;express-validator/filter&apos; modules, as shown below:<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span> body<span class="token punctuation">,</span>validationResult <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&apos;express-validator&apos;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><ul>
<li><strong> <code class="language-javascript">body([fields, message])</code></strong>: Specifies a set of fields in the request body (a  <code class="language-javascript">POST</code> parameter) to validate and/or sanitize along with an optional error message that can be displayed if it fails the tests</li>
<li><strong> <code class="language-javascript">validationResults(req)</code></strong>: Runs the validation, making errors available in the form of a  <code class="language-javascript">validation</code> result object.</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="routes">Routes</h4>

<ul>
<li>In order to implement our form handling code, we will need two routes that have the same URL pattern.
<ul>
<li>The first ( <code class="language-javascript">GET</code>) route is used to display a new empty form for creating the object.<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// GET request for creating a Genre. NOTE This must come before route that displays Genre (uses id).</span>
router<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">&apos;/genre/create&apos;</span><span class="token punctuation">,</span> genre_controller<span class="token punctuation">.</span>genre_create_get<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
<li>The second route ( <code class="language-javascript">POST</code>) is used for validating data entered by the user, and then saving the information and redirecting to the detail page (if the data is valid) or redisplaying the form with errors (if the data is invalid).<pre data-role="codeBlock" data-info="js" class="language-javascript"><span class="token comment">// POST request for creating Genre.</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&apos;/genre/create&apos;</span><span class="token punctuation">,</span> genre_controller<span class="token punctuation">.</span>genre_create_post<span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre></li>
</ul>
</li>
</ul>
<p><a class="btn" href="https://getbootstrap.com/docs/4.4/components/forms/">Bootstrap Form Control</a></p>
<h2 class="mume-header" id="error-handling">Error Handling</h2>

<ul>
<li>
<p>If you need to use any of the special characters literally (actually searching for a &quot;*&quot;, for instance), you must escape it by putting a backslash in front of it.</p>
</li>
<li>
<p>Errors that occur in synchronous code inside route handlers and middleware require no extra work.</p>
<ul>
<li>If synchronous code throws an error, then Express will catch and process it.</li>
</ul>
</li>
</ul>
<h4 class="mume-header" id="the-default-error-handler">The default error handler</h4>

<ul>
<li>Express comes with a built-in error handler that takes care of any errors that might be encountered in the app.</li>
<li>This default error-handling middleware function is added at the end of the middleware function stack.</li>
<li>If you pass an error to  <code class="language-javascript">next()</code> and you do not handle it in a custom error handler, it will be handled by the built-in error handler; the error will be written to the client with the stack trace.</li>
<li>When an error is written, the following information is added to the response:
<ul>
<li>The  <code class="language-javascript">res.statusCode</code> is set from  <code class="language-javascript">err.status</code> (or  <code class="language-javascript">err.statusCode</code>). If this value is outside the 4xx or 5xx range, it will be set to 500.</li>
<li>The  <code class="language-javascript">res.statusMessage</code> is set according to the status code.</li>
<li>The body will be the HTML of the status code message when in production environment, otherwise will be err.stack.</li>
<li>Any headers specified in an  <code class="language-javascript">err.headers</code> object</li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="template-inheritance">Template Inheritance</h2>

<ul>
<li>Pug supports template inheritance. Template inheritance works via the block and extends keywords.</li>
<li>In a template, a block is simply a &#x201C;block&#x201D; of Pug that a child template may replace. This process is recursive.</li>
<li>Pug blocks can provide default content, if appropriate. Providing default content is purely optional, though. The example below defines block scripts, block content, and block foot.</li>
</ul>
<h4 class="mume-header" id="block-append-prepend">Block  <code class="language-javascript">append</code> /  <code class="language-javascript">prepend</code></h4>

<ul>
<li>Pug allows you to  <code class="language-javascript">replace</code> (default),  <code class="language-javascript">prepend</code>, or  <code class="language-javascript">append</code> blocks.
<ul>
<li>When using block append or block prepend, the word &#x201C;block&#x201D; is optional.</li>
</ul>
</li>
<li>Note that only named blocks and mixin definitions can appear at the top (unindented) level of a child template.</li>
</ul>

      </div>
      <div class="md-sidebar-toc"><ul>
<li><a class="btn" href="#expressjs">Express.js</a><br>
- <a class="btn" href="#jump-to">Jump to...</a><br>
- <a class="btn" href="#installing-express">Installing Express</a><br>
- <a class="btn" href="#creating-an-express-application">Creating an Express Application</a>
<ul>
<li><a class="btn" href="#routing-a-idroutinga">Routing </a>
<ul>
<li><a class="btn" href="#route-methods-a-idroutingmethodsa">Route Methods </a></li>
<li><a class="btn" href="#route-paths-a-idpathsa">Route Paths </a></li>
<li><a class="btn" href="#route-parameters-a-idparametersa">Route Parameters </a></li>
<li><a class="btn" href="#route-handlers-a-idhandlersa">Route Handlers </a></li>
</ul>
</li>
<li><a class="btn" href="#middleware-a-idmiddlewarea">Middleware </a>
<ul>
<li><a class="btn" href="#listening-for-http-connections">Listening for HTTP Connections</a></li>
<li><a class="btn" href="#configurable-middleware">Configurable Middleware</a></li>
</ul>
</li>
<li><a class="btn" href="#sessions-a-idsessionsa">Sessions </a>
<ul>
<li><a class="btn" href="#installing-express-sessions">Installing Express sessions</a></li>
<li><a class="btn" href="#adding-express-session-middleware-to-the-app-module">Adding   <code class="language-javascript">express-session</code> middleware to the  <code class="language-javascript">app</code> module.</a></li>
<li><a class="btn" href="#session-store">Session Store</a></li>
<li><a class="btn" href="#drawbacks">Drawbacks</a></li>
</ul>
</li>
<li><a class="btn" href="#express-methods-a-idmethodsa">Express Methods </a></li>
<li><a class="btn" href="#express-properties-a-idpropertiesa">Express Properties </a></li>
<li><a class="btn" href="#forms-a-idformsa">Forms </a>
<ul>
<li><a class="btn" href="#form-handling">Form Handling</a>
<ul>
<li><a class="btn" href="#process-flowchart-for-processing-form-requests">Process flowchart for processing form requests</a></li>
</ul>
</li>
<li><a class="btn" href="#validation-and-sanitazion">Validation and Sanitazion</a></li>
<li><a class="btn" href="#routes">Routes</a></li>
</ul>
</li>
<li><a class="btn" href="#error-handling">Error Handling</a>
<ul>
<li><a class="btn" href="#the-default-error-handler">The default error handler</a></li>
</ul>
</li>
<li><a class="btn" href="#template-inheritance">Template Inheritance</a>
<ul>
<li><a class="btn" href="#block-append-prepend">Block  <code class="language-javascript">append</code> /  <code class="language-javascript">prepend</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
      <a id="sidebar-toc-btn">&#x2261;</a>








<script async>

var sidebarTOCBtn = document.getElementById('sidebar-toc-btn')
sidebarTOCBtn.addEventListener('click', function(event) {
  event.stopPropagation()
  if (document.body.hasAttribute('html-show-sidebar-toc')) {
    document.body.removeAttribute('html-show-sidebar-toc')
  } else {
    document.body.setAttribute('html-show-sidebar-toc', true)
  }
})
</script>


    </body></html>
