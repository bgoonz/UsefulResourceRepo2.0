<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="AWSDocsDocPageApp">
   
<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/lambda-ruby.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:10 GMT -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
      <title>Building Lambda functions with Ruby - AWS Lambda</title>
      <meta name="viewport" content="width=device-width,initial-scale=1" />
      <meta name="assets_root" content="/assets" />
      <meta name="target_state" content="lambda-ruby" />
      <meta name="default_state" content="lambda-ruby" />
      <link rel="icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="shortcut icon" type="image/ico" href="https://docs.aws.amazon.com/assets/images/favicon.ico" />
      <link rel="canonical" href="lambda-ruby.html" />
      <meta name="description" content="You can run Ruby code in AWS Lambda. Lambda provides runtimes for Ruby that run your code to process events. Your code runs in an environment that includes the AWS SDK for Ruby, with credentials from an AWS Identity and Access Management (IAM) role that you manage." />
      <meta name="deployment_region" content="IAD" />
      <meta name="product" content="AWS Lambda" />
      <meta name="guide" content="Developer Guide" />
      <meta name="locales" content="de_de:Deutsch/en_us:English/es_es:Español/fr_fr:Français/it_it:Italiano/ja_jp:日本語/ko_kr:한국어/pt_br:Português/zh_cn:中文 (简体)/zh_tw:中文 (繁體)" />
      <meta name="abstract" content="" />
      <meta name="guide-locale" content="en_us" />
      <meta name="tocs" content="toc-contents.json" />
      <meta name="feedback-item" content="Lambda" />
      <meta name="this_doc_product" content="AWS Lambda" />
      <meta name="this_doc_guide" content="Developer Guide" />
      <link href="https://docs.aws.amazon.com/assets/css/vendor4.css?version=2020.09.30" rel="stylesheet" />
      <link href="https://docs.aws.amazon.com/assets/css/awsdocs-common.css?version=2020.09.30" rel="stylesheet" /><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor3.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor4.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/vendor1.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-common.js?version=2020.09.30" defer=""></script><script type="text/javascript" src="https://docs.aws.amazon.com/assets/js/awsdocs-doc-app.js?version=2020.09.30" defer=""></script></head>
   <body class="awsdocs awsui">
      <div class="awsdocs-container">
         <awsdocs-header></awsdocs-header>
         <awsui-app-layout id="app-layout" class="awsui-util-no-gutters" ng-controller="ContentController as $ctrl" header-selector="awsdocs-header" navigation-hide="false" navigation-width="$ctrl.navWidth" navigation-open="$ctrl.navOpen" navigation-change="$ctrl.onNavChange($event)" tools-hide="$ctrl.hideTools" tools-width="$ctrl.toolsWidth" tools-open="$ctrl.toolsOpen" tools-change="$ctrl.onToolsChange($event)">
            <div id="guide-toc" dom-region="navigation">
               <awsdocs-toc></awsdocs-toc>
            </div>
            <div id="main-column" dom-region="content" tabindex="-1">
               <awsdocs-view class="awsdocs-view">
                  <div id="awsdocs-content">
                     <head>
                        <title>Building Lambda functions with Ruby - AWS Lambda</title>
                        <meta name="pdf" content="lambda-dg.pdf#lambda-ruby" />
                        <meta name="kindle" content="https://www.amazon.com/dp/B07GFJLN6D" />
                        <meta name="github" content="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/lambda-ruby.md" />
                        <meta name="rss" content="lambda-updates.rss" />
                        <meta name="forums" content="http://forums.aws.amazon.com/forum.jspa?forumID=186" />
                        <meta name="feedback" content="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-ruby.html" />
                        <meta name="feedback-yes" content="feedbackyes.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-ruby.html" />
                        <meta name="feedback-no" content="feedbackno.html?topic_url=http://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-ruby.html" />
                        <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing" />
                     </head>
                     <body>
                        <div id="main">
                           <div style="display: none"><a href="lambda-dg.pdf#lambda-ruby" target="_blank" title="Open PDF"></a><a target="_blank" href="https://www.amazon.com/dp/B07GFJLN6D" title="Open Kindle"></a><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/doc_source/lambda-ruby.md" target="_blank" title="Edit this page on GitHub"></a></div>
                           <div id="breadcrumbs" class="breadcrumb"><a href="http://aws.amazon.com/">AWS</a><a href="https://docs.aws.amazon.com/index.html">Documentation</a><a href="https://docs.aws.amazon.com/lambda/index.html">AWS Lambda</a><a href="welcome.html">Developer Guide</a></div>
                           <div id="main-content" class="awsui-util-container">
                              <div id="main-col-body">
                                 <awsdocs-language-banner data-service="$ctrl.pageService"></awsdocs-language-banner>
                                 <h1 class="topictitle" id="lambda-ruby">Building Lambda functions with Ruby</h1>
                                 <div class="awsdocs-page-header-container">
                                    <awsdocs-page-header></awsdocs-page-header>
                                    <awsdocs-filter-selector id="awsdocs-filter-selector"></awsdocs-filter-selector>
                                 </div>
                                 <p>You can run Ruby code in AWS Lambda. Lambda provides <a href="lambda-runtimes.html">runtimes</a> for Ruby that run your code to process events. Your code runs
                                    in an environment that includes the AWS SDK for Ruby, with credentials from an AWS
                                    Identity and Access Management (IAM) role that you manage.
                                 </p>
                                 <p>Lambda supports the following Ruby runtimes.</p>
                                 <div class="table-container">
                                    <div class="table-contents">
                                       <table id="w604aac65c11">
                                          <thead>
                                             <tr>
                                                <th class="table-header" colspan="100%">
                                                   <div class="title">Ruby runtimes</div>
                                                </th>
                                             </tr>
                                             
                                             <tr>
                                                
                                                <th>Name</th>
                                                
                                                <th>Identifier</th>
                                                
                                                <th>AWS SDK for Ruby</th>
                                                
                                                <th>Operating system</th>
                                                
                                             </tr>
                                             
                                          </thead>
                                          
                                          <tr>
                                             
                                             <td>
                                                
                                                <p>Ruby 2.7</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p><code class="code">ruby2.7</code></p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>3.0.1</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>Amazon Linux 2</p>
                                                
                                             </td>
                                             
                                          </tr>
                                          
                                          <tr>
                                             
                                             <td>
                                                
                                                <p>Ruby 2.5</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p><code class="code">ruby2.5</code></p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>3.0.1</p>
                                                
                                             </td>
                                             
                                             <td>
                                                
                                                <p>Amazon Linux</p>
                                                
                                             </td>
                                             
                                          </tr>   
                                          
                                       </table>
                                    </div>
                                 </div>
                                 <p>Lambda functions use an <a href="lambda-intro-execution-role.html">execution role</a> to get permission to
                                    write logs to Amazon CloudWatch Logs, and to access other services and resources.
                                    If you don't already have an execution role for
                                    function development, create one.
                                 </p>
                                 <div class="procedure">
                                    <p class="title"><b>To create an execution role</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" rel="noopener noreferrer" target="_blank"><span>roles page</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> in the IAM console.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create role</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Create a role with the following properties.</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><b>Trusted entity</b> – <b>Lambda</b>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Permissions</b> – <b>AWSLambdaBasicExecutionRole</b>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Role name</b> – <code class="userinput">lambda-role</code>.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                          <p>The <b>AWSLambdaBasicExecutionRole</b> policy has the permissions that the function needs to
                                             write logs to CloudWatch Logs.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 <p>You can add permissions to the role later, or swap it out for a different role that's
                                    specific to a single
                                    function.
                                 </p>
                                 <div class="procedure">
                                    <p class="title"><b>To create a Ruby function</b></p>
                                    <ol>
                                       <li>
                                          
                                          <p>Open the <a href="https://console.aws.amazon.com/lambda" rel="noopener noreferrer" target="_blank"><span>Lambda console</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Configure the following settings:</p>
                                          
                                          <div class="itemizedlist">
                                              
                                              
                                              
                                              
                                             
                                             <ul class="itemizedlist" type="disc">
                                                <li class="listitem">
                                                   
                                                   <p><b>Name</b> – <code class="userinput">my-function</code>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Runtime</b> – <b>Ruby 2.7</b>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Role</b> – <b>Choose an existing role</b>.
                                                   </p>
                                                   
                                                </li>
                                                <li class="listitem">
                                                   
                                                   <p><b>Existing role</b> – <code class="userinput">lambda-role</code>.
                                                   </p>
                                                   
                                                </li>
                                             </ul>
                                          </div>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create function</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To configure a test event, choose <b>Test</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>For <b>Event name</b>, enter <code class="userinput">test</code>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Create</b>.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>To invoke the function, choose <b>Test</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                 </div>
                                 <p>The console creates a Lambda function with a single source file named <code class="code">lambda_function.rb</code>. You can edit
                                    this file and add more files in the built-in <a href="code-editor.html">code editor</a>. To save your changes, choose <b>Save</b>.
                                    Then, to run your code, choose <b>Test</b>.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>The Lambda console uses AWS Cloud9 to provide an integrated development environment
                                          in the browser. You can also
                                          use AWS Cloud9 to develop Lambda functions in your own environment. For more information,
                                          see <a href="https://docs.aws.amazon.com/cloud9/latest/user-guide/lambda-functions.html">Working with AWS Lambda Functions</a> in the AWS Cloud9 user guide.
                                       </p>
                                    </div>
                                 </div>
                                 <p>The <code class="code">lambda_function.rb</code> file exports a function named <code class="code">lambda_handler</code> that takes an event object and a
                                    context object. This is the <a href="ruby-handler.html">handler function</a> that Lambda calls when the
                                    function is invoked. The Ruby function runtime gets invocation events from Lambda
                                    and passes them to the
                                    handler. In the function configuration, the handler value is <code class="code">lambda_function.lambda_handler</code>.
                                 </p>
                                 <p>Each time you save your function code, the Lambda console creates a deployment package,
                                    which is a .zip file archive
                                    that contains your function code. As your function development progresses, you will
                                    want to store your function code
                                    in source control, add libraries, and automate deployments. Start by <a href="ruby-package.html">creating a
                                       deployment package</a> and updating your code at the command line.
                                 </p>
                                 <div class="awsdocs-note">
                                    <div class="awsdocs-note-title">
                                       <awsui-icon name="status-info" variant="link"></awsui-icon><span>Note</span></div>
                                    <div class="awsdocs-note-text">
                                       <p>To get started with application development in your local environment, deploy one
                                          of the sample
                                          applications available in this guide's GitHub repository.
                                       </p>
                                       <div class="itemizedlist">
                                          
                                          <p class="title"><b>Sample Lambda applications in Ruby</b></p>
                                           
                                           
                                          
                                          <ul class="itemizedlist" type="disc">
                                             <li class="listitem">
                                                
                                                <p><a href="https://github.com/awsdocs/aws-lambda-developer-guide/tree/main/sample-apps/blank-ruby" rel="noopener noreferrer" target="_blank"><span>blank-ruby</span><awsui-icon class="awsdocs-link-icon" name="external"></awsui-icon></a> – A Ruby function that
                                                   shows the use of logging, environment variables, AWS X-Ray tracing, layers, unit tests
                                                   and the AWS SDK.
                                                </p>
                                                
                                             </li>
                                             <li class="listitem">
                                                <p><a href="https://docs.aws.amazon.com/code-samples/latest/catalog/code-catalog-ruby-example_code-lambda.html">Ruby Code Samples for AWS Lambda</a> – Code samples written in Ruby that demonstrate how to interact with AWS Lambda.
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </div>
                                 </div>
                                 <p>The function runtime passes a context object to the handler, in addition to the invocation
                                    event. The <a href="ruby-context.html">context object</a> contains additional information about the invocation, the
                                    function, and the execution environment. More information is available from environment
                                    variables.
                                 </p>
                                 <p>Your Lambda function comes with a CloudWatch Logs log group. The function runtime
                                    sends details about each invocation to
                                    CloudWatch Logs. It relays any <a href="ruby-logging.html">logs that your function outputs</a> during invocation. If
                                    your function <a href="ruby-exceptions.html">returns an error</a>, Lambda formats the error and returns it to the
                                    invoker.
                                 </p>
                                 <div class="highlights">
                                    <p><strong>Topics</strong></p>
                                    <ul>
                                       <li><a href="ruby-handler.html">AWS Lambda function handler in Ruby</a></li>
                                       <li><a href="ruby-package.html">Deploy Ruby Lambda functions with .zip file archives</a></li>
                                       <li><a href="ruby-image.html">Deploy Ruby Lambda functions with container images</a></li>
                                       <li><a href="ruby-context.html">AWS Lambda context object in Ruby</a></li>
                                       <li><a href="ruby-logging.html">AWS Lambda function logging in Ruby</a></li>
                                       <li><a href="ruby-exceptions.html">AWS Lambda function errors in Ruby</a></li>
                                       <li><a href="ruby-tracing.html">Instrumenting Ruby code in AWS Lambda</a></li>
                                    </ul>
                                 </div>
                                 <awsdocs-copyright class="copyright-print"></awsdocs-copyright>
                                 <awsdocs-thumb-feedback right-edge="{{$ctrl.thumbFeedbackRightEdge}}"></awsdocs-thumb-feedback>
                              </div>
                              <noscript>
                                 <div>
                                    <div>
                                       <div>
                                          <div id="js_error_message">
                                             <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                                   browser.</strong></p>
                                             <p>To use the AWS Documentation, Javascript must be
                                                enabled. Please refer to your browser's Help pages for instructions.
                                             </p>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </noscript>
                              <div id="main-col-footer" class="awsui-util-font-size-0">
                                 <div id="doc-conventions"><a target="_top" href="https://docs.aws.amazon.com/general/latest/gr/docconventions.html">Document Conventions</a></div>
                                 <div class="prev-next">
                                    <div id="previous" class="prev-link" accesskey="p" href="python-tracing.html">Tracing</div>
                                    <div id="next" class="next-link" accesskey="n" href="ruby-handler.html">Handler</div>
                                 </div>
                              </div>
                              <awsdocs-page-utilities></awsdocs-page-utilities>
                           </div>
                           <div id="quick-feedback-yes" style="display: none;">
                              <div class="title">Did this page help you? - Yes</div>
                              <div class="content">
                                 <p>Thanks for letting us know we're doing a good
                                    job!
                                 </p>
                                 <p>If you've got a moment, please tell us what we did right
                                    so we can do more of it.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-ruby.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                           <div id="quick-feedback-no" style="display: none;">
                              <div class="title">Did this page help you? - No</div>
                              <div class="content">
                                 <p>Thanks for letting us know this page needs work. We're
                                    sorry we let you down.
                                 </p>
                                 <p>If you've got a moment, please tell us how we can make
                                    the documentation better.
                                 </p>
                                 <p>
                                    <awsui-button id="fblink" target="_blank" text="Feedback" click="linkClick($event)" href="https://docs.aws.amazon.com/forms/aws-doc-feedback?hidden_service_name=Lambda&amp;topic_url=https://docs.aws.amazon.com/en_us/lambda/latest/dg/lambda-ruby.html"></awsui-button>
                                 </p>
                              </div>
                           </div>
                        </div>
                     </body>
                  </div>
               </awsdocs-view>
               <div class="page-loading-indicator" id="page-loading-indicator">
                  <awsui-spinner size="large"></awsui-spinner>
               </div>
            </div>
            <div id="tools-panel" dom-region="tools">
               <awsdocs-tools-panel id="awsdocs-tools-panel"></awsdocs-tools-panel>
            </div>
         </awsui-app-layout>
         <awsdocs-cookie-banner class="doc-cookie-banner"></awsdocs-cookie-banner>
         <!--
                SiteCatalyst code version: H.25.2.
                Copyright 1996-2012 Adobe, Inc. All Rights Reserved
                More info available at http://www.omniture.com
            --><script language="JavaScript" type="text/javascript">
var awsdocs = awsdocs || {};
awsdocs.prop66 = 'AWS Lambda';
awsdocs.prop65 =  'Developer Guide';
            </script><script src="https://a0.awsstatic.com/s_code/js/3.0/awshome_s_code.js" language="JavaScript" type="text/javascript"></script>
         <!--/DO NOT REMOVE/-->
         <!--End SiteCatalyst code version: H.25.2.--></div>
   </body>

<!-- Mirrored from docs.aws.amazon.com/lambda/latest/dg/lambda-ruby.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 21 Feb 2021 15:04:13 GMT -->
</html>