<h1 id="react-class-components">React Class Components</h1>
<hr />
<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->
<ul>
<li><a href="#hello-class-components">Hello class components!</a>
<ul>
<li><a href="#setting-and-accessing-props">Setting and accessing props</a></li>
<li><a href="#legacy-class-component-syntax">Legacy class component syntax</a></li>
</ul></li>
<li><a href="#stateful-components">Stateful components</a>
<ul>
<li><a href="#what-is-state">What is state?</a></li>
<li><a href="#when-to-use-state">When to use state</a></li>
</ul></li>
<li><a href="#initializing-state">Initializing state</a>
<ul>
<li><a href="#using-the-react-developer-tools-to-view-a-components-state">Using the React Developer Tools to view a component’s state</a></li>
</ul></li>
<li><a href="#updating-state">Updating state</a>
<ul>
<li><a href="#dont-modify-state-directly">Don’t modify state directly</a></li>
</ul></li>
<li><a href="#properly-updating-state-from-the-previous-state">Properly updating state from the previous state</a></li>
<li><a href="#providing-default-values-for-props">Providing default values for props</a></li>
<li><a href="#what-you-learned">What you learned</a></li>
</ul>
<!-- /code_chunk_output -->
<hr />
<p>As you’ve learned the fundamentals of React, you’ve seen how to use functions to create components to develop the user interface for a frontend application. Unsurprisingly, as with most things related to software development, there’s more than one way to create components in React.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Create a React component using ES2015 class syntax;</li>
<li>Describe when it’s appropriate to use a class component;</li>
<li>Initialize and update state within a class component; and</li>
<li>Provide default values for props.</li>
</ul>
<h2 id="hello-class-components">Hello class components!</h2>
<p>Up to this point, you’ve written components using functions:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="co">// ./src/Message.js</span></a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">const</span> Message <span class="op">=</span> (props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb1-8" title="8">  )<span class="op">;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="op">};</span></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11"><span class="im">export</span> <span class="im">default</span> Message<span class="op">;</span></a></code></pre></div>
<p>But React also allows you to create components using ES2015 classes. Here’s the above function component rewritten as a class component:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="co">// ./src/Message.js</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-4" title="4"></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-6" title="6">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb2-7" title="7">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb2-8" title="8">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb2-9" title="9">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb2-10" title="10">  <span class="op">}</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="im">export</span> <span class="im">default</span> Message<span class="op">;</span></a></code></pre></div>
<p>Every class component must extend (i.e. inherit) from <code>React.Component</code> and have a <code>render</code> method that returns the element(s) to render for the component.</p>
<p>Class components are used just like function components:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="im">import</span> Message <span class="im">from</span> <span class="st">&#39;./Message&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb3-6" title="6"></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb3-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb3-9" title="9">    <span class="op">&lt;</span>Message text<span class="op">=</span><span class="st">&#39;Hello world!&#39;</span> /&gt;</a>
<a class="sourceLine" id="cb3-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb3-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb3-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>From just the above JSX code in the <code>index.js</code> file, you can’t tell if the <code>&lt;Message&gt;</code> component is written as a function or class component. Which approach that’s used is an internal implementation detail of the component. In fact, you can switch back and forth between the two approaches provided that you aren’t using a feature that’s only available in class components (more about this in just a bit).</p>
<h3 id="setting-and-accessing-props">Setting and accessing props</h3>
<p>Notice from this example of using the <code>Message</code> class component that props are set on class components just like you do with function components:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="op">&lt;</span>Message text<span class="op">=</span><span class="st">&#39;Hello world!&#39;</span> /&gt;</a></code></pre></div>
<p>To access props within a class component, use the <code>this.props</code> property:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb5-4" title="4">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb5-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>If your class component defines a <code>constructor</code> method that needs access to props, define a <code>props</code> parameter:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">class</span> Message <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb6-2" title="2">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb6-3" title="3">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-4" title="4"></a>
<a class="sourceLine" id="cb6-5" title="5">    <span class="co">// </span><span class="al">TODO</span><span class="co"> Initialize state, etc.</span></a>
<a class="sourceLine" id="cb6-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-7" title="7"></a>
<a class="sourceLine" id="cb6-8" title="8">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb6-9" title="9">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb6-10" title="10">      <span class="op">&lt;</span>div<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">text</span><span class="op">}</span>&lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb6-11" title="11">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb6-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>Just be sure to call the <code>super</code> method and pass in the <code>props</code> parameter! Failing to do so will result in the following error:</p>
<pre><code>ReferenceError: Must call super constructor in derived class before accessing
&#39;this&#39; or returning from derived constructor</code></pre>
<blockquote>
<p>Remember, a component, whether it’s a function or class component, should never change its own props.</p>
</blockquote>
<h3 id="legacy-class-component-syntax">Legacy class component syntax</h3>
<p>In the early days of React, before using ES2015 classes was commonplace, components were usually created using the <code>React.createclass</code> function. You’ll still sometimes see this syntax in the wild. If in the future you ever find yourself needing to create a component using the <code>React.createclass</code> function when targeting newer versions of React, you’ll need to install a separate React module named <a href="https://reactjs.org/docs/react-without-es6.html"><code>create-react-class</code></a>.</p>
<h2 id="stateful-components">Stateful components</h2>
<p>So far, the above example class component behaves exactly as its function component counterpart. This might leave you wondering why you’d want or need to create a class component.</p>
<p><strong>One of the two reasons why you would use a Class component over a Function component is to add and manage local or internal state to your component. The second main reason to use a Class component is to use a component’s lifecycle methods.</strong> The following sections will focus on how to add and manage a component’s state. You’ll learn more about a component’s lifecycle (and the associated component lifecycle methods) later in a future reading.</p>
<h3 id="what-is-state">What is state?</h3>
<p>In contrast to props which are provided by the consumer or caller of the component, state is data that’s internal to
    a component. State is owned by the component where it’s defined and used. That’s why we say it’s "internal" or
    "local" to that component. Whereas props are not to be changed by a component, state is intended to be updated or
    mutated (you’ll see how to update state in just a bit). Together, props and state represent the data that’s used to
    determine how the component should behave and render.</p>
<h3 id="when-to-use-state">When to use state</h3>
<p>State should only be used when it’s absolutely necessary. If a bit of data is never going to change or if it is needed across the entire application, use props instead.</p>
<p>When you’re just learning React, it can be challenging to know when it’s okay to use state and when it’s not. State is often used when creating components that retrieve data from APIs or render forms. You’ll see examples of those kinds of components later in this lesson. To start, we’ll look at simple, contrived example of using state in just a bit.</p>
<blockquote>
<p>Function components are the simplest way to declare a component. If a component doesn’t need to use state or lifecycle methods, it should be written as a function component. A new feature in React, <a href="https://reactjs.org/docs/hooks-intro.html">hooks</a>, levels the playing field between function and class components, so that everything you can do in a class component can now be done with function components. You’ll learn about React hooks in a future lesson.</p>
</blockquote>
<h2 id="initializing-state">Initializing state</h2>
<p>When creating a stateful class component, you can use a class <code>constructor</code> method to initialize the <code>this.state</code> object.</p>
<p>Here’s a <code>RandomQuote</code> component that initializes two state properties, <code>this.state.quotes</code> and <code>this.state.currentQuoteIndex</code>, within its <code>constructor</code> method:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-8" title="8"></a>
<a class="sourceLine" id="cb8-9" title="9">    <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb8-10" title="10">      <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-11" title="11">      <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-12" title="12">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-13" title="13">      <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-14" title="14">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-15" title="15">    ]<span class="op">;</span></a>
<a class="sourceLine" id="cb8-16" title="16"></a>
<a class="sourceLine" id="cb8-17" title="17">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-18" title="18">      quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb8-19" title="19">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb8-20" title="20">    <span class="op">};</span></a>
<a class="sourceLine" id="cb8-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-22" title="22"></a>
<a class="sourceLine" id="cb8-23" title="23">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-24" title="24">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb8-25" title="25">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-26" title="26"></a>
<a class="sourceLine" id="cb8-27" title="27">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb8-28" title="28">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb8-29" title="29">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-30" title="30">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-31" title="31">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-32" title="32">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb8-33" title="33">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb8-34" title="34">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-35" title="35"><span class="op">}</span></a>
<a class="sourceLine" id="cb8-36" title="36"></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>Notice in the <code>render</code> method, that the state properties are being accessed using <code>this.state.quotes</code> and <code>this.state.currentQuoteIndex</code>.</p>
<p>If you’re following along, be sure to update your application’s entry point to import and render the <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb9-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb9-6" title="6"></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb9-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb9-9" title="9">    <span class="op">&lt;</span>RandomQuote /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb9-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb9-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb9-12" title="12">)<span class="op">;</span></a></code></pre></div>
<p>If you run your application (i.e. <code>npm start</code>) and view it in the browser, you’ll one of the five quotes displayed. Refreshing the page will display a new random quote.</p>
<blockquote>
<p>Sometimes the same quote will be displayed more than once in a row. You’ll see in a bit how to fix that bug.</p>
</blockquote>
<h3 id="using-the-react-developer-tools-to-view-a-components-state">Using the React Developer Tools to view a component’s state</h3>
<p>Assuming you have the <a
        href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en">React
        Developer Tools</a> installed, open up your browser’s developer tools and view the "Components" tab. On the
    left, you can select the <code>RandomQuote</code> component to view its current props and state values on the right.
</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/Modular-Curriculum/content/react-redux/topics/react-class-components/assets/react-class-components-init-state.png" alt="init state" /><figcaption>init state</figcaption>
</figure>
<h2 id="updating-state">Updating state</h2>
<p>Remember earlier when we said that state should only be used if the data is going to change? Currently, the current quote index doesn’t change after it’s been initialized in the <code>constructor</code> method. Using state to track this value would make more sense if there was a way to trigger the component to <em>update</em> the current quote index.</p>
<p>To do this, add a <code>&lt;button&gt;</code> element just below the <code>&lt;p&gt;</code> element with the following attributes and content:</p>
<pre class="jsx"><code>&lt;button type=&#39;button&#39; onClick={this.changeQuote}&gt;Change Quote&lt;/button&gt;</code></pre>
<p>Notice the <code>onClick={this.changeQuote}</code> bit? This is how you add an event listener for the <code>onclick</code> event. <code>this.changeQuote</code> is the event handler method and <code>onClick</code> is the event to listen for.</p>
<blockquote>
<p>When adding event listeners, be sure to camelCase the event name (i.e. <code>onClick</code> instead of <code>onclick</code>) and pass a reference to the event handler method instead of calling it (i.e. <code>this.changeQuote</code> instead of <code>this.changeQuote()</code>). You’ll learn more about handling events later in this lesson.</p>
</blockquote>
<p>Now add the <code>changeQuote</code> event handler method to the <code>RandomQuote</code> class:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb11-6" title="6">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="op">}</span></a></code></pre></div>
<blockquote>
<p>Did you notice the slightly odd looking class property syntax (i.e. <code>changeQuote = () =&gt; { ... }</code>) that’s being used to define the <code>changeQuote</code> method? Using this experimental syntax for defining a class property in combination with an arrow function ensures that you can reliably use the <code>this</code> keyword within the method. You’ll learn more about this coding pattern for defining event handlers later in this lesson.</p>
</blockquote>
<p>The <code>changeQuote</code> event handler calls the <code>this.getRandomInt</code> method to get a new random integer and then calls the <code>this.setState</code> method to update the component’s state. The <code>this.setState</code> method accepts an object literal containing the state properties to update.</p>
<p>After updating the state, React re-renders the component and displays the new quote (provided that the current quote index actually changed). Because calling the <code>this.setState</code> method triggers a re-render, it should not be called from within the <code>render</code> method, as that would trigger an infinite loop.</p>
<p>Notice that the object literal passed into the <code>this.setState</code> method only contains the state property that needs to be updated. The <code>this.setState</code> method merges state updates into the current state object, so you only need to provide the state properties that need to be updated.</p>
<p>Now, instead of refreshing the page, you can click the "Change Quote" button to display a new random quote!</p>
<p>For your reference, here’s the updated <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb12-2" title="2"></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb12-4" title="4"></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-6" title="6">  <span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-7" title="7">    <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb12-8" title="8"></a>
<a class="sourceLine" id="cb12-9" title="9">    <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb12-10" title="10">      <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-11" title="11">      <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-12" title="12">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-13" title="13">      <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-14" title="14">      <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb12-15" title="15">    ]<span class="op">;</span></a>
<a class="sourceLine" id="cb12-16" title="16"></a>
<a class="sourceLine" id="cb12-17" title="17">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-18" title="18">      quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb12-19" title="19">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb12-20" title="20">    <span class="op">};</span></a>
<a class="sourceLine" id="cb12-21" title="21">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-22" title="22"></a>
<a class="sourceLine" id="cb12-23" title="23">  changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb12-24" title="24">    <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-25" title="25"></a>
<a class="sourceLine" id="cb12-26" title="26">    <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb12-27" title="27">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb12-28" title="28">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb12-29" title="29">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-30" title="30"></a>
<a class="sourceLine" id="cb12-31" title="31">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb12-32" title="32">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb12-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-34" title="34"></a>
<a class="sourceLine" id="cb12-35" title="35">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb12-36" title="36">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb12-37" title="37">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-38" title="38">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-39" title="39">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">state</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-40" title="40">        <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">changeQuote</span><span class="op">}&gt;</span>Change Quote&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-41" title="41">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb12-42" title="42">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb12-43" title="43">  <span class="op">}</span></a>
<a class="sourceLine" id="cb12-44" title="44"><span class="op">}</span></a>
<a class="sourceLine" id="cb12-45" title="45"></a>
<a class="sourceLine" id="cb12-46" title="46"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<h3 id="dont-modify-state-directly">Don’t modify state directly</h3>
<p>You should always use the <code>this.setState</code> method to update state rather than setting the <code>this.state</code> property directly:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb13-2" title="2">  <span class="kw">const</span> newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="kw">this</span>.<span class="va">state</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4">  <span class="co">// Don&#39;t set the `this.state` property directly</span></a>
<a class="sourceLine" id="cb13-5" title="5">  <span class="co">// anywhere outside of the `constructor` method!</span></a>
<a class="sourceLine" id="cb13-6" title="6">  <span class="co">// this.state = {</span></a>
<a class="sourceLine" id="cb13-7" title="7">  <span class="co">//   currentQuoteIndex: newIndex,</span></a>
<a class="sourceLine" id="cb13-8" title="8">  <span class="co">// };</span></a>
<a class="sourceLine" id="cb13-9" title="9"></a>
<a class="sourceLine" id="cb13-10" title="10">  <span class="co">// Always use the `this.setState` method to update state.</span></a>
<a class="sourceLine" id="cb13-11" title="11">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb13-12" title="12">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb13-13" title="13">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="op">}</span></a></code></pre></div>
<p>Reassigning <code>this.state</code> alone won’t trigger re-rendering, leaving your component out of sync.</p>
<p>If you used Create React App to create your application and your application is currently running (using the <code>npm start</code> command), you’ll receive a warning in the terminal if you reassign <code>this.state</code> outside of the constructor:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="ex">Do</span> not mutate state directly. Use setState()  <span class="ex">react/no-direct-mutation-state</span></a></code></pre></div>
<h2 id="properly-updating-state-from-the-previous-state">Properly updating state from the previous state</h2>
<p>When testing the <code>RandomQuote</code> component, you might have noticed that sometimes the same quote will display more than once. This is occurring because the <code>this.getRandomInt</code> method is returning a random integer that’s the same as the current quote index value. We can fix this bug by calling the <code>this.getRandomInt</code> method until we get a random integer that’s different from the current quote index value.</p>
<p>On the surface, this appears to be simple fix–just use a loop to call the <code>this.getRandomInt</code> method until you get a random integer that’s different from the current quote index:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="kw">const</span> <span class="op">{</span> quotes<span class="op">,</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> <span class="kw">this</span>.<span class="at">state</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-3" title="3"></a>
<a class="sourceLine" id="cb15-4" title="4">  <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb15-5" title="5"></a>
<a class="sourceLine" id="cb15-6" title="6">  <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-7" title="7">    newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-8" title="8">  <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-9" title="9"></a>
<a class="sourceLine" id="cb15-10" title="10">  <span class="kw">this</span>.<span class="at">setState</span>(<span class="op">{</span></a>
<a class="sourceLine" id="cb15-11" title="11">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb15-12" title="12">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="op">}</span></a></code></pre></div>
<p>The problem with the above solution is that it doesn’t take into account that state updates are handled asynchronously by React. When the <code>currentQuoteIndex</code> value is retrieved from state (at the start of the method block), you’re not guaranteed that it’s the latest value. There could be a state update that hasn’t been applied yet.</p>
<p>To safely update state based upon the previous state, pass an anonymous method to the <code>this.setState</code> method (instead of an object literal) that defines two parameters, <code>state</code> and <code>props</code>, and returns an object literal containing the state properties to update. The <code>state</code> and <code>props</code> parameters give you safe, predictable access to the previous state and prop values:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1">changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="kw">const</span> <span class="op">{</span> quotes<span class="op">,</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb16-4" title="4"></a>
<a class="sourceLine" id="cb16-5" title="5">    <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb16-6" title="6"></a>
<a class="sourceLine" id="cb16-7" title="7">    <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-8" title="8">      newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-9" title="9">    <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-10" title="10"></a>
<a class="sourceLine" id="cb16-11" title="11">    <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-12" title="12">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb16-13" title="13">    <span class="op">};</span></a>
<a class="sourceLine" id="cb16-14" title="14">  <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="op">}</span></a></code></pre></div>
<p>Now, if you retest your application, clicking the "Change Quote" button will display a different random quote every time!</p>
<h2 id="providing-default-values-for-props">Providing default values for props</h2>
<p>Currently, the list of quotes doesn’t change once it’s initialized in the <code>constructor</code> method:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="at">constructor</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="kw">super</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4">  <span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb17-5" title="5">    <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-6" title="6">    <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-7" title="7">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-8" title="8">    <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-9" title="9">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-10" title="10">  ]<span class="op">;</span></a>
<a class="sourceLine" id="cb17-11" title="11"></a>
<a class="sourceLine" id="cb17-12" title="12">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-13" title="13">    quotes<span class="op">,</span></a>
<a class="sourceLine" id="cb17-14" title="14">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb17-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb17-16" title="16"><span class="op">}</span></a></code></pre></div>
<p>Given this, it makes more sense for the quotes to be a prop value. Changing the quotes to a prop would also give the consumer or caller of the <code>RandomQuote</code> component the ability to customize the list of quotes.</p>
<p>Here’s an updated version of the <code>RandomQuote</code> component that defines the list of quotes as a prop:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="co">// ./src/RandomQuote.js</span></a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb18-4" title="4"></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-6" title="6">  <span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb18-7" title="7">    <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9">    <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-10" title="10">      <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">props</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb18-11" title="11">    <span class="op">};</span></a>
<a class="sourceLine" id="cb18-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb18-13" title="13"></a>
<a class="sourceLine" id="cb18-14" title="14">  changeQuote <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-15" title="15">    <span class="kw">this</span>.<span class="at">setState</span>((state<span class="op">,</span> props) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-16" title="16">      <span class="kw">const</span> <span class="op">{</span> currentQuoteIndex <span class="op">}</span> <span class="op">=</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb18-17" title="17">      <span class="kw">const</span> <span class="op">{</span> quotes <span class="op">}</span> <span class="op">=</span> props<span class="op">;</span></a>
<a class="sourceLine" id="cb18-18" title="18"></a>
<a class="sourceLine" id="cb18-19" title="19">      <span class="kw">let</span> newIndex <span class="op">=</span> <span class="dv">-1</span><span class="op">;</span></a>
<a class="sourceLine" id="cb18-20" title="20"></a>
<a class="sourceLine" id="cb18-21" title="21">      <span class="cf">do</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-22" title="22">        newIndex <span class="op">=</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-23" title="23">      <span class="op">}</span> <span class="cf">while</span> (newIndex <span class="op">===</span> currentQuoteIndex)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-24" title="24"></a>
<a class="sourceLine" id="cb18-25" title="25">      <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb18-26" title="26">        <span class="dt">currentQuoteIndex</span><span class="op">:</span> newIndex<span class="op">,</span></a>
<a class="sourceLine" id="cb18-27" title="27">      <span class="op">};</span></a>
<a class="sourceLine" id="cb18-28" title="28">    <span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb18-29" title="29">  <span class="op">}</span></a>
<a class="sourceLine" id="cb18-30" title="30"></a>
<a class="sourceLine" id="cb18-31" title="31">  <span class="at">getRandomInt</span>(max) <span class="op">{</span></a>
<a class="sourceLine" id="cb18-32" title="32">    <span class="cf">return</span> <span class="va">Math</span>.<span class="at">floor</span>(<span class="va">Math</span>.<span class="at">random</span>() <span class="op">*</span> <span class="va">Math</span>.<span class="at">floor</span>(max))<span class="op">;</span></a>
<a class="sourceLine" id="cb18-33" title="33">  <span class="op">}</span></a>
<a class="sourceLine" id="cb18-34" title="34"></a>
<a class="sourceLine" id="cb18-35" title="35">  <span class="at">render</span>() <span class="op">{</span></a>
<a class="sourceLine" id="cb18-36" title="36">    <span class="cf">return</span> (</a>
<a class="sourceLine" id="cb18-37" title="37">      <span class="op">&lt;</span>div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-38" title="38">        <span class="op">&lt;</span>h2<span class="op">&gt;</span>Random Quote&lt;/h2<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-39" title="39">        <span class="op">&lt;</span>p<span class="op">&gt;{</span><span class="kw">this</span>.<span class="va">props</span>.<span class="at">quotes</span>[<span class="kw">this</span>.<span class="va">state</span>.<span class="at">currentQuoteIndex</span>]<span class="op">}</span>&lt;/p<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-40" title="40">        <span class="op">&lt;</span>button type<span class="op">=</span><span class="st">&#39;button&#39;</span> onClick<span class="op">={</span><span class="kw">this</span>.<span class="at">changeQuote</span><span class="op">}&gt;</span>Change Quote&lt;/button<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-41" title="41">      &lt;/div<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb18-42" title="42">    )<span class="op">;</span></a>
<a class="sourceLine" id="cb18-43" title="43">  <span class="op">}</span></a>
<a class="sourceLine" id="cb18-44" title="44"><span class="op">}</span></a>
<a class="sourceLine" id="cb18-45" title="45"></a>
<a class="sourceLine" id="cb18-46" title="46"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>Notice that the <code>constructor</code> method now defines a <code>props</code> parameter and passes that parameter into the <code>super</code> method call:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="at">constructor</span>(props) <span class="op">{</span></a>
<a class="sourceLine" id="cb19-2" title="2">  <span class="kw">super</span>(props)<span class="op">;</span></a>
<a class="sourceLine" id="cb19-3" title="3"></a>
<a class="sourceLine" id="cb19-4" title="4">  <span class="kw">this</span>.<span class="at">state</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb19-5" title="5">    <span class="dt">currentQuoteIndex</span><span class="op">:</span> <span class="kw">this</span>.<span class="at">getRandomInt</span>(<span class="va">props</span>.<span class="va">quotes</span>.<span class="at">length</span>)<span class="op">,</span></a>
<a class="sourceLine" id="cb19-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="op">}</span></a></code></pre></div>
<p>The <code>changeQuote</code> and <code>render</code> methods were also updated to reference the quotes using <code>this.props.quotes</code> instead of <code>this.state.quotes</code>.</p>
<p>Now, in the <code>index.js</code> file, the quotes to randomly display can be passed into the <code>RandomQuote</code> component:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb20-2" title="2"></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-6" title="6"></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="kw">const</span> quotes <span class="op">=</span> [</a>
<a class="sourceLine" id="cb20-8" title="8">  <span class="st">&#39;Toto, I</span><span class="sc">\&#39;</span><span class="st">ve a feeling we</span><span class="sc">\&#39;</span><span class="st">re not in Kansas anymore.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-9" title="9">  <span class="st">&#39;Here</span><span class="sc">\&#39;</span><span class="st">s looking at you, kid.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-10" title="10">  <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no crying in baseball!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-11" title="11">  <span class="st">&#39;Elementary, my dear Watson.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-12" title="12">  <span class="st">&#39;Rosebud.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb20-13" title="13">]<span class="op">;</span></a>
<a class="sourceLine" id="cb20-14" title="14"></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb20-16" title="16">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb20-17" title="17">    <span class="op">&lt;</span>RandomQuote quotes<span class="op">={</span>quotes<span class="op">}</span> /&gt;</a>
<a class="sourceLine" id="cb20-18" title="18">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb20-19" title="19">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb20-20" title="20">)<span class="op">;</span></a></code></pre></div>
<p>Unfortunately, now the consumer or caller of the component <em>must</em> set the <code>quotes</code> prop or the component will throw an error. You can retain the previous behavior by defining a default value for the <code>quotes</code> prop using the <code>defaultProps</code> static property:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb21-1" title="1"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="kw">class</span> RandomQuote <span class="kw">extends</span> <span class="va">React</span>.<span class="at">Component</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-4" title="4">  <span class="co">// Code removed for brevity.</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb21-6" title="6"></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="va">RandomQuote</span>.<span class="at">defaultProps</span> <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb21-8" title="8">  <span class="dt">quotes</span><span class="op">:</span> [</a>
<a class="sourceLine" id="cb21-9" title="9">    <span class="st">&#39;May the Force be with you.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-10" title="10">    <span class="st">&#39;There</span><span class="sc">\&#39;</span><span class="st">s no place like home.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-11" title="11">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">m the king of the world!&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-12" title="12">    <span class="st">&#39;My mama always said life was like a box of chocolates.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-13" title="13">    <span class="st">&#39;I</span><span class="sc">\&#39;</span><span class="st">ll be back.&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb21-14" title="14">  ]<span class="op">,</span></a>
<a class="sourceLine" id="cb21-15" title="15"><span class="op">};</span></a>
<a class="sourceLine" id="cb21-16" title="16"></a>
<a class="sourceLine" id="cb21-17" title="17"><span class="im">export</span> <span class="im">default</span> RandomQuote<span class="op">;</span></a></code></pre></div>
<p>The default <code>quotes</code> prop value will be used if the consumer or caller of the <code>RandomQuote</code> component doesn’t provide a value for the <code>quotes</code> prop.</p>
<p>Now the <code>RandomQuote</code> component can be used without having to provide the <code>quotes</code> prop:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="co">// ./src/index.js</span></a>
<a class="sourceLine" id="cb22-2" title="2"></a>
<a class="sourceLine" id="cb22-3" title="3"><span class="im">import</span> React <span class="im">from</span> <span class="st">&#39;react&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="im">import</span> ReactDOM <span class="im">from</span> <span class="st">&#39;react-dom&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="im">import</span> RandomQuote <span class="im">from</span> <span class="st">&#39;./RandomQuote&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb22-6" title="6"></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="va">ReactDOM</span>.<span class="at">render</span>(</a>
<a class="sourceLine" id="cb22-8" title="8">  <span class="op">&lt;</span><span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;</span></a>
<a class="sourceLine" id="cb22-9" title="9">    <span class="op">&lt;</span>RandomQuote /<span class="op">&gt;</span></a>
<a class="sourceLine" id="cb22-10" title="10">  &lt;/<span class="va">React</span>.<span class="at">StrictMode</span><span class="op">&gt;,</span></a>
<a class="sourceLine" id="cb22-11" title="11">  <span class="va">document</span>.<span class="at">getElementById</span>(<span class="st">&#39;root&#39;</span>)</a>
<a class="sourceLine" id="cb22-12" title="12">)<span class="op">;</span></a></code></pre></div>
<h2 id="what-you-learned">What you learned</h2>
<p>In this article, you learned how to:</p>
<ul>
<li>Create a React component using ES2015 class syntax;</li>
<li>Describe when it’s appropriate to use a class component;</li>
<li>Initialize and update state within a class component; and</li>
<li>Provide default values for props.</li>
</ul>
