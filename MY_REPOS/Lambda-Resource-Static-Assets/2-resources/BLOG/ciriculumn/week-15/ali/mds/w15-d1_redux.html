<h1 id="week-15-day-1-redux" data-ignore="true">WEEK-15 DAY-1<br><em>Redux</em></h1>
<hr />
<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=2 orderedList=false} -->
<hr />
<hr />
<h1 id="redux-learning-objectives-part-1">Redux Learning Objectives: Part 1</h1>
<p>You’ve been using React’s Context API to manage global state to share the same information across multiple components. Redux, like Context, gives you a way to store and manage global state in your React applications. Even though Context has become a popular option since its introduction, Redux remains a popular option for projects with sophisticated global state requirements.</p>
<p>After reading and practicing how to use Redux, you should be able to:</p>
<ul>
<li>Describe the Redux data cycle</li>
<li>Describe the role of the store in the Redux architecture</li>
<li>Explain what a <em>reducer</em> is</li>
<li>Use the <code>createStore</code> method to create an instance of a Redux store</li>
<li>Use the <code>store.dispatch</code> method to dispatch an action to trigger a state update</li>
<li>Use the <code>store.subscribe</code> method to listen for state updates</li>
<li>Use the <code>store.getState</code> method to get the current state</li>
<li>Use a <code>switch</code> statement within a reducer function to handle multiple action types</li>
<li>Describe why it’s important for a reducer to avoid mutating the current state when creating the next state</li>
<li>Write an action creator function to facilitate in the creation of action objects</li>
<li>Use constants to define action types to prevent simple typos in action type string literals</li>
</ul>
<hr />
<h1 id="redux-explained">Redux Explained</h1>
<p>Redux is a JavaScript framework for managing the frontend state of a web application. It allows us to store information in an organized manner in a web app and to quickly retrieve that information from anywhere in the app. Redux is modeled on a few previous web technologies including <a href="http://elm-lang.org/docs">Elm</a> and <a href="images/redux-flux.png">Flux</a>.</p>
<p>Advantages of Redux include:</p>
<ul>
<li>It simplifies some of the more cumbersome aspects of Flux</li>
<li>It is very lightweight; the library only takes up 2 kbs</li>
<li>It is very fast (the time to insert or retrieve data is low)</li>
<li>It is predictable (interacting with the data store in the same way repeatedly will produce the same effect)</li>
</ul>
<h2 id="where-did-redux-come-from">Where did Redux come from?</h2>
<p>Redux was created by Dan Abramov in 2015. It was initially intended as an experiment to create a simplified version of Flux. Abramov wanted to remove some of what he saw as the unnecessary boilerplate code that was required to create a Flux app.</p>
<p>Abramov also wanted to eliminate some of the aspects of development he found frustrating. When trying to debug a web app, one must often go through the series of steps that cause the bug to occur each time the code is changed. This quickly becomes repetitive and frustrating. Abramov envisioned dev tools that would allow one to undo or replay a series of actions at the click of a button. This idea became the Redux DevTools.</p>
<p>The reason this works is that Redux updates the state using pure functions called reducers (see below for definitions), so one can simply replay a series of actions and be guaranteed to arrive at the same final state. As Redux was developed it also became more convenient to use a single object to store the state, as opposed to traditional Flux which uses multiple stores.</p>
<p>These design choices allowed for the creation of an ecosystem of powerful Redux tools and extensions. Over time three principles were recognized as central to the philosophy of Redux. They are:</p>
<ul>
<li><p><strong>A Single Source of Truth</strong> The state for an entire Redux app is stored in a single, plain JavaScript object.</p></li>
<li><p><strong>State is Read Only</strong> The state object cannot be directly modified. Instead it is modified by dispatching actions.</p></li>
<li><p><strong>Changes Are Made with Pure Functions</strong> The reducers that receive the actions and return updated state are pure functions of the old state and the action.</p></li>
</ul>
<p>Beyond this, a guiding meta-philosophy of Redux is the idea that in a software library restrictions can be just as important as features. Redux deliberately places significant restrictions on the way state can be stored and updated, but in return it allows easy implementation of a number of powerful features that would be extremely difficult to write using a less restrictive framework.</p>
<h2 id="when-is-it-appropriate-to-use-redux">When is it appropriate to use Redux?</h2>
<p>Initially, Redux grew in popularity, quickly moving beyond its initial plan as an experiment. As of early 2016 it had over 3,000,000 downloads. The Redux repository on GitHub has over 50,000 stars, and Redux is now used by a number of companies including Exana, Patreon, and ClassPass.</p>
<p>Since the introduction of Redux, Context has been added to React. Context, like Redux, gives you a way to store and manage global state in your React applications. For projects with simpler global state requirements, Context has become a popular alternative to using Redux.</p>
<p>Context is built into React so there’s no need to install an additional library as a dependency. Context is also simpler overall and generally requires less work to get up and running. All that being said, for projects with more sophisticated global state requirements, Redux remains a popular option. Redux offers greater flexibility with support for middleware and richer developer tools in the form of the Redux DevTools.</p>
<h2 id="vocabulary">Vocabulary</h2>
<p>Learning how to use Redux requires you to understand a fair amount of terminology. For now, don’t worry about memorizing all of the following terms; it’s good enough to just have a general awareness. You’ll revisit each of these terms as you work your way through this lesson.</p>
<h3 id="state">State</h3>
<p>Ex: "<em>Redux is a state manager.</em>"</p>
<p>The <em>state</em> of a program means all the information stored by that program at a particular point in time. It is generally used to refer to the data stored by the program at a particular instance in time, as opposed to the logic of the program, which doesn’t change over time. The job of Redux is to store the state of your app and make it available to entire app.</p>
<h3 id="store">Store</h3>
<p>Ex: "<em>Redux stores state in a single store.</em>"</p>
<p>The Redux store is a single JavaScript object with a few methods, including <code>getState</code>, <code>dispatch(action)</code>, and <code>subscribe(listener)</code>. Any state you want Redux to handle is held in the store.</p>
<h3 id="actions">Actions</h3>
<p>Ex: "<em>The Redux store is updated by dispatching actions.</em>"</p>
<p>An action is a POJO (plain old JavaScript object) with a <code>type</code> property. Actions contain information that can be used to update the store. They can be <em>dispatched</em>, i.e. sent to the store, in response to user actions or AJAX requests. Typically Redux apps use functions called <em>action creators</em> that return actions. Action creators can take arguments which allow them to customize the data contained in the actions they generate.</p>
<h3 id="pure-functions">Pure functions</h3>
<p>Ex: "<em>Redux reducers are pure functions.</em>"</p>
<p>A function is pure if its behavior depends only its arguments and it has no side effects. This means the function can’t depend on the value of any variables that aren’t passed to it as arguments, and it can’t alter the state of the program or any variable existing outside itself. It simply takes in arguments and returns a value.</p>
<h3 id="reducer">Reducer</h3>
<p>Ex: "<em>Redux handles actions using reducers.</em>"</p>
<p>A reducer is a function that is called each time an action is dispatched. The reducer receives an action and the current state as arguments and returns an updated state.</p>
<p>Redux reducers are required to be pure functions of the dispatched action and the current state. This makes their behavior very predictable and allows their effects to potentially be reversed.</p>
<h3 id="middleware">Middleware</h3>
<p>Ex: "<em>You can customize your response to dispatched actions using middleware.</em>"</p>
<p>Middleware is an optional component of Redux that allows custom responses to dispatched actions. When an action is dispatched, it passes through each middleware that has been added to the state. The middleware can take some action in response and chose whether or not to pass the action on down the chain. Behind the scenes, the middleware actually replaces the dispatch method of the store with a customized version. There is a large ecosystem of existing middleware ready to be plugged into any Redux projects. One example is a logger that records each action before passing it on to the reducer. Perhaps the most common use for middleware is to dispatch asynchronous requests to a server.</p>
<h3 id="time-traveling-dev-tools">Time traveling dev tools</h3>
<p>Ex: "<em>Redux has time traveling dev tools.</em>"</p>
<p>Redux reducers are pure functions of the dispatched action and the current state. This means that if one were to store a list of the previous states over time and the actions that had been dispatched, one could retroactively cancel an action and recalculate the state as if that action had never been dispatched. This is precisely the functionality that the Redux DevTools provide. The dev tools can be added as middleware to any Redux project. They allow you to look back through the history of the state and toggle past actions on and off to see a live recalculation of the state. This ability to revert to a previous state is what is meant by time travel.</p>
<h3 id="thunks">Thunks</h3>
<p>Ex: "<em>Thunks are a convenient format for taking asynchronous actions in Redux.</em>"</p>
<p>The traditional approach to middleware closely parallels the format of reducers. The actions being dispatched are POJOs with types and various middleware files are waiting to receive them. These files check the type of the action using a case statement just like reducers.</p>
<p>Thunks are an alternative approach. A thunk is a general concept in computer science referring to a function whose primary purpose is simply to call another function. In Redux a thunk action creator returns a function rather than an object. When they are dispatched, thunk actions are intercepted by a piece of middleware that simply checks if each action is a function. If it is, that function is called with the state and dispatch as arguments, otherwise it is passed on down the chain. Thunks are most commonly used to make asynchronous API requests.</p>
<h2 id="what-you-learned">What you learned</h2>
<p>In this article, you learned what Redux is and where it came from. You also learned when it’s appropriate to use Redux and some of the vocabulary terms used by Redux.</p>
<h2 id="see-also">See also…</h2>
<p>The <a href="http://redux.js.org/">official Redux documentation</a> is a great resource for learning more about Redux. To see who’s using Redux, see this page on <a href="https://stackshare.io/reduxjs">StackShare</a>.</p>
<hr />
<h1 id="flux-and-redux">Flux and Redux</h1>
<p>Redux is an evolution of the concepts introduced by Flux. Having a general understanding of Flux will assist you in learning Redux.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe the relationship between Redux and Flux</li>
<li>Describe the three principles that Redux abides by</li>
<li>Describe the Redux data cycle</li>
</ul>
<h2 id="what-is-flux">What is Flux?</h2>
<p>Flux is a front-end application architecture Facebook developed to use with React. Flux is not a library or framework. Flux is simply a pattern in which to structure one’s application. It doesn’t even need to be used with React! Flux provides unidirectional data flow, which affords more predictability than one might encounter when using other application design patterns.</p>
<figure>
<img src="images/redux-flux.png" alt="flux" /><figcaption>flux</figcaption>
</figure>
<h3 id="actions-1">Actions</h3>
<p>An action begins the flow of data in Flux. An action is a simple object that at a minimum contains a <code>type</code>. An action’s <code>type</code> indicates the type of change to be performed on the application’s state. An action may contain additional data (the "payload") that’s necessary for changing the application’s former state to its next one.</p>
<h3 id="dispatcher">Dispatcher</h3>
<p>The dispatcher is a mechanism for distributing (or "dispatching") actions to a Flux application’s store. The dispatcher is little more than a registry of callback functions into the store. Redux (the implementation of Flux we’ll use at App Academy) consolidates the dispatcher into a single <code>dispatch()</code> function.</p>
<h3 id="store-1">Store</h3>
<p>The store represents the entire state of the application. It’s also responsible for updating the state of the application appropriately whenever it receives an action. It does so by registering with the dispatcher a callback function that receives an action. This callback function uses the action’s type to invoke the proper function to change the application’s state. After the store has changed state, it "emits a change," i.e. the store passes the new state to any views (explanation incoming) that have registered listeners (callbacks) to it.</p>
<h3 id="view">View</h3>
<p>A view is a unit of code that’s responsible for rendering the user interface. To complete the Flux pattern, a view listens to change events emitted by the store. When a change to the application’s data layer occurs, a view can respond appropriately, such as by updating its internal state and triggering a re-render.</p>
<p>A view can create actions itself, e.g. in user-triggered events. If a user marks a todo as complete, a view might call a function that would dispatch an action to toggle the todo’s state. Creating an action from the view turns our Flux pattern into a unidirectional loop.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/fullstack/react/assets/flux-loop.png" alt="flux-loop" /><figcaption>flux-loop</figcaption>
</figure>
<p>Here the original action might (for example) result from an asynchronous request to fetch todos from the database with a success callback to dispatch our action to receive those todos and update the application’s state accordingly. It’s a common pattern in Flux to dispatch an action that populates the initial state of the application, with further modifications coming from the client.</p>
<h2 id="redux">Redux</h2>
<p>Redux is a library (distributed as an npm package) that facilitates a particular implementation of Flux. A Redux loop behaves slightly differently than a vanilla Flux loop, but the general concepts remain the same. Redux abides by three principles:</p>
<ol type="1">
<li><strong>Single Source of Truth</strong>: The entire state of the application is stored in a single JavaScript object in a single store. This object is commonly referred to as a "state tree" because its values often contain or are objects themselves.</li>
<li><strong>State is Read-Only</strong>: The only way to change the state is to dispatch an action. This principle ensures that our Redux loop is never short-circuited and change of state remains single-threaded.</li>
<li><strong>Only Pure Functions Change State</strong>: Pure functions known as "reducers" receive the previous state and an action and return the next state. They return new state objects instead of mutating previous state. Read <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-pure-function-d1c076bec976#.lfv7bgqco">more</a> about what makes a function pure.</li>
</ol>
<figure>
<img src="https://assets.aaonline.io/fullstack/react/assets/redux.gif" alt="redux-loop" /><figcaption>redux-loop</figcaption>
</figure>
<p>As you’ve probably already surmised, <code>React</code> will be our view layer.</p>
<blockquote>
<p><strong>Note:</strong> Middleware is an ecosystem of utilities that augments the functionality of <code>dispatch()</code>. Among other things, it allows for asynchronous requests in a Redux application.</p>
</blockquote>
<p>You’ll learn more about each part in the Redux loop in this lesson.</p>
<h2 id="what-you-learned-1">What you learned</h2>
<p>In this article, you learned about the relationship between Redux and Flux. You also learned about the three principles that Redux abides by and the Redux data cycle.</p>
<!-- @import "[TOC]" {cmd="toc" depthFrom=2 depthTo=6 orderedList=false} -->
<hr />
<h1 id="flux-and-redux-1">Flux and Redux</h1>
<p>Redux is an evolution of the concepts introduced by Flux. Having a general understanding of Flux will assist you in learning Redux.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe the relationship between Redux and Flux</li>
<li>Describe the three principles that Redux abides by</li>
<li>Describe the Redux data cycle</li>
</ul>
<h2 id="what-is-flux-1">What is Flux?</h2>
<p>Flux is a front-end application architecture Facebook developed to use with React. Flux is not a library or framework. Flux is simply a pattern in which to structure one’s application. It doesn’t even need to be used with React! Flux provides unidirectional data flow, which affords more predictability than one might encounter when using other application design patterns.</p>
<figure>
<img src="images/redux-flux.png" alt="flux" /><figcaption>flux</figcaption>
</figure>
<h3 id="actions-2">Actions</h3>
<p>An action begins the flow of data in Flux. An action is a simple object that at a minimum contains a <code>type</code>. An action’s <code>type</code> indicates the type of change to be performed on the application’s state. An action may contain additional data (the "payload") that’s necessary for changing the application’s former state to its next one.</p>
<h3 id="dispatcher-1">Dispatcher</h3>
<p>The dispatcher is a mechanism for distributing (or "dispatching") actions to a Flux application’s store. The dispatcher is little more than a registry of callback functions into the store. Redux (the implementation of Flux we’ll use at App Academy) consolidates the dispatcher into a single <code>dispatch()</code> function.</p>
<h3 id="store-2">Store</h3>
<p>The store represents the entire state of the application. It’s also responsible for updating the state of the application appropriately whenever it receives an action. It does so by registering with the dispatcher a callback function that receives an action. This callback function uses the action’s type to invoke the proper function to change the application’s state. After the store has changed state, it "emits a change," i.e. the store passes the new state to any views (explanation incoming) that have registered listeners (callbacks) to it.</p>
<h3 id="view-1">View</h3>
<p>A view is a unit of code that’s responsible for rendering the user interface. To complete the Flux pattern, a view listens to change events emitted by the store. When a change to the application’s data layer occurs, a view can respond appropriately, such as by updating its internal state and triggering a re-render.</p>
<p>A view can create actions itself, e.g. in user-triggered events. If a user marks a todo as complete, a view might call a function that would dispatch an action to toggle the todo’s state. Creating an action from the view turns our Flux pattern into a unidirectional loop.</p>
<figure>
<img src="https://appacademy-open-assets.s3-us-west-1.amazonaws.com/fullstack/react/assets/flux-loop.png" alt="flux-loop" /><figcaption>flux-loop</figcaption>
</figure>
<p>Here the original action might (for example) result from an asynchronous request to fetch todos from the database with a success callback to dispatch our action to receive those todos and update the application’s state accordingly. It’s a common pattern in Flux to dispatch an action that populates the initial state of the application, with further modifications coming from the client.</p>
<h2 id="redux-1">Redux</h2>
<p>Redux is a library (distributed as an npm package) that facilitates a particular implementation of Flux. A Redux loop behaves slightly differently than a vanilla Flux loop, but the general concepts remain the same. Redux abides by three principles:</p>
<ol type="1">
<li><strong>Single Source of Truth</strong>: The entire state of the application is stored in a single JavaScript object in a single store. This object is commonly referred to as a "state tree" because its values often contain or are objects themselves.</li>
<li><strong>State is Read-Only</strong>: The only way to change the state is to dispatch an action. This principle ensures that our Redux loop is never short-circuited and change of state remains single-threaded.</li>
<li><strong>Only Pure Functions Change State</strong>: Pure functions known as "reducers" receive the previous state and an action and return the next state. They return new state objects instead of mutating previous state. Read <a href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-pure-function-d1c076bec976#.lfv7bgqco">more</a> about what makes a function pure.</li>
</ol>
<figure>
<img src="https://assets.aaonline.io/fullstack/react/assets/redux.gif" alt="redux-loop" /><figcaption>redux-loop</figcaption>
</figure>
<p>As you’ve probably already surmised, <code>React</code> will be our view layer.</p>
<blockquote>
<p><strong>Note:</strong> Middleware is an ecosystem of utilities that augments the functionality of <code>dispatch()</code>. Among other things, it allows for asynchronous requests in a Redux application.</p>
</blockquote>
<p>You’ll learn more about each part in the Redux loop in this lesson.</p>
<h2 id="what-you-learned-2">What you learned</h2>
<p>In this article, you learned about the relationship between Redux and Flux. You also learned about the three principles that Redux abides by and the Redux data cycle.</p>
<hr />
<h1 id="store-3">Store</h1>
<p>The <strong>store</strong> is the central element of Redux’s architecture. It holds the global <strong>state</strong> of an application. The store is responsible for updating the global state via its <strong>reducer</strong>, broadcasting state updates via <strong>subscription</strong>, and listening for <strong>actions</strong> that tell it when to update the state.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe the role of the store in the Redux architecture</li>
<li>Use the <code>createStore</code> method to create an instance of the Redux store</li>
<li>Use the <code>store.dispatch</code> method to dispatch an action to trigger a state update</li>
<li>Use the <code>store.subscribe</code> method to listen for state updates</li>
<li>Use the <code>store.getState</code> method to get the current state</li>
</ul>
<h2 id="creating-the-store">Creating the store</h2>
<p>The <code>redux</code> library provides us with a <code>createStore()</code> method, which takes up to three arguments and returns a Redux store.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb1-1" title="1"><span class="at">createStore</span>(reducer<span class="op">,</span> [preloadedState]<span class="op">,</span> [enhancer])<span class="op">;</span></a></code></pre></div>
<ul>
<li><code>reducer</code> (required) - A reducing function that receives the store’s current state and incoming action, determines how to update the store’s state, and returns the next state (more on this in a moment).</li>
<li><code>preloadedState</code> (optional) - An <code>object</code> representing any application state that existed before the store was created.</li>
<li><code>enhancer</code> (optional) - A <code>function</code> that adds extra functionality to the store.</li>
</ul>
<blockquote>
<p>You’ll learn more about how to use the <code>preloadedState</code> and <code>enhancer</code> parameters later in this lesson. For now you’ll focus on creating a store with just the single required <code>reducer</code> parameter.</p>
</blockquote>
<p>Here is an example of how to create a store for a Fruit Stand application:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb2-1" title="1"><span class="im">import</span> <span class="op">{</span> createStore <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;redux&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb2-2" title="2"></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="kw">const</span> fruitReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb2-4" title="4">  <span class="co">// </span><span class="al">TODO</span><span class="co"> implement reducer</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="op">}</span></a>
<a class="sourceLine" id="cb2-6" title="6"></a>
<a class="sourceLine" id="cb2-7" title="7"><span class="kw">const</span> store <span class="op">=</span> <span class="at">createStore</span>(fruitReducer)<span class="op">;</span></a></code></pre></div>
<p>A Redux application will typically only have a single store. You’ll implement the <code>reducer</code> function in just a bit.</p>
<h2 id="store-api">Store API</h2>
<p>A Redux store is just an object that holds the application state, wrapped in a minimalist API. The store has three methods: <code>getState()</code>, <code>dispatch(action)</code>, and <code>subscribe(callback)</code>.</p>
<h3 id="store-methods">Store methods</h3>
<ul>
<li><code>getState()</code> - Returns the store’s current state.</li>
<li><code>dispatch(action)</code> - Passes an <code>action</code> into the store’s <code>reducer</code> telling it what information to update.</li>
<li><code>subscribe(callback)</code> - Registers a callback to be triggered whenever the store updates. Returns a function, which when invoked, unsubscribes the callback function from the store.</li>
</ul>
<h2 id="updating-the-store">Updating the store</h2>
<p>Store updates can only be triggered by dispatching <strong>actions</strong>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb3-1" title="1"><span class="va">store</span>.<span class="at">dispatch</span>(action)<span class="op">;</span></a></code></pre></div>
<p>An <code>action</code> in Redux is just a plain object with:</p>
<ul>
<li>a <code>type</code> key indicating the action being performed, and</li>
<li>optional payload keys containing any new information.</li>
</ul>
<p>For example, the store for your Fruit Stand application would handle the inventory. You would use the following <code>addOrange</code> action to add an orange to the store’s state. Notice how it has a <code>type</code> of ‘ADD_FRUIT’ and a <code>fruit</code> payload of ‘orange’:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">const</span> addOrange <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb4-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-3" title="3">  <span class="dt">fruit</span><span class="op">:</span> <span class="st">&#39;orange&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="op">};</span></a></code></pre></div>
<p>When <code>store.dispatch()</code> is called, the store passes its current <code>state</code>, along with the <code>action</code> being dispatched, to the <code>reducer</code>. The <code>reducer</code> function takes the two arguments (<code>state</code> and <code>action</code>) and returns the next <code>state</code>. You’ll read more about the <code>reducer</code> in just a bit, but for now, think of it as a Redux app’s traffic cop, routing new information to its rightful place in the state.</p>
<p>A <code>reducer</code> for the Fruit Stand application looks like this:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">const</span> fruitReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb5-3" title="3">    <span class="cf">case</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb5-4" title="4">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> <span class="va">action</span>.<span class="at">fruit</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb5-5" title="5">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb5-6" title="6">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb5-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="op">};</span></a></code></pre></div>
<p>The reducer’s <code>state</code> parameter provides a default value; this is the <strong>initial state</strong> of our store prior to any actions. In this case, it’s an empty array. In Redux, <a href="https://github.com/reactjs/redux/issues/758"><strong>the state is immutable</strong></a>, so the reducer must return a <strong>new array or object</strong> whenever the state changes.</p>
<p>Now that you’ve defined your app’s reducing function, you can now <code>dispatch</code> the <code>addOrange</code> action to the store:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb6-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// []</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// [ &#39;orange&#39; ]</span></a></code></pre></div>
<h2 id="subscribing-to-the-store">Subscribing to the store</h2>
<p>Once the store has processed a <code>dispatch()</code>, it triggers all its subscribers. Subscribers are callbacks that can be added to the store via <code>subscribe()</code>.</p>
<p>You can define a callback <code>display</code> and subscribe it to the store:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">const</span> display <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb7-2" title="2">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="op">};</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="kw">const</span> unsubscribeDisplay <span class="op">=</span> <span class="va">store</span>.<span class="at">subscribe</span>(display)<span class="op">;</span></a>
<a class="sourceLine" id="cb7-6" title="6"></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span> <span class="co">// [ &#39;orange&#39;, &#39;orange&#39; ]</span></a>
<a class="sourceLine" id="cb7-8" title="8"></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">// display will no longer be invoked after store.dispatch()</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="at">unsubscribeDisplay</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb7-11" title="11"></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span> <span class="co">// no output</span></a></code></pre></div>
<p>In the example above, the store processed the dispatched action and then called all of its subscribers in response. The only subscriber is your <code>display</code> callback which logs the current state when called.</p>
<blockquote>
<p>Later in this lesson, you’ll learn how to use the <code>store.subscribe()</code> method to connect a React component to the store so that it can listen for global state updates.</p>
</blockquote>
<h2 id="reviewing-a-simple-example">Reviewing a simple example</h2>
<p>Later in this lesson, you’ll see how to use Redux with React and how to organize your Redux code into separate modules, but for now to keep things as simple as possible, you’ll put everything into a single file and use Node.js to run your application.</p>
<p>Here’s an <code>app.js</code> file that brings together all of the above code snippets into a single example:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb8-1" title="1"><span class="co">// app.js</span></a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="kw">const</span> <span class="op">{</span> createStore <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;redux&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-4" title="4"></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">// Define the store&#39;s reducer.</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="kw">const</span> fruitReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-7" title="7">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb8-8" title="8">    <span class="cf">case</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-9" title="9">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> <span class="va">action</span>.<span class="at">fruit</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb8-10" title="10">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb8-11" title="11">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb8-12" title="12">  <span class="op">}</span></a>
<a class="sourceLine" id="cb8-13" title="13"><span class="op">};</span></a>
<a class="sourceLine" id="cb8-14" title="14"></a>
<a class="sourceLine" id="cb8-15" title="15"><span class="co">// Create the store.</span></a>
<a class="sourceLine" id="cb8-16" title="16"><span class="kw">const</span> store <span class="op">=</span> <span class="at">createStore</span>(fruitReducer)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-17" title="17"></a>
<a class="sourceLine" id="cb8-18" title="18"><span class="co">// Define an &#39;ADD_FRUIT&#39; action for adding an orange to the store.</span></a>
<a class="sourceLine" id="cb8-19" title="19"><span class="kw">const</span> addOrange <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-20" title="20">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-21" title="21">  <span class="dt">fruit</span><span class="op">:</span> <span class="st">&#39;orange&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb8-22" title="22"><span class="op">};</span></a>
<a class="sourceLine" id="cb8-23" title="23"></a>
<a class="sourceLine" id="cb8-24" title="24"><span class="co">// Log to the console the store&#39;s state before and after</span></a>
<a class="sourceLine" id="cb8-25" title="25"><span class="co">// dispatching the &#39;ADD_FRUIT&#39; action.</span></a>
<a class="sourceLine" id="cb8-26" title="26"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// []</span></a>
<a class="sourceLine" id="cb8-27" title="27"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-28" title="28"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// [ &#39;orange&#39; ]</span></a>
<a class="sourceLine" id="cb8-29" title="29"></a>
<a class="sourceLine" id="cb8-30" title="30"><span class="co">// Define and register a callback to listen for store updates</span></a>
<a class="sourceLine" id="cb8-31" title="31"><span class="co">// and console log the store&#39;s state.</span></a>
<a class="sourceLine" id="cb8-32" title="32"><span class="kw">const</span> display <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb8-33" title="33">  <span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb8-34" title="34"><span class="op">};</span></a>
<a class="sourceLine" id="cb8-35" title="35"><span class="kw">const</span> unsubscribeDisplay <span class="op">=</span> <span class="va">store</span>.<span class="at">subscribe</span>(display)<span class="op">;</span></a>
<a class="sourceLine" id="cb8-36" title="36"></a>
<a class="sourceLine" id="cb8-37" title="37"><span class="co">// Dispatch the &#39;ADD_FRUIT&#39; action. This time the `display` callback</span></a>
<a class="sourceLine" id="cb8-38" title="38"><span class="co">// will be called by the store when its state is updated.</span></a>
<a class="sourceLine" id="cb8-39" title="39"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span> <span class="co">// [ &#39;orange&#39;, &#39;orange&#39; ]</span></a>
<a class="sourceLine" id="cb8-40" title="40"></a>
<a class="sourceLine" id="cb8-41" title="41"><span class="co">// Unsubscribe the `display` callback to stop listening for store updates.</span></a>
<a class="sourceLine" id="cb8-42" title="42"><span class="at">unsubscribeDisplay</span>()<span class="op">;</span></a>
<a class="sourceLine" id="cb8-43" title="43"></a>
<a class="sourceLine" id="cb8-44" title="44"><span class="co">// Dispatch the &#39;ADD_FRUIT&#39; action one more time</span></a>
<a class="sourceLine" id="cb8-45" title="45"><span class="co">// to confirm that the `display` method won&#39;t be called</span></a>
<a class="sourceLine" id="cb8-46" title="46"><span class="co">// when the store state is updated.</span></a>
<a class="sourceLine" id="cb8-47" title="47"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span> <span class="co">// no output</span></a></code></pre></div>
<p>To run the above example, use npm to initialize the project (<code>npm init -y</code>) and to install Redux (<code>npm install redux</code>). Then use the command <code>node app.js</code> to run the example. You should see the following output:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb9-1" title="1">[]</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="bu">[</span> <span class="st">&#39;orange&#39;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="bu">[</span> <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;orange&#39;</span><span class="bu"> ]</span></a></code></pre></div>
<h2 id="what-you-learned-3">What you learned</h2>
<p>In this article, you learned about the role of the store in the Redux architecture. You saw how to use the <code>createStore</code> method to create a store instance, the <code>store.dispatch</code> method to dispatch an action to trigger a state update, the <code>store.subscribe</code> method to listen for state updates, and <code>store.getState</code> method to get the current state.</p>
<h2 id="see-also-1">See also…</h2>
<p>To learn more about the store, see the official <a href="http://redux.js.org/docs/basics/Store.html">Redux documentation</a>.</p>
<hr />
<h1 id="reducers">Reducers</h1>
<p>As you saw in an earlier article, the Redux store has a <strong>reducer</strong> function for updating its state. The reducer function receives the current <code>state</code> and an <code>action</code>, updates the state appropriately based on the <code>action.type</code>, and returns the next state.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Explain what a <em>reducer</em> is</li>
<li>Use a <code>switch</code> statement within a reducer function to handle multiple action types</li>
<li>Describe why it’s important for a reducer to avoid mutating the current state when creating the next state</li>
</ul>
<h2 id="updating-the-reducer-to-handle-additional-action-types">Updating the reducer to handle additional action types</h2>
<p>Recall the reducer from the Fruit Stand application:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">const</span> fruitReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="cf">case</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb10-4" title="4">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> <span class="va">action</span>.<span class="at">fruit</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb10-5" title="5">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb10-6" title="6">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb10-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="op">};</span></a></code></pre></div>
<p>When the store initializes, it calls its reducer with an <code>undefined</code> <code>state</code>, allowing the reducer to dictate the store’s initial state via the <code>state</code> parameter’s default value.</p>
<p>The bulk of the reducer function then implements updates to the state. First, the reducer decides what logic to implement based on the <code>action.type</code> <code>switch</code>. Then, it creates and returns a new object representing the next state (after processing the action) if any of the information needs to be changed. The <code>state</code> is returned unchanged if no cases match the <code>action.type</code>, meaning that the reducer doesn’t <em>care</em> about that action (e.g. <code>{type: 'NEW_TRANSFORMERS_SEQUEL'}</code>).</p>
<p>In the above example, the reducer’s initial state is set to an empty array (i.e. <code>[]</code>). The reducer returns a new array with <code>action.fruit</code> appended to the previous <code>state</code> if <code>action.type</code> is <code>'ADD_FRUIT'</code>. Otherwise, it returns the <code>state</code> unchanged.</p>
<p>Additional <code>case</code> clauses can be added to update the reducer to handle the following action types:</p>
<ul>
<li><code>'ADD_FRUITS'</code> - Add an array of fruits to the inventory of fruits</li>
<li><code>'SELL_FRUIT'</code> - Remove the first instance of a fruit if available</li>
<li><code>'SELL_OUT'</code> - Someone bought the whole inventory of fruit! Return an empty array</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">const</span> fruitReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb11-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-3" title="3">    <span class="cf">case</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-4" title="4">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> <span class="va">action</span>.<span class="at">fruit</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb11-5" title="5">    <span class="cf">case</span> <span class="st">&#39;ADD_FRUITS&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-6" title="6">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> ...<span class="va">action</span>.<span class="at">fruits</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb11-7" title="7">    <span class="cf">case</span> <span class="st">&#39;SELL_FRUIT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-8" title="8">      <span class="kw">const</span> index <span class="op">=</span> <span class="va">state</span>.<span class="at">indexOf</span>(<span class="va">action</span>.<span class="at">fruit</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb11-9" title="9">      <span class="cf">if</span> (index <span class="op">!==</span> <span class="dv">-1</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb11-10" title="10">        <span class="co">// remove first instance of action.fruit</span></a>
<a class="sourceLine" id="cb11-11" title="11">        <span class="cf">return</span> [...<span class="va">state</span>.<span class="at">slice</span>(<span class="dv">0</span><span class="op">,</span> index)<span class="op">,</span> ...<span class="va">state</span>.<span class="at">slice</span>(index <span class="op">+</span> <span class="dv">1</span>)]<span class="op">;</span></a>
<a class="sourceLine" id="cb11-12" title="12">      <span class="op">}</span></a>
<a class="sourceLine" id="cb11-13" title="13">      <span class="cf">return</span> state<span class="op">;</span> <span class="co">// if action.fruit is not in state, return previous state</span></a>
<a class="sourceLine" id="cb11-14" title="14">    <span class="cf">case</span> <span class="st">&#39;SELL_OUT&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-15" title="15">      <span class="cf">return</span> []<span class="op">;</span></a>
<a class="sourceLine" id="cb11-16" title="16">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb11-17" title="17">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb11-18" title="18">  <span class="op">}</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="op">};</span></a></code></pre></div>
<h3 id="reviewing-how-arrayslice-works">Reviewing how <code>Array#slice</code> works</h3>
<p>If you don’t regularly use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice"><code>Array#slice</code></a> method, the following expression might look odd at first glance:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb12-1" title="1">[...<span class="va">state</span>.<span class="at">slice</span>(<span class="dv">0</span><span class="op">,</span> index)<span class="op">,</span> ...<span class="va">state</span>.<span class="at">slice</span>(index <span class="op">+</span> <span class="dv">1</span>)]</a></code></pre></div>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice"><code>Array#slice</code></a> method returns a new array containing a shallow copy of the array elements indicated by the <code>start</code> and <code>end</code> arguments. The <code>start</code> argument is the index of the first element to include and the <code>end</code> argument is the index of the element to include up to (but not including). If the <code>end</code> argument isn’t provided, all of the array elements up to the end of the array will be included. The original array will not be modified.</p>
<p>By combining two calls to the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice"><code>Array#slice</code></a> method into a new array, a copy of an array can be created that omits an element at a specific index (<code>index</code>):</p>
<ul>
<li><code>state.slice(0, index)</code> - Returns a new array containing the elements starting from index <code>0</code> up to <code>index</code></li>
<li><code>state.slice(index + 1)</code> - Returns a new array containing the elements starting from <code>index + 1</code> (one past the index to omit the element at <code>index</code>) up through the last element in the array</li>
</ul>
<p>Then the spread syntax is used to spread the elements in the slices into a new array.</p>
<p>Here’s a complete example:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">const</span> fruits <span class="op">=</span> [<span class="st">&#39;apple&#39;</span><span class="op">,</span> <span class="st">&#39;apple&#39;</span><span class="op">,</span> <span class="st">&#39;orange&#39;</span><span class="op">,</span> <span class="st">&#39;banana&#39;</span><span class="op">,</span> <span class="st">&#39;watermelon&#39;</span>]<span class="op">;</span></a>
<a class="sourceLine" id="cb13-2" title="2"></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">// The index of the &#39;orange&#39; element is 2.</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="kw">const</span> index <span class="op">=</span> <span class="va">fruits</span>.<span class="at">indexOf</span>(<span class="st">&#39;orange&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb13-5" title="5"></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">// `...fruits.slice(0, index)` returns the array [&#39;apple&#39;, &#39;apple&#39;]</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">// `...fruits.slice(index + 1)` returns the array [&#39;banana&#39;, &#39;watermelon&#39;]</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">// The spread syntax combines the two array slices into the array</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">// [&#39;apple&#39;, &#39;apple&#39;, &#39;banana&#39;, &#39;watermelon&#39;]</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="kw">const</span> newFruits <span class="op">=</span> [...<span class="va">fruits</span>.<span class="at">slice</span>(<span class="dv">0</span><span class="op">,</span> index)<span class="op">,</span> ...<span class="va">fruits</span>.<span class="at">slice</span>(index <span class="op">+</span> <span class="dv">1</span>)]<span class="op">;</span></a></code></pre></div>
<p>This approach to removing an element from an array is just one way to complete the operation without modifying or mutating the original array.</p>
<h2 id="avoiding-state-mutations">Avoiding state mutations</h2>
<p>Inside a Redux reducer, you must never mutate its arguments (i.e. <code>state</code> and <code>action</code>). <strong>Your reducer must return a new object if the state changes</strong>. <a href="https://github.com/reactjs/redux/issues/758">Here’s why</a>.</p>
<p>Here’s an example of a <em>bad</em> reducer which mutates the previous state.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">const</span> badReducer <span class="op">=</span> (state <span class="op">=</span> <span class="op">{</span> <span class="dt">count</span><span class="op">:</span> <span class="dv">0</span> <span class="op">},</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="cf">case</span> <span class="st">&#39;INCREMENT_COUNTER&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb14-4" title="4">      <span class="va">state</span>.<span class="at">count</span><span class="op">++;</span></a>
<a class="sourceLine" id="cb14-5" title="5">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb14-6" title="6">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb14-7" title="7">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb14-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="op">};</span></a></code></pre></div>
<p>And here’s an example of a good reducer which uses <code>Object.assign</code> to create a shallow duplicate of the previous <code>state</code>:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">const</span> goodReducer <span class="op">=</span> (state <span class="op">=</span> <span class="op">{</span> <span class="dt">count</span><span class="op">:</span> <span class="dv">0</span> <span class="op">},</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb15-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="cf">case</span> <span class="st">&#39;INCREMENT_COUNTER&#39;</span><span class="op">:</span></a>
<a class="sourceLine" id="cb15-4" title="4">      <span class="kw">const</span> nextState <span class="op">=</span> <span class="va">Object</span>.<span class="at">assign</span>(<span class="op">{},</span> state)<span class="op">;</span></a>
<a class="sourceLine" id="cb15-5" title="5">      <span class="va">nextState</span>.<span class="at">count</span><span class="op">++;</span></a>
<a class="sourceLine" id="cb15-6" title="6">      <span class="cf">return</span> nextState<span class="op">;</span></a>
<a class="sourceLine" id="cb15-7" title="7">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb15-8" title="8">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb15-9" title="9">  <span class="op">}</span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="op">};</span></a></code></pre></div>
<h2 id="what-you-learned-4">What you learned</h2>
<p>In this article, you learned about reducers and how to use a <code>switch</code> statement within a reducer function to handle multiple action types. You also learned why it’s important for a reducer to avoid mutating the current state when creating the next state.</p>
<h2 id="see-also-2">See also…</h2>
<p>To learn more about reducers, see the official <a href="https://redux.js.org/basics/reducers">Redux documentation</a>.</p>
<hr />
<h1 id="actions-3">Actions</h1>
<p>As you’ve already learned from an earlier article, <strong>actions</strong> are the only way to trigger changes to the store’s state. Remember, actions are simple POJOs with a mandatory <code>type</code> key and optional payload keys containing new information. They get sent using <code>store.dispatch()</code> and are the primary drivers of the Redux loop.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Write an action creator function to facilitate in the creation of action objects</li>
<li>Use constants to define action types to prevent simple typos in action type string literals</li>
</ul>
<h2 id="using-action-creators">Using action creators</h2>
<p>When an action is dispatched, any new state data must be passed along as the <strong>payload</strong>. The example below passes a payload key of <code>fruit</code> with the new state data, ‘orange’:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">const</span> addOrange <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-3" title="3">  <span class="dt">fruit</span><span class="op">:</span> <span class="st">&#39;orange&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="op">};</span></a>
<a class="sourceLine" id="cb16-5" title="5"></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="va">store</span>.<span class="at">dispatch</span>(addOrange)<span class="op">;</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// [ &#39;orange&#39; ]</span></a></code></pre></div>
<p>However, when these action payloads are generated dynamically, it becomes necessary to extrapolate the creation of the action object into a function. These functions are called <strong>action creators</strong>. The JavaScript objects they return are the <strong>actions</strong>. To initiate a dispatch, you pass the result of calling an action creator to <code>store.dispatch()</code>.</p>
<p>For example, an action creator function to create ‘ADD_FRUIT’ actions looks like this:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb17-3" title="3">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb17-4" title="4">    fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb17-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb17-6" title="6"><span class="op">};</span></a></code></pre></div>
<p>You can also rewrite the above arrow function to use an implicit return value:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb18-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb18-3" title="3">  fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<blockquote>
<p>While either approach for defining action creators using arrow functions works, the latter approach of using an implicit return value makes it more difficult to debug the Redux cycle (you’ll see why later in this lesson).</p>
</blockquote>
<p>Now we can add any <code>fruit</code> to the store using our action creator <code>addFruit(fruit)</code>, instead of having to define an action object for each fruit:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb19-1" title="1"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">addFruit</span>(<span class="st">&#39;apple&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">addFruit</span>(<span class="st">&#39;strawberry&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb19-3" title="3"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">addFruit</span>(<span class="st">&#39;lychee&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span> <span class="co">// [ &#39;orange&#39;, &#39;apple&#39;, &#39;strawberry&#39;, &#39;lychee&#39; ]</span></a></code></pre></div>
<h2 id="preventing-typos-in-action-type-string-literals">Preventing typos in action type string literals</h2>
<p>Update your actions to include <code>'ADD_FRUIT'</code>, <code>'ADD_FRUITS'</code>, <code>'SELL_FRUIT'</code>, and <code>'SELL_OUT'</code>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">const</span> ADD_FRUIT <span class="op">=</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="kw">const</span> ADD_FRUITS <span class="op">=</span> <span class="st">&#39;ADD_FRUITS&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-3" title="3"><span class="kw">const</span> SELL_FRUIT <span class="op">=</span> <span class="st">&#39;SELL_FRUIT&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="kw">const</span> SELL_OUT <span class="op">=</span> <span class="st">&#39;SELL_OUT&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb20-5" title="5"></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb20-7" title="7">  <span class="dt">type</span><span class="op">:</span> ADD_FRUIT<span class="op">,</span></a>
<a class="sourceLine" id="cb20-8" title="8">  fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-10" title="10"></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="kw">const</span> addFruits <span class="op">=</span> (fruits) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb20-12" title="12">  <span class="dt">type</span><span class="op">:</span> ADD_FRUITS<span class="op">,</span></a>
<a class="sourceLine" id="cb20-13" title="13">  fruits<span class="op">,</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-15" title="15"></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="kw">const</span> sellFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb20-17" title="17">  <span class="dt">type</span><span class="op">:</span> SELL_FRUIT<span class="op">,</span></a>
<a class="sourceLine" id="cb20-18" title="18">  fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb20-19" title="19"><span class="op">}</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb20-20" title="20"></a>
<a class="sourceLine" id="cb20-21" title="21"><span class="kw">const</span> sellOut <span class="op">=</span> () <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb20-22" title="22">  <span class="dt">type</span><span class="op">:</span> SELL_OUT<span class="op">,</span></a>
<a class="sourceLine" id="cb20-23" title="23"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Notice that constants were used for all of the fruit action types. This prevents simple typos in the reducer’s case clauses (i.e. <code>'ADD_FRIUT'</code>) from unexpectedly not matching the appropriate action type (i.e. <code>'ADD_FRUIT'</code>). Creating constants for the action type string literals ensures that an error is thrown if the constant name is mistyped.</p>
<h2 id="reviewing-a-completed-fruit-stand-example">Reviewing a completed Fruit Stand example</h2>
<p>To review and run a completed Fruit Stand example application, clone the <a href="https://github.com/appacademy-starters/redux-fruit-stand-examples">redux-fruit-stand-examples</a> repo.</p>
<p>After cloning the repo, open a terminal and browse to the <code>fruit-stand-redux</code> folder. Run the command <code>npm install</code> to install the project’s dependencies. Then use the command <code>node app.js</code> to run the Fruit Stand application. You should see the following output:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb21-1" title="1"><span class="ex">Default</span> Redux Store (empty fruit list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb21-2" title="2">[]</a>
<a class="sourceLine" id="cb21-3" title="3"><span class="ex">Redux</span> Store:</a>
<a class="sourceLine" id="cb21-4" title="4"><span class="bu">[</span> <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;apple&#39;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="ex">Redux</span> Store:</a>
<a class="sourceLine" id="cb21-6" title="6"><span class="bu">[</span> <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;apple&#39;</span>, <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;lychee&#39;</span>, <span class="st">&#39;grapefruit&#39;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="ex">Updated</span> Redux Store:</a>
<a class="sourceLine" id="cb21-8" title="8"><span class="bu">[</span> <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;orange&#39;</span>, <span class="st">&#39;lychee&#39;</span>, <span class="st">&#39;grapefruit&#39;</span><span class="bu"> ]</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="ex">Reset</span> Redux Store (empty fruit list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb21-10" title="10">[]</a></code></pre></div>
<p>The <code>reduxSAR.js</code> file contains the action types, reducer, store, and action creator functions. The <code>app.js</code> file contains the code that interacts with the Redux store. The <code>appWithSubscription.js</code> file also contains code that interacts with the store but subscribes a callback function (using the <code>store.subscribe</code> method) to listen for and log state updates to the console.</p>
<h2 id="what-you-learned-5">What you learned</h2>
<p>In this article, you learned how to write an action creator function to facilitate in the creation of action objects. You also learned how to use constants to define action types to prevent simple typos in action type string literals.</p>
<h2 id="see-also-3">See also…</h2>
<p>To learn more about actions, see the official <a href="http://redux.js.org/docs/basics/Actions.html">Redux documentation</a>.</p>
<hr />
<h1 id="debugging-arrow-functions">Debugging Arrow Functions</h1>
<p>Arrow functions are ubiquitous in React and Redux. Understanding how to use <code>debugger</code> statements with arrow functions is necessary to be able to effectively debug the Redux cycle.</p>
<p>When you finish this article, you should be able to:</p>
<ul>
<li>Describe why <code>debugger</code> statements can’t be used with arrow functions that have an implicit return value</li>
<li>Rewrite an arrow function with an implicit return value to use an explicit return statement so that a <code>debugger</code> statement can be added</li>
</ul>
<h2 id="understanding-the-limitations-of-implicit-return-values">Understanding the limitations of implicit return values</h2>
<p>Here’s an example of a Redux action creator that’s defined using an arrow function with an implicit return value:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb22-3" title="3">  fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>While using an arrow function with an implicit return value allows you to concisely define <code>addFruit</code>, it’s difficult to debug. Suppose you want to use a <code>debugger</code> statement to stop execution within <code>addFruit</code> to inspect the value of the <code>fruit</code> parameter. You <strong>can’t</strong> do this:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb23-2" title="2">  <span class="cf">debugger</span></a>
<a class="sourceLine" id="cb23-3" title="3">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb23-4" title="4">  fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p><code>{ type: 'ADD_FRUIT', fruit }</code> is an object, and you can’t put a <code>debugger</code> statement inside of an object. But you also <strong>can’t</strong> do this:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> (</a>
<a class="sourceLine" id="cb24-2" title="2">  <span class="cf">debugger</span></a>
<a class="sourceLine" id="cb24-3" title="3">  <span class="op">{</span></a>
<a class="sourceLine" id="cb24-4" title="4">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb24-5" title="5">    fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb24-6" title="6">  <span class="op">}</span></a>
<a class="sourceLine" id="cb24-7" title="7">)<span class="op">;</span></a></code></pre></div>
<p>The parentheses after the fat arrow (<code>=&gt;</code>) are used to indicate that the object <code>{ type: 'ADD_FRUIT', fruit }</code> should be implicitly returned. As a result, the above won’t work, because we can’t put a debugger inside of a return statement.</p>
<h2 id="rewriting-an-arrow-function-to-use-an-explicit-return-statement">Rewriting an arrow function to use an explicit return statement</h2>
<p>To put a <code>debugger</code> statement inside of the <code>addFruit</code> action creator function, you first need to convert it into an arrow function with an explicit return statement:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb25-3" title="3">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb25-4" title="4">    fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb25-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="op">};</span></a></code></pre></div>
<p>Now, finally, you can put the <code>debugger</code> statement before the <code>return</code> statement:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">const</span> addFruit <span class="op">=</span> (fruit) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-2" title="2">  <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb26-3" title="3">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb26-4" title="4">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;ADD_FRUIT&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb26-5" title="5">    fruit<span class="op">,</span></a>
<a class="sourceLine" id="cb26-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>If you want to avoid having to do this over and over again as you’re debugging your arrow functions, you can make it a habit to write all of your arrow functions with explicit return statements. Do be aware, however, that writing arrow functions with implicit return values is a common convention in Redux and you will see it often out in the wild.</p>
<h2 id="what-you-learned-6">What you learned</h2>
<p>In this article, you learned why <code>debugger</code> statements can’t be used with arrow functions that have an implicit return value. You also learned how to rewrite an arrow function with an implicit return value to use an explicit return statement so that a <code>debugger</code> statement can be added.</p>
<hr />
<h1 id="redux-to-do-list-project">Redux To-do List Project</h1>
<p>At this point, you understand how to perform CRUD operations with a backend API. You also know how to perform CRUD operations by creating a user interface with React, managing state with React Context, and storing persistent data in local storage. It’s time to create a simple Node to-do list application that utilizes the Redux library and runs in your terminal! This project is intended as a way to practice the basics of Redux before learning how to use Redux within a React application.</p>
<p>In today’s project, you will:</p>
<ul>
<li>Generate a Redux <strong>store</strong> by using the <code>createStore</code> method from the Redux library</li>
<li>Set up a <strong>reducer</strong> to direct different action types to interact with the Redux store in different ways</li>
<li>Set up <strong>actions</strong> to create a task, delete a task, and reset the task list</li>
<li>Use the <code>store.getState</code> method to access the data stored in the Redux store</li>
<li>Use the <code>store.dispatch</code> method to <strong>dispatch</strong> actions to the Redux store</li>
<li>Use the <code>store.subscribe</code> method to subscribe to Redux store changes</li>
<li>Use the VS Code debugger to follow the Redux cycle</li>
</ul>
<h2 id="phase-1-create-redux-store-actions-and-reducer">Phase 1: Create Redux store, actions, and reducer</h2>
<p>Run the following commands in your terminal to create a new project directory, generate a <code>package.json</code> file, and install <code>redux</code> as a dependency:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb27-1" title="1"><span class="fu">mkdir</span> redux-todos <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> redux-todos</a>
<a class="sourceLine" id="cb27-2" title="2"><span class="ex">npm</span> init -y <span class="kw">&amp;&amp;</span> <span class="ex">npm</span> install redux</a></code></pre></div>
<p>Now it’s time to create your first Redux project! Create a <code>reduxStoreActionReducer.js</code> file and import the <code>createStore</code> method from Redux. You’ll need to use CommonJS module syntax (<code>module.exports</code> and <code>require</code>) to be able to run the project within the Node environment:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">const</span> <span class="op">{</span> createStore <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;redux&#39;</span>)<span class="op">;</span></a></code></pre></div>
<h3 id="store-4">Store</h3>
<p>You’ll use the <code>createStore</code> method to generate your Redux store by invoking it with a reducer. As a reminder, each application should only have one Redux store where all of an application’s state is managed. This is unlike using React Context, where a single React application can utilize multiple contexts.</p>
<p>Conceptually speaking, you can think of the reducer as a function that helps manage the Redux store by routing actions based on their <code>type</code> attribute. Based on the official Redux documentation on the <a href="https://redux.js.org/api/createstore/">createStore</a> method and its parameters, a reducer is a "reducing function that returns the next state tree, given the current state tree and an action to handle."</p>
<p>Now that we’ve gone over a conceptual overview of reducers, let’s create a <code>tasksReducer</code> to manage the to-do list tasks in your Redux store!</p>
<p>Define the <code>tasksReducer</code> function and have it take in the Redux store’s <code>state</code> and an <code>action</code> as parameters. You’ll want the <code>state</code> to default to an empty (<code>[]</code>) if the <code>tasksReducer</code> is invoked without a state. Since you invoke the <code>createStore</code> method with the <code>tasksReducer</code>, you’ll need to define the <code>tasksReducer</code> before invoking the <code>createStore</code> method to generate the Redux store.</p>
<blockquote>
<p><strong>Note:</strong> this project uses an array to store the tasks instead of an object to make it easier to delete a positional task, since there is no user interface that will expose the task ID needed to dispatch task deletion. In the case of this project, a <code>taskId</code> will refer to the index of a task in the array.</p>
</blockquote>
<div class="sourceCode" id="cb29"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb29-2" title="2">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch statement to manage actions based on type</span></a>
<a class="sourceLine" id="cb29-3" title="3"><span class="op">};</span></a>
<a class="sourceLine" id="cb29-4" title="4"></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="kw">const</span> store <span class="op">=</span> <span class="at">createStore</span>(tasksReducer)<span class="op">;</span></a></code></pre></div>
<p>The underlying code in the store returned by the <code>createStore</code> method will automatically invoke the <code>tasksReducer</code> function whenever an action is dispatched. Speaking of actions, let’s set up the <code>createTask</code>, <code>deleteTask</code>, and <code>resetTaskList</code> actions before finishing the <code>tasksReducer</code> function that conceptually <em>routes</em> action objects (think of how it makes more sense to create a component before setting up a <code>&lt;Route&gt;</code> for it).</p>
<p>You’ll finish defining the <code>tasksReducer</code> function after creating the <code>createTask</code>, <code>deleteTask</code>, and <code>resetTaskList</code> actions that the reducer manages. You’ll set up your actions below the line of code that sets up the Redux <code>store</code>.</p>
<h3 id="actions-4">Actions</h3>
<p>Let’s set up the <code>createTask</code> action creator! You’ll want your <code>createTask</code> action creator to return an action with the following shape:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb30-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb30-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;CREATE_TASK&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-3" title="3">  <span class="dt">taskMessage</span><span class="op">:</span> <span class="st">&#39;walk dog&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb30-4" title="4"><span class="op">}</span></a></code></pre></div>
<p>As a reminder, an <strong>action creator</strong> is simply a function that returns an <strong>action</strong> which is a POJO (plain old JavaScript object) that defines a <code>type</code> key and optional payload keys. Have your <code>createTask</code> function take in a <code>taskMessage</code> as a parameter:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb31-2" title="2">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Return POJO with `type` property and function&#39;s argument (`taskMessage`)</span></a>
<a class="sourceLine" id="cb31-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Now you’ll want to set up the function’s return statement to return the action POJO. The POJO should have a <code>type</code> property. The <code>type</code> property will be how the <code>tasksReducer</code> will decipher different types of actions to update the Redux store’s state in different ways. The action will also have a payload key set to the function’s argument (<code>taskMessage</code>).</p>
<p>In this case, the <code>createTask</code> function has a <code>taskMessage</code> parameter, so the action POJO will have a <code>type</code> property set to the string <code>CREATE_TASK</code>, as well as a <code>taskMessage</code> property set to the <code>taskMessage</code> parameter value.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb32-3" title="3">    <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;CREATE_TASK&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb32-4" title="4">    <span class="dt">taskMessage</span><span class="op">:</span> taskMessage<span class="op">,</span></a>
<a class="sourceLine" id="cb32-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb32-6" title="6"><span class="op">};</span></a></code></pre></div>
<p>It is best practice to use constants for action types, instead of string literals. Since the reducer depends on the action’s <code>type</code> to decipher different types of actions, a typo in the reducer or action specifying the type will go unseen. For example, imagine if the reducer needs an action with the type <code>CREATE_TASK</code> to perform the create operation, but there is a typo making the reducer listen for the type <code>'CREATE_TSAK'</code> instead. When an action of type <code>CREATE_TASK</code> is dispatched, it will never be evaluated by the reducer listening for an action of type <code>'CREATE_TSAK'</code>. Creating constants for string literals ensures that an error will be thrown for action type typos.</p>
<p>Define a constant for the <code>CREATE_TASK</code> string. Make sure to define the constant before defining your <code>tasksReducer</code>, otherwise you’ll receive <code>ReferenceError: CREATE_TASK is not defined</code> when you dispatch an action. At this point, your file should look something like this:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb33-1" title="1"><span class="kw">const</span> <span class="op">{</span> createStore <span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;redux&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-2" title="2"></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="kw">const</span> CREATE_TASK <span class="op">=</span> <span class="st">&#39;CREATE_TASK&#39;</span><span class="op">;</span></a>
<a class="sourceLine" id="cb33-4" title="4"></a>
<a class="sourceLine" id="cb33-5" title="5"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-6" title="6">  <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch statement to manage actions based on type</span></a>
<a class="sourceLine" id="cb33-7" title="7"><span class="op">};</span></a>
<a class="sourceLine" id="cb33-8" title="8"></a>
<a class="sourceLine" id="cb33-9" title="9"><span class="kw">const</span> store <span class="op">=</span> <span class="at">createStore</span>(tasksReducer)<span class="op">;</span></a>
<a class="sourceLine" id="cb33-10" title="10"></a>
<a class="sourceLine" id="cb33-11" title="11"><span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-12" title="12">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb33-13" title="13">    <span class="dt">type</span><span class="op">:</span> CREATE_TASK<span class="op">,</span></a>
<a class="sourceLine" id="cb33-14" title="14">    <span class="dt">taskMessage</span><span class="op">:</span> taskMessage<span class="op">,</span></a>
<a class="sourceLine" id="cb33-15" title="15">  <span class="op">};</span></a>
<a class="sourceLine" id="cb33-16" title="16"><span class="op">};</span></a></code></pre></div>
<p>You can also have the function implicitly return by removing the function’s curly braces and wrapping the action object’s curly braces with parentheses. The <code>createTask</code> code below has the exact same functionality as the code above:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb34-1" title="1"><span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> (<span class="op">{</span></a>
<a class="sourceLine" id="cb34-2" title="2">  <span class="dt">type</span><span class="op">:</span> CREATE_TASK<span class="op">,</span></a>
<a class="sourceLine" id="cb34-3" title="3">  taskMessage<span class="op">,</span></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="op">}</span>)<span class="op">;</span></a></code></pre></div>
<p>Although the code looks shorter and cleaner, note that you are unable to use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/debugger">debugger statement</a> to debug a function when it is implicitly returning. You can use the VS Code debugger to set a breakpoint, but you won’t be able to set a breakpoint with the <code>debugger</code> statement.</p>
<p>When working on your React-Redux projects in the future, it’ll be helpful to keep the <code>return</code> statement so you can easily place a breakpoint with the <code>debugger</code> statement to debug the action creator function and make sure a specific action is actually being dispatched.</p>
<p>Now that you have set up a <code>createTask</code> action creator, follow the same pattern to set up a <code>deleteTask</code> action creator that takes in a <code>taskId</code>. The <code>resetTaskList</code> action creator will be a little different. You’ll still follow the pattern of setting a <code>type</code> for the action, but the <code>resetTaskList</code> function will not take any parameters. The action will simply have a <code>type</code> property and a <code>emptyTaskList</code> property set to an empty array:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb35-1" title="1"><span class="kw">const</span> resetTaskList <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb35-2" title="2">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb35-3" title="3">    <span class="dt">type</span><span class="op">:</span> RESET_TASK_LIST<span class="op">,</span></a>
<a class="sourceLine" id="cb35-4" title="4">    <span class="dt">emptyTaskList</span><span class="op">:</span> []<span class="op">,</span></a>
<a class="sourceLine" id="cb35-5" title="5">  <span class="op">};</span></a>
<a class="sourceLine" id="cb35-6" title="6"><span class="op">};</span></a></code></pre></div>
<h3 id="reducer-1">Reducer</h3>
<p>It’s time to circle back and finish implementing the <code>tasksReducer</code>! Begin by setting up a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/switch">switch</a> statement that evaluates a case statement based on the <code>action.type</code>.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb36-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb36-3" title="3">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `createTask` action</span></a>
<a class="sourceLine" id="cb36-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `deleteTask` action</span></a>
<a class="sourceLine" id="cb36-5" title="5">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `resetTaskList` action</span></a>
<a class="sourceLine" id="cb36-6" title="6">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up default switch case</span></a>
<a class="sourceLine" id="cb36-7" title="7">  <span class="op">}</span></a>
<a class="sourceLine" id="cb36-8" title="8"><span class="op">};</span></a></code></pre></div>
<p>Let’s begin by setting up the default switch case. By default, you always want to return the default <code>state</code> argument passed into the reducer:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb37-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb37-3" title="3">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `createTask` action</span></a>
<a class="sourceLine" id="cb37-4" title="4">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `deleteTask` action</span></a>
<a class="sourceLine" id="cb37-5" title="5">    <span class="co">// </span><span class="al">TODO</span><span class="co">: Set up switch case for `resetTaskList` action</span></a>
<a class="sourceLine" id="cb37-6" title="6">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb37-7" title="7">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb37-8" title="8">  <span class="op">}</span></a>
<a class="sourceLine" id="cb37-9" title="9"><span class="op">};</span></a></code></pre></div>
<p>Now let’s set up the <code>case</code> statements for each action type. You have three task actions, so you’ll set up three case statements. As a reminder, you set up the action types with constants to make sure typos in the reducer’s <code>case</code> statements throw an error. Use the constants in the switch statement:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb38-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb38-3" title="3">    <span class="cf">case</span> <span class="dt">CREATE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb38-4" title="4">      <span class="co">// </span><span class="al">TODO</span><span class="co">: Define what happens when a `createTask` action is dispatched</span></a>
<a class="sourceLine" id="cb38-5" title="5">    <span class="cf">case</span> <span class="dt">DELETE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb38-6" title="6">      <span class="co">// </span><span class="al">TODO</span><span class="co">: Define what happens when a `deleteTask` action is dispatched</span></a>
<a class="sourceLine" id="cb38-7" title="7">    <span class="cf">case</span> <span class="dt">RESET_TASK_LIST</span><span class="op">:</span></a>
<a class="sourceLine" id="cb38-8" title="8">      <span class="co">// </span><span class="al">TODO</span><span class="co">: Define what happens when a `resetTaskList` action is dispatched</span></a>
<a class="sourceLine" id="cb38-9" title="9">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb38-10" title="10">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb38-11" title="11">  <span class="op">}</span></a>
<a class="sourceLine" id="cb38-12" title="12"><span class="op">};</span></a></code></pre></div>
<p>As a reminder, the reducer function is called every time an action is dispatched. This means that the <code>tasksReducer</code> function will be invoked whenever an action is dispatched. It’s now time to write code to handle each specific action type and define what happens when actions of different types are dispatched!</p>
<h4 id="create_task-case-statement"><code>CREATE_TASK</code> case statement</h4>
<p>Under the case statement for <code>CREATE_TASK</code>, you’ll want to return an updated version of the reducer’s state tree, with the new task. As a reminder, the Redux store’s state should be immutable - this means you should never mutate the <code>state</code> array directly.</p>
<p>Begin by generating a <code>newTask</code> object based on the action’s <code>taskMessage</code> property:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb39-2" title="2">  <span class="dt">message</span><span class="op">:</span> <span class="va">action</span>.<span class="at">taskMessage</span><span class="op">,</span></a>
<a class="sourceLine" id="cb39-3" title="3"><span class="op">};</span></a></code></pre></div>
<p>Since you don’t want to directly mutate the <code>state</code> array, you don’t want to <code>push</code> the <code>newTask</code> directly into the <code>state</code> array. Instead, you can use spread syntax to return an updated state with <code>newTask</code> set as the last array element in a new array:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb40-1" title="1"><span class="cf">case</span> CREATE_TASK<span class="op">:</span></a>
<a class="sourceLine" id="cb40-2" title="2">  <span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb40-3" title="3">    <span class="dt">message</span><span class="op">:</span> <span class="va">action</span>.<span class="at">taskMessage</span><span class="op">,</span></a>
<a class="sourceLine" id="cb40-4" title="4">  <span class="op">};</span></a>
<a class="sourceLine" id="cb40-5" title="5">  <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> newTask]<span class="op">;</span></a></code></pre></div>
<h4 id="delete_task-case-statement"><code>DELETE_TASK</code> case statement</h4>
<p>Now let’s define what happens when a <code>DELETE_TASK</code> action is dispatched. As a reminder, the <code>deleteTask</code> action creator function takes in a <code>taskId</code> that actually references a task element’s index in the <code>state</code> array. In the <code>DELETE_TASK</code> case statement, you’ll use the index (the action’s <code>taskId</code> property) and the native <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice">Array.slice</a> method to return a copy of the state that excludes the task to delete:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb41-1" title="1"><span class="cf">case</span> DELETE_TASK<span class="op">:</span></a>
<a class="sourceLine" id="cb41-2" title="2">  <span class="kw">const</span> idx <span class="op">=</span> <span class="va">action</span>.<span class="at">taskId</span><span class="op">;</span></a>
<a class="sourceLine" id="cb41-3" title="3">  <span class="cf">return</span> [...<span class="va">state</span>.<span class="at">slice</span>(<span class="dv">0</span><span class="op">,</span> idx)<span class="op">,</span> ...<span class="va">state</span>.<span class="at">slice</span>(idx <span class="op">+</span> <span class="dv">1</span>)]<span class="op">;</span></a></code></pre></div>
<p>Using spread syntax and non-mutative methods are one of the many immutable update patterns you can use to update state without directly mutating it. Feel free to visit the official Redux documentation to view more <a href="https://redux.js.org/recipes/structuring-reducers/immutable-update-patterns#inserting-and-removing-items-in-arrays">immutable update patterns</a>.</p>
<h4 id="reset_task_list-case-statement"><code>RESET_TASK_LIST</code> case statement</h4>
<p>Now let’s define what happens when a <code>RESET_TASK_LIST</code> action is dispatched. As a reminder, the action has an <code>emptyTaskList</code> property that is an empty array, similar to the default state set by the reducer. You can simply return the <code>emptyTaskList</code> array to update the Redux store’s state. The <code>emptyTaskList</code> will replace the <code>state</code> array entirely.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb42-1" title="1"><span class="cf">case</span> RESET_TASK_LIST<span class="op">:</span></a>
<a class="sourceLine" id="cb42-2" title="2">  <span class="cf">return</span> <span class="va">action</span>.<span class="at">emptyTaskList</span><span class="op">;</span></a></code></pre></div>
<h2 id="phase-2-testing">Phase 2: Testing</h2>
<p>Start by creating an <code>app.js</code> file and importing <code>store</code>, <code>createTask</code>, <code>deleteTask</code>, and <code>resetTaskList</code> from the <code>reduxStoreActionReducer.js</code> file. Since this project is running within the native Node environment, you’ll need to use CommonJS module syntax (<code>require</code> and <code>module.exports</code>) to manage imports and exports within the project:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb43-1" title="1"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb43-2" title="2">  store<span class="op">,</span></a>
<a class="sourceLine" id="cb43-3" title="3">  createTask<span class="op">,</span></a>
<a class="sourceLine" id="cb43-4" title="4">  deleteTask<span class="op">,</span></a>
<a class="sourceLine" id="cb43-5" title="5">  resetTaskList<span class="op">,</span></a>
<a class="sourceLine" id="cb43-6" title="6"><span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./reduxStoreActionReducer&#39;</span>)<span class="op">;</span></a></code></pre></div>
<p>Before you begin dispatching actions to test the actions and reducer you have created, you’ll need to set up a way to log the Redux store and view its current state. You can use the <code>store.getState</code> method to access the Redux store’s current state and simply console log the Redux store’s state that was retrieved. To make your logging more clear, you can even add a message labeling the status of the store logged. After the imports at the top of your <code>app.js</code> file, log the initial state of the Redux store (an empty task list) with the following <code>console.log</code> statements:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb44-1" title="1"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Default Redux Store (empty task list):&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb44-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a></code></pre></div>
<p>At this point, take a moment to run your Node application by running the follow terminal statement from the root of the project directory:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb45-1" title="1"><span class="ex">node</span> app.js</a></code></pre></div>
<p>You should see the following output in your terminal:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb46-1" title="1"><span class="ex">Default</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb46-2" title="2">[]</a></code></pre></div>
<blockquote>
<p>Notice how you are currently using <code>console.log</code> statements to test and debug your code. Later in the project, you’ll get a chance to investigate your code with the VS Code debugger to gain more context and insight about your code and its variable values.</p>
</blockquote>
<h3 id="dispatch-the-create_task-action">Dispatch the <code>CREATE_TASK</code> action</h3>
<p>Now you can test whether you can actually create a task by using the <code>store.dispatch</code> method to dispatch the <code>CREATE_TASK</code> action. Invoke the <code>createTask</code> action creator function with a task message, and then dispatch the invoked action. As a reminder, dispatching the action will "send" it through the reducer (in this case, the <code>tasksReducer</code>) and determine what operation to perform based on the action’s <code>type</code> property.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb47-1" title="1"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;walk dog&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb47-2" title="2"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;feed cat&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb47-3" title="3"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;talk to bird&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb47-4" title="4"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;watch goldfish&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb47-5" title="5"></a>
<a class="sourceLine" id="cb47-6" title="6"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Redux Store:&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb47-7" title="7"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a></code></pre></div>
<p>Now run your application with <code>node app.js</code> and you should see the following output in your terminal:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb48-1" title="1"><span class="ex">Default</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb48-2" title="2">[]</a>
<a class="sourceLine" id="cb48-3" title="3"><span class="ex">Redux</span> Store:</a>
<a class="sourceLine" id="cb48-4" title="4"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> },</a>
<a class="sourceLine" id="cb48-5" title="5">  { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb48-6" title="6">  { message: <span class="st">&#39;talk to bird&#39;</span> },</a>
<a class="sourceLine" id="cb48-7" title="7">  { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a></code></pre></div>
<p>That may have seemed like magic for now, but at the end of the project, you’ll walk-through your project’s code step-by-step to view what is really happening with the Redux cycle. For now, focus on understanding the idea of <em>dispatching an action</em>.</p>
<h3 id="dispatch-the-delete_task-action">Dispatch the <code>DELETE_TASK</code> action</h3>
<p>Now you can add the following code after your <code>CREATE_TASK</code> dispatch calls to dispatch a <code>DELETE_TASK</code> action and log the Redux store’s updated state:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb49-1" title="1"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">deleteTask</span>(<span class="dv">0</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb49-2" title="2"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">deleteTask</span>(<span class="dv">1</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb49-3" title="3"></a>
<a class="sourceLine" id="cb49-4" title="4"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Updated Redux Store:&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb49-5" title="5"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a></code></pre></div>
<p>Run your application with <code>node app.js</code> and you should see the following output in your terminal:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb50-1" title="1"><span class="ex">Default</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb50-2" title="2">[]</a>
<a class="sourceLine" id="cb50-3" title="3"><span class="ex">Redux</span> Store:</a>
<a class="sourceLine" id="cb50-4" title="4"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> },</a>
<a class="sourceLine" id="cb50-5" title="5">  { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb50-6" title="6">  { message: <span class="st">&#39;talk to bird&#39;</span> },</a>
<a class="sourceLine" id="cb50-7" title="7">  { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb50-8" title="8"><span class="ex">Updated</span> Redux Store:</a>
<a class="sourceLine" id="cb50-9" title="9"><span class="bu">[</span> { message: <span class="st">&#39;feed cat&#39;</span> }, { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a></code></pre></div>
<h3 id="dispatch-the-reset_task_list-action">Dispatch the <code>RESET_TASK_LIST</code> action</h3>
<p>Lastly, take a moment to test the dispatching of the <code>RESET_TASK_LIST</code> action and log the updated state by adding the following code after the <code>DELETE_TASK</code> dispatch calls:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb51-1" title="1"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">resetTaskList</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb51-2" title="2"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Reset Redux Store (empty task list):&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb51-3" title="3"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a></code></pre></div>
<p>If you run your application with <code>node app.js</code> and you should see the following output in your terminal:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="ex">Default</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb52-2" title="2">[]</a>
<a class="sourceLine" id="cb52-3" title="3"><span class="ex">Redux</span> Store:</a>
<a class="sourceLine" id="cb52-4" title="4"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> },</a>
<a class="sourceLine" id="cb52-5" title="5">  { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb52-6" title="6">  { message: <span class="st">&#39;talk to bird&#39;</span> },</a>
<a class="sourceLine" id="cb52-7" title="7">  { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb52-8" title="8"><span class="ex">Updated</span> Redux Store:</a>
<a class="sourceLine" id="cb52-9" title="9"><span class="bu">[</span> { message: <span class="st">&#39;feed cat&#39;</span> }, { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb52-10" title="10"><span class="ex">Reset</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb52-11" title="11">[]</a></code></pre></div>
<h3 id="subscribe-to-redux-store-updates">Subscribe to Redux store updates</h3>
<p>Instead of having multiple console log statements to log <code>store.getState()</code>, you can have your store subscribe to changes in the state with the <code>store.subscribe</code> method. Create a new <code>appWithSubscription.js</code> file with the following code to view how you can invoke <code>store.subscribe</code> so that the state is logged anytime the store is updated (i.e. anytime an action is dispatched).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb53-1" title="1"><span class="co">// ./appWithSubscription.js</span></a>
<a class="sourceLine" id="cb53-2" title="2"></a>
<a class="sourceLine" id="cb53-3" title="3"><span class="kw">const</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb53-4" title="4">  store<span class="op">,</span></a>
<a class="sourceLine" id="cb53-5" title="5">  createTask<span class="op">,</span></a>
<a class="sourceLine" id="cb53-6" title="6">  deleteTask<span class="op">,</span></a>
<a class="sourceLine" id="cb53-7" title="7">  resetTaskList<span class="op">,</span></a>
<a class="sourceLine" id="cb53-8" title="8"><span class="op">}</span> <span class="op">=</span> <span class="at">require</span>(<span class="st">&#39;./reduxStoreActionReducer&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb53-9" title="9"></a>
<a class="sourceLine" id="cb53-10" title="10"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Default Redux Store (empty task list):&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb53-11" title="11"><span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>())<span class="op">;</span></a>
<a class="sourceLine" id="cb53-12" title="12"></a>
<a class="sourceLine" id="cb53-13" title="13"><span class="va">store</span>.<span class="at">subscribe</span>(() <span class="kw">=&gt;</span> <span class="va">console</span>.<span class="at">log</span>(<span class="va">store</span>.<span class="at">getState</span>()))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-14" title="14"></a>
<a class="sourceLine" id="cb53-15" title="15"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Task creation actions&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb53-16" title="16"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;walk dog&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-17" title="17"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;feed cat&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-18" title="18"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;talk to bird&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-19" title="19"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">createTask</span>(<span class="st">&#39;watch goldfish&#39;</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-20" title="20"></a>
<a class="sourceLine" id="cb53-21" title="21"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Task deletion actions&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb53-22" title="22"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">deleteTask</span>(<span class="dv">0</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-23" title="23"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">deleteTask</span>(<span class="dv">1</span>))<span class="op">;</span></a>
<a class="sourceLine" id="cb53-24" title="24"></a>
<a class="sourceLine" id="cb53-25" title="25"><span class="va">console</span>.<span class="at">log</span>(<span class="st">&#39;Task reset action&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb53-26" title="26"><span class="va">store</span>.<span class="at">dispatch</span>(<span class="at">resetTaskList</span>())<span class="op">;</span></a></code></pre></div>
<p>Run your application with <code>node appWithSubscription.js</code> and you should see the following output. Notice how the state was logged four times under "Task creation actions" because of how four actions were dispatched, and the state was logged twice after "Task deletion actions" because of how two actions were dispatched.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1"><span class="ex">Default</span> Redux Store (empty task list)<span class="bu">:</span></a>
<a class="sourceLine" id="cb54-2" title="2">[]</a>
<a class="sourceLine" id="cb54-3" title="3"><span class="ex">Task</span> creation actions:</a>
<a class="sourceLine" id="cb54-4" title="4"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> }, { message: <span class="st">&#39;feed cat&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-6" title="6"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> },</a>
<a class="sourceLine" id="cb54-7" title="7">  { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb54-8" title="8">  { message: <span class="st">&#39;talk to bird&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-9" title="9"><span class="bu">[</span> { message: <span class="st">&#39;walk dog&#39;</span> },</a>
<a class="sourceLine" id="cb54-10" title="10">  { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb54-11" title="11">  { message: <span class="st">&#39;talk to bird&#39;</span> },</a>
<a class="sourceLine" id="cb54-12" title="12">  { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-13" title="13"><span class="ex">Task</span> deletion actions:</a>
<a class="sourceLine" id="cb54-14" title="14"><span class="bu">[</span> { message: <span class="st">&#39;feed cat&#39;</span> },</a>
<a class="sourceLine" id="cb54-15" title="15">  { message: <span class="st">&#39;talk to bird&#39;</span> },</a>
<a class="sourceLine" id="cb54-16" title="16">  { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-17" title="17"><span class="bu">[</span> { message: <span class="st">&#39;feed cat&#39;</span> }, { message: <span class="st">&#39;watch goldfish&#39;</span> }<span class="bu"> ]</span></a>
<a class="sourceLine" id="cb54-18" title="18"><span class="ex">Task</span> reset action:</a>
<a class="sourceLine" id="cb54-19" title="19">[]</a></code></pre></div>
<h3 id="debug-to-follow-the-redux-cycle">Debug to follow the Redux cycle</h3>
<p>Now that you’ve used <code>console.log</code> statements to thoroughly investigate your project, you can set up the VS Code debugger and add some breakpoints to follow the Redux cycle. You’ll use the breakpoints to investigate how invoking <code>store.dispatch</code> with the result from an action creator function directs the action to a specific switch case in the <code>tasksReducer</code> function. Start by creating a <code>.vscode</code> directory and a <code>launch.json</code> file to configure the VS Code debugger:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" title="1"><span class="fu">mkdir</span> .vscode <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> .vscode</a>
<a class="sourceLine" id="cb55-2" title="2"><span class="fu">touch</span> launch.json</a></code></pre></div>
<p>Paste the following configuration into your <code>launch.json</code> file:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode json"><code class="sourceCode json"><a class="sourceLine" id="cb56-1" title="1"><span class="fu">{</span></a>
<a class="sourceLine" id="cb56-2" title="2">  <span class="dt">&quot;version&quot;</span><span class="fu">:</span> <span class="st">&quot;0.2.0&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb56-3" title="3">  <span class="dt">&quot;configurations&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb56-4" title="4">    <span class="fu">{</span></a>
<a class="sourceLine" id="cb56-5" title="5">      <span class="dt">&quot;type&quot;</span><span class="fu">:</span> <span class="st">&quot;node&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb56-6" title="6">      <span class="dt">&quot;request&quot;</span><span class="fu">:</span> <span class="st">&quot;launch&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb56-7" title="7">      <span class="dt">&quot;name&quot;</span><span class="fu">:</span> <span class="st">&quot;Launch Program&quot;</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb56-8" title="8">      <span class="dt">&quot;skipFiles&quot;</span><span class="fu">:</span> <span class="ot">[</span></a>
<a class="sourceLine" id="cb56-9" title="9">        <span class="st">&quot;&lt;node_internals&gt;/**&quot;</span></a>
<a class="sourceLine" id="cb56-10" title="10">      <span class="ot">]</span><span class="fu">,</span></a>
<a class="sourceLine" id="cb56-11" title="11">      <span class="dt">&quot;program&quot;</span><span class="fu">:</span> <span class="st">&quot;${workspaceFolder}/app.js&quot;</span></a>
<a class="sourceLine" id="cb56-12" title="12">    <span class="fu">}</span></a>
<a class="sourceLine" id="cb56-13" title="13">  <span class="ot">]</span></a>
<a class="sourceLine" id="cb56-14" title="14"><span class="fu">}</span></a></code></pre></div>
<blockquote>
<p>As a reminder, VS Code can also auto-generate the <code>.vscode</code> directory and the <code>launch.json</code> for you. Feel free to visit the VS Code documentation for more on <a href="https://code.visualstudio.com/Docs/editor/debugging">debugging with VS Code</a>.</p>
</blockquote>
<p>You can follow your code when an action object is dispatched by setting breakpoints. You can also examine the action’s attributes by setting a breakpoint in the reducer. In the reducer, make sure to set the breakpoint within a <code>case</code> statement. For example, if you set a breakpoint in the <code>switch</code> statement, but <em>outside</em> of a <code>case</code> statement, you won’t ever hit the breakpoint set.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb57-1" title="1"><span class="co">// Example of bad `debugger` placement that will not work!</span></a>
<a class="sourceLine" id="cb57-2" title="2"></a>
<a class="sourceLine" id="cb57-3" title="3"><span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb57-4" title="4">  <span class="cf">debugger</span><span class="op">;</span></a>
<a class="sourceLine" id="cb57-5" title="5">  <span class="cf">case</span> <span class="dt">CREATE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb57-6" title="6">    <span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb57-7" title="7">      <span class="dt">message</span><span class="op">:</span> <span class="va">action</span>.<span class="at">taskMessage</span><span class="op">,</span></a>
<a class="sourceLine" id="cb57-8" title="8">    <span class="op">};</span></a>
<a class="sourceLine" id="cb57-9" title="9">    <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> newTask]<span class="op">;</span></a></code></pre></div>
<p>Take a moment to use the <code>debugger</code> keyword to set breakpoints in the <code>createTask</code> action creator and <code>CREATE_TASK</code> case statement in your <code>reduxStoreActionReducer.js</code> file:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb58-1" title="1"><span class="kw">const</span> tasksReducer <span class="op">=</span> (state <span class="op">=</span> []<span class="op">,</span> action) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb58-2" title="2">  <span class="cf">switch</span> (<span class="va">action</span>.<span class="at">type</span>) <span class="op">{</span></a>
<a class="sourceLine" id="cb58-3" title="3">    <span class="cf">case</span> <span class="dt">CREATE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb58-4" title="4">      <span class="cf">debugger</span></a>
<a class="sourceLine" id="cb58-5" title="5">      <span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb58-6" title="6">        <span class="dt">message</span><span class="op">:</span> <span class="va">action</span>.<span class="at">taskMessage</span><span class="op">,</span></a>
<a class="sourceLine" id="cb58-7" title="7">      <span class="op">};</span></a>
<a class="sourceLine" id="cb58-8" title="8">      <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> newTask]<span class="op">;</span></a>
<a class="sourceLine" id="cb58-9" title="9">    <span class="cf">case</span> <span class="dt">DELETE_TASK</span><span class="op">:</span></a>
<a class="sourceLine" id="cb58-10" title="10">      <span class="kw">const</span> idx <span class="op">=</span> <span class="va">action</span>.<span class="at">taskId</span><span class="op">;</span></a>
<a class="sourceLine" id="cb58-11" title="11">      <span class="cf">return</span> [...<span class="va">state</span>.<span class="at">slice</span>(<span class="dv">0</span><span class="op">,</span> idx)<span class="op">,</span> ...<span class="va">state</span>.<span class="at">slice</span>(idx <span class="op">+</span> <span class="dv">1</span>)]<span class="op">;</span></a>
<a class="sourceLine" id="cb58-12" title="12">    <span class="cf">case</span> <span class="dt">RESET_TASK_LIST</span><span class="op">:</span></a>
<a class="sourceLine" id="cb58-13" title="13">      <span class="cf">return</span> <span class="va">action</span>.<span class="at">emptyTaskList</span><span class="op">;</span></a>
<a class="sourceLine" id="cb58-14" title="14">    <span class="cf">default</span><span class="op">:</span></a>
<a class="sourceLine" id="cb58-15" title="15">      <span class="cf">return</span> state<span class="op">;</span></a>
<a class="sourceLine" id="cb58-16" title="16">  <span class="op">}</span></a>
<a class="sourceLine" id="cb58-17" title="17"><span class="op">};</span></a></code></pre></div>
<div class="sourceCode" id="cb59"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb59-1" title="1"><span class="kw">const</span> createTask <span class="op">=</span> (taskMessage) <span class="kw">=&gt;</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb59-2" title="2">  <span class="cf">debugger</span></a>
<a class="sourceLine" id="cb59-3" title="3">  <span class="cf">return</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb59-4" title="4">    <span class="dt">type</span><span class="op">:</span> CREATE_TASK<span class="op">,</span></a>
<a class="sourceLine" id="cb59-5" title="5">    taskMessage<span class="op">,</span></a>
<a class="sourceLine" id="cb59-6" title="6">  <span class="op">};</span></a>
<a class="sourceLine" id="cb59-7" title="7"><span class="op">};</span></a></code></pre></div>
<p>Now you’ll be able to pause the running of your code to examine variables in the environment and view step-by-step updates to the Redux store’s <code>state</code> as your code is evaluated.</p>
<p>Open <code>app.js</code> as the active file in your VS Code workspace. Press <code>F5</code> and select <code>Node.js</code> as your environment - VS Code will try to run your currently active file in debug mode. This will allow you to follow each dispatched action and watch how each dispatched action updates the Redux store’s state.</p>
<p>As you step through each dispatched action, you’ll notice that there really is a <em>cycle</em>: an action is generated, then the action is dispatched to go through a reducer, and then the store is updated.</p>
<p>Here is a quick breakdown of what happens with the <code>CREATE_TASK</code> action is dispatched, to guide the navigation of using VS Code debugger to investigate the Redux cycle:</p>
<ol type="1">
<li>The <code>createTask</code> action creator function is invoked with the string <code>'walk dog'</code>.</li>
<li>The <code>createTask</code> function returns a POJO (known as an "action") with a <code>type</code> attribute and <code>taskMessage</code> properties. The POJO is structured like this:</li>
</ol>
<div class="sourceCode" id="cb60"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb60-1" title="1"><span class="op">{</span></a>
<a class="sourceLine" id="cb60-2" title="2">  <span class="dt">type</span><span class="op">:</span> <span class="st">&#39;CREATE_TASK&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb60-3" title="3">  <span class="dt">taskMessage</span><span class="op">:</span> <span class="st">&#39;walk dog&#39;</span><span class="op">,</span></a>
<a class="sourceLine" id="cb60-4" title="4"><span class="op">}</span></a></code></pre></div>
<ol start="3" type="1">
<li>The <code>store.dispatch</code> method is invoked to dispatch the action POJO and invoke the <code>tasksReducer</code> function. Since the POJO has a type of <code>CREATE_TASK</code>, the case statement for <code>CREATE_TASK</code> will be evaluated:</li>
</ol>
<div class="sourceCode" id="cb61"><pre class="sourceCode js"><code class="sourceCode javascript"><a class="sourceLine" id="cb61-1" title="1"><span class="cf">case</span> CREATE_TASK<span class="op">:</span></a>
<a class="sourceLine" id="cb61-2" title="2">  <span class="kw">const</span> newTask <span class="op">=</span> <span class="op">{</span></a>
<a class="sourceLine" id="cb61-3" title="3">    <span class="dt">message</span><span class="op">:</span> <span class="st">&#39;walk dog&#39;</span><span class="op">,</span> <span class="co">// This is `action.taskMessage`</span></a>
<a class="sourceLine" id="cb61-4" title="4">  <span class="op">};</span></a>
<a class="sourceLine" id="cb61-5" title="5">  <span class="cf">return</span> [...<span class="at">state</span><span class="op">,</span> newTask]<span class="op">;</span></a></code></pre></div>
<ol start="4" type="1">
<li>The store’s state is updated to be the new state returned by the reducer (<code>[...state, newTask]</code>).</li>
</ol>
<p>Congratulations! You have just created your first Redux store, reducer, and actions. You also learned more about what a reducer is doing by investigating with console log statements and debugging the project with the VS Code debugger.</p>
