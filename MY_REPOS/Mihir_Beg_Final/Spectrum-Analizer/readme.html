<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1250">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Untitled </title>
</head>

<body>

<h1>Overview and requirements</h1>

<h2>Overview</h2>

<p>AudioSpectrum is audio viewer and processor, which work in web
browser. It consists of the following modules:</p>

<ul>
    <li><strong>Spectrogram</strong> - display sound spectrogram.</li>
    <li><strong>Stereo scope</strong> - display side-mid or
        left-right in X-Y mode.</li>
    <li><strong>Filter</strong> - create finited-impulse-response
        brick-wall frequency filter.</li>
    <li><strong>Process control</strong> - set filter processing
        including brick-wall filter, adding noise and volume
        control and place frequency markers.</li>
    <li><strong>Playlist</strong> - play audio from file instead
        of live audio recording.</li>
</ul>

<p>Example AudioSpectrum pusposes:</p>

<ul>
    <li>Display audio spectrogram.</li>
    <li>Check if audio is stereophonic or monaural.</li>
    <li>Check stereo balance.</li>
    <li>Redirect audio from recording device to playing device.</li>
    <li>Apply lowpass/highpass/bandass filter.</li>
    <li>Change stereo base size.</li>
</ul>

<h2>Requirement and compatibility</h2>

<p>AudioSpectrum requires a web browser compatible with HTML5
WebAudio and LocalStorage, so it is compatible with current
version of Mozilla Firefox and Google Chrome for Windows and for
Android. This application will probably work with other PC and
mobile web browsers, but working in browsers other than mentioned
is not tested and not guaranteed.</p>

<h2>Settings screen</h2>

<p>The settings screen can be achieved by clicking on the graphic
screen in <strong>Spectrogram</strong>, <strong>Stereo scope</strong>
and <strong>Filter</strong> modules or by clicking the Settings
button in the remaining modules.</p>

<p>This screen, on the top and bottom contains the followin
buttons:</p>

<ul>
    <li><strong>Close</strong> - Close settings screen.</li>
    <li><strong>Pause</strong> - Pause and resume drawing on
        spectrogram and stereo scope, the audio will be processed
        in background.</li>
    <li><strong>Fullscreen</strong> - Switch the web browser to
        fullscreen mode.</li>
    <li><strong>Start/Stop</strong> - Start and stop audio
        capturing and processing.</li>
</ul>

<p>All number values are integer values. Some parameters has
value with fraction part, even can have only fraction value (for
example value from <strong>0.000</strong> do <strong>1.000</strong>).
Such parameters are indicated as <strong>x1000</strong>, which
means, that value in the field is a result of multiplication of
1000 and real value.</p>

<h2>Module layout settings</h2>

<p>Application modules are enumerated from 0 to 5. The module
layout can be changed in <strong>LAYOUT</strong> section. The <strong>Module
(0-5) order</strong> field provides visibility and order
configuration. The inputted numbers representes modules, which
are visible. The numer order determines module display order. The
other characters than digits from <strong>0</strong> to <strong>5</strong>
are ignored, also the second and further instances of the same
number are ignored.</p>

<p>Every module width matches screen wide, but the height can be
drfined either by percent of screen height or by size in pixels.
Each module has two fields to define size. The first field is the
size value, the second field is the size unit (pixels or
percent).</p>

<h2>General settings</h2>

<p>The informations and settings in <strong>GENERAL</strong>
section are not related to specified module and will affect all
application working.</p>

<p>The information values are:</p>

<ul>
    <li><strong>Input sample rate</strong> - Audio input sample
        rate, it depends on web browser implementation..</li>
    <li><strong>Output sample rate</strong> - Audio output sample
        rate, it depends on web browser implementation..</li>
    <li><strong>Screen resolution</strong> - Whole browser screen
        size, including toolbar, margins, etc.</li>
</ul>

<p>This section also contains the following settings:</p>

<ul>
    <li><strong>Drawing gamma x1000</strong> - Gamma values used
        to spectrogram and stereo scope level display.</li>
    <li><strong>Spectrum window type</strong> - Window type used
        to calculate Fourier transform used in spectrum.</li>
    <li><strong>Audio buffer size [samples]</strong> - Audio
        recording buffer size, it must be choosen experimentally.</li>
    <li><strong>Audio echo cancellation</strong> - Echo
        cancellation using WebAudio parameter (may not work in
        some web browsers).</li>
    <li><strong>Audio noise suppression</strong> - Noise
        suppression using WebAudio parameter (may not work in
        some web browsers).</li>
    <li><strong>Audio auto gain control</strong> - Auto gain
        control using WebAudio parameter (may not work in some
        web browsers).</li>
    <li><strong>Auto start</strong> - Auto audio start directly
        after application loaded. The <strong>Enabled</strong>
        option may not work in some web browsers. The <strong>Screen</strong>
        option causes, that the first click on screen will start
        audio instead of action assigned to clicked object. This
        option is usable when <strong>Enabled</strong> does not
        work.</li>
    <li><strong>Auto fullscreen</strong> - Auto switching to
        fullscreen mode, work the same way as <strong>Auto start</strong>.</li>
    <li><strong>Button font size [points]</strong> - Button font
        size in <strong>Spectrogram</strong>, <strong>Stereo
        scope</strong> and <strong>Filter</strong> modules.</li>
    <li><strong>Color picker</strong> - Enable or disable color
        picker in setting fields, which are color parameter. In
        some web browsers, which supports color-type fields,
        color choosing is limited and there is not possible to
        input arbitrary color channel values. When disabled,
        instead of color button there will be displayed text
        field and color value is represented in <strong>#RRGGBB</strong>
        pattern, where RR, GG, and BB are hexadecimal channel
        values.</li>
</ul>

<p>Some settings, either general settings, or settings related
with any module, requires restart autio capture (by <strong>Start/Stop</strong>
click) or restart application (by page refresh).</p>

<h2>Spectrogram, stereo scope, playback and filters settings</h2>

<p>All these settings are detailed in module descriptions.</p>

<h2>Reset settings and clear storage</h2>

<p>At the bottom of settings screen, there are several button,
which allows to restore default settings and clear saved data.
There buttons are:</p>

<ul>
    <li><strong>Reset layout settings</strong></li>
    <li><strong>Reset general settings</strong></li>
    <li><strong>Reset playback settings</strong></li>
    <li><strong>Reset spectrogram settings</strong></li>
    <li><strong>Reset stereo scope settings</strong></li>
    <li><strong>Reset filter settings</strong></li>
    <li><strong>Clear filter slots</strong></li>
    <li><strong>Clear process slots</strong></li>
    <li><strong>Clear frequency markers</strong></li>
    <li><strong>Clear strip coloring</strong></li>
</ul>

<p>Every buttons resets the settings as labeled. After clicking
any of these button, you have to restart AudioSpectrum by page
refresh to take effect.</p>

<h1>Spectrogram</h1>

<h2>Purpose</h2>

<p>This module shows audio spectrogram (spectrum in time). It can
be used to visualize many sounds, also it shows audio balance
using colors. This module can also be used to check, if input
device is ocerloaded or check audio frequency characteristics.</p>

<h2>Functions in main toolbar</h2>

<p>Spectrogram has following parameters, which value can be
changed using the following buttons in toolbar:</p>

<ul>
    <li><strong>Gain (G-, G+)</strong> - Sound gain, it should be
        set according to input sound volume to get signals enough
        perceptible (not too dark and not too bright).</li>
    <li><strong>Resolution (R-, R+)</strong> - Frequency spectrum
        resolution, lower frequency resolution will result in
        higher time resolution, lower performance requirement and
        vice versa.</li>
    <li><strong>Window (W-, W+)</strong> - Part of window used to
        calculate spectrum without changing resolution, changing
        result is similar to changing resolution, but spectrum
        will be smoother and this setting not affects in
        performance requirement.</li>
    <li><strong>Zoom (Z-, Z+)</strong> - Vertical spectrum size.</li>
    <li><strong>Offset (O-, O+)</strong> - Vertical spectrum
        position.</li>
    <li><strong>Step (S-, S+)</strong> - Number of samples per
        one pixel, the lower step will result in higher speed in
        drawing, so the more details will be perceptible.</li>
    <li><strong>Base (B-, B+)</strong> - Brightness of zero
        value, used to highlight weak signals or hide uniform
        noise without gain changing.</li>
    <li><strong>Min/Max (M-, M+)</strong> - Number of values used
        to display minimum (negative) or maximum (positive)
        value, it can highlight weak signals in some cases.</li>
    <li><strong>Lines (L-, L+)</strong> - Number of lines
        (tracks) displayed once.</li>
</ul>

<p>On the both buttons in evry pair above, the number represents
the current parameter value. The toolbar has also the following
functions:</p>

<ul>
    <li><strong>Disp</strong> - Switch between spectrum and
        waveform or switch between display modes. There are nine
        possible states, each state is the pair of:<ul>
            <li><strong>View mode</strong> - The way, in which
                graph is displayed:<ul>
                    <li><strong>Normal</strong> - Draw
                        sequentially from left to right.</li>
                    <li><strong>Half</strong> - Draw additional
                        line moved by half of screen width.</li>
                    <li><strong>Scroll</strong> - Scroll
                        spectrogram from right to left, draw at
                        the right side.</li>
                </ul>
            </li>
            <li><strong>Graph type</strong> - The graph type,
                which is generated and displayed:<ul>
                    <li><strong>Spec</strong> - Spectrogram.</li>
                    <li><strong>Wave</strong> - Audio waveform.</li>
                    <li><strong>Vol</strong> - Volume unit as
                        rectified waveform.</li>
                </ul>
            </li>
        </ul>
    </li>
    <li><strong>Pause</strong> - Pause or resume spectrum drawing
        without turning off audio input, if audio input is not
        turned on, it will be turned on.</li>
</ul>

<h2>Functions on logarithm toolbar</h2>

<p>In spectrogram settings, you can enable additional toolbar,
which allows to enable and adjust logarithmic display. The
buttons has the following functions:</p>

<ul>
    <li><strong>Mode</strong> - Switch between two states of
        logarithm toolbar. This function does not affect the
        display, but determines the value type, which will be
        affected, when you click the other buttons.<ul>
            <li><strong>Freq</strong> - Use toolbar to set the
                frequency scale settings.</li>
            <li><strong>Ampl</strong> - Use toolbar to set the
                amplitude scale settings.</li>
        </ul>
    </li>
    <li><strong>Scale</strong> - Switch between linear and
        logarithic scale of frequency or amplitude. This function
        affects spectrogram only. The waveform or volume display
        will not be changed.<ul>
            <li>Line - The linear scale. The <strong>Base</strong>,
                <strong>Factor</strong> and <strong>Offset</strong>
                parameters will not affect the scale.</li>
            <li>Log - The logarithmic scale. Use the the <strong>Base</strong>,
                <strong>Factor</strong> and <strong>Offset</strong>
                parameters to adjust the scale.</li>
        </ul>
    </li>
    <li><strong>Base (B-, B+)</strong> - Base of logarithm.</li>
    <li><strong>Factor (F-, F+)</strong> - The factor of
        logarithm value result.</li>
    <li><strong>Offset (O-, O+)</strong> - The logarithm value
        offset.</li>
    <li><strong>Step (S-, S+)</strong> - Step of base, factor and
        offset change at once button click.</li>
</ul>

<p>If the scale for frequency or amplitude is set to logarithmic,
the buttons on the main toolbar will have the same effect. The
logarithmic scale means only changing frequency or amplitude
values using logarithmic function and for this reason, you have
to adjust the logarithmic display using <strong>Base</strong>, <strong>Factor</strong>
and <strong>Offset</strong> parameters. You can disable logarithm
toolbar after setting the logarithmic scale.</p>

<h2>Waveform display</h2>

<p>Using <strong>Disp</strong> button, you can display waveform
to check, if audio device is correctly drived, so if audio signal
is present, not too low and not clipped. In waveform mode,
display controls other than <strong>Resolution</strong>,<strong>
Window</strong> and <strong>Min/Max</strong> works in the same
way, as in spectrum mode. The <strong>Resolution</strong> and <strong>Window</strong>
control not affects in waveform display. The <strong>Min/Max</strong>
changes number of steps to display maximum value to get maximum
sample values more perceptible The negative and positive value
will give the same result, the <strong>0</strong> value is
treated as <strong>1</strong> in waveform mode.</p>

<h2>Settings</h2>

<p>The informations and settings related to spectrogram module
are in the <strong>SPECTROGRAM</strong> section:</p>

<ul>
    <li><strong>Canvas resolution</strong> - Real spectrogram
        canvas resolution after pixel scaling.</li>
    <li><strong>Decimated sample rate</strong> - Spectrogram
        audio sample rate after decimation.</li>
    <li><strong>Sample decimation</strong> - Samplerate divider
        to get lower audio sample, which requires lower
        performance, the value of input samples are averaged.</li>
    <li><strong>Spectrum window type</strong> - Window type used
        to calculate Fourier transform used in spectrum.</li>
    <li><strong>Canvas orientation</strong> - Whole canvas
        clockwise rotation with flipping or without flipping,
        usable especially on some mobile devices with locked
        screen automatic rotation. The flipping means swapping
        graphics drawing axes.</li>
    <li><strong>Spectrum band flip</strong> - Spectrogram band
        flipping to change frequency and offset increasing
        direction.</li>
    <li><strong>Logarithm quality</strong> - The quality of
        drawing when frequency scale is in logarithm mode, this
        slightly affects the requirement performance. There are
        three modes:<ul>
            <li><strong>Low</strong> - No interpolation across
                full frequency scale.</li>
            <li><strong>Medium</strong> - Interpolation in higher
                frequencies, where one display pixel is assigned
                to several calculated pixels.</li>
            <li><strong>High</strong> - Interpolation across full
                frequency scale. This mode is recommended.</li>
        </ul>
    </li>
    <li><strong>Toolbar position</strong> - Visibility and
        position of toolbar on module area. It is possible to
        display in 2-row or 4-row layout.</li>
    <li><strong>Logarithm toolbar</strong> - Display the
        logarithm toolbar next to the spectrogram main toolbar.
        This toolbar is necessary to change display scale and
        adjust logarithmic scale display.</li>
    <li><strong>Toolbar size [%]</strong> - Tool bar size as
        module size percentage.</li>
    <li><strong>Decimate below step</strong> - Minimal step
        value, when spectrum is calculated for every step. If
        step size is less than this value, the spectrum will be
        repeated, so performance requirement will be lower, but
        spectrum time detail display will be slightly lower. This
        value is usable in displaying lower spectrum steps with
        fast drawing, when the lower spectrum steps than this
        value will require only slighty higher performance.</li>
    <li><strong>Decimate above resolution</strong> - Maximum
        resolution value, when spectrum is calculated for every
        step. If resolution is greater than this value, the
        spectrum will be repeated, so performance requirement
        will be lower, but spectrum time detail display will be
        slightly lower. This value is usable in displaying higher
        spectrum resolutions with fast drawing, when the higher
        spectrum resolutions than this value will require only
        slighty higher performance.</li>
    <li><strong>Scroll decimate below step</strong> - Decimate
        below this step, within the scrolling display mode, when
        the decimation determined by <strong>Decimate below step</strong>
        and <strong>Decimate above resolution</strong> are less
        than decimation determined by <strong>Scroll decimate
        below step</strong>. The scrolling requires significantly
        more performance than normal or half line mode.</li>
    <li><strong>Canvas width scale</strong> - Scale canvas pixel
        width, usable if screen pixels are very small and may
        decrease performance requirement.</li>
    <li><strong>Canvas height scale</strong> - Scale canvas pixel
        height, usable if screen pixels are very small and may
        decrease performance requirement</li>
    <li><strong>Pointer strip size</strong> - Pointer strip width
        in pixels.</li>
    <li><strong>Pointer strip color</strong> - Pointer strip
        color value.</li>
    <li><strong>Input overdrive threshold x1000</strong> -
        Absolute 16-bit sample value, wher audio input overdrive
        will be indicated. Some overdriven audio devices
        generates sample absolute values slighty lower than
        1.0/-1.0, so the value must be slightly lower than
        maximum absolute sample value. To turn off overdrive
        indicator, set this value above 1000, which means 1.0.</li>
    <li><strong>Output overdrive threshold x1000</strong> -
        Absolute 16-bit sample value, wher audio output overdrive
        will be indicated. Incorrectly set audio processing can
        generate sample values higher than maximum, this will
        make output audio distortion. To turn off overdrive
        indicator, set this value above 1000, which means 1.0.</li>
    <li><strong>Overdrive color</strong> - Overdrive indicator
        color.</li>
    <li><strong>Overdrive opacity</strong> - Overdrive indicator
        opacity from 0 to 255, if value is 0, the indicator will
        not be visible, if value is 255, the indicator will be
        opaque.</li>
    <li><strong>Waveform background level</strong> - Simulated
        spectrogram level for background in waveform mode from 0
        to 65535.</li>
    <li><strong>Waveform foreground level</strong> - Simulated
        spectrogram level for foreground in waveform mode from 0
        to 65535.</li>
    <li><strong>Repaint length [samples]</strong> - Number of
        samples, which can be repainted backward in every action,
        which affects spectrogram/waveform display. This value
        affects the range of repainting backward.</li>
    <li><strong>Repaint step [pixels]</strong> - Number of audio
        steps (pixels), which will be repainted by one current
        audio step. It value must be choosen experimentally, the
        higher value will result by faster repainting, but
        requires higher performance.</li>
    <li><strong>Audio channel R</strong> - Audio channel
        assignment to red color channel.</li>
    <li><strong>Audio channel G</strong> - Audio channel
        assignment to green color channel.</li>
    <li><strong>Audio channel B</strong> - Audio channel
        assignment to blue color channel.</li>
    <li><strong>Audio gain R x1000</strong> - Red color channel
        value gain, usable to change color tint. This value may
        not to be confused with spectrum gain.</li>
    <li><strong>Audio gain G x1000</strong> - Green color channel
        value gain, usable to change color tint. This value may
        not to be confused with spectrum gain.</li>
    <li><strong>Audio gain B x1000</strong> - Blue color channel
        value gain, usable to change color tint. This value may
        not to be confused with spectrum gain.</li>
    <li><strong>Marker size</strong> - Frequency marker line
        width on spectrogram. This actual marker line width will
        be rounded to nearest multiply of frequency pixel size.</li>
</ul>

<h1>Stereo scope</h1>

<h2>Purpose</h2>

<p>This module displays sound as X-Y scope. It can display input
audio or output audio or combined both streams simirally like
analog oscilloscope. The axis can be treated as audio channels
(left and right) to display for example Lissajous curves or
&quot;vector graphics&quot; designed to display on oscilloscope
connected to audio output device. Insteat of Left/Right axis,
there can be displayed Side/Mid axis to better show, if audio is
monaural/stereophonic, stereo base or stereo balance. The input
device overloading can be shown by display signal very close to
canvas edge, while edge represents the maximum audio value, while
the gain for X and Y is set to 1.</p>

<h2>Functions in toolbar</h2>

<p>The Stereo scope module has toolbar, in where there are
buttons, which changes display parameters, the value will be
changed by <strong>Step</strong> value, the buttons are in pais:</p>

<ul>
    <li><strong>X-, X+, Y-, Y+, Z-, Z+</strong> - Sound gain
        across X/Y/Z axis.</li>
    <li><strong>Dim-, Dim+</strong> - Display dimming factor, the
        canvas dims by multiplying every pixel value by dimming
        factor, until pixel value is blow 0.001, when is visible
        as black.</li>
    <li><strong>Pxl-, Pxl+</strong> - Chabge pixel drawing radio.
        When <strong>0.000</strong>, there will be drew lines
        between value points only, when <strong>1.000</strong>,
        there will be drew pixels, which represents sample value.
        The other values means proportionally combining the both
        approaches.</li>
    <li><strong>Step-, Step+</strong> - Change value change for
        above parameters.</li>
</ul>

<p>The other buttons are toggles between display modes and can
have one of several captions, which represents the current state:</p>

<ul>
    <li><strong>SM/LR</strong> - Switch between Side-Mid or
        Left-Right display mode.</li>
    <li><strong>XY/YX</strong> - Swap axis.</li>
    <li><strong>X</strong> - Change X axis value increasion
        direction.</li>
    <li><strong>Y</strong> - Change Y axis value increasion
        direction.</li>
</ul>

<h2>Settings</h2>

<p>The settings related to spectrogram module are in the <strong>STEREO
SCOPE</strong> section:</p>

<ul>
    <li><strong>Canvas width</strong> - Canvas width in pixels,
        its impacts to required computing performance.</li>
    <li><strong>Canvas height</strong> - Canvas height in pixels,
        its impacts to required computing performance.</li>
    <li><strong>Canvas width scale</strong> - Canvas pixel width,
        its not impacts to computing.</li>
    <li><strong>Canvas height scale</strong> - Canvas pixel
        height, its not impacts to computing.</li>
    <li><strong>Dimming factor x1000</strong> - Display dimming
        factor, it can be changed from toolbar.</li>
    <li><strong>Dimming decimation</strong> - Display dimming
        decimation, its not impacts to display diming duration,
        but impacts to required computing performance.</li>
    <li><strong>X gain x1000</strong> - Sound gain across X axis,
        it can be changed from toolbar.</li>
    <li><strong>Y gain x1000</strong> - Sound gain across Y axis,
        it can be changed from toolbar.</li>
    <li><strong>Z gain x1000</strong> - Sound gain across Z axis
        (brightness), it can be changed from toolbar.</li>
    <li><strong>Pixel factor x1000</strong> - Pixel drawing radio
        for one sample, it can be changed from toolbar.</li>
    <li><strong>Toolbar position</strong> - Stereo scope toolbar
        position.</li>
    <li><strong>Toolbar size [%]</strong> - Stereo scope toolbar
        size.</li>
    <li><strong>Background color</strong> - Background color
        outside of canvas.</li>
    <li><strong>Audio R</strong> - Audio stream displayed as red
        color channel.</li>
    <li><strong>Audio G</strong> - Audio stream displayed as
        green color channel.</li>
    <li><strong>Audio B</strong> - Audio stream displayed as blue
        color channel.</li>
</ul>

<h1>Filter</h1>

<h2>Purpose</h2>

<p>AudioSpectrum has a ability to record and play processed audio
in real time. Within processing, there can be user up to 4
brick-wall filters. Each filter is a finited-impulse-response
filter, which windows size and windowing function can be defined
and affects the required performance, audio latency and filtering
accuracy. Each filter is defined by frequency characteristics and
can act as for example lowpass filter, highpass filter or
parametric equalizer.</p>

<h2>Abilities and visualization</h2>

<p>AudioSpectrum can store 4 filter definitions in 4 slots with
independed properties. The frequency axis may be divided into
segment with independed values, while positive value means
amplifying and negative value means damping signal across
specified frequencies. On the graph there is displayed 0 value as
horizontal line across whole frequency range. The frequency range
is from 0 to half value of input sample rate. There also draew
theoretical response, which is defined be user and practical
response, which is computed as FFT of generated filter serie,
including windowing function and window size.</p>

<h2>Functions in toobar</h2>

<p>The toolbar has the following buttons, which has constant
function:</p>

<ul>
    <li><strong>Slot 0</strong>, <strong>Slot 1,</strong> <strong>Slot
        2</strong>, <strong>Slot 3</strong> - Choode filter slot.</li>
    <li><strong>Step-, Step+</strong> - Chage filter frequency
        and value step, this also affects to value step in <strong>Process
        control</strong> module.</li>
    <li><strong>&lt;&lt;, &gt;&gt;</strong> - Select frequency
        band, the selected band will be show as thick level line,
        is is possible to select none of bands.</li>
</ul>

<p>The buttons available, when any band is selected:</p>

<ul>
    <li><strong>Add</strong> - Add ne wband by splitting selected
        band into two parts.</li>
    <li><strong>Rem</strong> - Remove selected band.</li>
    <li><strong>Level-, Level+</strong> - Change band level.</li>
    <li><strong>|&lt;, |&gt;</strong> - Change band lower
        frequency.</li>
    <li><strong>&lt;|, &gt;|</strong> - Change band upper
        frequency.</li>
</ul>

<p>The buttons available, when none of band is selected:</p>

<ul>
    <li><strong>None/Hamming/Blackman</strong> - Windowing
        formula.</li>
    <li><strong>Win-, Win+</strong> - Length of filtering window.</li>
    <li><strong>[+], [-]</strong> - Zoom in or zoom out filter
        view</li>
    <li><strong>[&lt;&lt;], [&gt;&gt;]</strong> - Move viewed
        part of filter, whet it is zoomed.</li>
</ul>

<h2>Changing the position value unit</h2>

<p>The default unit used in the filter band position is the
number of elementary units. You can change this unit to sound
frequency and from sound frequency. To do this, click the <strong>&lt;&lt;</strong>
or <strong>&gt;&gt;</strong> several times (not to be confused
with <strong>[&lt;&lt;]</strong> or <strong>[&gt;&gt;]</strong>)
to reach the state, when no band is selected and press the same
button one more time to select the opposite band. The filter
working will not be changed. The value using the selected unit is
displayed on the <strong>|&lt;</strong>, <strong>|&gt;</strong>, <strong>&lt;|</strong>
and <strong>&gt;|</strong> buttons (change band frequency).</p>

<h2>Settings</h2>

<p>The settings related to Filter module are in the <strong>FILTER</strong>
section:</p>

<ul>
    <li><strong>Filter canvas resolution</strong> - The filter
        canvas current resolution</li>
    <li><strong>Process filtering</strong> - Toggle audio
        processing, when Disabled, the inpus stream will be
        redirected to output without touching.</li>
    <li><strong>Toolbar position</strong> - Filter toolbar
        positin.</li>
    <li><strong>Toolbar size [%]</strong> - Filter toolbar size.</li>
    <li><strong>Filter min level [dB]</strong> - Minimum possible
        and visible filter level value.</li>
    <li><strong>Filter max level [dB]</strong> - Maximum possible
        and visible filter level value.</li>
    <li><strong>Filter FFT size</strong> - Displayed filter
        frequency response resolution.</li>
    <li><strong>Filter resolution</strong> - Input frequency
        response resolutin.</li>
    <li><strong>Filter canvas orientation</strong> - Filter
        canvas orientation.</li>
    <li><strong>Background color</strong> - Canvas background
        color.</li>
    <li><strong>Zero line color</strong> - Color of line, which
        displays 0dB level.</li>
    <li><strong>Spectrum color</strong> - Color of computed
        filter frequency response.</li>
    <li><strong>Level line color</strong> - Color of level line,
        which represent ideal frequency response and indicates
        input filter levels.</li>
    <li><strong>Marker size</strong> - Frequency marker line
        width on filter graph.</li>
</ul>

<p>The settings related to autio playback and processing are in
the <strong>PLAYBACK</strong> section:</p>

<ul>
    <li><strong>Play output audio</strong> - Generate and play
        output audio (directly or processed). If AudioSpectrun is
        used to visualize input audio, this settings should be
        set into <strong>No</strong>.</li>
    <li><strong>Min play buffer [ms]</strong> - Minumum playback
        buffer time.</li>
    <li><strong>Max play buffer [ms]</strong> - Maximum playback
        buffer time.</li>
    <li><strong>Soft margin [ms]</strong> - The margin from
        min/max bound, where player starts periodically adding or
        removing one sample per period.</li>
    <li><strong>Sample add/remove period</strong> - Number of
        samples, per which player adds or removes one sample,
        when real playback buffer reaches soft margin.</li>
    <li><strong>Draw buffer on spectrogram</strong> - Diagnostic
        function, draws buffer indicator over spectrogram canvas,
        where the lower display edge represents the minimum time
        and the upper display edge represents the maximum time.
        The spectrogram display zoom and offset does not matter.
        This function can visualize buffer time fluctuation
        during playback.</li>
    <li><strong>Buffer background shade</strong> - The shade of
        gray to draw soft min/max bounds and middle playback
        buffer lines.</li>
    <li><strong>Buffer foreground shade</strong> - The shade of
        gray to draw hard min/max bounds lines and real playback
        buffer time.</li>
    <li><strong>Mute audio playback</strong> - Mute audio
        playback (the sample values will be changed to zero
        directly before play) while playing live (recording)
        audio or audio from playlist or in both cases. There are
        the following modes:<ul>
            <li><strong>None</strong> - No mute audio.</li>
            <li><strong>Live</strong> - Mute live audio only, the
                audio from playlist will be generated.</li>
            <li><strong>Playlist</strong> - Mute audio playback
                from playlist, the live audio will be generated.</li>
            <li><strong>All</strong> - Mute both live audio and
                playback from playlist.</li>
        </ul>
    </li>
</ul>

<p>The playback timing can slighty differ from recording timing,
also due to perfomance-demanding activities. The playback buffer
is the time between aquire audio data pack to play and placing
the data in play timeline, so the times fluctuates during play.
This is very visible when drafing buffer on spectrogram is
enabled and allow to test buffer parameters. The <strong>Min play
buffer</strong> and <strong>Max play buffer</strong> defines the
hard play buffer bounds. When player is initialized, the first
playback buffer time equals to average time between hard bounds
and there is a middle time. The <strong>Soft margin</strong>
defines the soft buffer bounds. The lower soft bound is the lover
hard bound increased by soft margin, and the upper soft bound is
the upper hard bound decreased by soft margin.</p>

<p>During playing, there are possible the following scenarios:</p>

<ul>
    <li>When playback buffer time reaches beyond lower soft
        bound, for next audio chunks there will be added one
        sample (copied from previos sample) per certain period
        (the sound pitch may me slighty decreased), until the
        playback time will be upper than middle time.</li>
    <li>When playback buffer time reaches beyond upper soft
        bound, for next audio chunks there will be remover one
        sample per certain period (the sound pitch may me slighty
        increased), until the playback time will be lower than
        middle time.</li>
    <li>When playback buffer time reaches beyond lower or upper
        hard bound, the playback buffer time for next audio chunk
        will be changed to middle time and small distortion will
        be audible.</li>
</ul>

<h1>Process control</h1>

<h2>Puspose and abilities</h2>

<p>This module provides the audio processing configuration by
series of process transforms. There are available the following
transforms:</p>

<ul>
    <li><strong>Null</strong> - No transform.</li>
    <li><strong>Filter</strong> - Apply brick-wall filter, you
        can choose one of four filters for every audio channel,
        but is is recommended to define for left and right
        channel or for mid and side channel only. Otherwise,
        there are applied two filter processes, the first is
        filter for left and right channels, and the second
        process is filtering the mid and side channel. The <strong>~</strong>
        sign indicates no filter processing for this channel.</li>
    <li><strong>Volume</strong> - Change audio volume, balance,
        stereo base etc.</li>
    <li><strong>Noise</strong> - Add dual-channel white noise to
        audio. The volume of original audio will be not changed.</li>
    <li><strong>Invert L</strong> - Invert left channel phase.</li>
    <li><strong>Invert R</strong> - Invert right channel phase.</li>
    <li><strong>Swap stereo</strong> - Swap left and right
        channels.</li>
</ul>

<p>The other purpose of this module is setting frequency markers
to display.</p>

<h2>Creating transform list</h2>

<p>To add transform, you have to click <strong>Add before first</strong>
or <strong>Add after last</strong> button. The <strong>Settings</strong>
button brings screen of settings, the <strong>Step-</strong> and <strong>Step+</strong>
changes gain value change step. The transform is shown in table.
In the <strong>Transform</strong> column there are three buttons.
The first of them removes the transform and the other buttons
moves transform up or down across the table to change transform
order. The drop-down list allows to choose transform operation.
In the columns <strong>Left</strong>, <strong>Right</strong>, <strong>Mid</strong>
and <strong>Side</strong>, you can choose filter slot or change
gain for this channel. Sobe transforms has no parameters to
change.</p>

<h2>Saving and loading transform configurations</h2>

<p>Below the transform table, there are buttons, which allows to
save and load whole process configuration, including filter slots
into 10 slots from 0 to 9. This buttons are the following
function:</p>

<ul>
    <li><strong>Save X</strong> - Save process configuration into
        X slot.</li>
    <li><strong>Load X</strong> - Load configuration from X slot.</li>
    <li><strong>Clear X</strong> - Clear X slot.</li>
</ul>

<h2>Frequency markers</h2>

<p>In the <strong>Process control</strong> module, you can also
set up to 10 frequency markers, which will be displayed on the
spectrogram and on the filter graph. To display marker, check the
checkbox in the <strong>Marker</strong> column, next to the
number from 0 to 9. In the <strong>Color</strong> column, you can
define the marker color. The <strong>Value</strong> column
determines the place of the marker within filter and spectrogram
frequency range. The value is in one of the following units,
which can be choosen in the <strong>Unit</strong> column:</p>

<ul>
    <li><strong>Hz</strong> - The sound frequency value in <strong>Hertz</strong>,
        to set the specified sound frequency.</li>
    <li><strong>/10000</strong> - The 1 of 10000 parts, to set
        the placement as fraction of the whole band.</li>
    <li><strong>/8192</strong> - The 1 of 8192 parts, to set the
        placement as fraction of the whole band, the unit can
        help to place the marker accurately on the spectrogram by
        frequency pixels.</li>
</ul>

<h2>Spectrogram strip coloring section</h2>

<p>This section in <strong>Process control</strong> module allows
to put frequency marks on spetrogram strip. The marks are the
areas and can be periodical. The strip coloring is defined by
text. Each valid text line carries the information about strip
coloring. The invalid lines are ignored.</p>

<p>When you apply the text, it will be filtered as follows:</p>

<ol>
    <li>Split text into lines.</li>
    <li>Remove all character other than space, numbers, point,
        comma, arithmetic symbols (add, subtract, multiply,
        divide).</li>
    <li>Replace all commas to points, which allows use comma as
        decimal separator instead of point.</li>
    <li>Remove leading and trailing spaces.</li>
    <li>Replace multiplied spaces to single space.</li>
    <li>Split text line into array by spaces.</li>
</ol>

<p>There are two valid kinds of text lines:</p>

<ul>
    <li><strong>Base</strong> - Defines the base frequency and
        amount of periods, consists of five elements:<ul>
            <li><strong>Base frequency</strong> - the frequency,
                from which the markers will be calculated.</li>
            <li><strong>Addition or multiplication</strong> - The
                <strong>+</strong> or <strong>*</strong>
                character, which means, if the base frequency
                will be calculated by addition or multiplication.</li>
            <li><strong>Difference or factor between two
                frequencies</strong>:<ul>
                    <li>If addition: The difference from dwo
                        frequencies.</li>
                    <li>If multiplication: The factor, by which
                        the base frequency will be multiplied or
                        divided.</li>
                </ul>
            </li>
            <li><strong>Lower limit</strong> - The lower limit of
                base frequency change to repeat the markers, <strong>0</strong>
                means the base frequency.</li>
            <li><strong>Upper limit</strong> - The upper limit of
                base frequency change to repeat the markers, <strong>0</strong>
                means the base frequency.</li>
        </ul>
    </li>
    <li><strong>Marker</strong> - Defines one marker period and
        color, consists of seven elements:<ul>
            <li><strong>Operation for lower limit</strong> -
                Allowed characters are <strong>+</strong>, <strong>-</strong>,
                <strong>*</strong>, <strong>/</strong>.</li>
            <li><strong>Value for lower limit</strong> - The
                value, which will be added, subtracted,
                miltiplied or divided do base frequency or repeat
                equivalent.</li>
            <li><strong>Operation for upper limit</strong> -
                Allowed characters are <strong>+</strong>, <strong>-</strong>,
                <strong>*</strong>, <strong>/</strong>.</li>
            <li><strong>Value for upper limit</strong> - The
                value, which will be added, subtracted,
                miltiplied or divided do base frequency or repeat
                equivalent.</li>
            <li><strong>Red color value</strong> - Value from <strong>0</strong>
                do <strong>255</strong>.</li>
            <li><strong>Green color value</strong> - Value from <strong>0</strong>
                do <strong>255</strong>.</li>
            <li><strong>Blue color value</strong> - Value from <strong>0</strong>
                do <strong>255</strong>.</li>
        </ul>
    </li>
</ul>

<h2>Spectrogram strip coloring examples</h2>

<h3>Piano keyboard</h3>

<p>There is base frequency 440Hz, which determines the A tone
frequency. The 12 markers defines one octave and are in the
following order: C#, D#, F#, G#, A#, C, D, E, F, G, A, B.
Totally, there are 11 octaves, 5 octaves below base and 5 octaves
above base. To be more visible, the C, D, E tones have darker
shadow than remaining whole tones.</p>

<pre>440 * 2 -5 5
/ 1.63391545324110 / 1.54221082540794 0 0 0
/ 1.45565318284219 / 1.37395364745809 0 0 0
/ 1.22405354330466 / 1.15535269687227 0 0 0
/ 1.09050773266526 / 1.02930223664349 0 0 0
* 1.02930223664349 * 1.09050773266526 0 0 0
/ 1.73107312201229 / 1.63391545324110 160 160 160
/ 1.54221082540794 / 1.45565318284219 160 160 160
/ 1.37395364745809 / 1.29683955465101 160 160 160
/ 1.29683955465101 / 1.22405354330466 224 224 224
/ 1.15535269687227 / 1.09050773266526 224 224 224
/ 1.02930223664349 * 1.02930223664349 224 224 224
* 1.09050773266526 * 1.15535269687227 224 224 224</pre>

<h3>Octaves and thirds</h3>

<p>There are standard division acoustic into octaves, each octave
is individually divided to three thirds. The base frequency is
1000Hz and from this frequency there are 6 octaves in light gray
and there is second base 2000Hz to mark the remaining 5 octaves
in dark gray.</p>

<pre>1000 * 4 -3 2
* 1.12246204830937 * 1.41421356237310 224 224 224
/ 1.12246204830937 * 1.12246204830937 208 208 208
/ 1.41421356237310 / 1.12246204830937 224 224 224
2000 * 4 -3 1
* 1.12246204830937 * 1.41421356237310 32 32 32
/ 1.12246204830937 * 1.12246204830937 48 48 48
/ 1.41421356237310 / 1.12246204830937 32 32 32</pre>

<h3>100Hz periods</h3>

<p>The acoustic band from 0 to 25000Hz is divided into 100Hz
equal periods. The base frequency is 1000Hz and there is drawn
the marker distanced by 200Hz from base, 5 times below and 120
times above.</p>

<pre>1000 + 200 -5 120
- 50 + 50 192 192 192</pre>

<h1>Playlist</h1>

<h2>Purpose</h2>

<p>Instead of live input audio, AudioSpectrum has ability to play
sound files from playlist. In fact, while playing sound from
playlist, application also records sound from input device, but
recorded sample values are substituted by samples from loaded
sound file. This feature may be used to process audio from music
file without using external player or to &quot;display&quot;
sound designed to display on X-Y oscilloscope, in such case,
there will be processed samples directly from file, without
passing through audio devices.</p>

<h2>Creating and managing</h2>

<p>The playlist module provides the <strong>Settings</strong>
button, which prings the Settings screen and drop-down list,
which provides two options:</p>

<ul>
    <li><strong>Live audio</strong> - Audio from input device, in
        this mode the playlist is not used and playing is frozen.</li>
    <li><strong>Audio from playlist</strong> - Play audio from
        playlist, played audio will be treated as recorded input
        audio.</li>
</ul>

<p>To add files, you have to select file into field <strong>Add
audio files</strong>. The recognized files will be added to
playlist table and stored in internal memory. You can add several
files once. In the table there are the following columns:</p>

<ul>
    <li><strong>Operations</strong> - Buttons related to item,
        from left to right, there are <strong>Remove</strong>, <strong>Move
        up</strong> and <strong>Move down</strong>.</li>
    <li><strong>Index</strong> - Index number.</li>
    <li><strong>File name</strong> - Original file name.</li>
    <li><strong>Sample rate</strong> - Sample rate read from
        file.</li>
    <li><strong>Channels</strong> - Mono or stereo indicator.</li>
    <li><strong>Length</strong> - File length in samples.</li>
</ul>

<p>To manage playing files from playlist, you can use the buttons
above playlist table:</p>

<ul>
    <li><strong>|&lt;</strong> - Previous item</li>
    <li><strong>&lt;&lt;</strong> - Increase backward play speed
        or decrease forward playing speed.</li>
    <li><strong>&lt;</strong> - Play backward at base speed</li>
    <li><strong>[]</strong> - Stop playing</li>
    <li><strong>&gt;</strong> - Play forward at base speed</li>
    <li><strong>&gt;&gt;</strong> - Increase forward play speed
        or decrease backward playing speed.</li>
    <li><strong>&gt;|</strong> - Next item</li>
</ul>

<p>The playing base speed will be accord to recording sample
rate, not to file sample rate. The playlist storing is not
possible because JavaScript API does not provide automatically
loading files basen on the file path and name.</p>

<p><script language="JavaScript"
src="file:///media/xxx/WORK1/__ToBackup/Develop/HTML/HTML2MD/Prog/html2md.js"></script></p>
</body>
</html>
