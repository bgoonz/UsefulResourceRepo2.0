<a href="../index.html" class="navbar__brand"><img src="../official/d33wubrfki0l68.cloudfront.net/0834d0215db51e91525a25acf97433051f280f2f/c30f5/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo" /><strong>Redux</strong></a>

<a href="../introduction/getting-started.html" class="navbar__item navbar__link">Getting Started</a><a href="../tutorials/essentials/part-1-overview-concepts.html" class="navbar__item navbar__link">Tutorial</a><a href="../api/api-reference.html" class="navbar__item navbar__link">API</a><a href="../faq.html" class="navbar__item navbar__link">FAQ</a><a href="../style-guide/style-guide.html" class="navbar__item navbar__link">Best Practices</a><a href="../official/github.com/reduxjs/redux.html" class="navbar__item navbar__link">GitHub</a><a href="../introduction/getting-started.html#help-and-discussion" class="navbar__item navbar__link">Need help?</a>

<span class="toggle_71bT">ðŸŒœ</span>

<span class="toggle_71bT">ðŸŒž</span>

<span class="DocSearch-Button-Placeholder">Search</span>

<a href="../index.html" class="navbar__brand"><img src="../official/d33wubrfki0l68.cloudfront.net/0834d0215db51e91525a25acf97433051f280f2f/c30f5/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo" /><strong>Redux</strong></a>

- <a href="../introduction/getting-started.html" class="menu__link">Getting Started</a>
- <a href="../tutorials/essentials/part-1-overview-concepts.html" class="menu__link">Tutorial</a>
- <a href="../api/api-reference.html" class="menu__link">API</a>
- <a href="../faq.html" class="menu__link">FAQ</a>
- <a href="../style-guide/style-guide.html" class="menu__link">Best Practices</a>
- <a href="../official/github.com/reduxjs/redux.html" class="menu__link">GitHub</a>
- <a href="../introduction/getting-started.html#help-and-discussion" class="menu__link">Need help?</a>

- <a href="#!" class="menu__link menu__link--sublist">Introduction</a>
  - <a href="../introduction/getting-started.html" class="menu__link">Getting Started with Redux</a>
  - <a href="../introduction/installation.html" class="menu__link">Installation</a>
  - <a href="../introduction/core-concepts.html" class="menu__link">Core Concepts</a>
  - <a href="../introduction/learning-resources.html" class="menu__link">Learning Resources</a>
  - <a href="../introduction/ecosystem.html" class="menu__link">Ecosystem</a>
  - <a href="../introduction/examples.html" class="menu__link">Examples</a>
- <a href="#!" class="menu__link menu__link--sublist">Tutorials</a>
  - <a href="../tutorials/index.html" class="menu__link">Tutorials Index</a>
  - <a href="../tutorials/quick-start.html" class="menu__link">Quick Start</a>
  - <a href="../tutorials/typescript-quick-start.html" class="menu__link">TypeScript Quick Start</a>
  - <a href="#!" class="menu__link menu__link--sublist">Redux Essentials</a>
    - <a href="../tutorials/essentials/part-1-overview-concepts.html" class="menu__link">Redux Overview and Concepts</a>
    - <a href="../tutorials/essentials/part-2-app-structure.html" class="menu__link">Redux App Structure</a>
    - <a href="../tutorials/essentials/part-3-data-flow.html" class="menu__link">Basic Redux Data Flow</a>
    - <a href="../tutorials/essentials/part-4-using-data.html" class="menu__link">Using Redux Data</a>
    - <a href="../tutorials/essentials/part-5-async-logic.html" class="menu__link">Async Logic and Data Fetching</a>
    - <a href="../tutorials/essentials/part-6-performance-normalization.html" class="menu__link">Performance and Normalizing Data</a>
  - <a href="#!" class="menu__link menu__link--sublist">Redux Fundamentals</a>
    - <a href="../tutorials/fundamentals/part-1-overview.html" class="menu__link">Redux Overview</a>
    - <a href="../tutorials/fundamentals/part-2-concepts-data-flow.html" class="menu__link">Redux Concepts and Data Flow</a>
    - <a href="../tutorials/fundamentals/part-3-state-actions-reducers.html" class="menu__link">State, Actions, and Reducers</a>
    - <a href="../tutorials/fundamentals/part-4-store.html" class="menu__link">Store</a>
    - <a href="../tutorials/fundamentals/part-5-ui-react.html" class="menu__link">UI and React</a>
    - <a href="../tutorials/fundamentals/part-6-async-logic.html" class="menu__link">Async Logic and Data Fetching</a>
    - <a href="../tutorials/fundamentals/part-7-standard-patterns.html" class="menu__link">Standard Redux Patterns</a>
    - <a href="../tutorials/fundamentals/part-8-modern-redux.html" class="menu__link">Modern Redux with Redux Toolkit</a>
- <a href="#!" class="menu__link menu__link--sublist menu__link--active">Recipes</a>
  - <a href="recipe-index.html" class="menu__link">Recipes: Index</a>
  - <a href="configuring-your-store.html" class="menu__link">Configuring Your Store</a>
  - <a href="usage-with-typescript.html" class="menu__link">Usage With TypeScript</a>
  - <a href="migrating-to-redux.html" class="menu__link">Migrating to Redux</a>
  - <a href="using-object-spread-operator.html" class="menu__link">Using Object Spread Operator</a>
  - <a href="reducing-boilerplate.html" class="menu__link">Reducing Boilerplate</a>
  - <a href="server-rendering.html" class="menu__link">Server Rendering</a>
  - <a href="writing-tests.html" class="menu__link">Writing Tests</a>
  - <a href="computing-derived-data.html" class="menu__link">Computing Derived Data</a>
  - <a href="implementing-undo-history.html" class="menu__link">Implementing Undo History</a>
  - <a href="isolating-redux-sub-apps.html" class="menu__link">Isolating Redux Sub-Apps</a>
  - <a href="code-splitting.html" class="menu__link menu__link--active active">Code Splitting</a>
  - <a href="troubleshooting.html" class="menu__link">Troubleshooting</a>
  - <a href="#!" class="menu__link menu__link--sublist">Structuring Reducers</a>
    - <a href="structuring-reducers/structuring-reducers.html" class="menu__link">Structuring Reducers</a>
    - <a href="structuring-reducers/prerequisite-concepts.html" class="menu__link">Prerequisite Concepts</a>
    - <a href="structuring-reducers/basic-reducer-structure.html" class="menu__link">Basic Reducer Structure</a>
    - <a href="structuring-reducers/splitting-reducer-logic.html" class="menu__link">Splitting Reducer Logic</a>
    - <a href="structuring-reducers/refactoring-reducer-example.html" class="menu__link">Refactoring Reducers Example</a>
    - <a href="structuring-reducers/using-combinereducers.html" class="menu__link">Using combineReducers</a>
    - <a href="structuring-reducers/beyond-combinereducers.html" class="menu__link">Beyond combineReducers</a>
    - <a href="structuring-reducers/normalizing-state-shape.html" class="menu__link">Normalizing State Shape</a>
    - <a href="structuring-reducers/updating-normalized-data.html" class="menu__link">Updating Normalized Data</a>
    - <a href="structuring-reducers/reusing-reducer-logic.html" class="menu__link">Reusing Reducer Logic</a>
    - <a href="structuring-reducers/immutable-update-patterns.html" class="menu__link">Immutable Update Patterns</a>
    - <a href="structuring-reducers/initializing-state.html" class="menu__link">Initializing State</a>
- <a href="#!" class="menu__link menu__link--sublist">Understanding Redux</a>
  - <a href="#!" class="menu__link menu__link--sublist">Thinking in Redux</a>
    - <a href="../understanding/thinking-in-redux/motivation.html" class="menu__link">Motivation</a>
    - <a href="../understanding/thinking-in-redux/three-principles.html" class="menu__link">Three Principles</a>
    - <a href="../understanding/thinking-in-redux/glossary.html" class="menu__link">Glossary</a>
  - <a href="#!" class="menu__link menu__link--sublist">History and Design</a>
    - <a href="../understanding/history-and-design/prior-art.html" class="menu__link">Prior Art</a>
    - <a href="../understanding/history-and-design/middleware.html" class="menu__link">Middleware</a>
- <a href="#!" class="menu__link menu__link--sublist">FAQ</a>
  - <a href="../faq.html" class="menu__link">FAQ Index</a>
  - <a href="../faq/general.html" class="menu__link">General</a>
  - <a href="../faq/reducers.html" class="menu__link">Reducers</a>
  - <a href="../faq/organizing-state.html" class="menu__link">Organizing State</a>
  - <a href="../faq/store-setup.html" class="menu__link">Store Setup</a>
  - <a href="../faq/actions.html" class="menu__link">Actions</a>
  - <a href="../faq/immutable-data.html" class="menu__link">Immutable Data</a>
  - <a href="../faq/code-structure.html" class="menu__link">Code Structure</a>
  - <a href="../faq/performance.html" class="menu__link">Performance</a>
  - <a href="../faq/design-decisions.html" class="menu__link">Design Decisions</a>
  - <a href="../faq/react-redux.html" class="menu__link">React Redux</a>
  - <a href="../faq/miscellaneous.html" class="menu__link">Miscellaneous</a>
- <a href="#!" class="menu__link menu__link--sublist">Style Guide</a>
  - <a href="../style-guide/style-guide.html" class="menu__link">Style Guide: Best Practices</a>
- <a href="#!" class="menu__link menu__link--sublist">API Reference</a>
  - <a href="../api/api-reference.html" class="menu__link">API Reference</a>
  - <a href="../api/createstore.html" class="menu__link">createStore</a>
  - <a href="../api/store.html" class="menu__link">Store</a>
  - <a href="../api/combinereducers.html" class="menu__link">combineReducers</a>
  - <a href="../api/applymiddleware.html" class="menu__link">applyMiddleware</a>
  - <a href="../api/bindactioncreators.html" class="menu__link">bindActionCreators</a>
  - <a href="../api/compose.html" class="menu__link">compose</a>
- <a href="#!" class="menu__link menu__link--sublist">Redux Toolkit</a>
  - <a href="../redux-toolkit/overview.html" class="menu__link">Redux Toolkit: Overview</a>

# <span id="code-splitting" class="anchor enhancedAnchor_2LWZ"></span>Code Splitting<a href="#code-splitting" class="hash-link" title="Direct link to heading">#</a>

In large web applications, it is often desirable to split up the app code into multiple JS bundles that can be loaded on-demand. This strategy, called 'code splitting', helps to increase performance of your application by reducing the size of the initial JS payload that must be fetched.

To code split with Redux, we want to be able to dynamically add reducers to the store. However, Redux really only has a single root reducer function. This root reducer is normally generated by calling `combineReducers()` or a similar function when the application is initialized. In order to dynamically add more reducers, we need to call that function again to re-generate the root reducer. Below, we discuss some approaches to solving this problem and reference two libraries that provide this functionality.

## <span id="basic-principle" class="anchor enhancedAnchor_2LWZ"></span>Basic Principle<a href="#basic-principle" class="hash-link" title="Direct link to heading">#</a>

### <span id="using-replacereducer" class="anchor enhancedAnchor_2LWZ"></span>Using `replaceReducer`<a href="#using-replacereducer" class="hash-link" title="Direct link to heading">#</a>

The Redux store exposes a `replaceReducer` function, which replaces the current active root reducer function with a new root reducer function. Calling it will swap the internal reducer function reference, and dispatch an action to help any newly-added slice reducers initialize themselves:

<span class="token keyword" style="color: #f92672">const</span><span class="token plain"> newRootReducer </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> existingSlice</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> existingSliceReducer</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain"> newSlice</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> newSliceReducer</span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">replaceReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">newRootReducer</span><span class="token punctuation" style="color: #f8f8f2">)</span>

Copy

## <span id="reducer-injection-approaches" class="anchor enhancedAnchor_2LWZ"></span>Reducer Injection Approaches<a href="#reducer-injection-approaches" class="hash-link" title="Direct link to heading">#</a>

### <span id="defining-an-injectreducer-function" class="anchor enhancedAnchor_2LWZ"></span>Defining an `injectReducer` function<a href="#defining-an-injectreducer-function" class="hash-link" title="Direct link to heading">#</a>

We will likely want to call `store.replaceReducer()` from anywhere in the application. Because of that, it's helpful to define a reusable `injectReducer()` function that keeps references to all of the existing slice reducers, and attach that to the store instance.

<span class="token keyword module" style="color: #f92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color: #f8f8f2">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color: #f8f8f2">}</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">from</span><span class="token plain"> </span><span class="token string" style="color: #a6e22e">'redux'</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Define the Reducers that will always be present in the application</span><span class="token plain"></span>

<span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> staticReducers </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> users</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain"> posts</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> postsReducer</span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"></span><span class="token comment" style="color: #c6cad2">// Configure the store</span><span class="token plain"></span>

<span class="token plain"></span><span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color: #f92672">default</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">configureStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">initialState</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add a dictionary to keep track of the registered async reducers</span><span class="token plain"></span>

<span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">asyncReducers</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create an inject reducer function</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// This function adds the async reducer, and creates a new combined reducer</span><span class="token plain"></span>

<span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method-variable function-variable method function property-access" style="color: #e6d874">injectReducer</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> asyncReducer</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">asyncReducers</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> asyncReducer</span>

<span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">replaceReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">asyncReducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Return the modified store</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> store</span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"></span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">asyncReducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token spread operator" style="color: #f8f8f2">...</span><span class="token plain">staticReducers</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token spread operator" style="color: #f8f8f2">...</span><span class="token plain">asyncReducers</span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>

Copy

Now, one just needs to call `store.injectReducer` to add a new reducer to the store.

### <span id="using-a-reducer-manager" class="anchor enhancedAnchor_2LWZ"></span>Using a 'Reducer Manager'<a href="#using-a-reducer-manager" class="hash-link" title="Direct link to heading">#</a>

Another approach is to create a 'Reducer Manager' object, which keeps track of all the registered reducers and exposes a `reduce()` function. Consider the following example:

<span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducerManager</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">initialReducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create an object which maps keys to reducers</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> reducers </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> </span><span class="token spread operator" style="color: #f8f8f2">...</span><span class="token plain">initialReducers </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create the initial combinedReducer</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> combinedReducer </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// An array which is used to delete state keys when reducers are removed</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> keysToRemove </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">getReducerMap</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// The root reducer function exposed by this object</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// This will be passed to the store</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">reduce</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// If any reducers have been removed, clean up their state first</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">keysToRemove</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">&gt;</span><span class="token plain"> </span><span class="token number" style="color: #ae81ff">0</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> state </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"> </span><span class="token spread operator" style="color: #f8f8f2">...</span><span class="token plain">state </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">for</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token keyword" style="color: #f92672">let</span><span class="token plain"> key </span><span class="token keyword" style="color: #f92672">of</span><span class="token plain"> keysToRemove</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">delete</span><span class="token plain"> state</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain"> keysToRemove </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Delegate to the combined reducer</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combinedReducer</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">state</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Adds a new reducer with the specified key</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">add</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">key</span><span class="token parameter punctuation" style="color: #f8f8f2">,</span><span class="token parameter"> reducer</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token operator" style="color: #f8f8f2">!</span><span class="token plain">key </span><span class="token operator" style="color: #f8f8f2">||</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add the reducer to the reducer mapping</span><span class="token plain"></span>

<span class="token plain"> reducers</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> reducer</span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Generate a new combined reducer</span><span class="token plain"></span>

<span class="token plain"> combinedReducer </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Removes a reducer with the specified key</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token function-variable function" style="color: #e6d874">remove</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> </span><span class="token parameter">key</span><span class="token plain"> </span><span class="token arrow operator" style="color: #f8f8f2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token operator" style="color: #f8f8f2">!</span><span class="token plain">key </span><span class="token operator" style="color: #f8f8f2">||</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">!</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword control-flow" style="color: #f92672">return</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Remove it from the reducer mapping</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">delete</span><span class="token plain"> reducers</span><span class="token punctuation" style="color: #f8f8f2">\[</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">\]</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Add the key to the list of keys to clean up</span><span class="token plain"></span>

<span class="token plain"> keysToRemove</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token method function property-access" style="color: #e6d874">push</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">key</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Generate a new combined reducer</span><span class="token plain"></span>

<span class="token plain"> combinedReducer </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">combineReducers</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">reducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"></span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> staticReducers </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> users</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"></span>

<span class="token plain"> posts</span><span class="token operator" style="color: #f8f8f2">:</span><span class="token plain"> postsReducer</span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"></span><span class="token keyword module" style="color: #f92672">export</span><span class="token plain"> </span><span class="token keyword" style="color: #f92672">function</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">configureStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token parameter">initialState</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"> </span><span class="token punctuation" style="color: #f8f8f2">{</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> reducerManager </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createReducerManager</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">staticReducers</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Create a store with the root reducer function being the one exposed by the manager.</span><span class="token plain"></span>

<span class="token plain"> </span><span class="token keyword" style="color: #f92672">const</span><span class="token plain"> store </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> </span><span class="token function" style="color: #e6d874">createStore</span><span class="token punctuation" style="color: #f8f8f2">(</span><span class="token plain">reducerManager</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">reduce</span><span class="token punctuation" style="color: #f8f8f2">,</span><span class="token plain"> initialState</span><span class="token punctuation" style="color: #f8f8f2">)</span><span class="token plain"></span>

<span class="token plain" style="display: inline-block"> </span>

<span class="token plain"> </span><span class="token comment" style="color: #c6cad2">// Optional: Put the reducer manager on the store so it is easily accessible</span><span class="token plain"></span>

<span class="token plain"> store</span><span class="token punctuation" style="color: #f8f8f2">.</span><span class="token property-access">reducerManager</span><span class="token plain"> </span><span class="token operator" style="color: #f8f8f2">=</span><span class="token plain"> reducerManager</span>

<span class="token plain"></span><span class="token punctuation" style="color: #f8f8f2">}</span>

Copy

To add a new reducer, one can now call `store.reducerManager.add("asyncState", asyncReducer)`.

To remove a reducer, one can now call `store.reducerManager.remove("asyncState")`

## <span id="libraries-and-frameworks" class="anchor enhancedAnchor_2LWZ"></span>Libraries and Frameworks<a href="#libraries-and-frameworks" class="hash-link" title="Direct link to heading">#</a>

There are a few good libraries out there that can help you add the above functionality automatically:

- [`redux-dynamic-modules`](../../github.com/Microsoft/redux-dynamic-modules.html): This library introduces the concept of a 'Redux Module', which is a bundle of Redux artifacts (reducers, middleware) that should be dynamically loaded. It also exposes a React higher-order component to load 'modules' when areas of the application come online. Additionally, it has integrations with libraries like `redux-thunk` and `redux-saga` which also help dynamically load their artifacts (thunks, sagas).
- [Redux Ecosystem Links: Reducers - Dynamic Reducer Injection](../../github.com/markerikson/redux-ecosystem-links/blob/master/reducers.html#dynamic-reducer-injection)

<a href="isolating-redux-sub-apps.html" class="pagination-nav__link"></a>

Previous

Â« Isolating Redux Sub-Apps

<a href="troubleshooting.html" class="pagination-nav__link"></a>

Next

Troubleshooting Â»

- <a href="#basic-principle" class="table-of-contents__link">Basic Principle</a>
  - <a href="#using-replacereducer" class="table-of-contents__link">Using <code>replaceReducer</code></a>
- <a href="#reducer-injection-approaches" class="table-of-contents__link">Reducer Injection Approaches</a>
  - <a href="#defining-an-injectreducer-function" class="table-of-contents__link">Defining an <code>injectReducer</code> function</a>
  - <a href="#using-a-reducer-manager" class="table-of-contents__link">Using a 'Reducer Manager'</a>
- <a href="#libraries-and-frameworks" class="table-of-contents__link">Libraries and Frameworks</a>

#### Docs

- <a href="../introduction/getting-started.html" class="footer__link-item">Getting Started</a>
- <a href="../tutorials/essentials/part-1-overview-concepts.html" class="footer__link-item">Tutorial</a>
- <a href="../faq.html" class="footer__link-item">FAQ</a>
- <a href="../api/api-reference.html" class="footer__link-item">API Reference</a>

#### Community

- <a href="../official/discord.com/invite/0ZcbPKXt5bZ6au5t.html" class="footer__link-item">Reactiflux Discord</a>
- <a href="../official/stackoverflow.com/questions/tagged/redux.html" class="footer__link-item">Stack Overflow</a>
- <a href="../introduction/getting-started.html#help-and-discussion" class="footer__link-item">Feedback</a>

#### More

- <a href="../official/github.com/reduxjs/redux.html" class="footer__link-item">GitHub</a>
- [![Deploys by Netlify](../../www.netlify.com/img/global/badges/netlify-color-accent.svg)](../../www.netlify.com/index.html)

<a href="../index.html" class="footerLogoLink_MyFc"><img src="../official/d33wubrfki0l68.cloudfront.net/0834d0215db51e91525a25acf97433051f280f2f/c30f5/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo" /><img src="../official/d33wubrfki0l68.cloudfront.net/0834d0215db51e91525a25acf97433051f280f2f/c30f5/img/redux.svg" alt="Redux Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo" /></a>

Copyright Â© 2015â€“2021 Dan Abramov and the Redux documentation authors.
