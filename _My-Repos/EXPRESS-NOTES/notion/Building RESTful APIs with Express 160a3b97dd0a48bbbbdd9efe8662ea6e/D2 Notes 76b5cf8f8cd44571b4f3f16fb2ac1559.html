<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>D2 Notes</title>
    <style>
      /* cspell:disable-file */
      /* webkit printing magic: print all background colors */
      html {
        -webkit-print-color-adjust: exact;
      }
      * {
        box-sizing: border-box;
        -webkit-print-color-adjust: exact;
      }

      html,
      body {
        margin: 0;
        padding: 0;
      }
      @media only screen {
        body {
          margin: 2em auto;
          max-width: 900px;
          color: rgb(55, 53, 47);
        }
      }

      body {
        line-height: 1.5;
        white-space: pre-wrap;
      }

      a,
      a.visited {
        color: inherit;
        text-decoration: underline;
      }

      .pdf-relative-link-path {
        font-size: 80%;
        color: #444;
      }

      h1,
      h2,
      h3 {
        letter-spacing: -0.01em;
        line-height: 1.2;
        font-weight: 600;
        margin-bottom: 0;
      }

      .page-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-top: 0;
        margin-bottom: 0.75em;
      }

      h1 {
        font-size: 1.875rem;
        margin-top: 1.875rem;
      }

      h2 {
        font-size: 1.5rem;
        margin-top: 1.5rem;
      }

      h3 {
        font-size: 1.25rem;
        margin-top: 1.25rem;
      }

      .source {
        border: 1px solid #ddd;
        border-radius: 3px;
        padding: 1.5em;
        word-break: break-all;
      }

      .callout {
        border-radius: 3px;
        padding: 1rem;
      }

      figure {
        margin: 1.25em 0;
        page-break-inside: avoid;
      }

      figcaption {
        opacity: 0.5;
        font-size: 85%;
        margin-top: 0.5em;
      }

      mark {
        background-color: transparent;
      }

      .indented {
        padding-left: 1.5em;
      }

      hr {
        background: transparent;
        display: block;
        width: 100%;
        height: 1px;
        visibility: visible;
        border: none;
        border-bottom: 1px solid rgba(55, 53, 47, 0.09);
      }

      img {
        max-width: 100%;
      }

      @media only print {
        img {
          max-height: 100vh;
          object-fit: contain;
        }
      }

      @page {
        margin: 1in;
      }

      .collection-content {
        font-size: 0.875rem;
      }

      .column-list {
        display: flex;
        justify-content: space-between;
      }

      .column {
        padding: 0 1em;
      }

      .column:first-child {
        padding-left: 0;
      }

      .column:last-child {
        padding-right: 0;
      }

      .table_of_contents-item {
        display: block;
        font-size: 0.875rem;
        line-height: 1.3;
        padding: 0.125rem;
      }

      .table_of_contents-indent-1 {
        margin-left: 1.5rem;
      }

      .table_of_contents-indent-2 {
        margin-left: 3rem;
      }

      .table_of_contents-indent-3 {
        margin-left: 4.5rem;
      }

      .table_of_contents-link {
        text-decoration: none;
        opacity: 0.7;
        border-bottom: 1px solid rgba(55, 53, 47, 0.18);
      }

      table,
      th,
      td {
        border: 1px solid rgba(55, 53, 47, 0.09);
        border-collapse: collapse;
      }

      table {
        border-left: none;
        border-right: none;
      }

      th,
      td {
        font-weight: normal;
        padding: 0.25em 0.5em;
        line-height: 1.5;
        min-height: 1.5em;
        text-align: left;
      }

      th {
        color: rgba(55, 53, 47, 0.6);
      }

      ol,
      ul {
        margin: 0;
        margin-block-start: 0.6em;
        margin-block-end: 0.6em;
      }

      li > ol:first-child,
      li > ul:first-child {
        margin-block-start: 0.6em;
      }

      ul > li {
        list-style: disc;
      }

      ul.to-do-list {
        text-indent: -1.7em;
      }

      ul.to-do-list > li {
        list-style: none;
      }

      .to-do-children-checked {
        text-decoration: line-through;
        opacity: 0.375;
      }

      ul.toggle > li {
        list-style: none;
      }

      ul {
        padding-inline-start: 1.7em;
      }

      ul > li {
        padding-left: 0.1em;
      }

      ol {
        padding-inline-start: 1.6em;
      }

      ol > li {
        padding-left: 0.2em;
      }

      .mono ol {
        padding-inline-start: 2em;
      }

      .mono ol > li {
        text-indent: -0.4em;
      }

      .toggle {
        padding-inline-start: 0em;
        list-style-type: none;
      }

      /* Indent toggle children */
      .toggle > li > details {
        padding-left: 1.7em;
      }

      .toggle > li > details > summary {
        margin-left: -1.1em;
      }

      .selected-value {
        display: inline-block;
        padding: 0 0.5em;
        background: rgba(206, 205, 202, 0.5);
        border-radius: 3px;
        margin-right: 0.5em;
        margin-top: 0.3em;
        margin-bottom: 0.3em;
        white-space: nowrap;
      }

      .collection-title {
        display: inline-block;
        margin-right: 1em;
      }

      time {
        opacity: 0.5;
      }

      .icon {
        display: inline-block;
        max-width: 1.2em;
        max-height: 1.2em;
        text-decoration: none;
        vertical-align: text-bottom;
        margin-right: 0.5em;
      }

      img.icon {
        border-radius: 3px;
      }

      .user-icon {
        width: 1.5em;
        height: 1.5em;
        border-radius: 100%;
        margin-right: 0.5rem;
      }

      .user-icon-inner {
        font-size: 0.8em;
      }

      .text-icon {
        border: 1px solid #000;
        text-align: center;
      }

      .page-cover-image {
        display: block;
        object-fit: cover;
        width: 100%;
        height: 30vh;
      }

      .page-header-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
      }

      .page-header-icon-with-cover {
        margin-top: -0.72em;
        margin-left: 0.07em;
      }

      .page-header-icon img {
        border-radius: 3px;
      }

      .link-to-page {
        margin: 1em 0;
        padding: 0;
        border: none;
        font-weight: 500;
      }

      p > .user {
        opacity: 0.5;
      }

      td > .user,
      td > time {
        white-space: nowrap;
      }

      input[type="checkbox"] {
        transform: scale(1.5);
        margin-right: 0.6em;
        vertical-align: middle;
      }

      p {
        margin-top: 0.5em;
        margin-bottom: 0.5em;
      }

      .image {
        border: none;
        margin: 1.5em 0;
        padding: 0;
        border-radius: 0;
        text-align: center;
      }

      .code,
      code {
        background: rgba(135, 131, 120, 0.15);
        border-radius: 3px;
        padding: 0.2em 0.4em;
        border-radius: 3px;
        font-size: 85%;
        tab-size: 2;
      }

      code {
        color: #eb5757;
      }

      .code {
        padding: 1.5em 1em;
      }

      .code-wrap {
        white-space: pre-wrap;
        word-break: break-all;
      }

      .code > code {
        background: none;
        padding: 0;
        font-size: 100%;
        color: inherit;
      }

      blockquote {
        font-size: 1.25em;
        margin: 1em 0;
        padding-left: 1em;
        border-left: 3px solid rgb(55, 53, 47);
      }

      .bookmark {
        text-decoration: none;
        max-height: 8em;
        padding: 0;
        display: flex;
        width: 100%;
        align-items: stretch;
      }

      .bookmark-title {
        font-size: 0.85em;
        overflow: hidden;
        text-overflow: ellipsis;
        height: 1.75em;
        white-space: nowrap;
      }

      .bookmark-text {
        display: flex;
        flex-direction: column;
      }

      .bookmark-info {
        flex: 4 1 180px;
        padding: 12px 14px 14px;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }

      .bookmark-image {
        width: 33%;
        flex: 1 1 180px;
        display: block;
        position: relative;
        object-fit: cover;
        border-radius: 1px;
      }

      .bookmark-description {
        color: rgba(55, 53, 47, 0.6);
        font-size: 0.75em;
        overflow: hidden;
        max-height: 4.5em;
        word-break: break-word;
      }

      .bookmark-href {
        font-size: 0.75em;
        margin-top: 0.25em;
      }

      .sans {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica,
          "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji",
          "Segoe UI Symbol";
      }
      .code {
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", Menlo,
          Courier, monospace;
      }
      .serif {
        font-family: Lyon-Text, Georgia, YuMincho, "Yu Mincho",
          "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC",
          "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif;
      }
      .mono {
        font-family: iawriter-mono, Nitti, Menlo, Courier, monospace;
      }
      .pdf .sans {
        font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji",
          "Segoe UI Symbol", "Twemoji", "Noto Color Emoji", "Noto Sans CJK SC",
          "Noto Sans CJK KR";
      }

      .pdf .code {
        font-family: Source Code Pro, "SFMono-Regular", Consolas,
          "Liberation Mono", Menlo, Courier, monospace, "Twemoji",
          "Noto Color Emoji", "Noto Sans Mono CJK SC", "Noto Sans Mono CJK KR";
      }

      .pdf .serif {
        font-family: PT Serif, Lyon-Text, Georgia, YuMincho, "Yu Mincho",
          "Hiragino Mincho ProN", "Hiragino Mincho Pro", "Songti TC",
          "Songti SC", "SimSun", "Nanum Myeongjo", NanumMyeongjo, Batang, serif,
          "Twemoji", "Noto Color Emoji", "Noto Sans CJK SC", "Noto Sans CJK KR";
      }

      .pdf .mono {
        font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace,
          "Twemoji", "Noto Color Emoji", "Noto Sans Mono CJK SC",
          "Noto Sans Mono CJK KR";
      }

      .highlight-default {
      }
      .highlight-gray {
        color: rgb(155, 154, 151);
      }
      .highlight-brown {
        color: rgb(100, 71, 58);
      }
      .highlight-orange {
        color: rgb(217, 115, 13);
      }
      .highlight-yellow {
        color: rgb(223, 171, 1);
      }
      .highlight-teal {
        color: rgb(15, 123, 108);
      }
      .highlight-blue {
        color: rgb(11, 110, 153);
      }
      .highlight-purple {
        color: rgb(105, 64, 165);
      }
      .highlight-pink {
        color: rgb(173, 26, 114);
      }
      .highlight-red {
        color: rgb(224, 62, 62);
      }
      .highlight-gray_background {
        background: rgb(235, 236, 237);
      }
      .highlight-brown_background {
        background: rgb(233, 229, 227);
      }
      .highlight-orange_background {
        background: rgb(250, 235, 221);
      }
      .highlight-yellow_background {
        background: rgb(251, 243, 219);
      }
      .highlight-teal_background {
        background: rgb(221, 237, 234);
      }
      .highlight-blue_background {
        background: rgb(221, 235, 241);
      }
      .highlight-purple_background {
        background: rgb(234, 228, 242);
      }
      .highlight-pink_background {
        background: rgb(244, 223, 235);
      }
      .highlight-red_background {
        background: rgb(251, 228, 228);
      }
      .block-color-default {
        color: inherit;
        fill: inherit;
      }
      .block-color-gray {
        color: rgba(55, 53, 47, 0.6);
        fill: rgba(55, 53, 47, 0.6);
      }
      .block-color-brown {
        color: rgb(100, 71, 58);
        fill: rgb(100, 71, 58);
      }
      .block-color-orange {
        color: rgb(217, 115, 13);
        fill: rgb(217, 115, 13);
      }
      .block-color-yellow {
        color: rgb(223, 171, 1);
        fill: rgb(223, 171, 1);
      }
      .block-color-teal {
        color: rgb(15, 123, 108);
        fill: rgb(15, 123, 108);
      }
      .block-color-blue {
        color: rgb(11, 110, 153);
        fill: rgb(11, 110, 153);
      }
      .block-color-purple {
        color: rgb(105, 64, 165);
        fill: rgb(105, 64, 165);
      }
      .block-color-pink {
        color: rgb(173, 26, 114);
        fill: rgb(173, 26, 114);
      }
      .block-color-red {
        color: rgb(224, 62, 62);
        fill: rgb(224, 62, 62);
      }
      .block-color-gray_background {
        background: rgb(235, 236, 237);
      }
      .block-color-brown_background {
        background: rgb(233, 229, 227);
      }
      .block-color-orange_background {
        background: rgb(250, 235, 221);
      }
      .block-color-yellow_background {
        background: rgb(251, 243, 219);
      }
      .block-color-teal_background {
        background: rgb(221, 237, 234);
      }
      .block-color-blue_background {
        background: rgb(221, 235, 241);
      }
      .block-color-purple_background {
        background: rgb(234, 228, 242);
      }
      .block-color-pink_background {
        background: rgb(244, 223, 235);
      }
      .block-color-red_background {
        background: rgb(251, 228, 228);
      }
      .select-value-color-default {
        background-color: rgba(206, 205, 202, 0.5);
      }
      .select-value-color-gray {
        background-color: rgba(155, 154, 151, 0.4);
      }
      .select-value-color-brown {
        background-color: rgba(140, 46, 0, 0.2);
      }
      .select-value-color-orange {
        background-color: rgba(245, 93, 0, 0.2);
      }
      .select-value-color-yellow {
        background-color: rgba(233, 168, 0, 0.2);
      }
      .select-value-color-green {
        background-color: rgba(0, 135, 107, 0.2);
      }
      .select-value-color-blue {
        background-color: rgba(0, 120, 223, 0.2);
      }
      .select-value-color-purple {
        background-color: rgba(103, 36, 222, 0.2);
      }
      .select-value-color-pink {
        background-color: rgba(221, 0, 129, 0.2);
      }
      .select-value-color-red {
        background-color: rgba(255, 0, 26, 0.2);
      }

      .checkbox {
        display: inline-flex;
        vertical-align: text-bottom;
        width: 16;
        height: 16;
        background-size: 16px;
        margin-left: 2px;
        margin-right: 5px;
      }

      .checkbox-on {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
      }

      .checkbox-off {
        background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
      }
    </style>
  </head>
  <body>
    <article id="76b5cf8f-8cd4-4571-b4f3-f16fb2ac1559" class="page serif">
      <header>
        <h1 class="page-title">D2 Notes</h1>
        <table class="properties">
          <tbody>
            <tr class="property-row property-row-text">
              <th>
                <span class="icon property-icon"
                  ><svg
                    viewBox="0 0 14 14"
                    style="
                      width: 14px;
                      height: 14px;
                      display: block;
                      fill: rgba(55, 53, 47, 0.4);
                      flex-shrink: 0;
                      -webkit-backface-visibility: hidden;
                    "
                    class="typesText"
                  >
                    <path
                      d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"
                    ></path></svg></span
                >Aux Notes
              </th>
              <td></td>
            </tr>
            <tr class="property-row property-row-text">
              <th>
                <span class="icon property-icon"
                  ><svg
                    viewBox="0 0 14 14"
                    style="
                      width: 14px;
                      height: 14px;
                      display: block;
                      fill: rgba(55, 53, 47, 0.4);
                      flex-shrink: 0;
                      -webkit-backface-visibility: hidden;
                    "
                    class="typesText"
                  >
                    <path
                      d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"
                    ></path></svg></span
                >Day
              </th>
              <td>d2</td>
            </tr>
            <tr class="property-row property-row-text">
              <th>
                <span class="icon property-icon"
                  ><svg
                    viewBox="0 0 14 14"
                    style="
                      width: 14px;
                      height: 14px;
                      display: block;
                      fill: rgba(55, 53, 47, 0.4);
                      flex-shrink: 0;
                      -webkit-backface-visibility: hidden;
                    "
                    class="typesText"
                  >
                    <path
                      d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"
                    ></path></svg></span
                >External Links
              </th>
              <td></td>
            </tr>
            <tr class="property-row property-row-text">
              <th>
                <span class="icon property-icon"
                  ><svg
                    viewBox="0 0 14 14"
                    style="
                      width: 14px;
                      height: 14px;
                      display: block;
                      fill: rgba(55, 53, 47, 0.4);
                      flex-shrink: 0;
                      -webkit-backface-visibility: hidden;
                    "
                    class="typesText"
                  >
                    <path
                      d="M7,4.56818 C7,4.29204 6.77614,4.06818 6.5,4.06818 L0.5,4.06818 C0.223858,4.06818 0,4.29204 0,4.56818 L0,5.61364 C0,5.88978 0.223858,6.11364 0.5,6.11364 L6.5,6.11364 C6.77614,6.11364 7,5.88978 7,5.61364 L7,4.56818 Z M0.5,1 C0.223858,1 0,1.223858 0,1.5 L0,2.54545 C0,2.8216 0.223858,3.04545 0.5,3.04545 L12.5,3.04545 C12.7761,3.04545 13,2.8216 13,2.54545 L13,1.5 C13,1.223858 12.7761,1 12.5,1 L0.5,1 Z M0,8.68182 C0,8.95796 0.223858,9.18182 0.5,9.18182 L11.5,9.18182 C11.7761,9.18182 12,8.95796 12,8.68182 L12,7.63636 C12,7.36022 11.7761,7.13636 11.5,7.13636 L0.5,7.13636 C0.223858,7.13636 0,7.36022 0,7.63636 L0,8.68182 Z M0,11.75 C0,12.0261 0.223858,12.25 0.5,12.25 L9.5,12.25 C9.77614,12.25 10,12.0261 10,11.75 L10,10.70455 C10,10.4284 9.77614,10.20455 9.5,10.20455 L0.5,10.20455 C0.223858,10.20455 0,10.4284 0,10.70455 L0,11.75 Z"
                    ></path></svg></span
                >Other
              </th>
              <td></td>
            </tr>
            <tr class="property-row property-row-multi_select">
              <th>
                <span class="icon property-icon"
                  ><svg
                    viewBox="0 0 14 14"
                    style="
                      width: 14px;
                      height: 14px;
                      display: block;
                      fill: rgba(55, 53, 47, 0.4);
                      flex-shrink: 0;
                      -webkit-backface-visibility: hidden;
                    "
                    class="typesMultipleSelect"
                  >
                    <path
                      d="M4,3 C4,2.447715 4.447715,2 5,2 L12,2 C12.5523,2 13,2.447716 13,3 C13,3.55228 12.5523,4 12,4 L5,4 C4.447715,4 4,3.55228 4,3 Z M4,7 C4,6.447715 4.447715,6 5,6 L12,6 C12.5523,6 13,6.447716 13,7 C13,7.55228 12.5523,8 12,8 L5,8 C4.447715,8 4,7.55228 4,7 Z M4,11 C4,10.447715 4.447715,10 5,10 L12,10 C12.5523,10 13,10.447716 13,11 C13,11.55228 12.5523,12 12,12 L5,12 C4.447715,12 4,11.55228 4,11 Z M2,4 C1.44771525,4 1,3.55228475 1,3 C1,2.44771525 1.44771525,2 2,2 C2.55228475,2 3,2.44771525 3,3 C3,3.55228475 2.55228475,4 2,4 Z M2,8 C1.44771525,8 1,7.55228475 1,7 C1,6.44771525 1.44771525,6 2,6 C2.55228475,6 3,6.44771525 3,7 C3,7.55228475 2.55228475,8 2,8 Z M2,12 C1.44771525,12 1,11.5522847 1,11 C1,10.4477153 1.44771525,10 2,10 C2.55228475,10 3,10.4477153 3,11 C3,11.5522847 2.55228475,12 2,12 Z"
                    ></path></svg></span
                >Tags
              </th>
              <td></td>
            </tr>
          </tbody>
        </table>
      </header>
      <div class="page-body">
        <h2 id="51da7802-aa5c-4969-92f7-9446e460fdb2" class="">
          <strong>Overview</strong>
        </h2>
        <p id="c97bd481-bcea-497a-8a84-c22dba392032" class="">
          Let&#x27;s look at a basic example of routing in action.
        </p>
        <p id="e13fb717-cd75-4d29-94c7-f3bc9c0f9b90" class="">
          First, to make our Express application respond
          to <code>GET</code> requests on different URLs, add the following
          endpoints:
        </p>
        <pre
          id="03f2bfe4-e78c-4cac-aa88-1a02497b2f5e"
          class="code code-wrap"
        ><code>// this request handler executes when making a GET request to /about
server.get(&#x27;/about&#x27;, (req, res) =&gt; {
  res.status(200).send(&#x27;&lt;h1&gt;About Us&lt;/h1&gt;&#x27;);
});

// this request handler executes when making a GET request to /contact
server.get(&#x27;/contact&#x27;, (req, res) =&gt; {
  res.status(200).send(&#x27;&lt;h1&gt;Contact Form&lt;/h1&gt;&#x27;);
});</code></pre>
        <p id="7bddddef-15fb-4989-976f-80b17175e6a8" class="">
          Two things to note:
        </p>
        <ul id="76e5cd2e-c674-4bb1-b7f6-a09be1e4e346" class="bulleted-list">
          <li>
            we are using the same HTTP Method on both endpoints, but express
            looks at the URL and executes the corresponding request handler.
          </li>
        </ul>
        <ul id="d576548a-bbea-4022-846a-92eb5972bbf1" class="bulleted-list">
          <li>we can return a string with valid HTML!</li>
        </ul>
        <p id="5657ddda-f57d-45ef-90e6-97dc131c1c6a" class="">
          Open a browser and navigate to
          the <code>/about</code> and <code>/contact</code> routes. The
          appropriate route handler will execute.
        </p>
        <h2 id="9b251023-615a-4ef6-bd02-e66a45384d90" class="">
          <strong>Follow Along</strong>
        </h2>
        <p id="23048ba1-8bd1-4d03-8d20-379114055175" class="">
          Please follow along as we write endpoints that execute different
          request handlers on the same URL by changing the HTTP method.
        </p>
        <p id="26c099a9-6de2-4d07-b041-fd8b129f96a9" class="">
          Let&#x27;s start by adding the following code after
          the <code>GET</code> endpoint to <code>/hobbits</code>:
        </p>
        <pre
          id="3c29874a-ec19-4bdd-8d9a-dc1193b1417d"
          class="code code-wrap"
        ><code>// this request handler executes when making a POST request to /hobbits
server.post(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  res.status(201).json({ url: &#x27;/hobbits&#x27;, operation: &#x27;POST&#x27; });
});</code></pre>
        <p id="5d55cac4-de45-4d51-879e-95eae981cfb4" class="">
          Note that we return HTTP status code 201 (created) for
          successful <code>POST</code> operations.
        </p>
        <p id="6af790e9-5cf0-48c6-b5d7-5379edf89e42" class="">
          Next, we need to add an endpoint for <code>PUT</code> requests to the
          same URL.
        </p>
        <pre
          id="fb80b980-f0de-406a-8a11-9b2cc1199b16"
          class="code code-wrap"
        ><code>// this request handler executes when making a PUT request to /hobbits
server.put(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  res.status(200).json({ url: &#x27;/hobbits&#x27;, operation: &#x27;PUT&#x27; });
});</code></pre>
        <p id="ec387f59-3a6b-4963-91e7-7f254a31c56c" class="">
          For successful <code>PUT</code> operations, we use HTTP Status Code
          200 (OK).
        </p>
        <p id="d55d4fc7-46cf-45e4-8d28-a5237e6f8963" class="">
          Finally, let&#x27;s write an endpoint to
          handle <code>DELETE</code> requests.
        </p>
        <pre
          id="be2d618b-b88c-4766-98aa-071fa0407678"
          class="code code-wrap"
        ><code>// this request handler executes when making a DELETE request to /hobbits
server.delete(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  res.status(204);
});</code></pre>
        <p id="c3d15550-fd9f-4c83-a74f-dedee9e75011" class="">
          We are returning HTTP Status Code 204 (No Content). Suppose you are
          returning any data to the client, perhaps the removed resource, on
          successful deletes. In that case, you&#x27;d change that to be 200
          instead.
        </p>
        <p id="407e581c-3179-45ef-8a58-608e1d65056e" class="">
          You may have noticed that we are not reading any data from the
          request, as that is something we&#x27;ll learn later in the module. We
          are about to learn how to use a tool called <code>Postman</code> to
          test our <code>POST</code>, <code>PUT</code>,
          and <code>DELETE</code> endpoints.
        </p>
        <h2 id="42274e60-350d-4573-adff-05e2f7a842d7" class="">
          <strong>Overview</strong>
        </h2>
        <h3 id="0acde3ff-6d96-41df-9c39-970d85d8bb9a" class="">
          <strong>Reading and Using Route Parameters</strong>
        </h3>
        <p id="02da37a8-8714-4e92-bc26-7266bb0e5996" class="">
          Let&#x27;s revisit our <code>DELETE</code> endpoint.
        </p>
        <pre
          id="fe4aa91c-f15e-4bb2-b713-0d7ec8c01b44"
          class="code code-wrap"
        ><code>server.delete(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  res.status(204);
});</code></pre>
        <p id="d2da11cf-f9e8-4f12-b0db-22fbc200ffa5" class="">
          How does the client let the API know which hobbit should be deleted or
          updated? One way, the one we&#x27;ll use, is through <code
            >route parameters</code
          >. Let&#x27;s add support for route parameters to
          our <code>DELETE</code> endpoint.
        </p>
        <p id="05cf5b8d-63fa-480e-94d7-62531ab1d993" class="">
          We define route parameters by adding it to the URL with a colon
          (<code>:</code>) in front of it. Express adds it to
          the <code>.params</code> property part of the request object.
          Let&#x27;s see it in action:
        </p>
        <pre
          id="b14096f4-cea8-484e-b2b6-e9bbb27e2804"
          class="code code-wrap"
        ><code>server.delete(&#x27;/hobbits/:id&#x27;, (req, res) =&gt; {
  const id = req.params.id;
  // or we could destructure it like so: const { id } = req.params;
  res.status(200).json({
    url: `/hobbits/${id}`,
    operation: `DELETE for hobbit with id ${id}`,
  });
});</code></pre>
        <p id="db0f7b52-e15e-48c7-b63d-2efecbffd961" class="">
          This route handler will execute every <code>DELETE</code> for a URL
          that begins with <code>/hobbits/</code> followed by any value.
          So, <code>DELETE</code> requests
          to <code>/hobbits/123</code> and <code>/hobbits/frodo</code> will both
          trigger this request handler. The value passed
          after <code>/hobbits/</code> will end up as
          the <code>id</code> property on <code>req.params</code>.
        </p>
        <p id="c9824ee6-e5b5-4e91-b661-403a703abc1e" class="">
          The value for a route parameter will always be <code>string</code>,
          even if the value passed is numeric. When
          hitting <code>/hobbits/123</code> in our example, the type
          of <code>req.params.id</code> will be <code>string</code>.
        </p>
        <p id="08b3d428-a705-48d7-867d-8fcb3c3b5c90" class="">
          Express routing has support for multiple route parameters. For
          example, defining a route URL that
          reads <code>/hobbits/:id/friends/:friendId</code>, will add properties
          for <code>id</code> and <code>friendId</code> to <code>req.params</code>.
        </p>
        <h3 id="a2c96e64-da6b-437f-952b-8eee12b197ac" class="">
          <strong>Using the Query String</strong>
        </h3>
        <p id="95103120-5850-489a-bb01-fd050c13e35c" class="">
          The query string is another strategy using the URL to pass information
          from clients to the server. The query string is structured as a set of
          key/value pairs. Each pair takes the form of <code>key=value</code>,
          and pairs are separated by an <code>&amp;</code>. To mark the
          beginning of the query string, we add <code>?</code> and the end of
          the URL, followed by the set of key/value pairs.
        </p>
        <p id="f1f19904-86a2-4009-a9c1-89ad4f405d83" class="">
          An example of a query string would
          be: <code>https://www.google.com/search?q=lambda&amp;tbo=1</code>. The
          query string portion is <code>?q=lambda&amp;tbo=1</code> and the
          key/value pairs are <code>q=lambda</code> and <code>tbo=1</code>.
        </p>
        <p id="c63ea92e-2903-4355-93da-665111fa3569" class="">
          Let&#x27;s add sorting capabilities to our API. We&#x27;ll provide a
          way for clients to hit our <code>/hobbits</code> and pass the field
          they want to use to sort the responses, and our API will sort the data
          by that field in ascending order.
        </p>
        <p id="7ff57a2e-fce4-4938-8b0d-c1ac51dfddba" class="">
          Here&#x27;s the new code for the <code>GET /hobbits</code> endpoint:
        </p>
        <pre
          id="b70bcf9e-0611-42b4-8eac-945bdfbcfc6e"
          class="code code-wrap"
        ><code>server.get(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  // query string parameters get added to req.query
  const sortField = req.query.sortby || &#x27;id&#x27;;
  const hobbits = [
    {
      id: 1,
      name: &#x27;Samwise Gamgee&#x27;,
    },
    {
      id: 2,
      name: &#x27;Frodo Baggins&#x27;,
    },
  ];

  // apply the sorting
  const response = hobbits.sort(
    (a, b) =&gt; (a[sortField] &lt; b[sortField] ? -1 : 1)
  );

  res.status(200).json(response);
});</code></pre>
        <p id="dbb99dee-992b-49f0-83d4-06616bfbef4c" class="">
          Visit <code>localhost:8000/hobbits?sortby=name</code>, and the list
          should be sorted by <code>name</code>.
          Visit <code>localhost:8000/hobbits?sortby=id</code>, and the list
          should now be sorted by <code>id</code>. If
          no <code>sortby</code> parameter is provided, it should default to
          sorting by <code>id</code>.
        </p>
        <p id="29b46111-1284-4c5f-845f-e8407545d0ec" class="">
          To read values from the query string, we use
          the <code>req.query</code> object added by Express. There will be a
          key and a value in the <code>req.query</code> object for each
          key/value pair found in the query string.
        </p>
        <p id="d7899803-4bc3-48e2-9473-1f2d23f52b30" class="">
          The parameter&#x27;s value will be of type <code>array</code> if more
          than one value is passed for the same key and <code>string</code> when
          only one value is passed. For example, in the query
          string <code>?id=123</code>, <code>req.query.id</code> will be a
          string, but for <code>?id=123&amp;id=234</code>, it will be an array.
        </p>
        <p id="90571da2-31ed-4f45-ac9e-c81678a94357" class="">
          Another gotcha is that the names of query string parameters are case
          sensitive, <code>sortby</code> and <code>sortBy</code> are two
          different parameters.
        </p>
        <p id="601497b0-3ea5-4209-aa54-c0638012f884" class="">
          The rest of the code sorts the array before sending it back to the
          client.
        </p>
        <h3 id="ad70edf5-a71d-4000-8cc3-3238a6fd12d9" class="">
          <strong>Reading Data from the Request Body</strong>
        </h3>
        <p id="2a3dc0d8-0091-4c55-bd79-8edc09cabc6f" class="">
          We begin by taking another look at the <code>POST /hobbits</code
          > endpoint. We need to read the hobbit&#x27;s information to add it to
          the <code>hobbits</code> array. Let&#x27;s do that next:
        </p>
        <pre
          id="88696cc7-adaa-47c1-acf3-fea1c5b968f5"
          class="code code-wrap"
        ><code>// add this code right after const server = express();
server.use(express.json());

let hobbits = [
  {
    id: 1,
    name: &#x27;Bilbo Baggins&#x27;,
    age: 111,
  },
  {
    id: 2,
    name: &#x27;Frodo Baggins&#x27;,
    age: 33,
  },
];
let nextId = 3;

// and modify the post endpoint like so:
server.post(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  const hobbit = req.body;
  hobbit.id = nextId++;

  hobbits.push(hobbit);

  res.status(201).json(hobbits);
});</code></pre>
        <p id="fa3c80c3-c217-46e2-a412-94c31a66234c" class="">
          To make this work with the hobbits array, we first move it out of the
          get endpoint into the outer scope. Now we have access to it from all
          route handlers.
        </p>
        <p id="0ee1202e-7767-48ca-8abf-6ab27ac0b4d9" class="">
          Then we define a variable for manual id generation. When using a
          database, this is not necessary as the database management system
          generates ids automatically.
        </p>
        <p id="c5830ec4-83a3-4c22-bf25-48830501270a" class="">
          To read data from the request body, we need to do two things:
        </p>
        <ul id="9acdb802-1db6-4777-a8bb-c99f536d1c73" class="bulleted-list">
          <li>
            Add the line: <code>server.use(express.json());</code> after the
            express application has been created.
          </li>
        </ul>
        <ul id="90dffd28-2285-4e7b-be0d-b6c5853bbf8a" class="bulleted-list">
          <li>
            Read the data from the body property that Express adds to the
            request object. Express takes all the client&#x27;s information from
            the body and makes it available as a nice JavaScript object.
          </li>
        </ul>
        <p id="13a5cee4-bb8f-4eb4-9330-ecb0686dfda9" class="">
          <strong
            >Note that we are skipping data validation to keep this demo simple,
            but in a production application, you would validate before
            attempting to save to the database.</strong
          >
        </p>
        <p id="9795c13c-d3af-470a-9749-9d5c7bba8b96" class="">
          Let&#x27;s test it using Postman:
        </p>
        <ul id="d091b490-808e-4810-8788-9ca5f0bb47d9" class="bulleted-list">
          <li>Change the method to POST.</li>
        </ul>
        <ul id="7a72fc50-3c39-4b18-90d2-c32defb429e4" class="bulleted-list">
          <li>Select the <code>Body</code> tab underneath the address bar.</li>
        </ul>
        <ul id="28282226-e854-4486-bbdc-5bb1bfb1d4cf" class="bulleted-list">
          <li>Click on the <code>raw</code> radio button.</li>
        </ul>
        <ul id="5d7081ca-12a7-4b6b-a6bf-959d16533b05" class="bulleted-list">
          <li>
            From the dropdown menu to the right of the <code>binary</code> radio
            button, select `JSON (application/json).
          </li>
        </ul>
        <ul id="97c451f6-a527-48f3-8184-f5975a50bd83" class="bulleted-list">
          <li>Add the following JSON object as the body:</li>
        </ul>
        <pre
          id="af99bef4-422d-4d5f-bd30-aa411321ad7c"
          class="code code-wrap"
        ><code>{
  &quot;name&quot;: &quot;Samwise Gamgee&quot;,
  &quot;age&quot;: 30
}</code></pre>
        <p id="c520aa19-d476-4af7-a82d-ce2dc1f80030" class="">
          Click on <code>Send</code>, and the API should return the list of
          hobbits, including Sam!
        </p>
        <h2 id="35f3d2d7-f089-4778-996e-5804fde9a9c0" class="">
          <strong>Follow Along</strong>
        </h2>
        <p id="ec676c66-f68b-42d8-9ad1-ccc711e7d6f5" class="">
          Please code along as we implement the <code>PUT</code> endpoint and a
          way for the client to specify the sort direction.
        </p>
        <h3 id="c291567c-a248-4da9-9a8e-5e55fb3658b0" class="">
          <strong>Implement Update Functionality</strong>
        </h3>
        <p id="e1817733-a2e1-4469-9bc2-91b5946098e4" class="">
          Let&#x27;s continue practicing reading route parameters and
          information from the request body. Let&#x27;s take a look at our
          existing PUT endpoint:
        </p>
        <pre
          id="779cfaca-a87f-4be3-aded-a2a902366b4e"
          class="code code-wrap"
        ><code>server.put(&#x27;/hobbits&#x27;, (req, res) =&gt; {
  res.status(200).json({ url: &#x27;/hobbits&#x27;, operation: &#x27;PUT&#x27; });
});</code></pre>
        <p id="f13f3848-2a12-46a2-807f-d17384e03d86" class="">
          We start by adding support for a route parameter the clients can use
          to specify the id of the hobbit they intend to update:
        </p>
        <pre
          id="126e9698-7ccd-413b-b695-5549d526abdf"
          class="code code-wrap"
        ><code>server.put(&#x27;/hobbits/:id&#x27;, (req, res) =&gt; {
  res.status(200).json({ url: &#x27;/hobbits&#x27;, operation: &#x27;PUT&#x27; });
});</code></pre>
        <p id="bc12d87f-6fe7-40e4-bd40-94e5eb101d63" class="">
          Next, we read the hobbit information from the request body
          using <code>req.body</code> and use it to update the existing hobbit.
        </p>
        <pre
          id="25f37f52-406e-4af8-80aa-ad19c147000e"
          class="code code-wrap"
        ><code>server.put(&#x27;/hobbits/:id&#x27;, (req, res) =&gt; {
  const hobbit = hobbits.find(h =&gt; h.id == req.params.id);

  if (!hobbit) {
    res.status(404).json({ message: &#x27;Hobbit does not exist&#x27; });
  } else {
    // modify the existing hobbit
    Object.assign(hobbit, req.body);

    res.status(200).json(hobbit);
  }
});</code></pre>
        <p id="cbbf8c12-d4ac-4ac3-a3e3-3cb5aabeffdc" class="">
          Concentrate on the code related to reading the <code>id</code> from
          the <code>req.params</code> object and reading the hobbit information
          from <code>req.body</code>. The rest of the code will change as this
          is a simple example using an in-memory array. Most production APIs
          will use a database.
        </p>
        <h2 id="6e414f0b-5697-4d40-8179-6eff266bec91" class="">
          <strong>Challenge</strong>
        </h2>
        <p id="ac319933-1dfa-4976-8043-c54e9e7c1620" class="">
          For the following exercises, use the provided database helper
          functions inside <code>/data/db.js</code> to work with the database
          users.
        </p>
        <p id="22b90565-87ba-4a20-ae36-dfc0245eb25f" class="">
          Implement a <code>GET</code> endpoint that will accept
          an <code>id</code> as a route parameter and return the user
          corresponding to that <code>id</code>. If the user is not found,
          return the correct HTTP Status Code.
        </p>
        <p id="6726d46e-df5a-4449-8b2f-af547ae9ce69" class="">
          Implement all CRUD operations on users, including getting by ID.
        </p>
        <p id="fea1222d-892a-4fe2-a559-e90e83b24482" class="">
          Add sorting and pagination support to the GET all endpoint. For
          pagination, the client should supply the API with sorting information,
          the number of users per page, and the page number.
        </p>
        <h2 id="bb24c256-52af-4564-8beb-bb61a1841d6c" class="">
          <strong>Overview</strong>
        </h2>
        <p id="25269c7f-7b3e-4ff0-860b-9b346e0cad61" class="">
          <code>REST</code> is a generally agreed-upon set of principles and
          constraints. They are <strong>recommendations</strong>, not a
          standard.
        </p>
        <p id="ab9e251d-7455-4eae-b815-f0940ca26a75" class="">
          When designing a RESTful Web API, keep the following principles in
          mind:
        </p>
        <ul id="4794ab72-8cf9-430f-962d-111112138da5" class="bulleted-list">
          <li>everything is a <strong>resource</strong>.</li>
        </ul>
        <ul id="305b53e3-d2c2-4d4c-891d-30a6ac94bedd" class="bulleted-list">
          <li>
            each resource is accessible via a <strong>unique URI</strong>.
          </li>
        </ul>
        <ul id="6e2c2c58-fe77-45bc-87e6-77bea115ad51" class="bulleted-list">
          <li>resources can have multiple <strong>representations</strong>.</li>
        </ul>
        <ul id="953f6e82-b48f-47f0-a37d-b610769b90ad" class="bulleted-list">
          <li>
            communication happens over a <strong>stateless</strong> protocol
            (HTTP).
          </li>
        </ul>
        <ul id="40b93ebb-6418-4153-a56a-c33af849459e" class="bulleted-list">
          <li>
            resource management happens via <strong>HTTP methods</strong>.
          </li>
        </ul>
        <p id="9399eaaf-00b5-4542-aa09-35cd4efb26b5" class="">
          Applying the <code>REST</code> architecture to our APIs can make them
          scalable and simpler to maintain and extend.
        </p>
        <h2 id="5bad8e64-9f0f-4504-86c3-06e24030fb05" class="">
          <strong>Follow Along</strong>
        </h2>
        <p id="e0d39016-9e52-4bf5-a30a-2498b9a3b2d8" class="">
          REST APIs have six constraints:
        </p>
        <ul id="401d0d2e-502a-489a-8f12-324285443304" class="bulleted-list">
          <li><strong>client-server</strong> architecture.</li>
        </ul>
        <ul id="8e8effd4-c045-404a-ae14-ef0a151bc527" class="bulleted-list">
          <li>
            <strong>stateless</strong> architecture: each request should stand
            on its own, and order should not matter. No shared state.
          </li>
        </ul>
        <ul id="72e35351-128c-4186-8a58-83dd9906eb9d" class="bulleted-list">
          <li>
            <strong>cacheable</strong>: improves network performance.
            <ul id="0ce41588-8d43-43a2-ba29-c9a4fe50c284" class="bulleted-list">
              <li>
                <code>GET</code>, <code>PUT</code>,
                and <code>DELETE</code> should be <em>idempotent</em> (the same
                command executed multiple times, the state of resources on the
                server is exactly the same, much like pure functions)
              </li>
            </ul>
            <ul id="0bcc4f97-90b1-4501-9c14-979fb7fba53c" class="bulleted-list">
              <li><code>POST</code> is <em>not</em> idempotent.</li>
            </ul>
            <ul id="9d865db1-2fe1-4552-a441-7cf92d3fa913" class="bulleted-list">
              <li>
                Caching is a way to store and retrieve data so that the server
                can fulfill future requests faster without repeating expensive
                calculations or operations.
              </li>
            </ul>
          </li>
        </ul>
        <ul id="8412743d-e486-4e6d-8d1a-28628ded031d" class="bulleted-list">
          <li>
            <strong>layered system</strong>: component A (a client) might or
            might not communicate directly with component B (the server). There
            may be other layers between them like logging, caching, DNS servers,
            load balancers, and authentication.
          </li>
        </ul>
        <ul id="d1e77611-5f73-476b-84d0-1bcd9b1455be" class="bulleted-list">
          <li>
            <strong>code on demand</strong>
            <ul id="4421c342-d8c2-44c4-a4ca-0881ba022856" class="bulleted-list">
              <li>The API returns the resource and code to act on it.</li>
            </ul>
            <ul id="e2128751-ed20-4112-9f5d-168683238043" class="bulleted-list">
              <li>The client only needs to know how to execute the code.</li>
            </ul>
            <ul id="89ed3217-036f-4466-8497-2d65fadd4709" class="bulleted-list">
              <li>Makes the API more flexible, upgradeable, and extendible.</li>
            </ul>
            <ul id="0d03f00f-91b2-4ddd-9e39-d9ab1828cfb4" class="bulleted-list">
              <li>
                Most web applications send JavaScript code along with the data.
              </li>
            </ul>
          </li>
        </ul>
        <ul id="4a7fa587-adc5-43e1-9dea-46c6d29d20fa" class="bulleted-list">
          <li>
            <strong>uniform interfaces</strong>
            <ul id="a58ffae4-5033-4a91-86ce-f7148d4c0f82" class="bulleted-list">
              <li>
                Each resource should be accessible through a single URL. Not a
                hard requirement, but recommended.
              </li>
            </ul>
            <ul id="7670ae6c-7ca8-4272-a66b-b9721527091e" class="bulleted-list">
              <li>
                We should be able to manage the resources through
                these <em>representations</em> (the URL).
              </li>
            </ul>
            <ul id="bbc1687b-8534-473b-b6f0-660dc49c679d" class="bulleted-list">
              <li>
                every interaction with the resource should happen through the
                URL identifier we gave to it.
              </li>
            </ul>
            <ul id="0fb40771-82d6-4e87-bd2e-47af87a1d8d8" class="bulleted-list">
              <li>Self-descriptive messages.</li>
            </ul>
            <ul id="6bc170cd-4c89-4007-97ac-94442c0d0cce" class="bulleted-list">
              <li>
                <strong>HATEOAS</strong
                > (<strong>H</strong>ypermedia <strong>A</strong>s <strong>T</strong>he <strong>E</strong>ngine <strong>O</strong>f <strong>A</strong>pplication <strong>S</strong>tate).
                Much like a <em>choose your own adventure book</em>, the pages
                are not read in order. You start on page 1. Based on the
                information available, the reader (client) chooses the action to
                take, moving them to a different page. A good example of a
                hypermedia API is <a href="https://api.github.com/"
                  >the GitHub API (Links to an external site.)</a
                >.
              </li>
            </ul>
            <h2 id="f7d53e45-4e2c-46ab-99be-58246a72190b" class="">
              <strong>Overview</strong>
            </h2>
            <p id="e2a82a6d-175b-4320-a5ef-d763e7d29ff5" class="">
              An Express <code>Router</code> behaves like a mini Express
              application. It can have its
              own <code>Routing</code> and <code>Middleware</code>, but it needs
              to exist inside an Express application. Think of routers as a way
              of organizing Express applications–you write separate pieces that
              can later be <em>composed</em> together.
            </p>
            <p id="454bd29d-3621-406e-9a0e-15e09af6a1d8" class="">
              This should all become clear with an example.
            </p>
            <p id="1b22ae88-1843-4b4c-9ed2-d33e93d651dd" class="">
              We&#x27;ll start with our main server file.
            </p>
            <pre
              id="a209ee6b-74f9-4443-b2f3-b883b7cb1b5b"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const server = express();

server.use(&#x27;/&#x27;, (req, res) =&gt; res.send(&#x27;API up and running!&#x27;));

server.listen(8000, () =&gt; console.log(&#x27;API running on port 8000&#x27;));</code></pre>
            <p id="acc6fde7-4887-40ac-bad7-c6e5612e2c69" class="">
              If our applications only included the above code, we wouldn&#x27;t
              need routers. But imagine that this application needs endpoints to
              see a list of users, get details for a single user, add users,
              modify existing users, and inactivate users. That is at least five
              endpoints for the <code>users</code> resource alone.
            </p>
            <p id="7296198c-9bf8-4976-b4f7-57e9fa129ce5" class="">
              Now imagine this application also needs to deal with products,
              orders, returns, categories, providers, warehouses, clients,
              employees, and more. Even if we only have five endpoints per
              resource, each endpoint will have many lines of code, and you can
              see how trying to cram all that code in a single file could get
              unwieldy real fast.
            </p>
            <p id="339f1351-442d-40df-82a0-66b1b4815a57" class="">
              Let&#x27;s rewrite it to separate the main server file from the
              file handling the routes for users.
            </p>
            <p id="8aa05d39-3385-49db-9861-874c917f614f" class="">
              Create a file to handle all routes related to the user resource.
            </p>
            <pre
              id="d22de076-b930-453f-9c2a-736c0dc8c80e"
              class="code code-wrap"
            ><code>// inside /users/userRoutes.js &lt;- this can be place anywhere and called anything
const express = require(&#x27;express&#x27;);

const router = express.Router(); // notice the Uppercase R

// this file will only be used when the route begins with &quot;/users&quot;
// so we can remove that from the URLs, so &quot;/users&quot; becomes simply &quot;/&quot;
router.get(&#x27;/&#x27;, (req, res) =&gt; {
  res.status(200).send(&#x27;hello from the GET /users endpoint&#x27;);
});

router.get(&#x27;/:id&#x27;, (req, res) =&gt; {
  res.status(200).send(&#x27;hello from the GET /users/:id endpoint&#x27;);
});

router.post(&#x27;/&#x27;, (req, res) =&gt; {
  res.status(200).send(&#x27;hello from the POST /users endpoint&#x27;);
});

// ... and any other endpoint related to the user&#x27;s resource

// after the route has been fully configured, we then export it to be required where needed
module.exports = router; // standard convention dictates that this is the last line on the file</code></pre>
            <p id="420f30c6-6a58-45be-854b-0ec493421849" class="">
              Now, even if the user resource needs 8 or 10 endpoints, they are
              packaged neatly into this file.
            </p>
            <p id="625d8082-7139-45f5-8d64-c12b43837a67" class="">
              How can we use it in our main file? Like so:
            </p>
            <pre
              id="52072a53-e274-483b-8c30-33d405c32fab"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const userRoutes = require(&#x27;./users/userRoutes&#x27;);
const productRoutes = require(&#x27;./products/productRoutes&#x27;);
const clientRoutes = require(&#x27;./clients/clientRoutes&#x27;);

const server = express();

server.use(&#x27;/users&#x27;, userRoutes);
server.use(&#x27;/products&#x27;, productRoutes);
server.use(&#x27;/clients&#x27;, clientRoutes);

server.listen(8000, () =&gt; console.log(&#x27;API running on port 8000&#x27;));</code></pre>
            <p id="e4a45f3d-ccb7-4f18-ba91-7993db7e1e9d" class="">
              Much cleaner, we added three sets of endpoints to our server,
              where each needs only two lines of easy-to-read code.
            </p>
            <p id="e8e41bcf-ab82-42f1-8c5f-732fe5b545de" class="">
              There is an alternative syntax for writing route handlers, but
              we&#x27;ll leave that for you to explore.
            </p>
            <p id="ef49c941-b90b-45dc-8548-316ab06f5b62" class="">
              Also, note that <strong
                >it is possible to have a central router representing our API
                and have that router import the routes</strong
              >. This logic cleans up our main server file even more. Let&#x27;s
              see a quick example of that.
            </p>
            <pre
              id="f1f6e298-10d8-4e25-b122-462c8e319fe9"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const apiRoutes = require(&#x27;./api/apiRoutes&#x27;);

const server = express();

server.use(&#x27;/api&#x27;, userRoutes);

server.listen(8000, () =&gt; console.log(&#x27;API running on port 8000&#x27;));</code></pre>
            <p id="a04d0777-0a9a-4a9d-a5df-03167aa5eb49" class="">
              And the <code>apiRoutes</code> could look like this:
            </p>
            <pre
              id="81d9351c-61d8-4ca7-bcd0-6d8ff439dec5"
              class="code code-wrap"
            ><code>// inside /api/apiRoutes.js &lt;- this can be place anywhere and called anything
const express = require(&#x27;express&#x27;);

// if the other routers are not nested inside /api then the paths would change
const userRoutes = require(&#x27;./users/userRoutes&#x27;);
const productRoutes = require(&#x27;./products/productRoutes&#x27;);
const clientRoutes = require(&#x27;./clients/clientRoutes&#x27;);

const router = express.Router(); // notice the Uppercase R

// this file will only be used when the route begins with &quot;/api&quot;
// so we can remove that from the URLs, so &quot;/api/users&quot; becomes simply &quot;/users&quot;
router.use(&#x27;/users&#x27;, userRoutes);
router.use(&#x27;/products&#x27;, productRoutes);
router.use(&#x27;/clients&#x27;, clientRoutes);

// .. and any other endpoint related to the user&#x27;s resource

// after the route has been fully configured, we then export it so it can be required where needed
module.exports = router; // standard convention dictates that this is the last line on the file</code></pre>
            <p id="a9ecd179-e3dc-4204-b6d1-8b501ba8a527" class="">
              As you can see, routers can <em>use</em> other routers.
            </p>
            <p id="44db9ddf-10f3-40dd-95b0-4d2f650df181" class="">
              The <code>userRoutes</code>, <code>productRoutes</code>,
              and <code>clientRoutes</code> remain unchanged (other than
              relocating them inside the API folder).
            </p>
            <p id="b5d1fa2d-e941-4eb9-9ae0-12cd4f1a5b14" class="">
              In the next section, follow along as we practice using Routers.
            </p>
            <h2 id="94680c22-0ba3-4d62-aa21-6a26f20438cc" class="">
              <strong>Follow Along</strong>
            </h2>
            <p id="c7ab9943-8f7b-44dd-99a5-e4fd597df933" class="">
              Let&#x27;s implement a simple API that returns strings but takes
              advantage of Express Routers. Express routers are overkill for
              such a simple application. Still, in larger applications, there
              would be many benefits to taking this approach.
            </p>
            <p id="2663119e-b0b0-41c7-90b9-0a3dc8f22565" class="">
              We&#x27;ll build it from scratch. First, follow these steps to
              create the folder and main server file:
            </p>
            <ul id="f2a3c545-9b42-4097-9126-48cf6a740ef3" class="bulleted-list">
              <li>
                create an empty folder for our Web API. Feel free to name it
                anything you&#x27;d like.
              </li>
            </ul>
            <ul id="6d84ebf5-db53-4cbe-b0d4-b0123358ac56" class="bulleted-list">
              <li>
                <strong>CD into the folder</strong> you just created and
                type <code>npm init -y</code> to generate a
                default <code>package.json</code> file. The <code>y</code> flag
                saves time by answering <code>yes</code> to all the questions
                that the <code>npm init</code> command would ask one at a time.
              </li>
            </ul>
            <ul id="ef64aaae-f89c-43d0-a380-604330b83ed6" class="bulleted-list">
              <li>open the folder in your favorite text editor.</li>
            </ul>
            <ul id="8c62c2a5-8ca1-4f05-9a82-5c0723d8a155" class="bulleted-list">
              <li>
                inside the <code>package.json</code> file, change <code
                  >&quot;test&quot;: &quot;echo \&quot;Error: no test
                  specified\&quot; &amp;&amp; exit 1&quot;</code
                > inside the <code>scripts</code> object to read: <code
                  >&quot;start&quot;: &quot;nodemon index.js&quot;</code
                >. Changing the <code>scripts</code> object will let us run our
                server using <code>nodemon</code> by typing <code
                  >npm start</code
                > at the command line/terminal. <strong
                  >Make sure to save the file.</strong
                >
              </li>
            </ul>
            <ul id="2776fbf5-bee7-42e1-a8d7-7d120317473f" class="bulleted-list">
              <li>
                we need to install <code>nodemon</code> as a development-time
                dependency only because it is not needed when deploying our
                server to production. Type <code>npm install -D nodemon</code
                > will add it to the <code>devDependencies</code> property in
                our <code>package.json</code> file.
              </li>
            </ul>
            <ul id="faa721f0-b106-4ae2-9e9f-d9390e805c29" class="bulleted-list">
              <li>
                create a file to host the server code. We&#x27;ll call
                it <code>index.js</code>.
              </li>
            </ul>
            <ul id="1cf9c1db-da74-4b41-b3f5-3881d823d08d" class="bulleted-list">
              <li>
                Add the basic code to create our Express server and have a
                default <code>/</code> endpoint to test that our server responds
                to requests.
              </li>
            </ul>
            <pre
              id="57fe6321-2ac1-45bc-a83e-5167ae47e2da"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const server = express();

server.use(&#x27;/&#x27;, (req, res) =&gt; res.send(&#x27;API up and running!&#x27;));

// using port 9000 for this example
server.listen(9000, () =&gt; console.log(&#x27;API running on port 9000&#x27;));</code></pre>
            <ul id="58fe09df-4fce-42b0-a35d-8e71ed6efd22" class="bulleted-list">
              <li>
                add the <code>express</code> npm module: <code
                  >npm install express</code
                >.
              </li>
            </ul>
            <ul id="d98ea2b9-76a8-4756-a824-be4c5b75f63d" class="bulleted-list">
              <li>start the server by typing <code>npm start</code>.</li>
            </ul>
            <ul id="dbdccf25-c552-4392-9b3b-9e87544b2c4e" class="bulleted-list">
              <li>
                test it by visiting: <a href="http://localhost:9000/"
                  >http://localhost:9000 (Links to an external site.)</a
                >0 in your browser.
              </li>
            </ul>
            <p id="7c20c4c4-f63b-4cf3-9e0e-9768b0ccf7f3" class="">
              Let&#x27;s add our first router to manage
              the <code>races</code> resource.
            </p>
            <ul id="cebd5955-0c9a-44a3-b7a5-7e9f5b440d90" class="bulleted-list">
              <li>
                create a folder called <code>races</code> to host our router.
              </li>
            </ul>
            <ul id="505bb3c1-bbf6-4d38-9526-0c9983a5c98e" class="bulleted-list">
              <li>
                create a file called <code>raceRoutes.js</code> and add the
                following code:
              </li>
            </ul>
            <pre
              id="e3d3fc91-d0bd-403f-97c9-7490c0bfae8c"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const router = express.Router();

router.get(&#x27;/&#x27;, (req, res) =&gt; {
  const races = [&#x27;human&#x27;, &#x27;elf&#x27;, &#x27;hobbit&#x27;, &#x27;wizard&#x27;, &#x27;dwarf&#x27;, &#x27;orc&#x27;];

  res.status(200).json(races);
});

module.exports = router;</code></pre>
            <p id="fc49a3ee-8ec5-499a-b3d3-e232a8cad780" class="">
              Now open your <code>index.js</code> file and use the newly created
              router by following these steps.
            </p>
            <ul id="9130259b-524e-438e-a696-256c41b94763" class="bulleted-list">
              <li>
                require the <code>raceRoutes.js</code> file after requiring
                Express.
              </li>
            </ul>
            <ul id="c6d0bc8a-1bd2-4052-b94c-e9a7807bf51f" class="bulleted-list">
              <li>
                use the race router to handle the <code>/races</code> endpoint.
              </li>
            </ul>
            <p id="273f3f0e-0e99-4121-a0ec-0d898934c98b" class="">
              Our <code>index.js</code> file now looks like this:
            </p>
            <pre
              id="5a4876e2-684f-4ddc-8f6e-e689f17f343c"
              class="code code-wrap"
            ><code>const express = require(&#x27;express&#x27;);

const raceRoutes = require(&#x27;./races/raceRoutes&#x27;);

const server = express();

server.use(&#x27;/races&#x27;, raceRoutes);

server.use(&#x27;/&#x27;, (req, res) =&gt; res.send(&#x27;API up and running!&#x27;));

server.listen(9000, () =&gt; console.log(&#x27;API running on port 9000&#x27;));</code></pre>
            <p id="e1213beb-51ec-4b54-b27f-4e55d561dd06" class="">
              Visiting <a href="http://localhost:9000/races"
                >http://localhost:9000/races (Links to an external site.)</a
              >s should return our array of strings.
            </p>
            <p id="25014bb3-b92d-40b8-beb5-2a2fa22ea8b7" class="">
              Great job! You are on your way to writing well-structured APIs
              that other team members (including your future self) will love
              using!
            </p>
          </li>
        </ul>
      </div>
    </article>
  </body>
</html>
