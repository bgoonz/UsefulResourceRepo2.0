<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>holy-grail-of-bash-scripts</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<h1 id="common-bash-use-cases">Common Bash Use Cases</h1>
<h1 id="table-of-contents">Table of Contents</h1>
<!-- vim-markdown-toc GFM -->
<ul>
<li><a href="#common-bash-use-cases">Common Bash Use Cases</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#strings">STRINGS</a>
<ul>
<li><a href="#trim-leading-and-trailing-white-space-from-string">Trim leading and trailing white-space from string</a></li>
<li><a href="#trim-all-white-space-from-string-and-truncate-spaces">Trim all white-space from string and truncate spaces</a></li>
<li><a href="#use-regex-on-a-string">Use regex on a string</a></li>
<li><a href="#split-a-string-on-a-delimiter">Split a string on a delimiter</a></li>
<li><a href="#change-a-string-to-lowercase">Change a string to lowercase</a></li>
<li><a href="#change-a-string-to-uppercase">Change a string to uppercase</a></li>
<li><a href="#reverse-a-string-case">Reverse a string case</a></li>
<li><a href="#trim-quotes-from-a-string">Trim quotes from a string</a></li>
<li><a href="#strip-all-instances-of-pattern-from-string">Strip all instances of pattern from string</a></li>
<li><a href="#strip-first-occurrence-of-pattern-from-string">Strip first occurrence of pattern from string</a></li>
<li><a href="#strip-pattern-from-start-of-string">Strip pattern from start of string</a></li>
<li><a href="#strip-pattern-from-end-of-string">Strip pattern from end of string</a></li>
<li><a href="#percent-encode-a-string">Percent-encode a string</a></li>
<li><a href="#decode-a-percent-encoded-string">Decode a percent-encoded string</a></li>
<li><a href="#check-if-string-contains-a-sub-string">Check if string contains a sub-string</a></li>
<li><a href="#check-if-string-starts-with-sub-string">Check if string starts with sub-string</a></li>
<li><a href="#check-if-string-ends-with-sub-string">Check if string ends with sub-string</a></li>
</ul></li>
<li><a href="#arrays">ARRAYS</a>
<ul>
<li><a href="#reverse-an-array">Reverse an array</a></li>
<li><a href="#remove-duplicate-array-elements">Remove duplicate array elements</a></li>
<li><a href="#random-array-element">Random array element</a></li>
<li><a href="#cycle-through-an-array">Cycle through an array</a></li>
<li><a href="#toggle-between-two-values">Toggle between two values</a></li>
</ul></li>
<li><a href="#loops">LOOPS</a>
<ul>
<li><a href="#loop-over-a-range-of-numbers">Loop over a range of numbers</a></li>
<li><a href="#loop-over-a-variable-range-of-numbers">Loop over a variable range of numbers</a></li>
<li><a href="#loop-over-an-array">Loop over an array</a></li>
<li><a href="#loop-over-an-array-with-an-index">Loop over an array with an index</a></li>
<li><a href="#loop-over-the-contents-of-a-file">Loop over the contents of a file</a></li>
<li><a href="#loop-over-files-and-directories">Loop over files and directories</a></li>
</ul></li>
<li><a href="#file-handling">FILE HANDLING</a>
<ul>
<li><a href="#read-a-file-to-a-string">Read a file to a string</a></li>
<li><a href="#read-a-file-to-an-array-by-line">Read a file to an array (<em>by line</em>)</a></li>
<li><a href="#get-the-first-n-lines-of-a-file">Get the first N lines of a file</a></li>
<li><a href="#get-the-last-n-lines-of-a-file">Get the last N lines of a file</a></li>
<li><a href="#get-the-number-of-lines-in-a-file">Get the number of lines in a file</a></li>
<li><a href="#count-files-or-directories-in-directory">Count files or directories in directory</a></li>
<li><a href="#create-an-empty-file">Create an empty file</a></li>
<li><a href="#extract-lines-between-two-markers">Extract lines between two markers</a></li>
</ul></li>
<li><a href="#file-paths">FILE PATHS</a>
<ul>
<li><a href="#get-the-directory-name-of-a-file-path">Get the directory name of a file path</a></li>
<li><a href="#get-the-base-name-of-a-file-path">Get the base-name of a file path</a></li>
</ul></li>
<li><a href="#variables">VARIABLES</a>
<ul>
<li><a href="#assign-and-access-a-variable-using-a-variable">Assign and access a variable using a variable</a></li>
<li><a href="#name-a-variable-based-on-another-variable">Name a variable based on another variable</a></li>
</ul></li>
<li><a href="#escape-sequences">ESCAPE SEQUENCES</a>
<ul>
<li><a href="#text-colors">Text Colors</a></li>
<li><a href="#text-attributes">Text Attributes</a></li>
<li><a href="#cursor-movement">Cursor Movement</a></li>
<li><a href="#erasing-text">Erasing Text</a></li>
</ul></li>
<li><a href="#parameter-expansion">PARAMETER EXPANSION</a>
<ul>
<li><a href="#indirection">Indirection</a></li>
<li><a href="#replacement">Replacement</a></li>
<li><a href="#length">Length</a></li>
<li><a href="#expansion">Expansion</a></li>
<li><a href="#case-modification">Case Modification</a></li>
<li><a href="#default-value">Default Value</a></li>
</ul></li>
<li><a href="#brace-expansion">BRACE EXPANSION</a>
<ul>
<li><a href="#ranges">Ranges</a></li>
<li><a href="#string-lists">String Lists</a></li>
</ul></li>
<li><a href="#conditional-expressions">CONDITIONAL EXPRESSIONS</a>
<ul>
<li><a href="#file-conditionals">File Conditionals</a></li>
<li><a href="#file-comparisons">File Comparisons</a></li>
<li><a href="#variable-conditionals">Variable Conditionals</a></li>
<li><a href="#variable-comparisons">Variable Comparisons</a></li>
</ul></li>
<li><a href="#arithmetic-operators">ARITHMETIC OPERATORS</a>
<ul>
<li><a href="#assignment">Assignment</a></li>
<li><a href="#arithmetic">Arithmetic</a></li>
<li><a href="#bitwise">Bitwise</a></li>
<li><a href="#logical">Logical</a></li>
<li><a href="#miscellaneous">Miscellaneous</a></li>
</ul></li>
<li><a href="#arithmetic-1">ARITHMETIC</a>
<ul>
<li><a href="#simpler-syntax-to-set-variables">Simpler syntax to set variables</a></li>
<li><a href="#ternary-tests">Ternary Tests</a></li>
</ul></li>
<li><a href="#traps">TRAPS</a>
<ul>
<li><a href="#do-something-on-script-exit">Do something on script exit</a></li>
<li><a href="#ignore-terminal-interrupt-ctrlc-sigint">Ignore terminal interrupt (CTRL+C, SIGINT)</a></li>
<li><a href="#react-to-window-resize">React to window resize</a></li>
<li><a href="#do-something-before-every-command">Do something before every command</a></li>
<li><a href="#do-something-when-a-shell-function-or-a-sourced-file-finishes-executing">Do something when a shell function or a sourced file finishes executing</a></li>
</ul></li>
<li><a href="#performance">PERFORMANCE</a>
<ul>
<li><a href="#disable-unicode">Disable Unicode</a></li>
</ul></li>
<li><a href="#obsolete-syntax">OBSOLETE SYNTAX</a>
<ul>
<li><a href="#shebang">Shebang</a></li>
<li><a href="#command-substitution">Command Substitution</a></li>
<li><a href="#function-declaration">Function Declaration</a></li>
</ul></li>
<li><a href="#internal-variables">INTERNAL VARIABLES</a>
<ul>
<li><a href="#get-the-location-to-the-bash-binary">Get the location to the <code>bash</code> binary</a></li>
<li><a href="#get-the-version-of-the-current-running-bash-process">Get the version of the current running <code>bash</code> process</a></li>
<li><a href="#open-the-users-preferred-text-editor">Open the user’s preferred text editor</a></li>
<li><a href="#get-the-name-of-the-current-function">Get the name of the current function</a></li>
<li><a href="#get-the-host-name-of-the-system">Get the host-name of the system</a></li>
<li><a href="#get-the-architecture-of-the-operating-system">Get the architecture of the Operating System</a></li>
<li><a href="#get-the-name-of-the-operating-system--kernel">Get the name of the Operating System / Kernel</a></li>
<li><a href="#get-the-current-working-directory">Get the current working directory</a></li>
<li><a href="#get-the-number-of-seconds-the-script-has-been-running">Get the number of seconds the script has been running</a></li>
<li><a href="#get-a-pseudorandom-integer">Get a pseudorandom integer</a></li>
</ul></li>
<li><a href="#information-about-the-terminal">INFORMATION ABOUT THE TERMINAL</a>
<ul>
<li><a href="#get-the-terminal-size-in-lines-and-columns-from-a-script">Get the terminal size in lines and columns (<em>from a script</em>)</a></li>
<li><a href="#get-the-terminal-size-in-pixels">Get the terminal size in pixels</a></li>
<li><a href="#get-the-current-cursor-position">Get the current cursor position</a></li>
</ul></li>
<li><a href="#conversion">CONVERSION</a>
<ul>
<li><a href="#convert-a-hex-color-to-rgb">Convert a hex color to RGB</a></li>
<li><a href="#convert-an-rgb-color-to-hex">Convert an RGB color to hex</a></li>
</ul></li>
<li><a href="#code-golf">CODE GOLF</a>
<ul>
<li><a href="#shorter-for-loop-syntax">Shorter <code>for</code> loop syntax</a></li>
<li><a href="#shorter-infinite-loops">Shorter infinite loops</a></li>
<li><a href="#shorter-function-declaration">Shorter function declaration</a></li>
<li><a href="#shorter-if-syntax">Shorter <code>if</code> syntax</a></li>
<li><a href="#simpler-case-statement-to-set-variable">Simpler <code>case</code> statement to set variable</a></li>
</ul></li>
<li><a href="#other">OTHER</a>
<ul>
<li><a href="#use-read-as-an-alternative-to-the-sleep-command">Use <code>read</code> as an alternative to the <code>sleep</code> command</a></li>
<li><a href="#check-if-a-program-is-in-the-users-path">Check if a program is in the user’s PATH</a></li>
<li><a href="#get-the-current-date-using-strftime">Get the current date using <code>strftime</code></a></li>
<li><a href="#get-the-username-of-the-current-user">Get the username of the current user</a></li>
<li><a href="#generate-a-uuid-v4">Generate a UUID V4</a></li>
<li><a href="#progress-bars">Progress bars</a></li>
<li><a href="#get-the-list-of-functions-in-a-script">Get the list of functions in a script</a></li>
<li><a href="#bypass-shell-aliases">Bypass shell aliases</a></li>
<li><a href="#bypass-shell-functions">Bypass shell functions</a></li>
<li><a href="#run-a-command-in-the-background">Run a command in the background</a></li>
<li><a href="#capture-the-return-value-of-a-function-without-command-substitution">Capture the return value of a function without command substitution</a></li>
</ul></li>
<li><a href="#afterword">AFTERWORD</a></li>
</ul>
<!-- vim-markdown-toc -->
<p><br></p>
<!-- CHAPTER START -->
<h1 id="strings">STRINGS</h1>
<hr />
<h2 id="trim-leading-and-trailing-white-space-from-string">Trim leading and trailing white-space from string</h2>
<p>This is an alternative to <code>sed</code>, <code>awk</code>, <code>perl</code> and other tools. The function below works by finding all leading and trailing white-space and removing it from the start and end of the string. The <code>:</code> built-in is used in place of a temporary variable.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb1-1" title="1"><span class="fu">trim_string()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb1-2" title="2">    <span class="co"># Usage: trim_string &quot;   example   string    &quot;</span></a>
<a class="sourceLine" id="cb1-3" title="3">    <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${1#</span><span class="st">&quot;</span><span class="va">${1%%</span>[![:space:]]*<span class="va">}</span><span class="st">&quot;</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-4" title="4">    <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${_%</span><span class="st">&quot;</span><span class="va">${_</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="va">-</span>--</a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">## *[![:space:]]<span class="va">}</span><span class="st">&quot;</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$_</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ trim_string &quot;    Hello,  World    &quot;
Hello,  World

$ name=&quot;   John Black  &quot;
$ trim_string &quot;$name&quot;
John Black</code></pre>
<hr />
<h2 id="trim-all-white-space-from-string-and-truncate-spaces">Trim all white-space from string and truncate spaces</h2>
<p>This is an alternative to <code>sed</code>, <code>awk</code>, <code>perl</code> and other tools. The function below works by abusing word splitting to create a new string without leading/trailing white-space and with truncated spaces.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># shellcheck disable=SC2086,SC2048</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="fu">trim_all()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb3-3" title="3">    <span class="co"># Usage: trim_all &quot;   example   string    &quot;</span></a>
<a class="sourceLine" id="cb3-4" title="4">    <span class="kw">set</span> <span class="ex">-f</span></a>
<a class="sourceLine" id="cb3-5" title="5">    <span class="kw">set</span> <span class="ex">--</span> <span class="va">$*</span></a>
<a class="sourceLine" id="cb3-6" title="6">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$*</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb3-7" title="7">    <span class="kw">set</span> <span class="ex">+f</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ trim_all &quot;    Hello,    World    &quot;
Hello, World

$ name=&quot;   John   Black  is     my    name.    &quot;
$ trim_all &quot;$name&quot;
John Black is my name.</code></pre>
<hr />
<h2 id="use-regex-on-a-string">Use regex on a string</h2>
<p>The result of <code>bash</code>’s regex matching can be used to replace <code>sed</code> for a large number of use-cases.</p>
<p><strong>CAVEAT</strong>: This is one of the few platform dependent <code>bash</code> features. <code>bash</code> will use whatever regex engine is installed on the user’s system. Stick to POSIX regex features if aiming for compatibility.</p>
<p><strong>CAVEAT</strong>: This example only prints the first matching group. When using multiple capture groups some modification is needed.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb5-1" title="1"><span class="fu">regex()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb5-2" title="2">    <span class="co"># Usage: regex &quot;string&quot; &quot;regex&quot;</span></a>
<a class="sourceLine" id="cb5-3" title="3">    [[ <span class="va">$1</span> =<span class="ex">~</span> <span class="va">$2</span> ]] <span class="kw">&amp;&amp;</span> <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${BASH_REMATCH[1]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ # Trim leading white-space.
$ regex &#39;    hello&#39; &#39;^\s*(.*)&#39;
hello

$ # Validate a hex color.
$ regex &quot;#FFFFFF&quot; &#39;^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$&#39;
#FFFFFF

$ # Validate a hex color (invalid).
$ regex &quot;red&quot; &#39;^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$&#39;
# no output (invalid)</code></pre>
<p><strong>Example Usage in script:</strong></p>
<pre class="shell"><code>is_hex_color() {
    if [[ $1 =~ ^(#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3}))$ ]]; then
        printf &#39;%s\n&#39; &quot;${BASH_REMATCH[1]}&quot;
    else
        printf &#39;%s\n&#39; &quot;error: $1 is an invalid color.&quot;
        return 1
    fi
}

read -r color
is_hex_color &quot;$color&quot; || color=&quot;#FFFFFF&quot;

# Do stuff.</code></pre>
<hr />
<h2 id="split-a-string-on-a-delimiter">Split a string on a delimiter</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p>This is an alternative to <code>cut</code>, <code>awk</code> and other tools.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb8-1" title="1"><span class="fu">split()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb8-2" title="2">   <span class="co"># Usage: split &quot;string&quot; &quot;delimiter&quot;</span></a>
<a class="sourceLine" id="cb8-3" title="3">   <span class="va">IFS=</span><span class="st">$&#39;</span><span class="dt">\n</span><span class="st">&#39;</span> <span class="bu">read</span> -d <span class="st">&quot;&quot;</span> -ra <span class="va">arr</span> <span class="op">&lt;&lt;&lt;</span> <span class="st">&quot;</span><span class="va">${1//$2/</span><span class="st">$&#39;</span><span class="dt">\n</span><span class="st">&#39;</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb8-4" title="4">   <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${arr[@]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ split &quot;apples,oranges,pears,grapes&quot; &quot;,&quot;
apples
oranges
pears
grapes

$ split &quot;1, 2, 3, 4, 5&quot; &quot;, &quot;
1
2
3
4
5

# Multi char delimiters work too!
$ split &quot;hello---world---my---name---is---john&quot; &quot;---&quot;
hello
world
my
name
is
john</code></pre>
<hr />
<h2 id="change-a-string-to-lowercase">Change a string to lowercase</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb10-1" title="1"><span class="fu">lower()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb10-2" title="2">    <span class="co"># Usage: lower &quot;string&quot;</span></a>
<a class="sourceLine" id="cb10-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;${1,,}&quot;</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ lower &quot;HELLO&quot;
hello

$ lower &quot;HeLlO&quot;
hello

$ lower &quot;hello&quot;
hello</code></pre>
<hr />
<h2 id="change-a-string-to-uppercase">Change a string to uppercase</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb12-1" title="1"><span class="fu">upper()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="co"># Usage: upper &quot;string&quot;</span></a>
<a class="sourceLine" id="cb12-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;${1^^}&quot;</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ upper &quot;hello&quot;
HELLO

$ upper &quot;HeLlO&quot;
HELLO

$ upper &quot;HELLO&quot;
HELLO</code></pre>
<hr />
<h2 id="reverse-a-string-case">Reverse a string case</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb14-1" title="1"><span class="fu">reverse_case()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="co"># Usage: reverse_case &quot;string&quot;</span></a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;${1~~}&quot;</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ reverse_case &quot;hello&quot;
HELLO

$ reverse_case &quot;HeLlO&quot;
hElLo

$ reverse_case &quot;HELLO&quot;
hello</code></pre>
<hr />
<h2 id="trim-quotes-from-a-string">Trim quotes from a string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb16-1" title="1"><span class="fu">trim_quotes()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb16-2" title="2">    <span class="co"># Usage: trim_quotes &quot;string&quot;</span></a>
<a class="sourceLine" id="cb16-3" title="3">    <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${1//</span><span class="dt">\&#39;</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb16-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${_//</span><span class="dt">\&quot;</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ var=&quot;&#39;Hello&#39;, \&quot;World\&quot;&quot;
$ trim_quotes &quot;$var&quot;
Hello, World</code></pre>
<hr />
<h2 id="strip-all-instances-of-pattern-from-string">Strip all instances of pattern from string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb18-1" title="1"><span class="fu">strip_all()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb18-2" title="2">    <span class="co"># Usage: strip_all &quot;string&quot; &quot;pattern&quot;</span></a>
<a class="sourceLine" id="cb18-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${1//$2}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb18-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ strip_all &quot;The Quick Brown Fox&quot; &quot;[aeiou]&quot;
Th Qck Brwn Fx

$ strip_all &quot;The Quick Brown Fox&quot; &quot;[[:space:]]&quot;
TheQuickBrownFox

$ strip_all &quot;The Quick Brown Fox&quot; &quot;Quick &quot;
The Brown Fox</code></pre>
<hr />
<h2 id="strip-first-occurrence-of-pattern-from-string">Strip first occurrence of pattern from string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb20-1" title="1"><span class="fu">strip()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb20-2" title="2">    <span class="co"># Usage: strip &quot;string&quot; &quot;pattern&quot;</span></a>
<a class="sourceLine" id="cb20-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${1/$2}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ strip &quot;The Quick Brown Fox&quot; &quot;[aeiou]&quot;
Th Quick Brown Fox

$ strip &quot;The Quick Brown Fox&quot; &quot;[[:space:]]&quot;
TheQuick Brown Fox</code></pre>
<hr />
<h2 id="strip-pattern-from-start-of-string">Strip pattern from start of string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb22-1" title="1"><span class="fu">lstrip()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb22-2" title="2">    <span class="co"># Usage: lstrip &quot;string&quot; &quot;pattern&quot;</span></a>
<a class="sourceLine" id="cb22-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;${1</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="st">---</span></a>
<a class="sourceLine" id="cb22-5" title="5"></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="st">## </span><span class="va">$2</span><span class="st">}&quot;</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ lstrip &quot;The Quick Brown Fox&quot; &quot;The &quot;
Quick Brown Fox</code></pre>
<hr />
<h2 id="strip-pattern-from-end-of-string">Strip pattern from end of string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb24-1" title="1"><span class="fu">rstrip()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb24-2" title="2">    <span class="co"># Usage: rstrip &quot;string&quot; &quot;pattern&quot;</span></a>
<a class="sourceLine" id="cb24-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${1%%$2}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb24-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ rstrip &quot;The Quick Brown Fox&quot; &quot; Fox&quot;
The Quick Brown</code></pre>
<hr />
<h2 id="percent-encode-a-string">Percent-encode a string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb26-1" title="1"><span class="fu">urlencode()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb26-2" title="2">    <span class="co"># Usage: urlencode &quot;string&quot;</span></a>
<a class="sourceLine" id="cb26-3" title="3">    <span class="bu">local</span> <span class="va">LC_ALL=</span>C</a>
<a class="sourceLine" id="cb26-4" title="4">    <span class="kw">for</span> <span class="kw">((</span> i = 0; i &lt; <span class="va">${#1}</span>; i++ <span class="kw">))</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb26-5" title="5">        <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${1:i:1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb26-6" title="6">        <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$_</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb26-7" title="7">            [a-zA-Z0-9.~_-]<span class="kw">)</span></a>
<a class="sourceLine" id="cb26-8" title="8">                <span class="bu">printf</span> <span class="st">&#39;%s&#39;</span> <span class="st">&quot;</span><span class="va">$_</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb26-9" title="9">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb26-10" title="10"></a>
<a class="sourceLine" id="cb26-11" title="11">            *<span class="kw">)</span></a>
<a class="sourceLine" id="cb26-12" title="12">                <span class="bu">printf</span> <span class="st">&#39;%%%02X&#39;</span> <span class="st">&quot;&#39;</span><span class="va">$_</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb26-13" title="13">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb26-14" title="14">        <span class="kw">esac</span></a>
<a class="sourceLine" id="cb26-15" title="15">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb26-16" title="16">    <span class="bu">printf</span> <span class="st">&#39;\n&#39;</span></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ urlencode &quot;https://github.com/dylanaraps/pure-bash-bible&quot;
https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible</code></pre>
<hr />
<h2 id="decode-a-percent-encoded-string">Decode a percent-encoded string</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb28-1" title="1"><span class="fu">urldecode()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb28-2" title="2">    <span class="co"># Usage: urldecode &quot;string&quot;</span></a>
<a class="sourceLine" id="cb28-3" title="3">    <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${1//</span>+<span class="va">/</span> <span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb28-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%b\n&#39;</span> <span class="st">&quot;</span><span class="va">${_//</span>%<span class="va">/</span><span class="dt">\\</span>x<span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb28-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ urldecode &quot;https%3A%2F%2Fgithub.com%2Fdylanaraps%2Fpure-bash-bible&quot;
https://github.com/dylanaraps/pure-bash-bible</code></pre>
<hr />
<h2 id="check-if-string-contains-a-sub-string">Check if string contains a sub-string</h2>
<p><strong>Using a test:</strong></p>
<pre class="shell"><code>if [[ $var == *sub_string* ]]; then
    printf &#39;%s\n&#39; &quot;sub_string is in var.&quot;
fi

# Inverse (substring not in string).
if [[ $var != *sub_string* ]]; then
    printf &#39;%s\n&#39; &quot;sub_string is not in var.&quot;
fi

# This works for arrays too!
if [[ ${arr[*]} == *sub_string* ]]; then
    printf &#39;%s\n&#39; &quot;sub_string is in array.&quot;
fi</code></pre>
<p><strong>Using a case statement:</strong></p>
<pre class="shell"><code>case &quot;$var&quot; in
    *sub_string*)
        # Do stuff
    ;;

    *sub_string2*)
        # Do more stuff
    ;;

    *)
        # Else
    ;;
esac</code></pre>
<hr />
<h2 id="check-if-string-starts-with-sub-string">Check if string starts with sub-string</h2>
<pre class="shell"><code>if [[ $var == sub_string* ]]; then
    printf &#39;%s\n&#39; &quot;var starts with sub_string.&quot;
fi

# Inverse (var does not start with sub_string).
if [[ $var != sub_string* ]]; then
    printf &#39;%s\n&#39; &quot;var does not start with sub_string.&quot;
fi</code></pre>
<hr />
<h2 id="check-if-string-ends-with-sub-string">Check if string ends with sub-string</h2>
<pre class="shell"><code>if [[ $var == *sub_string ]]; then
    printf &#39;%s\n&#39; &quot;var ends with sub_string.&quot;
fi

# Inverse (var does not end with sub_string).
if [[ $var != *sub_string ]]; then
    printf &#39;%s\n&#39; &quot;var does not end with sub_string.&quot;
fi</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="arrays">ARRAYS</h1>
<hr />
<h2 id="reverse-an-array">Reverse an array</h2>
<p>Enabling <code>extdebug</code> allows access to the <code>BASH_ARGV</code> array which stores the current function’s arguments in reverse.</p>
<p><strong>CAVEAT</strong>: Requires <code>shopt -s compat44</code> in <code>bash</code> 5.0+.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb34-1" title="1"><span class="fu">reverse_array()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb34-2" title="2">    <span class="co"># Usage: reverse_array &quot;array&quot;</span></a>
<a class="sourceLine" id="cb34-3" title="3">    <span class="bu">shopt</span> -s extdebug</a>
<a class="sourceLine" id="cb34-4" title="4">    <span class="fu">f()</span><span class="kw">(</span><span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${BASH_ARGV[@]}</span><span class="st">&quot;</span><span class="kw">)</span>; <span class="ex">f</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb34-5" title="5">    <span class="bu">shopt</span> -u extdebug</a>
<a class="sourceLine" id="cb34-6" title="6"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ reverse_array 1 2 3 4 5
5
4
3
2
1

$ arr=(red blue green)
$ reverse_array &quot;${arr[@]}&quot;
green
blue
red</code></pre>
<hr />
<h2 id="remove-duplicate-array-elements">Remove duplicate array elements</h2>
<p>Create a temporary associative array. When setting associative array values and a duplicate assignment occurs, bash overwrites the key. This allows us to effectively remove array duplicates.</p>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>CAVEAT:</strong> List order may not stay the same.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb36-1" title="1"><span class="fu">remove_array_dups()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb36-2" title="2">    <span class="co"># Usage: remove_array_dups &quot;array&quot;</span></a>
<a class="sourceLine" id="cb36-3" title="3">    <span class="bu">declare</span> -A <span class="va">tmp_array</span></a>
<a class="sourceLine" id="cb36-4" title="4"></a>
<a class="sourceLine" id="cb36-5" title="5">    <span class="kw">for</span> <span class="ex">i</span> in <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="kw">;</span> <span class="kw">do</span></a>
<a class="sourceLine" id="cb36-6" title="6">        [[ <span class="va">$i</span> ]] <span class="kw">&amp;&amp;</span> <span class="va">IFS=</span><span class="st">&quot; &quot;</span> <span class="va">tmp_array[</span><span class="st">&quot;</span><span class="va">${i:-</span> <span class="va">}</span><span class="st">&quot;</span><span class="va">]=</span>1</a>
<a class="sourceLine" id="cb36-7" title="7">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb36-8" title="8"></a>
<a class="sourceLine" id="cb36-9" title="9">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${!tmp_array[@]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb36-10" title="10"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ remove_array_dups 1 1 2 2 3 3 3 3 3 4 4 4 4 4 5 5 5 5 5 5
1
2
3
4
5

$ arr=(red red green blue blue)
$ remove_array_dups &quot;${arr[@]}&quot;
red
green
blue</code></pre>
<hr />
<h2 id="random-array-element">Random array element</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb38-1" title="1"><span class="fu">random_array_element()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb38-2" title="2">    <span class="co"># Usage: random_array_element &quot;array&quot;</span></a>
<a class="sourceLine" id="cb38-3" title="3">    <span class="bu">local</span> <span class="va">arr=(</span><span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span><span class="va">)</span></a>
<a class="sourceLine" id="cb38-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${arr[RANDOM % $#]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb38-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ array=(red green blue yellow brown)
$ random_array_element &quot;${array[@]}&quot;
yellow

# Multiple arguments can also be passed.
$ random_array_element 1 2 3 4 5 6 7
3</code></pre>
<hr />
<h2 id="cycle-through-an-array">Cycle through an array</h2>
<p>Each time the <code>printf</code> is called, the next array element is printed. When the print hits the last array element it starts from the first element again.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb40-1" title="1"><span class="va">arr=(</span>a b c d<span class="va">)</span></a>
<a class="sourceLine" id="cb40-2" title="2"></a>
<a class="sourceLine" id="cb40-3" title="3"><span class="fu">cycle()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb40-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s &#39;</span> <span class="st">&quot;</span><span class="va">${arr[${i:=</span>0<span class="va">}]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb40-5" title="5">    <span class="kw">((</span>i=i&gt;=<span class="va">${#arr[@]}</span>-1?0:++i<span class="kw">))</span></a>
<a class="sourceLine" id="cb40-6" title="6"><span class="kw">}</span></a></code></pre></div>
<hr />
<h2 id="toggle-between-two-values">Toggle between two values</h2>
<p>This works the same as above, this is just a different use case.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb41-1" title="1"><span class="va">arr=(</span>true false<span class="va">)</span></a>
<a class="sourceLine" id="cb41-2" title="2"></a>
<a class="sourceLine" id="cb41-3" title="3"><span class="fu">cycle()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb41-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s &#39;</span> <span class="st">&quot;</span><span class="va">${arr[${i:=</span>0<span class="va">}]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb41-5" title="5">    <span class="kw">((</span>i=i&gt;=<span class="va">${#arr[@]}</span>-1?0:++i<span class="kw">))</span></a>
<a class="sourceLine" id="cb41-6" title="6"><span class="kw">}</span></a></code></pre></div>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="loops">LOOPS</h1>
<hr />
<h2 id="loop-over-a-range-of-numbers">Loop over a range of numbers</h2>
<p>Alternative to <code>seq</code>.</p>
<pre class="shell"><code># Loop from 0-100 (no variable support).
for i in {0..100}; do
    printf &#39;%s\n&#39; &quot;$i&quot;
done</code></pre>
<hr />
<h2 id="loop-over-a-variable-range-of-numbers">Loop over a variable range of numbers</h2>
<p>Alternative to <code>seq</code>.</p>
<pre class="shell"><code># Loop from 0-VAR.
VAR=50
for ((i=0;i&lt;=VAR;i++)); do
    printf &#39;%s\n&#39; &quot;$i&quot;
done</code></pre>
<hr />
<h2 id="loop-over-an-array">Loop over an array</h2>
<pre class="shell"><code>arr=(apples oranges tomatoes)

# Just elements.
for element in &quot;${arr[@]}&quot;; do
    printf &#39;%s\n&#39; &quot;$element&quot;
done</code></pre>
<hr />
<h2 id="loop-over-an-array-with-an-index">Loop over an array with an index</h2>
<pre class="shell"><code>arr=(apples oranges tomatoes)

# Elements and index.
for i in &quot;${!arr[@]}&quot;; do
    printf &#39;%s\n&#39; &quot;${arr[i]}&quot;
done

# Alternative method.
for ((i=0;i&lt;${#arr[@]};i++)); do
    printf &#39;%s\n&#39; &quot;${arr[i]}&quot;
done</code></pre>
<hr />
<h2 id="loop-over-the-contents-of-a-file">Loop over the contents of a file</h2>
<pre class="shell"><code>while read -r line; do
    printf &#39;%s\n&#39; &quot;$line&quot;
done &lt; &quot;file&quot;</code></pre>
<hr />
<h2 id="loop-over-files-and-directories">Loop over files and directories</h2>
<p>Don’t use <code>ls</code>.</p>
<pre class="shell"><code># Greedy example.
for file in *; do
    printf &#39;%s\n&#39; &quot;$file&quot;
done

# PNG files in dir.
for file in ~/Pictures/*.png; do
    printf &#39;%s\n&#39; &quot;$file&quot;
done

# Iterate over directories.
for dir in ~/Downloads/*/; do
    printf &#39;%s\n&#39; &quot;$dir&quot;
done

# Brace Expansion.
for file in /path/to/parentdir/{file1,file2,subdir/file3}; do
    printf &#39;%s\n&#39; &quot;$file&quot;
done

# Iterate recursively.
shopt -s globstar
for file in ~/Pictures/**/*; do
    printf &#39;%s\n&#39; &quot;$file&quot;
done
shopt -u globstar</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="file-handling">FILE HANDLING</h1>
<p><strong>CAVEAT:</strong> <code>bash</code> does not handle binary data properly in versions <code>&lt; 4.4</code>.</p>
<hr />
<h2 id="read-a-file-to-a-string">Read a file to a string</h2>
<p>Alternative to the <code>cat</code> command.</p>
<pre class="shell"><code>file_data=&quot;$(&lt;&quot;file&quot;)&quot;</code></pre>
<hr />
<h2 id="read-a-file-to-an-array-by-line">Read a file to an array (<em>by line</em>)</h2>
<p>Alternative to the <code>cat</code> command.</p>
<pre class="shell"><code># Bash &lt;4 (discarding empty lines).
IFS=$&#39;\n&#39; read -d &quot;&quot; -ra file_data &lt; &quot;file&quot;

# Bash &lt;4 (preserving empty lines).
while read -r line; do
    file_data+=(&quot;$line&quot;)
done &lt; &quot;file&quot;

# Bash 4+
mapfile -t file_data &lt; &quot;file&quot;</code></pre>
<hr />
<h2 id="get-the-first-n-lines-of-a-file">Get the first N lines of a file</h2>
<p>Alternative to the <code>head</code> command.</p>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb50-1" title="1"><span class="fu">head()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb50-2" title="2">    <span class="co"># Usage: head &quot;n&quot; &quot;file&quot;</span></a>
<a class="sourceLine" id="cb50-3" title="3">    <span class="ex">mapfile</span> -tn <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> line <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb50-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${line[@]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb50-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ head 2 ~/.bashrc
# Prompt
PS1=&#39;➜ &#39;

$ head 1 ~/.bashrc
# Prompt</code></pre>
<hr />
<h2 id="get-the-last-n-lines-of-a-file">Get the last N lines of a file</h2>
<p>Alternative to the <code>tail</code> command.</p>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb52-1" title="1"><span class="fu">tail()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb52-2" title="2">    <span class="co"># Usage: tail &quot;n&quot; &quot;file&quot;</span></a>
<a class="sourceLine" id="cb52-3" title="3">    <span class="ex">mapfile</span> -tn 0 line <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${line[@]: </span><span class="er">-</span><span class="va">$1}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb52-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ tail 2 ~/.bashrc
# Enable tmux.
# [[ -z &quot;$TMUX&quot;  ]] &amp;&amp; exec tmux

$ tail 1 ~/.bashrc
# [[ -z &quot;$TMUX&quot;  ]] &amp;&amp; exec tmux</code></pre>
<hr />
<h2 id="get-the-number-of-lines-in-a-file">Get the number of lines in a file</h2>
<p>Alternative to <code>wc -l</code>.</p>
<p><strong>Example Function (bash 4):</strong></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb54-1" title="1"><span class="fu">lines()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb54-2" title="2">    <span class="co"># Usage: lines &quot;file&quot;</span></a>
<a class="sourceLine" id="cb54-3" title="3">    <span class="ex">mapfile</span> -tn 0 lines <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb54-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${#lines[@]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb54-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Function (bash 3):</strong></p>
<p>This method uses less memory than the <code>mapfile</code> method and works in <code>bash</code> 3 but it is slower for bigger files.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb55-1" title="1"><span class="fu">lines_loop()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb55-2" title="2">    <span class="co"># Usage: lines_loop &quot;file&quot;</span></a>
<a class="sourceLine" id="cb55-3" title="3">    <span class="va">count=</span>0</a>
<a class="sourceLine" id="cb55-4" title="4">    <span class="kw">while</span> <span class="va">IFS=</span> <span class="bu">read</span> -r <span class="va">_</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb55-5" title="5">        <span class="kw">((</span>count++<span class="kw">))</span></a>
<a class="sourceLine" id="cb55-6" title="6">    <span class="kw">done</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb55-7" title="7">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$count</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb55-8" title="8"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ lines ~/.bashrc
48

$ lines_loop ~/.bashrc
48</code></pre>
<hr />
<h2 id="count-files-or-directories-in-directory">Count files or directories in directory</h2>
<p>This works by passing the output of the glob to the function and then counting the number of arguments.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb57"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb57-1" title="1"><span class="fu">count()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb57-2" title="2">    <span class="co"># Usage: count /path/to/dir/*</span></a>
<a class="sourceLine" id="cb57-3" title="3">    <span class="co">#        count /path/to/dir/*/</span></a>
<a class="sourceLine" id="cb57-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$#</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb57-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Count all files in dir.
$ count ~/Downloads/*
232

# Count all dirs in dir.
$ count ~/Downloads/*/
45

# Count all jpg files in dir.
$ count ~/Pictures/*.jpg
64</code></pre>
<hr />
<h2 id="create-an-empty-file">Create an empty file</h2>
<p>Alternative to <code>touch</code>.</p>
<pre class="shell"><code># Shortest.
&gt;file

# Longer alternatives:
:&gt;file
echo -n &gt;file
printf &#39;&#39; &gt;file</code></pre>
<hr />
<h2 id="extract-lines-between-two-markers">Extract lines between two markers</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb60-1" title="1"><span class="fu">extract()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb60-2" title="2">    <span class="co"># Usage: extract file &quot;opening marker&quot; &quot;closing marker&quot;</span></a>
<a class="sourceLine" id="cb60-3" title="3">    <span class="kw">while</span> <span class="va">IFS=</span><span class="st">$&#39;</span><span class="dt">\n</span><span class="st">&#39;</span> <span class="bu">read</span> -r <span class="va">line</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb60-4" title="4">        [[ <span class="va">$extract</span> <span class="kw">&amp;&amp;</span> <span class="va">$line</span> != <span class="st">&quot;</span><span class="va">$3</span><span class="st">&quot;</span> ]] <span class="kw">&amp;&amp;</span></a>
<a class="sourceLine" id="cb60-5" title="5">            <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$line</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb60-6" title="6"></a>
<a class="sourceLine" id="cb60-7" title="7">        [[ <span class="va">$line</span> == <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span> ]] <span class="kw">&amp;&amp;</span> <span class="va">extract=</span>1</a>
<a class="sourceLine" id="cb60-8" title="8">        [[ <span class="va">$line</span> == <span class="st">&quot;</span><span class="va">$3</span><span class="st">&quot;</span> ]] <span class="kw">&amp;&amp;</span> <span class="va">extract=</span></a>
<a class="sourceLine" id="cb60-9" title="9">    <span class="kw">done</span> <span class="op">&lt;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb60-10" title="10"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Extract code blocks from MarkDown file.
$ extract ~/projects/pure-bash/README.md &#39;```sh&#39; &#39;```&#39;
# Output here...</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="file-paths">FILE PATHS</h1>
<hr />
<h2 id="get-the-directory-name-of-a-file-path">Get the directory name of a file path</h2>
<p>Alternative to the <code>dirname</code> command.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb62-1" title="1"><span class="fu">dirname()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb62-2" title="2">    <span class="co"># Usage: dirname &quot;path&quot;</span></a>
<a class="sourceLine" id="cb62-3" title="3">    <span class="bu">local</span> <span class="va">tmp=${1:-</span>.<span class="va">}</span></a>
<a class="sourceLine" id="cb62-4" title="4"></a>
<a class="sourceLine" id="cb62-5" title="5">    [[ <span class="va">$tmp</span> != <span class="ex">*</span>[!/]* ]] <span class="kw">&amp;&amp;</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb62-6" title="6">        <span class="bu">printf</span> <span class="st">&#39;/\n&#39;</span></a>
<a class="sourceLine" id="cb62-7" title="7">        <span class="bu">return</span></a>
<a class="sourceLine" id="cb62-8" title="8">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb62-9" title="9"></a>
<a class="sourceLine" id="cb62-10" title="10">    <span class="va">tmp=${tmp%%</span><span class="st">&quot;</span><span class="va">${tmp</span></a>
<a class="sourceLine" id="cb62-11" title="11"><span class="va">-</span>--</a>
<a class="sourceLine" id="cb62-12" title="12"></a>
<a class="sourceLine" id="cb62-13" title="13">## *[!/]<span class="va">}</span><span class="st">&quot;</span><span class="va">}</span></a>
<a class="sourceLine" id="cb62-14" title="14"></a>
<a class="sourceLine" id="cb62-15" title="15">    [[ <span class="va">$tmp</span> != <span class="ex">*/*</span> ]] <span class="kw">&amp;&amp;</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb62-16" title="16">        <span class="bu">printf</span> <span class="st">&#39;.\n&#39;</span></a>
<a class="sourceLine" id="cb62-17" title="17">        <span class="bu">return</span></a>
<a class="sourceLine" id="cb62-18" title="18">    <span class="kw">}</span></a>
<a class="sourceLine" id="cb62-19" title="19"></a>
<a class="sourceLine" id="cb62-20" title="20">    <span class="va">tmp=${tmp%</span>/*<span class="va">}</span></a>
<a class="sourceLine" id="cb62-21" title="21">    <span class="va">tmp=${tmp%%</span><span class="st">&quot;</span><span class="va">${tmp</span></a>
<a class="sourceLine" id="cb62-22" title="22"><span class="va">-</span>--</a>
<a class="sourceLine" id="cb62-23" title="23"></a>
<a class="sourceLine" id="cb62-24" title="24">## *[!/]<span class="va">}</span><span class="st">&quot;</span><span class="va">}</span></a>
<a class="sourceLine" id="cb62-25" title="25"></a>
<a class="sourceLine" id="cb62-26" title="26">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${tmp:-</span>/<span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb62-27" title="27"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ dirname ~/Pictures/Wallpapers/1.jpg
/home/black/Pictures/Wallpapers

$ dirname ~/Pictures/Downloads/
/home/black/Pictures</code></pre>
<hr />
<h2 id="get-the-base-name-of-a-file-path">Get the base-name of a file path</h2>
<p>Alternative to the <code>basename</code> command.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb64-1" title="1"><span class="fu">basename()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb64-2" title="2">    <span class="co"># Usage: basename &quot;path&quot; [&quot;suffix&quot;]</span></a>
<a class="sourceLine" id="cb64-3" title="3">    <span class="bu">local</span> <span class="va">tmp</span></a>
<a class="sourceLine" id="cb64-4" title="4"></a>
<a class="sourceLine" id="cb64-5" title="5">    <span class="va">tmp=${1%</span><span class="st">&quot;${1</span></a>
<a class="sourceLine" id="cb64-6" title="6"><span class="st">---</span></a>
<a class="sourceLine" id="cb64-7" title="7"></a>
<a class="sourceLine" id="cb64-8" title="8"><span class="st">## *[!/]}&quot;</span><span class="va">}</span></a>
<a class="sourceLine" id="cb64-9" title="9">    <span class="va">tmp=${tmp</span></a>
<a class="sourceLine" id="cb64-10" title="10"><span class="va">-</span>--</a>
<a class="sourceLine" id="cb64-11" title="11"></a>
<a class="sourceLine" id="cb64-12" title="12">## */<span class="va">}</span></a>
<a class="sourceLine" id="cb64-13" title="13">    <span class="va">tmp=${tmp%</span><span class="st">&quot;</span><span class="va">${2/</span><span class="st">&quot;</span><span class="va">$tmp</span><span class="st">&quot;</span><span class="va">}</span><span class="st">&quot;</span><span class="va">}</span></a>
<a class="sourceLine" id="cb64-14" title="14"></a>
<a class="sourceLine" id="cb64-15" title="15">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${tmp:-</span>/<span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb64-16" title="16"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ basename ~/Pictures/Wallpapers/1.jpg
1.jpg

$ basename ~/Pictures/Wallpapers/1.jpg .jpg
1

$ basename ~/Pictures/Downloads/
Downloads</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="variables">VARIABLES</h1>
<hr />
<h2 id="assign-and-access-a-variable-using-a-variable">Assign and access a variable using a variable</h2>
<pre class="shell"><code>$ hello_world=&quot;value&quot;

# Create the variable name.
$ var=&quot;world&quot;
$ ref=&quot;hello_$var&quot;

# Print the value of the variable name stored in &#39;hello_$var&#39;.
$ printf &#39;%s\n&#39; &quot;${!ref}&quot;
value</code></pre>
<p>Alternatively, on <code>bash</code> 4.3+:</p>
<pre class="shell"><code>$ hello_world=&quot;value&quot;
$ var=&quot;world&quot;

# Declare a nameref.
$ declare -n ref=hello_$var

$ printf &#39;%s\n&#39; &quot;$ref&quot;
value</code></pre>
<hr />
<h2 id="name-a-variable-based-on-another-variable">Name a variable based on another variable</h2>
<pre class="shell"><code>$ var=&quot;world&quot;
$ declare &quot;hello_$var=value&quot;
$ printf &#39;%s\n&#39; &quot;$hello_world&quot;
value</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="escape-sequences">ESCAPE SEQUENCES</h1>
<p>Contrary to popular belief, there is no issue in utilizing raw escape sequences. Using <code>tput</code> abstracts the same ANSI sequences as if printed manually. Worse still, <code>tput</code> is not actually portable. There are a number of <code>tput</code> variants each with different commands and syntaxes (<em>try <code>tput setaf 3</code> on a FreeBSD system</em>). Raw sequences are fine.</p>
<hr />
<h2 id="text-colors">Text Colors</h2>
<p><strong>NOTE:</strong> Sequences requiring RGB values only work in True-Color Terminal Emulators.</p>
<table>
<thead>
<tr class="header">
<th>Sequence</th>
<th>What does it do?</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\e[38;5;&lt;NUM&gt;m</code></td>
<td>Set text foreground color.</td>
<td><code>0-255</code></td>
</tr>
<tr class="even">
<td><code>\e[48;5;&lt;NUM&gt;m</code></td>
<td>Set text background color.</td>
<td><code>0-255</code></td>
</tr>
<tr class="odd">
<td><code>\e[38;2;&lt;R&gt;;&lt;G&gt;;&lt;B&gt;m</code></td>
<td>Set text foreground color to RGB color.</td>
<td><code>R</code>, <code>G</code>, <code>B</code></td>
</tr>
<tr class="even">
<td><code>\e[48;2;&lt;R&gt;;&lt;G&gt;;&lt;B&gt;m</code></td>
<td>Set text background color to RGB color.</td>
<td><code>R</code>, <code>G</code>, <code>B</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="text-attributes">Text Attributes</h2>
<p><strong>NOTE:</strong> Prepend 2 to any code below to turn it’s effect off (examples: 21=bold text off, 22=faint text off, 23=italic text off).</p>
<table>
<thead>
<tr class="header">
<th>Sequence</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\e[m</code></td>
<td>Reset text formatting and colors.</td>
</tr>
<tr class="even">
<td><code>\e[1m</code></td>
<td>Bold text.</td>
</tr>
<tr class="odd">
<td><code>\e[2m</code></td>
<td>Faint text.</td>
</tr>
<tr class="even">
<td><code>\e[3m</code></td>
<td>Italic text.</td>
</tr>
<tr class="odd">
<td><code>\e[4m</code></td>
<td>Underline text.</td>
</tr>
<tr class="even">
<td><code>\e[5m</code></td>
<td>Blinking text.</td>
</tr>
<tr class="odd">
<td><code>\e[7m</code></td>
<td>Highlighted text.</td>
</tr>
<tr class="even">
<td><code>\e[8m</code></td>
<td>Hidden text.</td>
</tr>
<tr class="odd">
<td><code>\e[9m</code></td>
<td>Strike-through text.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="cursor-movement">Cursor Movement</h2>
<table>
<thead>
<tr class="header">
<th>Sequence</th>
<th>What does it do?</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\e[&lt;LINE&gt;;&lt;COLUMN&gt;H</code></td>
<td>Move cursor to absolute position.</td>
<td><code>line</code>, <code>column</code></td>
</tr>
<tr class="even">
<td><code>\e[H</code></td>
<td>Move cursor to home position (<code>0,0</code>).</td>
<td></td>
</tr>
<tr class="odd">
<td><code>\e[&lt;NUM&gt;A</code></td>
<td>Move cursor up N lines.</td>
<td><code>num</code></td>
</tr>
<tr class="even">
<td><code>\e[&lt;NUM&gt;B</code></td>
<td>Move cursor down N lines.</td>
<td><code>num</code></td>
</tr>
<tr class="odd">
<td><code>\e[&lt;NUM&gt;C</code></td>
<td>Move cursor right N columns.</td>
<td><code>num</code></td>
</tr>
<tr class="even">
<td><code>\e[&lt;NUM&gt;D</code></td>
<td>Move cursor left N columns.</td>
<td><code>num</code></td>
</tr>
<tr class="odd">
<td><code>\e[s</code></td>
<td>Save cursor position.</td>
<td></td>
</tr>
<tr class="even">
<td><code>\e[u</code></td>
<td>Restore cursor position.</td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="erasing-text">Erasing Text</h2>
<table>
<thead>
<tr class="header">
<th>Sequence</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>\e[K</code></td>
<td>Erase from cursor position to end of line.</td>
</tr>
<tr class="even">
<td><code>\e[1K</code></td>
<td>Erase from cursor position to start of line.</td>
</tr>
<tr class="odd">
<td><code>\e[2K</code></td>
<td>Erase the entire current line.</td>
</tr>
<tr class="even">
<td><code>\e[J</code></td>
<td>Erase from the current line to the bottom of the screen.</td>
</tr>
<tr class="odd">
<td><code>\e[1J</code></td>
<td>Erase from the current line to the top of the screen.</td>
</tr>
<tr class="even">
<td><code>\e[2J</code></td>
<td>Clear the screen.</td>
</tr>
<tr class="odd">
<td><code>\e[2J\e[H</code></td>
<td>Clear the screen and move cursor to <code>0,0</code>.</td>
</tr>
</tbody>
</table>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="parameter-expansion">PARAMETER EXPANSION</h1>
<hr />
<h2 id="indirection">Indirection</h2>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${!VAR}</code></td>
<td>Access a variable based on the value of <code>VAR</code>.</td>
</tr>
<tr class="even">
<td><code>${!VAR*}</code></td>
<td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>.</td>
</tr>
<tr class="odd">
<td><code>${!VAR@}</code></td>
<td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>. If double-quoted, each variable name expands to a separate word.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="replacement">Replacement</h2>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${VAR#PATTERN}</code></td>
<td>Remove shortest match of pattern from start of string.</td>
</tr>
<tr class="even">
<td>`${VAR</td>
<td></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="pattern-remove-longest-match-of-pattern-from-start-of-string.-varpattern-remove-shortest-match-of-pattern-from-end-of-string.-varpattern-remove-longest-match-of-pattern-from-end-of-string.-varpatternreplace-replace-first-match-with-string.-varpatternreplace-replace-all-matches-with-string.-varpattern-remove-first-match.-varpattern-remove-all-matches.">PATTERN}<code>| Remove longest match of pattern from start of string. | |</code><span class="math inline">${VAR%PATTERN}` | Remove shortest match of pattern from end of string. | | `$</span>{VAR%%PATTERN}<code>| Remove longest match of pattern from end of string. | |</code><span class="math inline">${VAR/PATTERN/REPLACE}` | Replace first match with string. | `$</span>{VAR//PATTERN/REPLACE}<code>| Replace all matches with string. |</code><span class="math inline">${VAR/PATTERN}` | Remove first match. | `$</span>{VAR//PATTERN}` | Remove all matches.</h2>
<hr />
<h2 id="length">Length</h2>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${#VAR}</code></td>
<td>Length of var in characters.</td>
</tr>
<tr class="even">
<td><code>${#ARR[@]}</code></td>
<td>Length of array in elements.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="expansion">Expansion</h2>
<table>
<colgroup>
<col style="width: 36%" />
<col style="width: 64%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${VAR:OFFSET}</code></td>
<td>Remove first <code>N</code> chars from variable.</td>
</tr>
<tr class="even">
<td><code>${VAR:OFFSET:LENGTH}</code></td>
<td>Get substring from <code>N</code> character to <code>N</code> character. <br> (<code>${VAR:10:10}</code>: Get sub-string from char <code>10</code> to char <code>20</code>)</td>
</tr>
<tr class="odd">
<td><code>${VAR:: OFFSET}</code></td>
<td>Get first <code>N</code> chars from variable.</td>
</tr>
<tr class="even">
<td><code>${VAR:: -OFFSET}</code></td>
<td>Remove last <code>N</code> chars from variable.</td>
</tr>
<tr class="odd">
<td><code>${VAR: -OFFSET}</code></td>
<td>Get last <code>N</code> chars from variable.</td>
</tr>
<tr class="even">
<td><code>${VAR:OFFSET:-OFFSET}</code></td>
<td>Cut first <code>N</code> chars and last <code>N</code> chars.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="case-modification">Case Modification</h2>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
<th>CAVEAT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${VAR^}</code></td>
<td>Uppercase first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr class="even">
<td><code>${VAR^^}</code></td>
<td>Uppercase all characters.</td>
<td><code>bash 4+</code></td>
</tr>
<tr class="odd">
<td><code>${VAR,}</code></td>
<td>Lowercase first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr class="even">
<td><code>${VAR,,}</code></td>
<td>Lowercase all characters.</td>
<td><code>bash 4+</code></td>
</tr>
<tr class="odd">
<td><code>${VAR~}</code></td>
<td>Reverse case of first character.</td>
<td><code>bash 4+</code></td>
</tr>
<tr class="even">
<td><code>${VAR~~}</code></td>
<td>Reverse case of all characters.</td>
<td><code>bash 4+</code></td>
</tr>
</tbody>
</table>
<hr />
<h2 id="default-value">Default Value</h2>
<table>
<thead>
<tr class="header">
<th>Parameter</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>${VAR:-STRING}</code></td>
<td>If <code>VAR</code> is empty or unset, use <code>STRING</code> as its value.</td>
</tr>
<tr class="even">
<td><code>${VAR-STRING}</code></td>
<td>If <code>VAR</code> is unset, use <code>STRING</code> as its value.</td>
</tr>
<tr class="odd">
<td><code>${VAR:=STRING}</code></td>
<td>If <code>VAR</code> is empty or unset, set the value of <code>VAR</code> to <code>STRING</code>.</td>
</tr>
<tr class="even">
<td><code>${VAR=STRING}</code></td>
<td>If <code>VAR</code> is unset, set the value of <code>VAR</code> to <code>STRING</code>.</td>
</tr>
<tr class="odd">
<td><code>${VAR:+STRING}</code></td>
<td>If <code>VAR</code> is not empty, use <code>STRING</code> as its value.</td>
</tr>
<tr class="even">
<td><code>${VAR+STRING}</code></td>
<td>If <code>VAR</code> is set, use <code>STRING</code> as its value.</td>
</tr>
<tr class="odd">
<td><code>${VAR:?STRING}</code></td>
<td>Display an error if empty or unset.</td>
</tr>
<tr class="even">
<td><code>${VAR?STRING}</code></td>
<td>Display an error if unset.</td>
</tr>
</tbody>
</table>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="brace-expansion">BRACE EXPANSION</h1>
<hr />
<h2 id="ranges">Ranges</h2>
<pre class="shell"><code># Syntax: {&lt;START&gt;..&lt;END&gt;}

# Print numbers 1-100.
echo {1..100}

# Print range of floats.
echo 1.{1..9}

# Print chars a-z.
echo {a..z}
echo {A..Z}

# Nesting.
echo {A..Z}{0..9}

# Print zero-padded numbers.
# CAVEAT: bash 4+
echo {01..100}

# Change increment amount.
# Syntax: {&lt;START&gt;..&lt;END&gt;..&lt;INCREMENT&gt;}
# CAVEAT: bash 4+
echo {1..10..2} # Increment by 2.</code></pre>
<hr />
<h2 id="string-lists">String Lists</h2>
<pre class="shell"><code>echo {apples,oranges,pears,grapes}

# Example Usage:
# Remove dirs Movies, Music and ISOS from ~/Downloads/.
rm -rf ~/Downloads/{Movies,Music,ISOS}</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="conditional-expressions">CONDITIONAL EXPRESSIONS</h1>
<hr />
<h2 id="file-conditionals">File Conditionals</h2>
<table>
<thead>
<tr class="header">
<th>Expression</th>
<th>Value</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-a</code></td>
<td><code>file</code></td>
<td>If file exists.</td>
</tr>
<tr class="even">
<td><code>-b</code></td>
<td><code>file</code></td>
<td>If file exists and is a block special file.</td>
</tr>
<tr class="odd">
<td><code>-c</code></td>
<td><code>file</code></td>
<td>If file exists and is a character special file.</td>
</tr>
<tr class="even">
<td><code>-d</code></td>
<td><code>file</code></td>
<td>If file exists and is a directory.</td>
</tr>
<tr class="odd">
<td><code>-e</code></td>
<td><code>file</code></td>
<td>If file exists.</td>
</tr>
<tr class="even">
<td><code>-f</code></td>
<td><code>file</code></td>
<td>If file exists and is a regular file.</td>
</tr>
<tr class="odd">
<td><code>-g</code></td>
<td><code>file</code></td>
<td>If file exists and its set-group-id bit is set.</td>
</tr>
<tr class="even">
<td><code>-h</code></td>
<td><code>file</code></td>
<td>If file exists and is a symbolic link.</td>
</tr>
<tr class="odd">
<td><code>-k</code></td>
<td><code>file</code></td>
<td>If file exists and its sticky-bit is set</td>
</tr>
<tr class="even">
<td><code>-p</code></td>
<td><code>file</code></td>
<td>If file exists and is a named pipe (<em>FIFO</em>).</td>
</tr>
<tr class="odd">
<td><code>-r</code></td>
<td><code>file</code></td>
<td>If file exists and is readable.</td>
</tr>
<tr class="even">
<td><code>-s</code></td>
<td><code>file</code></td>
<td>If file exists and its size is greater than zero.</td>
</tr>
<tr class="odd">
<td><code>-t</code></td>
<td><code>fd</code></td>
<td>If file descriptor is open and refers to a terminal.</td>
</tr>
<tr class="even">
<td><code>-u</code></td>
<td><code>file</code></td>
<td>If file exists and its set-user-id bit is set.</td>
</tr>
<tr class="odd">
<td><code>-w</code></td>
<td><code>file</code></td>
<td>If file exists and is writable.</td>
</tr>
<tr class="even">
<td><code>-x</code></td>
<td><code>file</code></td>
<td>If file exists and is executable.</td>
</tr>
<tr class="odd">
<td><code>-G</code></td>
<td><code>file</code></td>
<td>If file exists and is owned by the effective group ID.</td>
</tr>
<tr class="even">
<td><code>-L</code></td>
<td><code>file</code></td>
<td>If file exists and is a symbolic link.</td>
</tr>
<tr class="odd">
<td><code>-N</code></td>
<td><code>file</code></td>
<td>If file exists and has been modified since last read.</td>
</tr>
<tr class="even">
<td><code>-O</code></td>
<td><code>file</code></td>
<td>If file exists and is owned by the effective user ID.</td>
</tr>
<tr class="odd">
<td><code>-S</code></td>
<td><code>file</code></td>
<td>If file exists and is a socket.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="file-comparisons">File Comparisons</h2>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="header">
<th>Expression</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>file -ef file2</code></td>
<td>If both files refer to the same inode and device numbers.</td>
</tr>
<tr class="even">
<td><code>file -nt file2</code></td>
<td>If <code>file</code> is newer than <code>file2</code> (<em>uses modification time</em>) or <code>file</code> exists and <code>file2</code> does not.</td>
</tr>
<tr class="odd">
<td><code>file -ot file2</code></td>
<td>If <code>file</code> is older than <code>file2</code> (<em>uses modification time</em>) or <code>file2</code> exists and <code>file</code> does not.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="variable-conditionals">Variable Conditionals</h2>
<table>
<thead>
<tr class="header">
<th>Expression</th>
<th>Value</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>-o</code></td>
<td><code>opt</code></td>
<td>If shell option is enabled.</td>
</tr>
<tr class="even">
<td><code>-v</code></td>
<td><code>var</code></td>
<td>If variable has a value assigned.</td>
</tr>
<tr class="odd">
<td><code>-R</code></td>
<td><code>var</code></td>
<td>If variable is a name reference.</td>
</tr>
<tr class="even">
<td><code>-z</code></td>
<td><code>var</code></td>
<td>If the length of string is zero.</td>
</tr>
<tr class="odd">
<td><code>-n</code></td>
<td><code>var</code></td>
<td>If the length of string is non-zero.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="variable-comparisons">Variable Comparisons</h2>
<table>
<thead>
<tr class="header">
<th>Expression</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>var = var2</code></td>
<td>Equal to.</td>
</tr>
<tr class="even">
<td><code>var == var2</code></td>
<td>Equal to (<em>synonym for <code>=</code></em>).</td>
</tr>
<tr class="odd">
<td><code>var != var2</code></td>
<td>Not equal to.</td>
</tr>
<tr class="even">
<td><code>var &lt; var2</code></td>
<td>Less than (<em>in ASCII alphabetical order.</em>)</td>
</tr>
<tr class="odd">
<td><code>var &gt; var2</code></td>
<td>Greater than (<em>in ASCII alphabetical order.</em>)</td>
</tr>
</tbody>
</table>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="arithmetic-operators">ARITHMETIC OPERATORS</h1>
<hr />
<h2 id="assignment">Assignment</h2>
<table>
<thead>
<tr class="header">
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>=</code></td>
<td>Initialize or change the value of a variable.</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="arithmetic">Arithmetic</h2>
<table>
<thead>
<tr class="header">
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>+</code></td>
<td>Addition</td>
</tr>
<tr class="even">
<td><code>-</code></td>
<td>Subtraction</td>
</tr>
<tr class="odd">
<td><code>*</code></td>
<td>Multiplication</td>
</tr>
<tr class="even">
<td><code>/</code></td>
<td>Division</td>
</tr>
<tr class="odd">
<td><code>**</code></td>
<td>Exponentiation</td>
</tr>
<tr class="even">
<td><code>%</code></td>
<td>Modulo</td>
</tr>
<tr class="odd">
<td><code>+=</code></td>
<td>Plus-Equal (<em>Increment a variable.</em>)</td>
</tr>
<tr class="even">
<td><code>-=</code></td>
<td>Minus-Equal (<em>Decrement a variable.</em>)</td>
</tr>
<tr class="odd">
<td><code>*=</code></td>
<td>Times-Equal (<em>Multiply a variable.</em>)</td>
</tr>
<tr class="even">
<td><code>/=</code></td>
<td>Slash-Equal (<em>Divide a variable.</em>)</td>
</tr>
<tr class="odd">
<td><code>%=</code></td>
<td>Mod-Equal (<em>Remainder of dividing a variable.</em>)</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="bitwise">Bitwise</h2>
<table>
<thead>
<tr class="header">
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>&lt;&lt;</code></td>
<td>Bitwise Left Shift</td>
</tr>
<tr class="even">
<td><code>&lt;&lt;=</code></td>
<td>Left-Shift-Equal</td>
</tr>
<tr class="odd">
<td><code>&gt;&gt;</code></td>
<td>Bitwise Right Shift</td>
</tr>
<tr class="even">
<td><code>&gt;&gt;=</code></td>
<td>Right-Shift-Equal</td>
</tr>
<tr class="odd">
<td><code>&amp;</code></td>
<td>Bitwise AND</td>
</tr>
<tr class="even">
<td><code>&amp;=</code></td>
<td>Bitwise AND-Equal</td>
</tr>
<tr class="odd">
<td><code>\|</code></td>
<td>Bitwise OR</td>
</tr>
<tr class="even">
<td><code>\|=</code></td>
<td>Bitwise OR-Equal</td>
</tr>
<tr class="odd">
<td><code>~</code></td>
<td>Bitwise NOT</td>
</tr>
<tr class="even">
<td><code>^</code></td>
<td>Bitwise XOR</td>
</tr>
<tr class="odd">
<td><code>^=</code></td>
<td>Bitwise XOR-Equal</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="logical">Logical</h2>
<table>
<thead>
<tr class="header">
<th>Operators</th>
<th>What does it do?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>!</code></td>
<td>NOT</td>
</tr>
<tr class="even">
<td><code>&amp;&amp;</code></td>
<td>AND</td>
</tr>
<tr class="odd">
<td><code>\|\|</code></td>
<td>OR</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="miscellaneous">Miscellaneous</h2>
<table>
<thead>
<tr class="header">
<th>Operators</th>
<th>What does it do?</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>,</code></td>
<td>Comma Separator</td>
<td><code>((a=1,b=2,c=3))</code></td>
</tr>
</tbody>
</table>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="arithmetic-1">ARITHMETIC</h1>
<hr />
<h2 id="simpler-syntax-to-set-variables">Simpler syntax to set variables</h2>
<pre class="shell"><code># Simple math
((var=1+2))

# Decrement/Increment variable
((var++))
((var--))
((var+=1))
((var-=1))

# Using variables
((var=var2*arr[2]))</code></pre>
<hr />
<h2 id="ternary-tests">Ternary Tests</h2>
<pre class="shell"><code># Set the value of var to var2 if var2 is greater than var.
# var: variable to set.
# var2&gt;var: Condition to test.
# ?var2: If the test succeeds.
# :var: If the test fails.
((var=var2&gt;var?var2:var))</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="traps">TRAPS</h1>
<p>Traps allow a script to execute code on various signals. In <a href="https://github.com/dylanaraps/pxltrm">pxltrm</a> (<em>a pixel art editor written in bash</em>) traps are used to redraw the user interface on window resize. Another use case is cleaning up temporary files on script exit.</p>
<p>Traps should be added near the start of scripts so any early errors are also caught.</p>
<p><strong>NOTE:</strong> For a full list of signals, see <code>trap -l</code>.</p>
<hr />
<h2 id="do-something-on-script-exit">Do something on script exit</h2>
<pre class="shell"><code># Clear screen on script exit.
trap &#39;printf \\e[2J\\e[H\\e[m&#39; EXIT</code></pre>
<hr />
<h2 id="ignore-terminal-interrupt-ctrlc-sigint">Ignore terminal interrupt (CTRL+C, SIGINT)</h2>
<pre class="shell"><code>trap &#39;&#39; INT</code></pre>
<hr />
<h2 id="react-to-window-resize">React to window resize</h2>
<pre class="shell"><code># Call a function on window resize.
trap &#39;code_here&#39; SIGWINCH</code></pre>
<hr />
<h2 id="do-something-before-every-command">Do something before every command</h2>
<pre class="shell"><code>trap &#39;code_here&#39; DEBUG</code></pre>
<hr />
<h2 id="do-something-when-a-shell-function-or-a-sourced-file-finishes-executing">Do something when a shell function or a sourced file finishes executing</h2>
<pre class="shell"><code>trap &#39;code_here&#39; RETURN</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="performance">PERFORMANCE</h1>
<hr />
<h2 id="disable-unicode">Disable Unicode</h2>
<p>If unicode is not required, it can be disabled for a performance increase. Results may vary however there have been noticeable improvements in <a href="https://github.com/dylanaraps/neofetch">neofetch</a> and other programs.</p>
<pre class="shell"><code># Disable unicode.
LC_ALL=C
LANG=C</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="obsolete-syntax">OBSOLETE SYNTAX</h1>
<hr />
<h2 id="shebang">Shebang</h2>
<p>Use <code>#!/usr/bin/env bash</code> instead of <code>#!/bin/bash</code>.</p>
<ul>
<li>The former searches the user’s <code>PATH</code> to find the <code>bash</code> binary.</li>
<li>The latter assumes it is always installed to <code>/bin/</code> which can cause issues.</li>
</ul>
<p><strong>NOTE</strong>: There are times when one may have a good reason for using <code>#!/bin/bash</code> or another direct path to the binary.</p>
<pre class="shell"><code># Right:

    #!/usr/bin/env bash

# Less right:

    #!/bin/bash</code></pre>
<hr />
<h2 id="command-substitution">Command Substitution</h2>
<p>Use <code>$()</code> instead of <code>` `</code>.</p>
<pre class="shell"><code># Right.
var=&quot;$(command)&quot;

# Wrong.
var=`command`

# $() can easily be nested whereas `` cannot.
var=&quot;$(command &quot;$(command)&quot;)&quot;</code></pre>
<hr />
<h2 id="function-declaration">Function Declaration</h2>
<p>Do not use the <code>function</code> keyword, it reduces compatibility with older versions of <code>bash</code>.</p>
<pre class="shell"><code># Right.
do_something() {
    # ...
}

# Wrong.
function do_something() {
    # ...
}</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="internal-variables">INTERNAL VARIABLES</h1>
<hr />
<h2 id="get-the-location-to-the-bash-binary">Get the location to the <code>bash</code> binary</h2>
<pre class="shell"><code>&quot;$BASH&quot;</code></pre>
<hr />
<h2 id="get-the-version-of-the-current-running-bash-process">Get the version of the current running <code>bash</code> process</h2>
<pre class="shell"><code># As a string.
&quot;$BASH_VERSION&quot;

# As an array.
&quot;${BASH_VERSINFO[@]}&quot;</code></pre>
<hr />
<h2 id="open-the-users-preferred-text-editor">Open the user’s preferred text editor</h2>
<pre class="shell"><code>&quot;$EDITOR&quot; &quot;$file&quot;

# NOTE: This variable may be empty, set a fallback value.
&quot;${EDITOR:-vi}&quot; &quot;$file&quot;</code></pre>
<hr />
<h2 id="get-the-name-of-the-current-function">Get the name of the current function</h2>
<pre class="shell"><code># Current function.
&quot;${FUNCNAME[0]}&quot;

# Parent function.
&quot;${FUNCNAME[1]}&quot;

# So on and so forth.
&quot;${FUNCNAME[2]}&quot;
&quot;${FUNCNAME[3]}&quot;

# All functions including parents.
&quot;${FUNCNAME[@]}&quot;</code></pre>
<hr />
<h2 id="get-the-host-name-of-the-system">Get the host-name of the system</h2>
<pre class="shell"><code>&quot;$HOSTNAME&quot;

# NOTE: This variable may be empty.
# Optionally set a fallback to the hostname command.
&quot;${HOSTNAME:-$(hostname)}&quot;</code></pre>
<hr />
<h2 id="get-the-architecture-of-the-operating-system">Get the architecture of the Operating System</h2>
<pre class="shell"><code>&quot;$HOSTTYPE&quot;</code></pre>
<hr />
<h2 id="get-the-name-of-the-operating-system-kernel">Get the name of the Operating System / Kernel</h2>
<p>This can be used to add conditional support for different Operating Systems without needing to call <code>uname</code>.</p>
<pre class="shell"><code>&quot;$OSTYPE&quot;</code></pre>
<hr />
<h2 id="get-the-current-working-directory">Get the current working directory</h2>
<p>This is an alternative to the <code>pwd</code> built-in.</p>
<pre class="shell"><code>&quot;$PWD&quot;</code></pre>
<hr />
<h2 id="get-the-number-of-seconds-the-script-has-been-running">Get the number of seconds the script has been running</h2>
<pre class="shell"><code>&quot;$SECONDS&quot;</code></pre>
<hr />
<h2 id="get-a-pseudorandom-integer">Get a pseudorandom integer</h2>
<p>Each time <code>$RANDOM</code> is used, a different integer between <code>0</code> and <code>32767</code> is returned. This variable should not be used for anything related to security (<em>this includes encryption keys etc</em>).</p>
<pre class="shell"><code>&quot;$RANDOM&quot;</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="information-about-the-terminal">INFORMATION ABOUT THE TERMINAL</h1>
<hr />
<h2 id="get-the-terminal-size-in-lines-and-columns-from-a-script">Get the terminal size in lines and columns (<em>from a script</em>)</h2>
<p>This is handy when writing scripts in pure bash and <code>stty</code>/<code>tput</code> can’t be called.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb92"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb92-1" title="1"><span class="fu">get_term_size()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb92-2" title="2">    <span class="co"># Usage: get_term_size</span></a>
<a class="sourceLine" id="cb92-3" title="3"></a>
<a class="sourceLine" id="cb92-4" title="4">    <span class="co"># (:;:) is a micro sleep to ensure the variables are</span></a>
<a class="sourceLine" id="cb92-5" title="5">    <span class="co"># exported immediately.</span></a>
<a class="sourceLine" id="cb92-6" title="6">    <span class="bu">shopt</span> -s checkwinsize<span class="kw">;</span> <span class="kw">(</span><span class="bu">:</span><span class="kw">;</span><span class="bu">:</span><span class="kw">)</span></a>
<a class="sourceLine" id="cb92-7" title="7">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$LINES</span><span class="st"> </span><span class="va">$COLUMNS</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb92-8" title="8"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Output: LINES COLUMNS
$ get_term_size
15 55</code></pre>
<hr />
<h2 id="get-the-terminal-size-in-pixels">Get the terminal size in pixels</h2>
<p><strong>CAVEAT</strong>: This does not work in some terminal emulators.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb94-1" title="1"><span class="fu">get_window_size()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb94-2" title="2">    <span class="co"># Usage: get_window_size</span></a>
<a class="sourceLine" id="cb94-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;%b&#39;</span> <span class="st">&quot;</span><span class="va">${TMUX:+</span><span class="dt">\\</span>ePtmux;<span class="dt">\\</span>e<span class="va">}</span><span class="dt">\\</span><span class="st">e[14t</span><span class="va">${TMUX:+</span><span class="dt">\\</span>e<span class="dt">\\\\</span><span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb94-4" title="4">    <span class="va">IFS=</span><span class="st">&#39;;t&#39;</span> <span class="bu">read</span> -d <span class="va">t</span> -t 0.05 -sra <span class="va">term_size</span></a>
<a class="sourceLine" id="cb94-5" title="5">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${term_size[1]}</span><span class="st">x</span><span class="va">${term_size[2]}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb94-6" title="6"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Output: WIDTHxHEIGHT
$ get_window_size
1200x800

# Output (fail):
$ get_window_size
x</code></pre>
<hr />
<h2 id="get-the-current-cursor-position">Get the current cursor position</h2>
<p>This is useful when creating a TUI in pure bash.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb96"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb96-1" title="1"><span class="fu">get_cursor_pos()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb96-2" title="2">    <span class="co"># Usage: get_cursor_pos</span></a>
<a class="sourceLine" id="cb96-3" title="3">    <span class="va">IFS=</span><span class="st">&#39;[;&#39;</span> <span class="bu">read</span> -p <span class="st">$&#39;</span><span class="dt">\e</span><span class="st">[6n&#39;</span> -d <span class="va">R</span> -rs <span class="va">_</span> <span class="va">y</span> <span class="va">x</span> <span class="va">_</span></a>
<a class="sourceLine" id="cb96-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$x</span><span class="st"> </span><span class="va">$y</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb96-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Output: X Y
$ get_cursor_pos
1 8</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="conversion">CONVERSION</h1>
<hr />
<h2 id="convert-a-hex-color-to-rgb">Convert a hex color to RGB</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb98"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb98-1" title="1"><span class="fu">hex_to_rgb()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb98-2" title="2">    <span class="co"># Usage: hex_to_rgb &quot;#FFFFFF&quot;</span></a>
<a class="sourceLine" id="cb98-3" title="3">    <span class="co">#        hex_to_rgb &quot;000000&quot;</span></a>
<a class="sourceLine" id="cb98-4" title="4">    <span class="bu">:</span> <span class="st">&quot;</span><span class="va">${1/</span>\#<span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb98-5" title="5">    <span class="kw">((</span>r=16#<span class="va">${_:0:2}</span>,g=16#<span class="va">${_:2:2}</span>,b=16#<span class="va">${_:4:2}</span><span class="kw">))</span></a>
<a class="sourceLine" id="cb98-6" title="6">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">$r</span><span class="st"> </span><span class="va">$g</span><span class="st"> </span><span class="va">$b</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb98-7" title="7"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ hex_to_rgb &quot;#FFFFFF&quot;
255 255 255</code></pre>
<hr />
<h2 id="convert-an-rgb-color-to-hex">Convert an RGB color to hex</h2>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb100"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb100-1" title="1"><span class="fu">rgb_to_hex()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb100-2" title="2">    <span class="co"># Usage: rgb_to_hex &quot;r&quot; &quot;g&quot; &quot;b&quot;</span></a>
<a class="sourceLine" id="cb100-3" title="3">    <span class="bu">printf</span> <span class="st">&#39;#%02x%02x%02x\n&#39;</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$2</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$3</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb100-4" title="4"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ rgb_to_hex &quot;255&quot; &quot;255&quot; &quot;255&quot;
#FFFFFF</code></pre>
<h1 id="code-golf">CODE GOLF</h1>
<hr />
<h2 id="shorter-for-loop-syntax">Shorter <code>for</code> loop syntax</h2>
<pre class="shell"><code># Tiny C Style.
for((;i++&lt;10;)){ echo &quot;$i&quot;;}

# Undocumented method.
for i in {1..10};{ echo &quot;$i&quot;;}

# Expansion.
for i in {1..10}; do echo &quot;$i&quot;; done

# C Style.
for((i=0;i&lt;=10;i++)); do echo &quot;$i&quot;; done</code></pre>
<hr />
<h2 id="shorter-infinite-loops">Shorter infinite loops</h2>
<pre class="shell"><code># Normal method
while :; do echo hi; done

# Shorter
for((;;)){ echo hi;}</code></pre>
<hr />
<h2 id="shorter-function-declaration">Shorter function declaration</h2>
<pre class="shell"><code># Normal method
f(){ echo hi;}

# Using a subshell
f()(echo hi)

# Using arithmetic
# This can be used to assign integer values.
# Example: f a=1
#          f a++
f()(($1))

# Using tests, loops etc.
# NOTE: ‘while’, ‘until’, ‘case’, ‘(())’, ‘[[]]’ can also be used.
f()if true; then echo &quot;$1&quot;; fi
f()for i in &quot;$@&quot;; do echo &quot;$i&quot;; done</code></pre>
<hr />
<h2 id="shorter-if-syntax">Shorter <code>if</code> syntax</h2>
<pre class="shell"><code># One line
# Note: The 3rd statement may run when the 1st is true
[[ $var == hello ]] &amp;&amp; echo hi || echo bye
[[ $var == hello ]] &amp;&amp; { echo hi; echo there; } || echo bye

# Multi line (no else, single statement)
# Note: The exit status may not be the same as with an if statement
[[ $var == hello ]] &amp;&amp;
    echo hi

# Multi line (no else)
[[ $var == hello ]] &amp;&amp; {
    echo hi
    # ...
}</code></pre>
<hr />
<h2 id="simpler-case-statement-to-set-variable">Simpler <code>case</code> statement to set variable</h2>
<p>The <code>:</code> built-in can be used to avoid repeating <code>variable=</code> in a case statement. The <code>$_</code> variable stores the last argument of the last command. <code>:</code> always succeeds so it can be used to store the variable value.</p>
<pre class="shell"><code># Modified snippet from Neofetch.
case &quot;$OSTYPE&quot; in
    &quot;darwin&quot;*)
        : &quot;MacOS&quot;
    ;;

    &quot;linux&quot;*)
        : &quot;Linux&quot;
    ;;

    *&quot;bsd&quot;* | &quot;dragonfly&quot; | &quot;bitrig&quot;)
        : &quot;BSD&quot;
    ;;

    &quot;cygwin&quot; | &quot;msys&quot; | &quot;win32&quot;)
        : &quot;Windows&quot;
    ;;

    *)
        printf &#39;%s\n&#39; &quot;Unknown OS detected, aborting...&quot; &gt;&amp;2
        exit 1
    ;;
esac

# Finally, set the variable.
os=&quot;$_&quot;</code></pre>
<!-- CHAPTER END -->
<!-- CHAPTER START -->
<h1 id="other">OTHER</h1>
<hr />
<h2 id="use-read-as-an-alternative-to-the-sleep-command">Use <code>read</code> as an alternative to the <code>sleep</code> command</h2>
<p>Surprisingly, <code>sleep</code> is an external command and not a <code>bash</code> built-in.</p>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb107-1" title="1"><span class="fu">read_sleep()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb107-2" title="2">    <span class="co"># Usage: read_sleep 1</span></a>
<a class="sourceLine" id="cb107-3" title="3">    <span class="co">#        read_sleep 0.2</span></a>
<a class="sourceLine" id="cb107-4" title="4">    <span class="bu">read</span> -rt <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span> <span class="op">&lt;&gt;</span> <span class="op">&lt;(</span><span class="bu">:</span><span class="op">)</span> <span class="kw">||</span> <span class="bu">:</span></a>
<a class="sourceLine" id="cb107-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>read_sleep 1
read_sleep 0.1
read_sleep 30</code></pre>
<p>For performance-critical situations, where it is not economic to open and close an excessive number of file descriptors, the allocation of a file descriptor may be done only once for all invocations of <code>read</code>:</p>
<p>(See the generic original implementation at https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever)</p>
<pre class="shell"><code>exec {sleep_fd}&lt;&gt; &lt;(:)
while some_quick_test; do
    # equivalent of sleep 0.001
    read -t 0.001 -u $sleep_fd
done</code></pre>
<hr />
<h2 id="check-if-a-program-is-in-the-users-path">Check if a program is in the user’s PATH</h2>
<pre class="shell"><code># There are 3 ways to do this and either one can be used.
type -p executable_name &amp;&gt;/dev/null
hash executable_name &amp;&gt;/dev/null
command -v executable_name &amp;&gt;/dev/null

# As a test.
if type -p executable_name &amp;&gt;/dev/null; then
    # Program is in PATH.
fi

# Inverse.
if ! type -p executable_name &amp;&gt;/dev/null; then
    # Program is not in PATH.
fi

# Example (Exit early if program is not installed).
if ! type -p convert &amp;&gt;/dev/null; then
    printf &#39;%s\n&#39; &quot;error: convert is not installed, exiting...&quot;
    exit 1
fi</code></pre>
<hr />
<h2 id="get-the-current-date-using-strftime">Get the current date using <code>strftime</code></h2>
<p>Bash’s <code>printf</code> has a built-in method of getting the date which can be used in place of the <code>date</code> command.</p>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb111"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb111-1" title="1"><span class="fu">date()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb111-2" title="2">    <span class="co"># Usage: date &quot;format&quot;</span></a>
<a class="sourceLine" id="cb111-3" title="3">    <span class="co"># See: &#39;man strftime&#39; for format.</span></a>
<a class="sourceLine" id="cb111-4" title="4">    <span class="bu">printf</span> <span class="st">&quot;%(</span><span class="va">$1</span><span class="st">)T</span><span class="dt">\\</span><span class="st">n&quot;</span> <span class="st">&quot;-1&quot;</span></a>
<a class="sourceLine" id="cb111-5" title="5"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code># Using above function.
$ date &quot;%a %d %b  - %l:%M %p&quot;
Fri 15 Jun  - 10:00 AM

# Using printf directly.
$ printf &#39;%(%a %d %b  - %l:%M %p)T\n&#39; &quot;-1&quot;
Fri 15 Jun  - 10:00 AM

# Assigning a variable using printf.
$ printf -v date &#39;%(%a %d %b  - %l:%M %p)T\n&#39; &#39;-1&#39;
$ printf &#39;%s\n&#39; &quot;$date&quot;
Fri 15 Jun  - 10:00 AM</code></pre>
<hr />
<h2 id="get-the-username-of-the-current-user">Get the username of the current user</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4.4+</p>
<pre class="shell"><code>$ : \\u
# Expand the parameter as if it were a prompt string.
$ printf &#39;%s\n&#39; &quot;${_@P}&quot;
black</code></pre>
<hr />
<h2 id="generate-a-uuid-v4">Generate a UUID V4</h2>
<p><strong>CAVEAT</strong>: The generated value is not cryptographically secure.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb114"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb114-1" title="1"><span class="fu">uuid()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb114-2" title="2">    <span class="co"># Usage: uuid</span></a>
<a class="sourceLine" id="cb114-3" title="3">    <span class="va">C=</span><span class="st">&quot;89ab&quot;</span></a>
<a class="sourceLine" id="cb114-4" title="4"></a>
<a class="sourceLine" id="cb114-5" title="5">    <span class="kw">for</span> <span class="kw">((</span>N=0;N&lt;16;++N<span class="kw">))</span>; <span class="kw">do</span></a>
<a class="sourceLine" id="cb114-6" title="6">        <span class="va">B=</span><span class="st">&quot;</span><span class="va">$((</span>RANDOM%256<span class="va">))</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb114-7" title="7"></a>
<a class="sourceLine" id="cb114-8" title="8">        <span class="kw">case</span> <span class="st">&quot;</span><span class="va">$N</span><span class="st">&quot;</span><span class="kw"> in</span></a>
<a class="sourceLine" id="cb114-9" title="9">            6<span class="kw">)</span>  <span class="bu">printf</span> <span class="st">&#39;4%x&#39;</span> <span class="st">&quot;</span><span class="va">$((</span>B%16<span class="va">))</span><span class="st">&quot;</span> <span class="kw">;;</span></a>
<a class="sourceLine" id="cb114-10" title="10">            <span class="ex">8</span>)  <span class="bu">printf</span> <span class="st">&#39;%c%x&#39;</span> <span class="st">&quot;</span><span class="va">${C:$RANDOM</span><span class="er">%</span><span class="va">${#C}:1}</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$((</span>B%16<span class="va">))</span><span class="st">&quot;</span> <span class="kw">;;</span></a>
<a class="sourceLine" id="cb114-11" title="11"></a>
<a class="sourceLine" id="cb114-12" title="12">            <span class="ex">3</span><span class="kw">|</span><span class="ex">5</span><span class="kw">|</span><span class="ex">7</span><span class="kw">|</span><span class="ex">9</span>)</a>
<a class="sourceLine" id="cb114-13" title="13">                <span class="bu">printf</span> <span class="st">&#39;%02x-&#39;</span> <span class="st">&quot;</span><span class="va">$B</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb114-14" title="14">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb114-15" title="15"></a>
<a class="sourceLine" id="cb114-16" title="16">            *<span class="kw">)</span></a>
<a class="sourceLine" id="cb114-17" title="17">                <span class="bu">printf</span> <span class="st">&#39;%02x&#39;</span> <span class="st">&quot;</span><span class="va">$B</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb114-18" title="18">            <span class="kw">;;</span></a>
<a class="sourceLine" id="cb114-19" title="19">        <span class="kw">esac</span></a>
<a class="sourceLine" id="cb114-20" title="20">    <span class="kw">done</span></a>
<a class="sourceLine" id="cb114-21" title="21"></a>
<a class="sourceLine" id="cb114-22" title="22">    <span class="bu">printf</span> <span class="st">&#39;\n&#39;</span></a>
<a class="sourceLine" id="cb114-23" title="23"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>$ uuid
d5b6c731-1310-4c24-9fe3-55d556d44374</code></pre>
<hr />
<h2 id="progress-bars">Progress bars</h2>
<p>This is a simple way of drawing progress bars without needing a for loop in the function itself.</p>
<p><strong>Example Function:</strong></p>
<div class="sourceCode" id="cb116"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb116-1" title="1"><span class="fu">bar()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb116-2" title="2">    <span class="co"># Usage: bar 1 10</span></a>
<a class="sourceLine" id="cb116-3" title="3">    <span class="co">#            ^----- Elapsed Percentage (0-100).</span></a>
<a class="sourceLine" id="cb116-4" title="4">    <span class="co">#               ^-- Total length in chars.</span></a>
<a class="sourceLine" id="cb116-5" title="5">    <span class="kw">((</span>elapsed=<span class="va">$1</span>*<span class="va">$2</span>/100<span class="kw">))</span></a>
<a class="sourceLine" id="cb116-6" title="6"></a>
<a class="sourceLine" id="cb116-7" title="7">    <span class="co"># Create the bar with spaces.</span></a>
<a class="sourceLine" id="cb116-8" title="8">    <span class="bu">printf</span> -v prog  <span class="st">&quot;%</span><span class="va">${elapsed}</span><span class="st">s&quot;</span></a>
<a class="sourceLine" id="cb116-9" title="9">    <span class="bu">printf</span> -v total <span class="st">&quot;%</span><span class="va">$(($2</span>-elapsed<span class="va">))</span><span class="st">s&quot;</span></a>
<a class="sourceLine" id="cb116-10" title="10"></a>
<a class="sourceLine" id="cb116-11" title="11">    <span class="bu">printf</span> <span class="st">&#39;%s\r&#39;</span> <span class="st">&quot;[</span><span class="va">${prog//</span> <span class="va">/</span>-<span class="va">}${total}</span><span class="st">]&quot;</span></a>
<a class="sourceLine" id="cb116-12" title="12"><span class="kw">}</span></a></code></pre></div>
<p><strong>Example Usage:</strong></p>
<pre class="shell"><code>for ((i=0;i&lt;=100;i++)); do
    # Pure bash micro sleeps (for the example).
    (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:)

    # Print the bar.
    bar &quot;$i&quot; &quot;10&quot;
done

printf &#39;\n&#39;</code></pre>
<hr />
<h2 id="get-the-list-of-functions-in-a-script">Get the list of functions in a script</h2>
<div class="sourceCode" id="cb118"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb118-1" title="1"><span class="fu">get_functions()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb118-2" title="2">    <span class="co"># Usage: get_functions</span></a>
<a class="sourceLine" id="cb118-3" title="3">    <span class="va">IFS=</span><span class="st">$&#39;</span><span class="dt">\n</span><span class="st">&#39;</span> <span class="bu">read</span> -d <span class="st">&quot;&quot;</span> -ra <span class="va">functions</span> <span class="op">&lt;</span> <span class="op">&lt;(</span><span class="bu">declare</span> -F<span class="op">)</span></a>
<a class="sourceLine" id="cb118-4" title="4">    <span class="bu">printf</span> <span class="st">&#39;%s\n&#39;</span> <span class="st">&quot;</span><span class="va">${functions[@]//</span>declare -f <span class="va">}</span><span class="st">&quot;</span></a>
<a class="sourceLine" id="cb118-5" title="5"><span class="kw">}</span></a></code></pre></div>
<hr />
<h2 id="bypass-shell-aliases">Bypass shell aliases</h2>
<pre class="shell"><code># alias
ls

# command
# shellcheck disable=SC1001
\ls</code></pre>
<hr />
<h2 id="bypass-shell-functions">Bypass shell functions</h2>
<pre class="shell"><code># function
ls

# command
command ls</code></pre>
<hr />
<h2 id="run-a-command-in-the-background">Run a command in the background</h2>
<p>This will run the given command and keep it running, even after the terminal or SSH connection is terminated. All output is ignored.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb121-1" title="1"><span class="fu">bkr()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb121-2" title="2">    <span class="kw">(</span><span class="fu">nohup</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span> <span class="op">&amp;&gt;</span>/dev/null <span class="kw">&amp;)</span></a>
<a class="sourceLine" id="cb121-3" title="3"><span class="kw">}</span></a>
<a class="sourceLine" id="cb121-4" title="4"></a>
<a class="sourceLine" id="cb121-5" title="5"><span class="ex">bkr</span> ./some_script.sh <span class="co"># some_script.sh is now running in the background</span></a></code></pre></div>
<hr />
<h2 id="capture-the-return-value-of-a-function-without-command-substitution">Capture the return value of a function without command substitution</h2>
<p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p>
<p>This uses local namerefs to avoid using <code>var=$(some_func)</code> style command substitution for function output capture.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode sh"><code class="sourceCode bash"><a class="sourceLine" id="cb122-1" title="1"><span class="fu">to_upper()</span> <span class="kw">{</span></a>
<a class="sourceLine" id="cb122-2" title="2">  <span class="bu">local</span> -n <span class="va">ptr=${1}</span></a>
<a class="sourceLine" id="cb122-3" title="3"></a>
<a class="sourceLine" id="cb122-4" title="4">  <span class="va">ptr=${ptr^^}</span></a>
<a class="sourceLine" id="cb122-5" title="5"><span class="kw">}</span></a>
<a class="sourceLine" id="cb122-6" title="6"></a>
<a class="sourceLine" id="cb122-7" title="7"><span class="va">foo=</span><span class="st">&quot;bar&quot;</span></a>
<a class="sourceLine" id="cb122-8" title="8"><span class="ex">to_upper</span> foo</a>
<a class="sourceLine" id="cb122-9" title="9"><span class="bu">printf</span> <span class="st">&quot;%s\n&quot;</span> <span class="st">&quot;</span><span class="va">${foo}</span><span class="st">&quot;</span> <span class="co"># BAR</span></a></code></pre></div>
</body>
</html>
