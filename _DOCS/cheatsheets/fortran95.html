<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>fortran95</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
</head>
<body>
<p>Fortran is one of the oldest computer languages. It was developed in the 1950s by IBM for numeric calculations (Fortran is an abbreviation of “Formula Translation”). Despite its age, it is still used for high-performance computing such as weather prediction. However, the language has changed considerably over the years, although mostly maintaining backwards compatibility; well known versions are FORTRAN 77, Fortran 90, Fortran 95, Fortran 2003, Fortran 2008 and Fortran 2015.</p>
<p>This overview will discuss the features of Fortran 95 since it is the most widely implemented of the more recent specifications and the later versions are largely similar (by comparison FORTRAN 77 is a very different language).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode fortran"><code class="sourceCode fortran"><a class="sourceLine" id="cb1-1" title="1"></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co">! This is a comment.</span></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="kw">program</span> example   <span class="co">!declare a program called example.</span></a>
<a class="sourceLine" id="cb1-6" title="6"></a>
<a class="sourceLine" id="cb1-7" title="7">    <span class="co">! Code can only exist inside programs, functions, subroutines or modules.</span></a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="co">! Using indentation is not required but it is recommended.</span></a>
<a class="sourceLine" id="cb1-9" title="9"></a>
<a class="sourceLine" id="cb1-10" title="10"></a>
<a class="sourceLine" id="cb1-11" title="11">    <span class="co">! Declaring Variables</span></a>
<a class="sourceLine" id="cb1-12" title="12">    <span class="co">! ===================</span></a>
<a class="sourceLine" id="cb1-13" title="13"></a>
<a class="sourceLine" id="cb1-14" title="14">    <span class="co">! All declarations must come before statements and expressions.</span></a>
<a class="sourceLine" id="cb1-15" title="15"></a>
<a class="sourceLine" id="cb1-16" title="16">    <span class="kw">implicit</span> <span class="kw">none</span>    <span class="co">!prevents dynamic declaration of variables (recommended!)</span></a>
<a class="sourceLine" id="cb1-17" title="17">    <span class="co">! Implicit none must be redeclared in every function/program/module...</span></a>
<a class="sourceLine" id="cb1-18" title="18"></a>
<a class="sourceLine" id="cb1-19" title="19">    <span class="co">! IMPORTANT - Fortran is case insensitive.</span></a>
<a class="sourceLine" id="cb1-20" title="20"><span class="dt">    real</span> z</a>
<a class="sourceLine" id="cb1-21" title="21"><span class="dt">    REAL</span> Z2</a>
<a class="sourceLine" id="cb1-22" title="22"></a>
<a class="sourceLine" id="cb1-23" title="23"><span class="dt">    real</span> <span class="dt">::</span> v,x    <span class="co">! </span><span class="al">WARNING</span><span class="co">: default initial values are compiler dependent!</span></a>
<a class="sourceLine" id="cb1-24" title="24"><span class="dt">    real</span> <span class="dt">::</span> a <span class="kw">=</span> <span class="dv">3</span>, b<span class="kw">=</span><span class="fl">2E12</span>, c <span class="kw">=</span> <span class="fl">0.01</span></a>
<a class="sourceLine" id="cb1-25" title="25">    <span class="dt">integer</span> <span class="dt">::</span> i, j, k<span class="kw">=</span><span class="dv">1</span>, m</a>
<a class="sourceLine" id="cb1-26" title="26"><span class="dt">    real</span>, <span class="dt">parameter</span> <span class="dt">::</span> PI <span class="kw">=</span> <span class="fl">3.1415926535897931</span>    <span class="co">!declare a constant.</span></a>
<a class="sourceLine" id="cb1-27" title="27">    <span class="dt">logical</span> <span class="dt">::</span> y <span class="kw">=</span> <span class="cn">.TRUE.</span> , n <span class="kw">=</span> <span class="cn">.FALSE.</span>    <span class="co">!boolean type.</span></a>
<a class="sourceLine" id="cb1-28" title="28">    <span class="dt">complex</span> <span class="dt">::</span> w <span class="kw">=</span> (<span class="dv">0</span>,<span class="dv">1</span>)    <span class="co">!sqrt(-1)</span></a>
<a class="sourceLine" id="cb1-29" title="29">    <span class="dt">character (len=3)</span> <span class="dt">::</span> month    <span class="co">!string of 3 characters.</span></a>
<a class="sourceLine" id="cb1-30" title="30"></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="dt">    real</span> <span class="dt">::</span> array(<span class="dv">6</span>)     <span class="co">!declare an array of 6 reals.</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="dt">    real</span>, <span class="dt">dimension(4)</span> <span class="dt">::</span> arrayb    <span class="co">!another way to declare an array.</span></a>
<a class="sourceLine" id="cb1-33" title="33">    <span class="dt">integer</span> <span class="dt">::</span> arrayc(<span class="kw">-</span><span class="dv">10</span>:<span class="dv">10</span>)   <span class="co">!an array with a custom index.</span></a>
<a class="sourceLine" id="cb1-34" title="34"><span class="dt">    real</span> <span class="dt">::</span> array2d(<span class="dv">3</span>,<span class="dv">2</span>)    <span class="co">!multidimensional array.</span></a>
<a class="sourceLine" id="cb1-35" title="35"></a>
<a class="sourceLine" id="cb1-36" title="36">    <span class="co">! The &#39;::&#39; separators are not always necessary but are recommended.</span></a>
<a class="sourceLine" id="cb1-37" title="37"></a>
<a class="sourceLine" id="cb1-38" title="38">    <span class="co">! many other variable attributes also exist:</span></a>
<a class="sourceLine" id="cb1-39" title="39"><span class="dt">    real</span>, <span class="dt">pointer</span> <span class="dt">::</span> p    <span class="co">!declare a pointer.</span></a>
<a class="sourceLine" id="cb1-40" title="40"></a>
<a class="sourceLine" id="cb1-41" title="41">    <span class="dt">integer</span>, <span class="dt">parameter</span> <span class="dt">::</span> LP <span class="kw">=</span> <span class="fu">selected_real_kind</span>(<span class="dv">20</span>)</a>
<a class="sourceLine" id="cb1-42" title="42"><span class="dt">    real (kind = LP)</span> <span class="dt">::</span> d    <span class="co">!long precision variable.</span></a>
<a class="sourceLine" id="cb1-43" title="43"></a>
<a class="sourceLine" id="cb1-44" title="44">    <span class="co">! </span><span class="al">WARNING</span><span class="co">: initialising variables during declaration causes problems</span></a>
<a class="sourceLine" id="cb1-45" title="45">    <span class="co">! in functions since this automatically implies the &#39;save&#39; attribute</span></a>
<a class="sourceLine" id="cb1-46" title="46">    <span class="co">! whereby values are saved between function calls. In general, separate</span></a>
<a class="sourceLine" id="cb1-47" title="47">    <span class="co">! declaration and initialisation code except for constants!</span></a>
<a class="sourceLine" id="cb1-48" title="48"></a>
<a class="sourceLine" id="cb1-49" title="49"></a>
<a class="sourceLine" id="cb1-50" title="50">    <span class="co">! Strings</span></a>
<a class="sourceLine" id="cb1-51" title="51">    <span class="co">! =======</span></a>
<a class="sourceLine" id="cb1-52" title="52"></a>
<a class="sourceLine" id="cb1-53" title="53">    <span class="dt">character</span> <span class="dt">::</span> a_char <span class="kw">=</span> <span class="st">&#39;i&#39;</span></a>
<a class="sourceLine" id="cb1-54" title="54">    <span class="dt">character (len = 6)</span> <span class="dt">::</span> a_str <span class="kw">=</span> <span class="st">&quot;qwerty&quot;</span></a>
<a class="sourceLine" id="cb1-55" title="55">    <span class="dt">character (len = 30)</span> <span class="dt">::</span> str_b</a>
<a class="sourceLine" id="cb1-56" title="56">    <span class="dt">character (len = *)</span>, <span class="dt">parameter</span> <span class="dt">::</span> a_long_str <span class="kw">=</span> <span class="st">&quot;This is a long string.&quot;</span></a>
<a class="sourceLine" id="cb1-57" title="57">    <span class="co">!can have automatic counting of length using (len=*) but only for constants.</span></a>
<a class="sourceLine" id="cb1-58" title="58"></a>
<a class="sourceLine" id="cb1-59" title="59">    str_b <span class="kw">=</span> a_str <span class="kw">//</span> <span class="st">&quot; keyboard&quot;</span>    <span class="co">!concatenate strings using // operator.</span></a>
<a class="sourceLine" id="cb1-60" title="60"></a>
<a class="sourceLine" id="cb1-61" title="61"></a>
<a class="sourceLine" id="cb1-62" title="62">    <span class="co">! Assignment &amp; Arithmetic</span></a>
<a class="sourceLine" id="cb1-63" title="63">    <span class="co">! =======================</span></a>
<a class="sourceLine" id="cb1-64" title="64"></a>
<a class="sourceLine" id="cb1-65" title="65">    Z <span class="kw">=</span> <span class="dv">1</span>    <span class="co">!assign to variable z declared above (case insensitive).</span></a>
<a class="sourceLine" id="cb1-66" title="66">    j <span class="kw">=</span> <span class="dv">10</span> <span class="kw">+</span> <span class="dv">2</span> <span class="kw">-</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb1-67" title="67">    a <span class="kw">=</span> <span class="fl">11.54</span>  <span class="kw">/</span>  (<span class="fl">2.3</span> <span class="kw">*</span> <span class="fl">3.1</span>)</a>
<a class="sourceLine" id="cb1-68" title="68">    b <span class="kw">=</span> <span class="dv">2</span><span class="kw">**</span><span class="dv">3</span>    <span class="co">!exponentiation</span></a>
<a class="sourceLine" id="cb1-69" title="69"></a>
<a class="sourceLine" id="cb1-70" title="70"></a>
<a class="sourceLine" id="cb1-71" title="71">    <span class="co">! Control Flow Statements &amp; Operators</span></a>
<a class="sourceLine" id="cb1-72" title="72">    <span class="co">! ===================================</span></a>
<a class="sourceLine" id="cb1-73" title="73"></a>
<a class="sourceLine" id="cb1-74" title="74">    <span class="co">! Single-line if statement</span></a>
<a class="sourceLine" id="cb1-75" title="75">    <span class="kw">if</span> (z <span class="op">==</span> a) b <span class="kw">=</span> <span class="dv">4</span>  <span class="co">!condition always need surrounding parentheses.</span></a>
<a class="sourceLine" id="cb1-76" title="76"></a>
<a class="sourceLine" id="cb1-77" title="77">    <span class="kw">if</span> (z <span class="op">/=</span> a) <span class="kw">then</span> <span class="co">!z not equal to a</span></a>
<a class="sourceLine" id="cb1-78" title="78">    <span class="co">! Other symbolic comparisons are &lt; &gt; &lt;= &gt;= == /=</span></a>
<a class="sourceLine" id="cb1-79" title="79">      b <span class="kw">=</span> <span class="dv">4</span></a>
<a class="sourceLine" id="cb1-80" title="80">    <span class="kw">else if</span> (z <span class="op">.GT.</span> a) <span class="kw">then</span> <span class="co">!z greater than a</span></a>
<a class="sourceLine" id="cb1-81" title="81">    <span class="co">! Text equivalents to symbol operators are .LT. .GT. .LE. .GE. .EQ. .NE.</span></a>
<a class="sourceLine" id="cb1-82" title="82">      b <span class="kw">=</span> <span class="dv">6</span></a>
<a class="sourceLine" id="cb1-83" title="83">    <span class="kw">else if</span> (z <span class="op">&lt;</span> a) <span class="kw">then</span> <span class="co">!&#39;then&#39; must be on this line.</span></a>
<a class="sourceLine" id="cb1-84" title="84">      b <span class="kw">=</span> <span class="dv">5</span> <span class="co">!execution block must be on a new line.</span></a>
<a class="sourceLine" id="cb1-85" title="85">    <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-86" title="86">      b <span class="kw">=</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb1-87" title="87">    <span class="kw">end if</span> <span class="co">!end statement needs the &#39;if&#39; (or can use &#39;endif&#39;).</span></a>
<a class="sourceLine" id="cb1-88" title="88"></a>
<a class="sourceLine" id="cb1-89" title="89"></a>
<a class="sourceLine" id="cb1-90" title="90">    <span class="kw">if</span> (<span class="op">.NOT.</span> (x <span class="op">&lt;</span> c <span class="op">.AND.</span> v <span class="op">&gt;</span><span class="kw">=</span> a <span class="op">.OR.</span> z <span class="op">==</span> z)) <span class="kw">then</span>   <span class="co">!boolean operators.</span></a>
<a class="sourceLine" id="cb1-91" title="91">      inner: <span class="kw">if</span> (<span class="cn">.TRUE.</span>) <span class="kw">then</span>    <span class="co">!can name if-construct.</span></a>
<a class="sourceLine" id="cb1-92" title="92">        b <span class="kw">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-93" title="93">      <span class="kw">endif</span> inner    <span class="co">!then must name endif statement.</span></a>
<a class="sourceLine" id="cb1-94" title="94">    <span class="kw">endif</span></a>
<a class="sourceLine" id="cb1-95" title="95"></a>
<a class="sourceLine" id="cb1-96" title="96"></a>
<a class="sourceLine" id="cb1-97" title="97">    i <span class="kw">=</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb1-98" title="98">    <span class="kw">select</span> <span class="kw">case</span> (i)</a>
<a class="sourceLine" id="cb1-99" title="99">      <span class="kw">case</span> (<span class="dv">0</span>)    <span class="co">!case i == 0</span></a>
<a class="sourceLine" id="cb1-100" title="100">        j<span class="kw">=</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-101" title="101">      <span class="kw">case</span> (<span class="dv">1</span>:<span class="dv">10</span>)    <span class="co">!cases i is 1 to 10 inclusive.</span></a>
<a class="sourceLine" id="cb1-102" title="102">        j<span class="kw">=</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-103" title="103">      <span class="kw">case</span> (<span class="dv">11</span>:)    <span class="co">!all cases where i&gt;=11</span></a>
<a class="sourceLine" id="cb1-104" title="104">        j<span class="kw">=</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-105" title="105">      <span class="kw">case</span> <span class="kw">default</span></a>
<a class="sourceLine" id="cb1-106" title="106">        j<span class="kw">=</span><span class="dv">3</span></a>
<a class="sourceLine" id="cb1-107" title="107">    <span class="kw">end select</span></a>
<a class="sourceLine" id="cb1-108" title="108"></a>
<a class="sourceLine" id="cb1-109" title="109"></a>
<a class="sourceLine" id="cb1-110" title="110">    month <span class="kw">=</span> <span class="st">&#39;jan&#39;</span></a>
<a class="sourceLine" id="cb1-111" title="111">    <span class="co">! Condition can be integer, logical or character type.</span></a>
<a class="sourceLine" id="cb1-112" title="112">    <span class="co">! Select constructions can also be named.</span></a>
<a class="sourceLine" id="cb1-113" title="113">    monthly: <span class="kw">select</span> <span class="kw">case</span> (month)</a>
<a class="sourceLine" id="cb1-114" title="114">      <span class="kw">case</span> (<span class="st">&quot;jan&quot;</span>)</a>
<a class="sourceLine" id="cb1-115" title="115">         j <span class="kw">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-116" title="116">      <span class="kw">case</span> <span class="kw">default</span></a>
<a class="sourceLine" id="cb1-117" title="117">         j <span class="kw">=</span> <span class="kw">-</span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-118" title="118">    <span class="kw">end select</span> monthly</a>
<a class="sourceLine" id="cb1-119" title="119"></a>
<a class="sourceLine" id="cb1-120" title="120"></a>
<a class="sourceLine" id="cb1-121" title="121">    <span class="kw">do</span> i<span class="kw">=</span><span class="dv">2</span>,<span class="dv">10</span>,<span class="dv">2</span>    <span class="co">!loops from 2 to 10 (inclusive) in increments of 2.</span></a>
<a class="sourceLine" id="cb1-122" title="122">      innerloop: <span class="kw">do</span> j<span class="kw">=</span><span class="dv">1</span>,<span class="dv">3</span>    <span class="co">!loops can be named too.</span></a>
<a class="sourceLine" id="cb1-123" title="123">        <span class="kw">exit</span>    <span class="co">!quits the loop.</span></a>
<a class="sourceLine" id="cb1-124" title="124">      <span class="kw">end do</span> innerloop</a>
<a class="sourceLine" id="cb1-125" title="125">    <span class="kw">cycle</span>    <span class="co">!jump to next loop iteration.</span></a>
<a class="sourceLine" id="cb1-126" title="126">    <span class="kw">enddo</span></a>
<a class="sourceLine" id="cb1-127" title="127"></a>
<a class="sourceLine" id="cb1-128" title="128"></a>
<a class="sourceLine" id="cb1-129" title="129">    <span class="co">! Goto statement exists but it is heavily discouraged though.</span></a>
<a class="sourceLine" id="cb1-130" title="130">    <span class="kw">goto</span> <span class="dv">10</span></a>
<a class="sourceLine" id="cb1-131" title="131">    <span class="kw">stop</span> <span class="dv">1</span>    <span class="co">!stops code immediately (returning specified condition code).</span></a>
<a class="sourceLine" id="cb1-132" title="132"><span class="dv">10</span>  j <span class="kw">=</span> <span class="dv">201</span>    <span class="co">!this line is labeled as line 10</span></a>
<a class="sourceLine" id="cb1-133" title="133"></a>
<a class="sourceLine" id="cb1-134" title="134"></a>
<a class="sourceLine" id="cb1-135" title="135">    <span class="co">! Arrays</span></a>
<a class="sourceLine" id="cb1-136" title="136">    <span class="co">! ======</span></a>
<a class="sourceLine" id="cb1-137" title="137">    array <span class="kw">=</span> <span class="kw">(/</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span><span class="kw">/)</span></a>
<a class="sourceLine" id="cb1-138" title="138">    array <span class="kw">=</span> <span class="kw">[</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span><span class="kw">]</span>    <span class="co">!using Fortran 2003 notation.</span></a>
<a class="sourceLine" id="cb1-139" title="139">    arrayb <span class="kw">=</span> <span class="kw">[</span><span class="fl">10.2</span>,<span class="fl">3e3</span>,<span class="fl">0.41</span>,<span class="fl">4e-5</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb1-140" title="140">    array2d <span class="kw">=</span>  <span class="fu">reshape</span>(<span class="kw">[</span><span class="fl">1.0</span>,<span class="fl">2.0</span>,<span class="fl">3.0</span>,<span class="fl">4.0</span>,<span class="fl">5.0</span>,<span class="fl">6.0</span><span class="kw">]</span>, <span class="kw">[</span><span class="dv">3</span>,<span class="dv">2</span><span class="kw">]</span>)</a>
<a class="sourceLine" id="cb1-141" title="141"></a>
<a class="sourceLine" id="cb1-142" title="142">    <span class="co">! Fortran array indexing starts from 1.</span></a>
<a class="sourceLine" id="cb1-143" title="143">    <span class="co">! (by default but can be defined differently for specific arrays).</span></a>
<a class="sourceLine" id="cb1-144" title="144">    v <span class="kw">=</span> array(<span class="dv">1</span>)    <span class="co">!take first element of array.</span></a>
<a class="sourceLine" id="cb1-145" title="145">    v <span class="kw">=</span> array2d(<span class="dv">2</span>,<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-146" title="146"></a>
<a class="sourceLine" id="cb1-147" title="147">    <span class="fu">print</span> <span class="kw">*</span>, array(<span class="dv">3</span>:<span class="dv">5</span>)    <span class="co">!print all elements from 3rd to 5th (inclusive).</span></a>
<a class="sourceLine" id="cb1-148" title="148">    <span class="fu">print</span> <span class="kw">*</span>, array2d(<span class="dv">1</span>,:)    <span class="co">!print first column of 2d array.</span></a>
<a class="sourceLine" id="cb1-149" title="149"></a>
<a class="sourceLine" id="cb1-150" title="150">    array <span class="kw">=</span> array<span class="kw">*</span><span class="dv">3</span> <span class="kw">+</span> <span class="dv">2</span>    <span class="co">!can apply mathematical expressions to arrays.</span></a>
<a class="sourceLine" id="cb1-151" title="151">    array <span class="kw">=</span> array<span class="kw">*</span>array    <span class="co">!array operations occur element-wise.</span></a>
<a class="sourceLine" id="cb1-152" title="152">    <span class="co">!array = array*array2d    !these arrays would not be compatible.</span></a>
<a class="sourceLine" id="cb1-153" title="153"></a>
<a class="sourceLine" id="cb1-154" title="154">    <span class="co">! There are many built-in functions that operate on arrays.</span></a>
<a class="sourceLine" id="cb1-155" title="155">    c <span class="kw">=</span> <span class="fu">dot_product</span>(array,array)    <span class="co">!this is the dot product.</span></a>
<a class="sourceLine" id="cb1-156" title="156">    <span class="co">! Use matmul() for matrix maths.</span></a>
<a class="sourceLine" id="cb1-157" title="157">    c <span class="kw">=</span> <span class="fu">sum</span>(array)</a>
<a class="sourceLine" id="cb1-158" title="158">    c <span class="kw">=</span> <span class="fu">maxval</span>(array)</a>
<a class="sourceLine" id="cb1-159" title="159">    <span class="fu">print</span> <span class="kw">*</span>, <span class="fu">minloc</span>(array)</a>
<a class="sourceLine" id="cb1-160" title="160">    c <span class="kw">=</span> <span class="fu">size</span>(array)</a>
<a class="sourceLine" id="cb1-161" title="161">    <span class="fu">print</span> <span class="kw">*</span>, <span class="fu">shape</span>(array)</a>
<a class="sourceLine" id="cb1-162" title="162">    m <span class="kw">=</span> <span class="fu">count</span>(array <span class="op">&gt;</span> <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-163" title="163"></a>
<a class="sourceLine" id="cb1-164" title="164">    <span class="co">! Loop over an array (could have used Product() function normally).</span></a>
<a class="sourceLine" id="cb1-165" title="165">    v <span class="kw">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-166" title="166">    <span class="kw">do</span> i <span class="kw">=</span> <span class="dv">1</span>, <span class="fu">size</span>(array)</a>
<a class="sourceLine" id="cb1-167" title="167">        v <span class="kw">=</span> v<span class="kw">*</span>array(i)</a>
<a class="sourceLine" id="cb1-168" title="168">    <span class="kw">end do</span></a>
<a class="sourceLine" id="cb1-169" title="169"></a>
<a class="sourceLine" id="cb1-170" title="170">    <span class="co">! Conditionally execute element-wise assignments.</span></a>
<a class="sourceLine" id="cb1-171" title="171">    array <span class="kw">=</span> <span class="kw">[</span><span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span><span class="kw">]</span></a>
<a class="sourceLine" id="cb1-172" title="172">    <span class="kw">where</span> (array <span class="op">&gt;</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-173" title="173">        array <span class="kw">=</span> array <span class="kw">+</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-174" title="174">    <span class="kw">elsewhere</span> (array <span class="op">==</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-175" title="175">        array <span class="kw">=</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb1-176" title="176">    <span class="kw">elsewhere</span></a>
<a class="sourceLine" id="cb1-177" title="177">        array <span class="kw">=</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb1-178" title="178">    <span class="kw">end where</span></a>
<a class="sourceLine" id="cb1-179" title="179"></a>
<a class="sourceLine" id="cb1-180" title="180">    <span class="co">! Implied-DO loops are a compact way to create arrays.</span></a>
<a class="sourceLine" id="cb1-181" title="181">    array <span class="kw">=</span> <span class="kw">[</span> (i, i <span class="kw">=</span> <span class="dv">1</span>,<span class="dv">6</span>) <span class="kw">]</span>    <span class="co">!creates an array of [1,2,3,4,5,6]</span></a>
<a class="sourceLine" id="cb1-182" title="182">    array <span class="kw">=</span> <span class="kw">[</span> (i, i <span class="kw">=</span> <span class="dv">1</span>,<span class="dv">12</span>,<span class="dv">2</span>) <span class="kw">]</span>    <span class="co">!creates an array of [1,3,5,7,9,11]</span></a>
<a class="sourceLine" id="cb1-183" title="183">    array <span class="kw">=</span> <span class="kw">[</span> (i<span class="kw">**</span><span class="dv">2</span>, i <span class="kw">=</span> <span class="dv">1</span>,<span class="dv">6</span>) <span class="kw">]</span>    <span class="co">!creates an array of  [1,4,9,16,25,36]</span></a>
<a class="sourceLine" id="cb1-184" title="184">    array <span class="kw">=</span> <span class="kw">[</span> (<span class="dv">4</span>,<span class="dv">5</span>, i <span class="kw">=</span> <span class="dv">1</span>,<span class="dv">3</span>) <span class="kw">]</span>    <span class="co">!creates an array of [4,5,4,5,4,5]</span></a>
<a class="sourceLine" id="cb1-185" title="185"></a>
<a class="sourceLine" id="cb1-186" title="186"></a>
<a class="sourceLine" id="cb1-187" title="187">    <span class="co">! Input/Output</span></a>
<a class="sourceLine" id="cb1-188" title="188">    <span class="co">! ============</span></a>
<a class="sourceLine" id="cb1-189" title="189"></a>
<a class="sourceLine" id="cb1-190" title="190">    <span class="fu">print</span> <span class="kw">*</span>, b    <span class="co">!print the variable &#39;b&#39; to the command line</span></a>
<a class="sourceLine" id="cb1-191" title="191"></a>
<a class="sourceLine" id="cb1-192" title="192">    <span class="co">! We can format our printed output.</span></a>
<a class="sourceLine" id="cb1-193" title="193">    <span class="fu">print</span> <span class="st">&quot;(I6)&quot;</span>, <span class="dv">320</span>    <span class="co">!prints &#39;   320&#39;</span></a>
<a class="sourceLine" id="cb1-194" title="194">    <span class="fu">print</span> <span class="st">&quot;(I6.4)&quot;</span>, <span class="dv">3</span>    <span class="co">!prints &#39;  0003&#39;</span></a>
<a class="sourceLine" id="cb1-195" title="195">    <span class="fu">print</span> <span class="st">&quot;(F6.3)&quot;</span>, <span class="fl">4.32</span>    <span class="co">!prints &#39; 4.320&#39;</span></a>
<a class="sourceLine" id="cb1-196" title="196"></a>
<a class="sourceLine" id="cb1-197" title="197">    <span class="co">! The letter indicates the expected type and the number afterwards gives</span></a>
<a class="sourceLine" id="cb1-198" title="198">    <span class="co">! the number of characters to use for printing the value.</span></a>
<a class="sourceLine" id="cb1-199" title="199">    <span class="co">! Letters can be I (integer), F (real), E (engineering format),</span></a>
<a class="sourceLine" id="cb1-200" title="200">    <span class="co">! L (logical), A (characters) ...</span></a>
<a class="sourceLine" id="cb1-201" title="201">    <span class="fu">print</span> <span class="st">&quot;(I3)&quot;</span>, <span class="dv">3200</span>    <span class="co">!print &#39;***&#39; since the number doesn&#39;t fit.</span></a>
<a class="sourceLine" id="cb1-202" title="202"></a>
<a class="sourceLine" id="cb1-203" title="203">    <span class="co">! we can have multiple format specifications.</span></a>
<a class="sourceLine" id="cb1-204" title="204">    <span class="fu">print</span> <span class="st">&quot;(I5,F6.2,E6.2)&quot;</span>, <span class="dv">120</span>, <span class="fl">43.41</span>, <span class="fl">43.41</span></a>
<a class="sourceLine" id="cb1-205" title="205">    <span class="fu">print</span> <span class="st">&quot;(3I5)&quot;</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>    <span class="co">!3 repeats of integers (field width = 5).</span></a>
<a class="sourceLine" id="cb1-206" title="206">    <span class="fu">print</span> <span class="st">&quot;(2(I5,F6.2))&quot;</span>, <span class="dv">120</span>, <span class="fl">43.42</span>, <span class="dv">340</span>, <span class="fl">65.3</span>   <span class="co">!repeated grouping of formats.</span></a>
<a class="sourceLine" id="cb1-207" title="207"></a>
<a class="sourceLine" id="cb1-208" title="208">    <span class="co">! We can also read input from the terminal.</span></a>
<a class="sourceLine" id="cb1-209" title="209">    <span class="fu">read</span> <span class="kw">*</span>, v</a>
<a class="sourceLine" id="cb1-210" title="210">    <span class="fu">read</span> <span class="st">&quot;(2F6.2)&quot;</span>, v, x    <span class="co">!read two numbers</span></a>
<a class="sourceLine" id="cb1-211" title="211"></a>
<a class="sourceLine" id="cb1-212" title="212">    <span class="co">! To read a file.</span></a>
<a class="sourceLine" id="cb1-213" title="213">    <span class="fu">open(unit</span><span class="kw">=</span><span class="dv">11</span>, <span class="fu">file</span><span class="kw">=</span><span class="st">&quot;records.txt&quot;</span>, <span class="fu">status</span><span class="kw">=</span><span class="st">&quot;old&quot;</span><span class="fu">)</span></a>
<a class="sourceLine" id="cb1-214" title="214">    <span class="co">! The file is referred to by a &#39;unit number&#39;, an integer that you pick in</span></a>
<a class="sourceLine" id="cb1-215" title="215">    <span class="co">! the range 9:99. Status can be one of {&#39;old&#39;,&#39;replace&#39;,&#39;new&#39;}.</span></a>
<a class="sourceLine" id="cb1-216" title="216">    <span class="fu">read(unit</span><span class="kw">=</span><span class="dv">11</span>, <span class="fu">fmt</span><span class="kw">=</span><span class="st">&quot;(3F10.2)&quot;</span><span class="fu">)</span> a, b, c</a>
<a class="sourceLine" id="cb1-217" title="217">    <span class="fu">close(</span><span class="dv">11</span><span class="fu">)</span></a>
<a class="sourceLine" id="cb1-218" title="218"></a>
<a class="sourceLine" id="cb1-219" title="219">    <span class="co">! To write a file.</span></a>
<a class="sourceLine" id="cb1-220" title="220">    <span class="fu">open(unit</span><span class="kw">=</span><span class="dv">12</span>, <span class="fu">file</span><span class="kw">=</span><span class="st">&quot;records.txt&quot;</span>, <span class="fu">status</span><span class="kw">=</span><span class="st">&quot;replace&quot;</span><span class="fu">)</span></a>
<a class="sourceLine" id="cb1-221" title="221">    <span class="fu">write(</span><span class="dv">12</span>, <span class="st">&quot;(F10.2,F10.2,F10.2)&quot;</span><span class="fu">)</span> c, b, a</a>
<a class="sourceLine" id="cb1-222" title="222">    <span class="fu">close(</span><span class="dv">12</span><span class="fu">)</span></a>
<a class="sourceLine" id="cb1-223" title="223"></a>
<a class="sourceLine" id="cb1-224" title="224">    <span class="co">! There are more features available than discussed here and alternative</span></a>
<a class="sourceLine" id="cb1-225" title="225">    <span class="co">! variants due to backwards compatibility with older Fortran versions.</span></a>
<a class="sourceLine" id="cb1-226" title="226"></a>
<a class="sourceLine" id="cb1-227" title="227"></a>
<a class="sourceLine" id="cb1-228" title="228">    <span class="co">! Built-in Functions</span></a>
<a class="sourceLine" id="cb1-229" title="229">    <span class="co">! ==================</span></a>
<a class="sourceLine" id="cb1-230" title="230"></a>
<a class="sourceLine" id="cb1-231" title="231">    <span class="co">! Fortran has around 200 functions/subroutines intrinsic to the language.</span></a>
<a class="sourceLine" id="cb1-232" title="232">    <span class="co">! Examples -</span></a>
<a class="sourceLine" id="cb1-233" title="233">    <span class="kw">call</span> cpu_time(v)    <span class="co">!sets &#39;v&#39; to a time in seconds.</span></a>
<a class="sourceLine" id="cb1-234" title="234">    k <span class="kw">=</span> <span class="bu">ior</span>(i,j)    <span class="co">!bitwise OR of 2 integers.</span></a>
<a class="sourceLine" id="cb1-235" title="235">    v <span class="kw">=</span> <span class="bu">log10</span>(x)    <span class="co">!log base 10.</span></a>
<a class="sourceLine" id="cb1-236" title="236">    i <span class="kw">=</span> <span class="bu">floor</span>(b)    <span class="co">!returns the closest integer less than or equal to x.</span></a>
<a class="sourceLine" id="cb1-237" title="237">    v <span class="kw">=</span> <span class="bu">aimag</span>(w)    <span class="co">!imaginary part of a complex number.</span></a>
<a class="sourceLine" id="cb1-238" title="238"></a>
<a class="sourceLine" id="cb1-239" title="239"></a>
<a class="sourceLine" id="cb1-240" title="240">    <span class="co">! Functions &amp; Subroutines</span></a>
<a class="sourceLine" id="cb1-241" title="241">    <span class="co">! =======================</span></a>
<a class="sourceLine" id="cb1-242" title="242"></a>
<a class="sourceLine" id="cb1-243" title="243">    <span class="co">! A subroutine runs some code on some input values and can cause</span></a>
<a class="sourceLine" id="cb1-244" title="244">    <span class="co">! side-effects or modify the input values.</span></a>
<a class="sourceLine" id="cb1-245" title="245"></a>
<a class="sourceLine" id="cb1-246" title="246">    <span class="kw">call</span> routine(a,c,v)    <span class="co">!subroutine call.</span></a>
<a class="sourceLine" id="cb1-247" title="247"></a>
<a class="sourceLine" id="cb1-248" title="248">    <span class="co">! A function takes a list of input parameters and returns a single value.</span></a>
<a class="sourceLine" id="cb1-249" title="249">    <span class="co">! However the input parameters may still be modified and side effects</span></a>
<a class="sourceLine" id="cb1-250" title="250">    <span class="co">! executed.</span></a>
<a class="sourceLine" id="cb1-251" title="251"></a>
<a class="sourceLine" id="cb1-252" title="252">    m <span class="kw">=</span> func(<span class="dv">3</span>,<span class="dv">2</span>,k)  <span class="co">!function call.</span></a>
<a class="sourceLine" id="cb1-253" title="253"></a>
<a class="sourceLine" id="cb1-254" title="254">    <span class="co">! Function calls can also be evoked within expressions.</span></a>
<a class="sourceLine" id="cb1-255" title="255">    <span class="fu">Print</span> <span class="kw">*</span>, func2(<span class="dv">3</span>,<span class="dv">2</span>,k)</a>
<a class="sourceLine" id="cb1-256" title="256"></a>
<a class="sourceLine" id="cb1-257" title="257">    <span class="co">! A pure function is a function that doesn&#39;t modify its input parameters</span></a>
<a class="sourceLine" id="cb1-258" title="258">    <span class="co">! or cause any side-effects.</span></a>
<a class="sourceLine" id="cb1-259" title="259">    m <span class="kw">=</span> func3(<span class="dv">3</span>,<span class="dv">2</span>,k)</a>
<a class="sourceLine" id="cb1-260" title="260"></a>
<a class="sourceLine" id="cb1-261" title="261"></a>
<a class="sourceLine" id="cb1-262" title="262"><span class="co">contains ! Zone for defining sub-programs internal to the program.</span></a>
<a class="sourceLine" id="cb1-263" title="263"></a>
<a class="sourceLine" id="cb1-264" title="264">    <span class="co">! Fortran has a couple of slightly different ways to define functions.</span></a>
<a class="sourceLine" id="cb1-265" title="265"></a>
<a class="sourceLine" id="cb1-266" title="266">    <span class="dt">integer</span> <span class="kw">function</span> func(a,b,c)    <span class="co">!a function returning an integer value.</span></a>
<a class="sourceLine" id="cb1-267" title="267">        <span class="kw">implicit</span> <span class="kw">none</span>   <span class="co">!best to use implicit none in function definitions too.</span></a>
<a class="sourceLine" id="cb1-268" title="268">        <span class="dt">integer</span> <span class="dt">::</span> a,b,c <span class="co">!type of input parameters defined inside the function.</span></a>
<a class="sourceLine" id="cb1-269" title="269">        <span class="kw">if</span> (a <span class="op">&gt;</span><span class="kw">=</span> <span class="dv">2</span>) <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-270" title="270">            func <span class="kw">=</span> a <span class="kw">+</span> b <span class="kw">+</span> c <span class="co">!the return variable defaults to the function name.</span></a>
<a class="sourceLine" id="cb1-271" title="271">            <span class="kw">return</span> <span class="co">!can return the current value from the function at any time.</span></a>
<a class="sourceLine" id="cb1-272" title="272">        <span class="kw">endif</span></a>
<a class="sourceLine" id="cb1-273" title="273">        func <span class="kw">=</span> a <span class="kw">+</span> c</a>
<a class="sourceLine" id="cb1-274" title="274">        <span class="co">! Don&#39;t need a return statement at the end of a function.</span></a>
<a class="sourceLine" id="cb1-275" title="275">    <span class="kw">end function</span> func</a>
<a class="sourceLine" id="cb1-276" title="276"></a>
<a class="sourceLine" id="cb1-277" title="277"></a>
<a class="sourceLine" id="cb1-278" title="278">    <span class="kw">function</span> func2(a,b,c) <span class="kw">result</span>(f)    <span class="co">!return variable declared to be &#39;f&#39;.</span></a>
<a class="sourceLine" id="cb1-279" title="279">        <span class="kw">implicit</span> <span class="kw">none</span></a>
<a class="sourceLine" id="cb1-280" title="280">        <span class="dt">integer</span>, <span class="dt">intent(in)</span> <span class="dt">::</span> a,b    <span class="co">!can declare and enforce that variables</span></a>
<a class="sourceLine" id="cb1-281" title="281">                                      <span class="co">!are not modified by the function.</span></a>
<a class="sourceLine" id="cb1-282" title="282">        <span class="dt">integer</span>, <span class="dt">intent(inout)</span> <span class="dt">::</span> c</a>
<a class="sourceLine" id="cb1-283" title="283">        <span class="dt">integer</span> <span class="dt">::</span> f     <span class="co">!function return type declared inside the function.</span></a>
<a class="sourceLine" id="cb1-284" title="284">        <span class="dt">integer</span> <span class="dt">::</span> cnt <span class="kw">=</span> <span class="dv">0</span>    <span class="co">!GOTCHA - initialisation implies variable is</span></a>
<a class="sourceLine" id="cb1-285" title="285">                              <span class="co">!saved between function calls.</span></a>
<a class="sourceLine" id="cb1-286" title="286">        f <span class="kw">=</span> a <span class="kw">+</span> b <span class="kw">-</span> c</a>
<a class="sourceLine" id="cb1-287" title="287">        c <span class="kw">=</span> <span class="dv">4</span>    <span class="co">!altering the value of an input variable.</span></a>
<a class="sourceLine" id="cb1-288" title="288">        cnt  <span class="kw">=</span> cnt <span class="kw">+</span> <span class="dv">1</span>    <span class="co">!count number of function calls.</span></a>
<a class="sourceLine" id="cb1-289" title="289">    <span class="kw">end function</span> func2</a>
<a class="sourceLine" id="cb1-290" title="290"></a>
<a class="sourceLine" id="cb1-291" title="291"></a>
<a class="sourceLine" id="cb1-292" title="292">    <span class="kw">pure</span> <span class="kw">function</span> func3(a,b,c)  <span class="co">!a pure function can have no side-effects.</span></a>
<a class="sourceLine" id="cb1-293" title="293">        <span class="kw">implicit</span> <span class="kw">none</span></a>
<a class="sourceLine" id="cb1-294" title="294">        <span class="dt">integer</span>, <span class="dt">intent(in)</span> <span class="dt">::</span> a,b,c</a>
<a class="sourceLine" id="cb1-295" title="295">        <span class="dt">integer</span> <span class="dt">::</span> func3</a>
<a class="sourceLine" id="cb1-296" title="296">        func3 <span class="kw">=</span> a<span class="kw">*</span>b<span class="kw">*</span>c</a>
<a class="sourceLine" id="cb1-297" title="297">    <span class="kw">end function</span> func3</a>
<a class="sourceLine" id="cb1-298" title="298"></a>
<a class="sourceLine" id="cb1-299" title="299"></a>
<a class="sourceLine" id="cb1-300" title="300">    <span class="kw">subroutine</span> routine(d,e,f)</a>
<a class="sourceLine" id="cb1-301" title="301">        <span class="kw">implicit</span> <span class="kw">none</span></a>
<a class="sourceLine" id="cb1-302" title="302"><span class="dt">        real</span>, <span class="dt">intent(inout)</span> <span class="dt">::</span> f</a>
<a class="sourceLine" id="cb1-303" title="303"><span class="dt">        real</span>, <span class="dt">intent(in)</span> <span class="dt">::</span> d,e</a>
<a class="sourceLine" id="cb1-304" title="304">        f <span class="kw">=</span> <span class="dv">2</span><span class="kw">*</span>d <span class="kw">+</span> <span class="dv">3</span><span class="kw">*</span>e <span class="kw">+</span> f</a>
<a class="sourceLine" id="cb1-305" title="305">    <span class="kw">end subroutine</span> routine</a>
<a class="sourceLine" id="cb1-306" title="306"></a>
<a class="sourceLine" id="cb1-307" title="307"></a>
<a class="sourceLine" id="cb1-308" title="308"><span class="kw">end program</span> example   <span class="co">! End of Program Definition -----------------------</span></a>
<a class="sourceLine" id="cb1-309" title="309"></a>
<a class="sourceLine" id="cb1-310" title="310"></a>
<a class="sourceLine" id="cb1-311" title="311"><span class="co">! Functions and Subroutines declared externally to the program listing need</span></a>
<a class="sourceLine" id="cb1-312" title="312"><span class="co">! to be declared to the program using an Interface declaration (even if they</span></a>
<a class="sourceLine" id="cb1-313" title="313"><span class="co">! are in the same source file!) (see below). It is easier to define them within</span></a>
<a class="sourceLine" id="cb1-314" title="314"><span class="co">! the &#39;contains&#39; section of a module or program.</span></a>
<a class="sourceLine" id="cb1-315" title="315"></a>
<a class="sourceLine" id="cb1-316" title="316"><span class="kw">elemental</span> <span class="bu">real</span> <span class="kw">function</span> func4(a) <span class="kw">result</span>(res)</a>
<a class="sourceLine" id="cb1-317" title="317"><span class="co">! An elemental function is a Pure function that takes a scalar input variable</span></a>
<a class="sourceLine" id="cb1-318" title="318"><span class="co">! but can also be used on an array where it will be separately applied to all</span></a>
<a class="sourceLine" id="cb1-319" title="319"><span class="co">! of the elements of an array and return a new array.</span></a>
<a class="sourceLine" id="cb1-320" title="320"><span class="dt">    real</span>, <span class="dt">intent(in)</span> <span class="dt">::</span> a</a>
<a class="sourceLine" id="cb1-321" title="321">    res <span class="kw">=</span> a<span class="kw">**</span><span class="dv">2</span> <span class="kw">+</span> <span class="fl">1.0</span></a>
<a class="sourceLine" id="cb1-322" title="322"><span class="kw">end function</span> func4</a>
<a class="sourceLine" id="cb1-323" title="323"></a>
<a class="sourceLine" id="cb1-324" title="324"></a>
<a class="sourceLine" id="cb1-325" title="325"><span class="co">! Modules</span></a>
<a class="sourceLine" id="cb1-326" title="326"><span class="co">! =======</span></a>
<a class="sourceLine" id="cb1-327" title="327"></a>
<a class="sourceLine" id="cb1-328" title="328"><span class="co">! A module is a useful way to collect related declarations, functions and</span></a>
<a class="sourceLine" id="cb1-329" title="329"><span class="co">! subroutines together for reusability.</span></a>
<a class="sourceLine" id="cb1-330" title="330"></a>
<a class="sourceLine" id="cb1-331" title="331"><span class="kw">module</span> fruit</a>
<a class="sourceLine" id="cb1-332" title="332"><span class="dt">    real</span> <span class="dt">::</span> apple</a>
<a class="sourceLine" id="cb1-333" title="333"><span class="dt">    real</span> <span class="dt">::</span> pear</a>
<a class="sourceLine" id="cb1-334" title="334"><span class="dt">    real</span> <span class="dt">::</span> orange</a>
<a class="sourceLine" id="cb1-335" title="335"><span class="kw">end module</span> fruit</a>
<a class="sourceLine" id="cb1-336" title="336"></a>
<a class="sourceLine" id="cb1-337" title="337"></a>
<a class="sourceLine" id="cb1-338" title="338"><span class="kw">module</span> fruity</a>
<a class="sourceLine" id="cb1-339" title="339">    <span class="co">! Declarations must be in the order: modules, interfaces, variables.</span></a>
<a class="sourceLine" id="cb1-340" title="340">    <span class="co">! (can declare modules and interfaces in programs too).</span></a>
<a class="sourceLine" id="cb1-341" title="341"></a>
<a class="sourceLine" id="cb1-342" title="342">    <span class="kw">use</span> fruit, <span class="kw">only</span>: apple, pear    <span class="co">! use apple and pear from fruit module.</span></a>
<a class="sourceLine" id="cb1-343" title="343">    <span class="kw">implicit</span> <span class="kw">none</span>    <span class="co">!comes after module imports.</span></a>
<a class="sourceLine" id="cb1-344" title="344"></a>
<a class="sourceLine" id="cb1-345" title="345">    <span class="dt">private</span>    <span class="co">!make things private to the module (default is public).</span></a>
<a class="sourceLine" id="cb1-346" title="346">    <span class="co">! Declare some variables/functions explicitly public.</span></a>
<a class="sourceLine" id="cb1-347" title="347">    <span class="dt">public</span> <span class="dt">::</span> apple,mycar,create_mycar</a>
<a class="sourceLine" id="cb1-348" title="348">    <span class="co">! Declare some variables/functions private to the module (redundant here).</span></a>
<a class="sourceLine" id="cb1-349" title="349">    <span class="dt">private</span> <span class="dt">::</span> func4</a>
<a class="sourceLine" id="cb1-350" title="350"></a>
<a class="sourceLine" id="cb1-351" title="351">    <span class="co">! Interfaces</span></a>
<a class="sourceLine" id="cb1-352" title="352">    <span class="co">! ==========</span></a>
<a class="sourceLine" id="cb1-353" title="353">    <span class="co">! Explicitly declare an external function/procedure within the module</span></a>
<a class="sourceLine" id="cb1-354" title="354">    <span class="co">! (better in general to put functions/procedures in the &#39;contains&#39; section).</span></a>
<a class="sourceLine" id="cb1-355" title="355">    <span class="kw">interface</span></a>
<a class="sourceLine" id="cb1-356" title="356">        <span class="kw">elemental</span> <span class="bu">real</span> <span class="kw">function</span> func4(a) <span class="kw">result</span>(res)</a>
<a class="sourceLine" id="cb1-357" title="357"><span class="dt">            real</span>, <span class="dt">intent(in)</span> <span class="dt">::</span> a</a>
<a class="sourceLine" id="cb1-358" title="358">        <span class="kw">end function</span> func4</a>
<a class="sourceLine" id="cb1-359" title="359">    <span class="kw">end interface</span></a>
<a class="sourceLine" id="cb1-360" title="360"></a>
<a class="sourceLine" id="cb1-361" title="361">    <span class="co">! Overloaded functions can be defined using named interfaces.</span></a>
<a class="sourceLine" id="cb1-362" title="362">    <span class="kw">interface</span> myabs</a>
<a class="sourceLine" id="cb1-363" title="363">        <span class="co">! Can use &#39;module procedure&#39; keyword to include functions already</span></a>
<a class="sourceLine" id="cb1-364" title="364">        <span class="co">! defined within the module.</span></a>
<a class="sourceLine" id="cb1-365" title="365">        <span class="kw">module procedure</span> real_abs, complex_abs</a>
<a class="sourceLine" id="cb1-366" title="366">    <span class="kw">end interface</span></a>
<a class="sourceLine" id="cb1-367" title="367"></a>
<a class="sourceLine" id="cb1-368" title="368">    <span class="co">! Derived Data Types</span></a>
<a class="sourceLine" id="cb1-369" title="369">    <span class="co">! ==================</span></a>
<a class="sourceLine" id="cb1-370" title="370">    <span class="co">! Can create custom structured data collections.</span></a>
<a class="sourceLine" id="cb1-371" title="371">    <span class="dt">type</span> car</a>
<a class="sourceLine" id="cb1-372" title="372">        <span class="dt">character (len=100)</span> <span class="dt">::</span> model</a>
<a class="sourceLine" id="cb1-373" title="373"><span class="dt">        real</span> <span class="dt">::</span> weight    <span class="co">!(kg)</span></a>
<a class="sourceLine" id="cb1-374" title="374"><span class="dt">        real</span> <span class="dt">::</span> dimensions(<span class="dv">3</span>)    <span class="co">!i.e. length-width-height (metres).</span></a>
<a class="sourceLine" id="cb1-375" title="375">        <span class="dt">character</span> <span class="dt">::</span> colour</a>
<a class="sourceLine" id="cb1-376" title="376">    <span class="dt">end type</span> car</a>
<a class="sourceLine" id="cb1-377" title="377"></a>
<a class="sourceLine" id="cb1-378" title="378">    <span class="dt">type(car)</span> <span class="dt">::</span> mycar    <span class="co">!declare a variable of your custom type.</span></a>
<a class="sourceLine" id="cb1-379" title="379">    <span class="co">! See create_mycar() routine for usage.</span></a>
<a class="sourceLine" id="cb1-380" title="380"></a>
<a class="sourceLine" id="cb1-381" title="381">    <span class="co">! Note: There are no executable statements in modules.</span></a>
<a class="sourceLine" id="cb1-382" title="382"></a>
<a class="sourceLine" id="cb1-383" title="383"><span class="co">contains</span></a>
<a class="sourceLine" id="cb1-384" title="384"></a>
<a class="sourceLine" id="cb1-385" title="385">    <span class="kw">subroutine</span> create_mycar(mycar)</a>
<a class="sourceLine" id="cb1-386" title="386">        <span class="co">! Demonstrates usage of a derived data type.</span></a>
<a class="sourceLine" id="cb1-387" title="387">        <span class="kw">implicit</span> <span class="kw">none</span></a>
<a class="sourceLine" id="cb1-388" title="388">        <span class="dt">type(car)</span>,<span class="dt">intent(out)</span> <span class="dt">::</span> mycar</a>
<a class="sourceLine" id="cb1-389" title="389"></a>
<a class="sourceLine" id="cb1-390" title="390">        <span class="co">! Access type elements using &#39;%&#39; operator.</span></a>
<a class="sourceLine" id="cb1-391" title="391">        mycar%model <span class="kw">=</span> <span class="st">&quot;Ford Prefect&quot;</span></a>
<a class="sourceLine" id="cb1-392" title="392">        mycar%colour <span class="kw">=</span> <span class="st">&#39;r&#39;</span></a>
<a class="sourceLine" id="cb1-393" title="393">        mycar%weight <span class="kw">=</span> <span class="dv">1400</span></a>
<a class="sourceLine" id="cb1-394" title="394">        mycar%dimensions(<span class="dv">1</span>) <span class="kw">=</span> <span class="fl">5.0</span>    <span class="co">!default indexing starts from 1!</span></a>
<a class="sourceLine" id="cb1-395" title="395">        mycar%dimensions(<span class="dv">2</span>) <span class="kw">=</span> <span class="fl">3.0</span></a>
<a class="sourceLine" id="cb1-396" title="396">        mycar%dimensions(<span class="dv">3</span>) <span class="kw">=</span> <span class="fl">1.5</span></a>
<a class="sourceLine" id="cb1-397" title="397"></a>
<a class="sourceLine" id="cb1-398" title="398">    <span class="kw">end subroutine</span></a>
<a class="sourceLine" id="cb1-399" title="399"></a>
<a class="sourceLine" id="cb1-400" title="400"><span class="dt">    real</span> <span class="kw">function</span> real_abs(x)</a>
<a class="sourceLine" id="cb1-401" title="401"><span class="dt">        real</span> <span class="dt">::</span> x</a>
<a class="sourceLine" id="cb1-402" title="402">        <span class="kw">if</span> (x<span class="op">&lt;</span><span class="dv">0</span>) <span class="kw">then</span></a>
<a class="sourceLine" id="cb1-403" title="403">            real_abs <span class="kw">=</span> <span class="kw">-</span>x</a>
<a class="sourceLine" id="cb1-404" title="404">        <span class="kw">else</span></a>
<a class="sourceLine" id="cb1-405" title="405">            real_abs <span class="kw">=</span> x</a>
<a class="sourceLine" id="cb1-406" title="406">        <span class="kw">end if</span></a>
<a class="sourceLine" id="cb1-407" title="407">    <span class="kw">end function</span> real_abs</a>
<a class="sourceLine" id="cb1-408" title="408"></a>
<a class="sourceLine" id="cb1-409" title="409"><span class="dt">    real</span> <span class="kw">function</span> complex_abs(z)</a>
<a class="sourceLine" id="cb1-410" title="410">        <span class="dt">complex</span> <span class="dt">::</span> z</a>
<a class="sourceLine" id="cb1-411" title="411">        <span class="co">! long lines can be continued using the continuation character &#39;&amp;&#39;</span></a>
<a class="sourceLine" id="cb1-412" title="412">        complex_abs <span class="kw">=</span> <span class="bu">sqrt</span>(<span class="bu">real</span>(z)<span class="kw">**</span><span class="dv">2</span> <span class="kw">+</span> <span class="kw">&amp;</span></a>
<a class="sourceLine" id="cb1-413" title="413">                                         <span class="bu">aimag</span>(z)<span class="kw">**</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb1-414" title="414">    <span class="kw">end function</span> complex_abs</a>
<a class="sourceLine" id="cb1-415" title="415"></a>
<a class="sourceLine" id="cb1-416" title="416"></a>
<a class="sourceLine" id="cb1-417" title="417"><span class="kw">end module</span> fruity</a></code></pre></div>
<h3 id="more-resources">More Resources</h3>
<p>For more information on Fortran:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Fortran">wikipedia</a></li>
<li><a href="https://en.wikipedia.org/wiki/Fortran_95_language_features">Fortran_95_language_features</a></li>
<li><a href="http://fortranwiki.org">fortranwiki.org</a></li>
<li><a href="http://www.fortran90.org">www.fortran90.org/</a></li>
<li><a href="http://www.dmoz.org/Computers/Programming/Languages/Fortran/FAQs%2C_Help%2C_and_Tutorials/Fortran_90_and_95/">list of Fortran 95 tutorials</a></li>
<li><a href="https://en.wikibooks.org/wiki/Fortran">Fortran wikibook</a></li>
<li><a href="http://www.fortranplus.co.uk/resources/fortran_resources.pdf">Fortran resources</a></li>
<li><a href="http://www.cs.rpi.edu/~szymansk/OOF90/bugs.html">Mistakes in Fortran 90 Programs That Might Surprise You</a></li>
</ul>
</body>
</html>
